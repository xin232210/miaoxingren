{"version":3,"sources":["assets/scripts/ActBuffPanel.js"],"names":["cc","Class","Component","properties","buffIconList","Sprite","buffTipPanel","Node","buffDescLabel","RichText","onLoad","enabled","onHideActBuffPanel","node","active","onHideActBuffTip","initActBuffInfo","ActLevelData","pvz","PlayerData","getActLevelData","ActLevelBuffJson","JsonControl","e","t","buffList","getRandomBuff","updateActLevelBuff","o","getActBuffJson","utils","setSpriteFrame","icon","length","a","id","push","math","randomRangeInt","onClickBuff","parseInt","curBuffIndex","n","string","desc","position","v2","parent","x","y"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        buffIconList: [cc.Sprite],\n        buffTipPanel: cc.Node,\n        buffDescLabel: cc.RichText\n    },\n    onLoad: function () {\n        this.buffDescLabel.enabled = !1;\n    },\n    onHideActBuffPanel: function () {\n        this.node.active = !1;\n    },\n    onHideActBuffTip: function () {\n        this.buffTipPanel.active = !1;\n    },\n    initActBuffInfo: function () {\n        this.buffTipPanel.active = !1;\n        this.ActLevelData = cc.pvz.PlayerData.getActLevelData();\n        this.ActLevelBuffJson = cc.JsonControl.ActLevelBuffJson;\n        for (var e = 0; e < 2; e++) {\n            var t = this.ActLevelData.buffList[e];\n            if (-1 == t) {\n                t = this.getRandomBuff(0 == e);\n                cc.pvz.PlayerData.updateActLevelBuff(e + 1, t);\n            }\n            var o = cc.JsonControl.getActBuffJson(t);\n            cc.pvz.utils.setSpriteFrame(this.buffIconList[e], \"uiImage\", \"tiaozhan/buff\" + o.icon);\n        }\n    },\n    getRandomBuff: function (e) {\n        if (void 0 === e) {\n            e = !0;\n        }\n        var t = [];\n        for (var o = 0; o < this.ActLevelBuffJson.length; o++) {\n            var a = this.ActLevelBuffJson[o];\n            if (e) {\n                if (a.id < 100) {\n                    t.push(a.id);\n                }\n            } else {\n                if (a.id > 100) {\n                    t.push(a.id);\n                }\n            }\n        }\n        return t[cc.math.randomRangeInt(0, t.length)];\n    },\n    onClickBuff: function (e, t) {\n        var o = parseInt(t);\n        if (o != this.curBuffIndex) {\n            this.curBuffIndex = o;\n            var a = this.ActLevelData.buffList[o - 1];\n            var n = cc.JsonControl.getActBuffJson(a);\n            this.buffTipPanel.active = !0;\n            this.buffDescLabel.string = n.desc;\n            this.buffDescLabel.enabled = !0;\n            this.buffTipPanel.position = cc.v2(\n                this.buffIconList[o - 1].node.parent.position.x,\n                this.buffTipPanel.position.y\n            );\n        } else {\n            this.buffTipPanel.active = !this.buffTipPanel.active;\n        }\n    }\n});\n"]}