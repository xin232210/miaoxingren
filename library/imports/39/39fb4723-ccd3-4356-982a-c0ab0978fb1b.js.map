{"version":3,"sources":["assets/game/scripts/UIGameEnd.js"],"names":["cc","Class","Component","properties","waveLabel","Label","levelLabel","bgNodes","Node","batterWaveTip","bgSpine","sp","Skeleton","tiSpine","baseItemNode","rewardParent","infoPanel","sweepTip","actGameTip","btnPanel","adBtn","initBy","t","e","i","scene","isInGame","isLookAd","active","node","setAnimation","isSucc","pvz","utils","spineFromTo","onGameSpineEnd","string","runtimeData","level","wave","PlayerData","getStageLevel","updateStageLevel","getMaxLevelWave","updateMaxLevelWave","mode","addMissionProgress","GameConfig","MissionType","TAUtils","trackAdUIShow","AdType","saveDataToLocalOnline","stageLevel","JsonControl","getLevelData","initRewardData","reward","butler","resumeDirector","initInGameReward","Math","max","maxWave","hub","levelData","n","getBuffValue","o","floor","length","s","c","a","r","h","getRewardItem","push","rewardData","d","u","itemId","onCheckRandomTool","p","fadeInBtn","getComponent","initRewardItem","l","f","instantiate","parent","m","setTimeout","onSaveLogic","v","console","log","children","onSaveReward","onClickAd","AdUtils","showAdRewardVideo","onAdClose","onShowDoubleReward","onGetDoubleReward","popupManager","removePopup","popup","ad","scale","UIFromType","onClickClose","count","onClickShare","showToast","playEffectAsync","removeAllPopups","init","director","loadScene","trackBackpack","removeData","MainControl","updateItemInfo","RedControl","refreshAllRedTip"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        waveLabel: cc.Label,\n        levelLabel: cc.Label,\n        bgNodes: [cc.Node],\n        batterWaveTip: cc.Node,\n        bgSpine: sp.Skeleton,\n        tiSpine: sp.Skeleton,\n        baseItemNode: cc.Node,\n        rewardParent: cc.Node,\n        infoPanel: cc.Node,\n        sweepTip: cc.Node,\n        actGameTip: cc.Node,\n        btnPanel: cc.Node,\n        adBtn: cc.Node\n    },\n    initBy: function (t, e) {\n        var i = this;\n        if (void 0 === e) {\n            e = !0;\n        }\n        this.scene = t;\n        this.isInGame = e;\n        this.isLookAd = !1;\n        this.rewardParent.active = !1;\n        this.btnPanel.active = !1;\n        this.infoPanel.active = !1;\n        this.actGameTip.active = !1;\n        this.levelLabel.node.active = !1;\n        this.sweepTip.active = !1;\n        this.bgNodes[0].active = !1;\n        this.bgNodes[1].active = !1;\n        if (this.isInGame) {\n            this.bgSpine.setAnimation(0, \"\", !1);\n            if (this.scene.isSucc) {\n                cc.pvz.utils.spineFromTo(this.bgSpine, \"shengli1_2\", \"shengli2_2\"),\n                    cc.pvz.utils.spineFromTo(this.tiSpine, \"shengli1_1\", \"shengli2_1\", !0, function () {\n                        i.onGameSpineEnd();\n                    });\n            } else {\n                cc.pvz.utils.spineFromTo(this.bgSpine, \"shibai1_2\", \"shibai2_2\"),\n                    cc.pvz.utils.spineFromTo(this.tiSpine, \"shibai1_1\", \"shibai2_1\", !0, function () {\n                        i.onGameSpineEnd();\n                    });\n            }\n            this.levelLabel.string = \"\" + cc.pvz.runtimeData.level;\n            this.waveLabel.string = cc.pvz.runtimeData.wave;\n            cc.pvz.runtimeData.level == cc.pvz.PlayerData.getStageLevel() &&\n                this.scene.isSucc &&\n                cc.pvz.PlayerData.updateStageLevel(1);\n            if (\n                cc.pvz.runtimeData.level == cc.pvz.PlayerData.getStageLevel() &&\n                cc.pvz.runtimeData.wave > cc.pvz.PlayerData.getMaxLevelWave()\n            ) {\n                (this.batterWaveTip.active = !0), cc.pvz.PlayerData.updateMaxLevelWave(cc.pvz.runtimeData.wave);\n            } else {\n                this.batterWaveTip.active = !1;\n            }\n            this.scene.isSucc &&\n                (0 == cc.pvz.runtimeData.mode\n                    ? cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"通关主线副本n次\"], 1)\n                    : cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"通关挑战关卡n次\"], 1));\n            cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"关卡结算\"]);\n            cc.pvz.PlayerData.getStageLevel() > 1 && cc.pvz.PlayerData.saveDataToLocalOnline();\n        } else {\n            this.levelLabel.string = \"\" + this.scene.stageLevel;\n            cc.pvz.utils.spineFromTo(this.bgSpine, \"shengli1_2\", \"shengli2_2\");\n            cc.pvz.utils.spineFromTo(this.tiSpine, \"shengli1_1\", \"shengli2_1\", !0, function () {\n                i.levelLabel.node.active = !0;\n                i.sweepTip.active = !0;\n                i.bgNodes[0].active = !0;\n                var t = cc.JsonControl.getLevelData(i.scene.stageLevel);\n                i.initRewardData(t.reward, 1);\n            });\n        }\n        if (this.isInGame) {\n            cc.butler.resumeDirector(1);\n        }\n    },\n    onGameSpineEnd: function () {\n        this.infoPanel.active = !0;\n        this.levelLabel.node.active = 0 == cc.pvz.runtimeData.mode;\n        this.actGameTip.active = 0 != cc.pvz.runtimeData.mode;\n        this.bgNodes[this.scene.isSucc ? 0 : 1].active = !0;\n        this.initInGameReward();\n    },\n    initInGameReward: function () {\n        var t;\n        if (this.scene.isSucc) {\n            t = 1;\n        } else {\n            t = Math.max(1, cc.pvz.runtimeData.wave) / this.scene.maxWave;\n        }\n        var e = this.scene.hub.levelData;\n        switch (cc.pvz.runtimeData.mode) {\n            case 0:\n                this.adBtn.active = !0;\n                this.initRewardData(e.reward, t);\n                break;\n            case 1:\n                this.adBtn.active = !1;\n                this.initRewardData(e.reward, t);\n        }\n    },\n    initRewardData: function (t, e) {\n        var i = this;\n        var n = e;\n        if (this.isInGame && 0 == cc.pvz.runtimeData.mode) {\n            n *= 1 + 0.01 * cc.pvz.runtimeData.getBuffValue(7);\n        }\n        var o = Math.floor(t.length / 2);\n        var s = 0;\n        var c = [];\n        for (var a = 0; a < o; a++) {\n            var r = Math.floor(n * t[s + 1]);\n            var h = cc.pvz.utils.getRewardItem(t[s], r);\n            c.push(h);\n            s += 2;\n        }\n        this.rewardData = [];\n        for (var d = 0; d < c.length; d++) {\n            var u = c[d];\n            if (u.itemId >= 5 && u.itemId <= 7) {\n                cc.pvz.utils.onCheckRandomTool(u, this.rewardData);\n            } else {\n                this.rewardData.push(u);\n            }\n        }\n        this.rewardParent.active = !0;\n        var p = this.rewardData.length;\n        this.baseItemNode.active = !0;\n        if (this.isInGame) {\n            //\n        } else {\n            cc.pvz.utils.fadeInBtn(this.baseItemNode);\n        }\n        this.baseItemNode.getComponent(\"RewardItem\").initRewardItem(this.rewardData[0], !0);\n        if (this.isInGame) {\n            for (var l = 1; l < p; l++) {\n                var f = cc.instantiate(this.baseItemNode);\n                f.parent = this.rewardParent;\n                cc.pvz.utils.fadeInBtn(f);\n                f.getComponent(\"RewardItem\").initRewardItem(this.rewardData[l], !0);\n            }\n            this.btnPanel.active = !0;\n        } else {\n            var m = function (t) {\n                setTimeout(function () {\n                    var e = cc.instantiate(i.baseItemNode);\n                    e.parent = i.rewardParent;\n                    cc.pvz.utils.fadeInBtn(e);\n                    e.getComponent(\"RewardItem\").initRewardItem(i.rewardData[t], !1);\n                    if (t == p - 1) {\n                        i.onSaveLogic();\n                        cc.pvz.utils.fadeInBtn(i.btnPanel);\n                    }\n                }, 40 * (t - 1) + 120);\n            };\n            for (var v = 1; v < p; v++) {\n                m(v);\n            }\n        }\n    },\n    onSaveLogic: function () {\n        console.log(\" save \");\n        for (var t = 1; t < this.rewardData.length; t++) {\n            this.rewardParent.children[t].getComponent(\"RewardItem\").onSaveReward();\n        }\n    },\n    onClickAd: function () {\n        var t = this;\n        if (this.isLookAd) {\n            //\n        } else {\n            this.isLookAd = !0;\n            cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"关卡结算\"], function (e) {\n                t.onAdClose(e);\n            });\n        }\n    },\n    onAdClose: function (t) {\n        this.isLookAd = !1;\n        if (t) {\n            this.onShowDoubleReward();\n        }\n    },\n    onShowDoubleReward: function () {\n        var t = this;\n        this.onGetDoubleReward();\n        cc.popupManager.removePopup(this);\n        cc.popupManager.popup(\n            \"mainUI\",\n            \"getrewardUI\",\n            \"UIReward\",\n            {\n                ad: !1,\n                scale: !1\n            },\n            this.rewardData,\n            cc.pvz.GameConfig.UIFromType[\"双倍结算\"],\n            function () {\n                t.onClickClose();\n            }\n        );\n    },\n    onGetDoubleReward: function () {\n        for (var t = 0; t < this.rewardData.length; t++) {\n            this.rewardParent.children[t].getComponent(\"RewardItem\").onSaveReward();\n            this.rewardData[t].count *= 2;\n        }\n    },\n    onClickShare: function () {\n        if (this.isLookAd) {\n            //\n        } else {\n            cc.popupManager.showToast(\"分享成功了哟！\");\n            this.onShowDoubleReward();\n        }\n    },\n    onClickClose: function () {\n        if (this.isLookAd) {\n            //\n        } else {\n            cc.butler.playEffectAsync(\"game\", \"sound/getCoin\");\n            if (this.isInGame) {\n                cc.popupManager.removeAllPopups(),\n                    1 == cc.pvz.PlayerData.getStageLevel()\n                        ? (cc.pvz.runtimeData.init(0, 1),\n                          cc.director.loadScene(\"game1\"),\n                          cc.pvz.TAUtils.trackBackpack(1))\n                        : (cc.pvz.runtimeData.removeData(), cc.director.loadScene(\"mainUI\"));\n            } else {\n                cc.popupManager.removePopup(this), cc.MainControl.updateItemInfo(), cc.RedControl.refreshAllRedTip();\n            }\n        }\n    }\n});\n"]}