{"version":3,"sources":["assets/mainUI/scripts/LevelPlayer.js"],"names":["cc","Class","Component","properties","heroSpines","sp","Skeleton","enemySpines","initHeroShow","e","t","pvz","PlayerData","getStageLevel","i","Array","fill","o","GameConfig","MaxToolCount","a","ToolLockLevel","c","player","toolData","pos","s","node","active","utils","useBundleAsset","SkeletonData","skeletonData","getToolData","lv","getLevelInterval","setAnimation","n","length","initEnemyShow","JsonControl","getLevelJson","enemy","onTouchEnemy","parseInt","animation","setCompleteListener"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        heroSpines: [sp.Skeleton],\n        enemySpines: [sp.Skeleton]\n    },\n    initHeroShow: function () {\n        var e = this;\n        var t = cc.pvz.PlayerData.getStageLevel();\n        var i = new Array(8).fill(-1);\n        for (var o = 0; o < cc.pvz.GameConfig.MaxToolCount; o++) {\n            var a = o + 1;\n            if (cc.pvz.GameConfig.ToolLockLevel[o] < t) {\n                var c = cc.player.toolData[a].pos;\n                if (-1 != c) {\n                    i[c] = a;\n                }\n            }\n        }\n        var s = function (t) {\n            if (-1 != i[t]) {\n                var o = i[t];\n                e.heroSpines[t].node.active = !0;\n                cc.pvz.utils.useBundleAsset(\"actors\", \"character/Characters\", sp.SkeletonData, function (o) {\n                    e.heroSpines[t].skeletonData = o;\n                    var a = cc.pvz.PlayerData.getToolData(i[t]).lv;\n                    var c = cc.pvz.utils.getLevelInterval(a);\n                    e.heroSpines[t].setAnimation(0, \"Idle\", !0);\n                });\n            } else {\n                e.heroSpines[t].node.active = !1;\n            }\n        };\n        for (var n = 0; n < this.heroSpines.length; n++) {\n            s(n);\n        }\n    },\n    initEnemyShow: function (e) {\n        var t = this;\n        var i = cc.JsonControl.getLevelJson(e).enemy;\n        var o = function (e) {\n            var o = i[e];\n            t.enemySpines[e].node.active = !0;\n            cc.pvz.utils.useBundleAsset(\"actors\", \"Zombie/e\" + o, sp.SkeletonData, function (i) {\n                t.enemySpines[e].skeletonData = i;\n                t.enemySpines[e].setAnimation(0, \"Idle\", !0);\n            });\n        };\n        for (var a = 0; a < i.length; a++) {\n            o(a);\n        }\n    },\n    onTouchEnemy: function (e, t) {\n        var i = parseInt(t);\n        var o = this.enemySpines[i];\n        if (o && \"Idle\" == o.animation) {\n            o.setAnimation(0, \"Hit\", !1);\n            o.setCompleteListener(function () {\n                o.setAnimation(0, \"Idle\", !0);\n                o.setCompleteListener(null);\n            });\n        }\n    }\n});"]}