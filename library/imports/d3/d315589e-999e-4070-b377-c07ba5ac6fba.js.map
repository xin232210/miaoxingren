{"version":3,"sources":["assets/game/scripts/BlockRoot.js"],"names":["$prefabInfo","require","$block","cc","Class","Component","properties","ui1","Node","ui2","itemRootNode","blockPrefab","extendModeBg","boardsRoot","boardItemBgsRoot","boardItemsRoot","blockSpfs","SpriteFrame","stashEnable","stashRoot","stashBlock","stashRectNode","onLoad","itemRoot","getComponent","onEvents","node","on","EventType","TOUCH_START","onClickBegan","TOUCH_MOVE","onClickMoved","TOUCH_END","onClickEnded","TOUCH_CANCEL","offEvents","off","startLogic","t","datas","Array","fill","pvz","runtimeData","blocks","forEach","e","actBuff2","poses","children","map","i","push","parent","n","setRoot","toPutArr","createBlocks","items","bs","scene","newEquipItem","lv","id","setBgSpParent","setExtendMode","backFromGame","setPreview","item","hideUnderBuffEffect","guide","dragBoard","clickedItem","isExtendMode","onBoardClickBegan","convertToNodeSpaceAR","getLocation","Math","floor","x","y","pickupFromBoard","guideManager","onStepFinished","onBoardClickMoved","getDelta","onBoardClickEnded","o","dragBoardMoved","Vec2","ZERO","active","myBlocks","some","position","add","addSelf","getBlocksToPut","s","v2","c","a","sort","onStashClickBegan","onStashClickMoved","onStashClickEnded","findPosForBlock","xys","every","testCantPlace","v","findBlockForItem","r","testItem","h","d","getCrossItems","showUnderBuffEffect","testBlock","hasTryPlace","debug","warn","length","console","log","getBlockPos","createBlock","addNode","resetBlocksPreview","updateLv5Effect","resetPosesPreview","tryPlace","findIndex","undoTryPlace","splice","onClickPlaceEnd","removeFromBlock","putdown","convertToWorldSpaceAR","setCanDrag","Set","isFull"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $prefabInfo = require(\"../../scripts/PrefabInfo\");\nvar $block = require(\"./Block\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        ui1: cc.Node,\n        ui2: cc.Node,\n        itemRootNode: cc.Node,\n        blockPrefab: $prefabInfo,\n        extendModeBg: cc.Node,\n        boardsRoot: cc.Node,\n        boardItemBgsRoot: cc.Node,\n        boardItemsRoot: cc.Node,\n        blockSpfs: [cc.SpriteFrame],\n        stashEnable: !0,\n        stashRoot: cc.Node,\n        stashBlock: $block,\n        stashRectNode: cc.Node\n    },\n    onLoad: function () {\n        this.itemRoot = this.itemRootNode.getComponent(\"ItemRoot\");\n    },\n    onEvents: function () {\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onClickBegan, this);\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onClickMoved, this);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onClickEnded, this);\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onClickEnded, this);\n    },\n    offEvents: function () {\n        this.node.off(cc.Node.EventType.TOUCH_START, this.onClickBegan, this);\n        this.node.off(cc.Node.EventType.TOUCH_MOVE, this.onClickMoved, this);\n        this.node.off(cc.Node.EventType.TOUCH_END, this.onClickEnded, this);\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onClickEnded, this);\n    },\n    startLogic: function () {\n        var t = this;\n        this.datas = new Array(35).fill(-1);\n        cc.pvz.runtimeData.blocks.forEach(function (e) {\n            t.datas[e] = 0;\n        });\n        if (113 == cc.pvz.runtimeData.actBuff2) {\n            [0, 1, 3, 4, 5, 9, 25, 29, 30, 31, 33, 34].forEach(function (e) {\n                t.datas[e] = 1;\n            });\n        }\n        this.blocks = new Array(35).fill(null);\n        this.poses = [];\n        this.extendModeBg.children\n            .map(function (t) {\n                return t;\n            })\n            .forEach(function (e, i) {\n                if (1 == t.datas[i]) {\n                    t.poses.push(null);\n                    return void (e.parent = null);\n                }\n                var n = e.getComponent(\"Pos\");\n                n.setRoot(t);\n                n.i = i;\n                t.poses.push(n);\n            });\n        this.toPutArr = [];\n        this.createBlocks();\n        cc.pvz.runtimeData.items.forEach(function (e) {\n            var i = e.bs.map(function (e) {\n                return t.blocks[e];\n            });\n            var n = t.scene.newEquipItem(e.lv, e.id, i);\n            n.node.parent = t.boardItemsRoot;\n            n.setBgSpParent(!1);\n        });\n        this.setExtendMode(!1);\n        this.onEvents();\n    },\n    backFromGame: function () {\n        this.poses.forEach(function (t) {\n            if (t) {\n                t.setPreview(-1);\n            }\n        });\n        this.blocks.forEach(function (t) {\n            if (t) {\n                t.setPreview(-1);\n                if (t.item) {\n                    t.item.hideUnderBuffEffect();\n                }\n            }\n        });\n        this.setExtendMode(!1);\n    },\n    onClickBegan: function (t) {\n        if (4 != cc.pvz.runtimeData.guide) {\n            this.dragBoard = !1;\n            this.clickedItem = null;\n            if (this.isExtendMode) {\n                this.onBoardClickBegan(t);\n            } else {\n                var e = this.boardsRoot.convertToNodeSpaceAR(t.getLocation());\n                var i = Math.floor(e.x / 106 + 0.5);\n                var n = 5 * Math.floor(-e.y / 106 + 0.5) + i;\n                if (-1 != this.datas[n] && this.blocks[n] && this.blocks[n].item) {\n                    this.clickedItem = this.blocks[n].item;\n                    this.clickedItem.pickupFromBoard(t.getLocation());\n                }\n            }\n        } else {\n            cc.guideManager.onStepFinished();\n        }\n    },\n    onClickMoved: function (t) {\n        if (this.dragBoard) {\n            this.onBoardClickMoved(t.getDelta());\n        } else {\n            if (this.clickedItem) {\n                this.clickedItem.onClickMoved(t);\n            }\n        }\n    },\n    onClickEnded: function (t) {\n        if (this.dragBoard) {\n            this.onBoardClickEnded();\n        } else {\n            if (this.clickedItem) {\n                this.clickedItem.onClickEnded(t);\n                this.clickedItem = null;\n            }\n        }\n    },\n    onBoardClickBegan: function (t) {\n        var e = this;\n        var i = this.boardsRoot.convertToNodeSpaceAR(t.getLocation());\n        var n = Math.floor(i.x / 106 + 0.5);\n        var o = 5 * Math.floor(-i.y / 106 + 0.5) + n;\n        if (-1 != this.datas[o]) {\n            this.dragBoard = !0;\n            this.dragBoardMoved = cc.Vec2.ZERO;\n            this.poses.forEach(function (t) {\n                if (t) {\n                    t.node.active = !0;\n                }\n            });\n        } else {\n            this.toPutArr.forEach(function (i) {\n                if (\n                    i.myBlocks.some(function (t) {\n                        return t.i == o;\n                    })\n                ) {\n                    e.clickedItem = i;\n                    e.clickedItem.pickupFromBoard(t.getLocation());\n                }\n            });\n        }\n    },\n    onBoardClickMoved: function (t) {\n        var e = this;\n        this.boardsRoot.position = this.boardsRoot.position.add(t);\n        this.boardItemBgsRoot.position = this.boardItemsRoot.position.add(t);\n        this.boardItemsRoot.position = this.boardItemsRoot.position.add(t);\n        this.dragBoardMoved.addSelf(t);\n        this.poses.forEach(function (t) {\n            if (t) {\n                t.setPreview(-1);\n            }\n        });\n        var i = [];\n        var n = this.getBlocksToPut(i);\n        i.forEach(function (t) {\n            if (e.poses[t]) {\n                e.poses[t].setPreview(n ? 0 : 1);\n            }\n        });\n    },\n    onBoardClickEnded: function () {\n        var t = this;\n        var e = [];\n        var i = this.getBlocksToPut(e);\n        e.forEach(function (e) {\n            t.poses[e].setPreview(-1);\n        });\n        if (i) {\n            var n = Math.floor(this.dragBoardMoved.x / 106 + 0.5);\n            var o = Math.floor(-this.dragBoardMoved.y / 106 + 0.5);\n            var s = cc.v2(106 * n, 106 * -o);\n            var c = 5 * o + n;\n            this.datas.fill(-1);\n            this.blocks.fill(null);\n            e.forEach(function (e) {\n                t.datas[e] = 0;\n            });\n            var a = this.boardsRoot.children.map(function (t) {\n                return t;\n            });\n            a.sort(function (t, e) {\n                return t.i - e.i;\n            });\n            a.forEach(function (e) {\n                e.position = e.position.add(s);\n                var i = e.getComponent(\"Block\");\n                i.i += c;\n                t.blocks[i.i] = i;\n            });\n            this.boardItemBgsRoot.children.forEach(function (t) {\n                t.position = t.position.add(s);\n            });\n            this.boardItemsRoot.children.forEach(function (t) {\n                t.position = t.position.add(s);\n            });\n        }\n        this.dragBoard = !1;\n        this.boardsRoot.position = cc.Vec2.ZERO;\n        this.boardItemBgsRoot.position = cc.Vec2.ZERO;\n        this.boardItemsRoot.position = cc.Vec2.ZERO;\n        this.poses.forEach(function (e, i) {\n            if (e) {\n                e.node.active = -1 == t.datas[i];\n            }\n        });\n    },\n    onStashClickBegan: function () {\n        this.dragBoard = !1;\n        this.clickedItem = null;\n    },\n    onStashClickMoved: function (t) {\n        if (this.dragBoard) {\n            //\n        } else {\n            if (this.clickedItem) {\n                this.clickedItem.onClickMoved(t);\n            }\n        }\n    },\n    onStashClickEnded: function (t) {\n        if (this.dragBoard) {\n            //\n        } else {\n            if (this.clickedItem) {\n                this.clickedItem.onClickEnded(t);\n                this.clickedItem = null;\n            }\n        }\n    },\n    findPosForBlock: function (t) {\n        var e = this;\n        var i = function () {\n            var i = n % 5;\n            var o = (n - i) / 5;\n            var s = t.xys.map(function (t) {\n                return {\n                    x: Math.floor(i + t.x),\n                    y: Math.floor(o + t.y)\n                };\n            });\n            var c = [];\n            var a = !0;\n            s.forEach(function (t) {\n                var i = t.x;\n                var n = t.y;\n                if (!(i < 0 || n < 0 || i > 4 || n > 6)) {\n                    var o = 5 * n + i;\n                    if (e.blocks[o]) {\n                        return void (a = !1);\n                    } else {\n                        return c.push(o), -1 == e.datas[o];\n                    }\n                }\n                a = !1;\n            });\n            if (\n                a &&\n                !s.every(function (t) {\n                    return e.testCantPlace(5 * t.y + t.x);\n                })\n            ) {\n                return {\n                    v: c[0]\n                };\n            }\n        };\n        for (var n = 0; n < 35; n++) {\n            var o = i();\n            if (\"object\" == typeof o) {\n                return o.v;\n            }\n        }\n        return -1;\n    },\n    findBlockForItem: function (t) {\n        var e = this;\n        if (0 == t.id) {\n            return this.findPosForBlock(t);\n        }\n        var i = function () {\n            var i = n % 5;\n            var o = (n - i) / 5;\n            var s = [];\n            var c = !0;\n            t.xys.forEach(function (t) {\n                var n = Math.floor(i + t.x);\n                var a = Math.floor(o + t.y);\n                if (!(n < 0 || a < 0 || n > 4 || a > 6)) {\n                    var r = 5 * a + n;\n                    if (e.blocks[r]) {\n                        if (e.blocks[r].item) {\n                            return void (c = !1);\n                        } else {\n                            return s.push(r), 0 == e.datas[r];\n                        }\n                    } else {\n                        return void (c = !1);\n                    }\n                }\n                c = !1;\n            });\n            if (c) {\n                return {\n                    v: s[0]\n                };\n            }\n        };\n        for (var n = 0; n < 35; n++) {\n            var o = i();\n            if (\"object\" == typeof o) {\n                return o.v;\n            }\n        }\n        return -1;\n    },\n    testItem: function (t, e, i) {\n        var n = this;\n        if (void 0 === i) {\n            i = null;\n        }\n        var o = [];\n        this.blocks.forEach(function (t) {\n            if (t) {\n                t.setPreview(-1);\n                if (t.item) {\n                    t.item.hideUnderBuffEffect();\n                }\n            }\n        });\n        var s = this.boardsRoot.convertToNodeSpaceAR(e);\n        var c = s.x / 106 + 0.5;\n        var a = -s.y / 106 + 0.5;\n        var r = !0;\n        t.xys.forEach(function (t) {\n            var e = Math.floor(c + t.x);\n            var i = Math.floor(a + t.y);\n            if (!(e < 0 || i < 0 || e > 4 || i > 6)) {\n                var s = 5 * i + e;\n                if (n.blocks[s]) {\n                    return o.push(s), 0 == n.datas[s];\n                } else {\n                    return void (r = !1);\n                }\n            }\n            r = !1;\n        });\n        o.forEach(function (t) {\n            if (i) {\n                i.push(n.blocks[t]);\n            }\n            n.blocks[t].setPreview(r ? 0 : 1);\n        });\n        if (6 == t.id) {\n            var h = Math.floor(c + t.xys[0].x);\n            var d = Math.floor(a + t.xys[0].y);\n            this.getCrossItems(t.id, 5 * d + h, function (e) {\n                e.showUnderBuffEffect(t.id);\n            });\n        }\n        return r;\n    },\n    testBlock: function (t, e, i) {\n        var n = this;\n        if (void 0 === i) {\n            i = null;\n        }\n        var o = this.extendModeBg.convertToNodeSpaceAR(e);\n        var s = o.x / 106 + 0.5;\n        var c = -o.y / 106 + 0.5;\n        var a = [];\n        var r = !0;\n        t.xys.forEach(function (t) {\n            var e = Math.floor(s + t.x);\n            var i = Math.floor(c + t.y);\n            if (!(e < 0 || i < 0 || e > 4 || i > 6)) {\n                var o = 5 * i + e;\n                if (n.poses[o]) {\n                    if (n.blocks[o]) {\n                        return void (r = !1);\n                    } else {\n                        return a.push(o), -1 == n.datas[o];\n                    }\n                } else {\n                    return void (r = !1);\n                }\n            }\n            r = !1;\n        });\n        this.poses.forEach(function (t) {\n            if (t) {\n                t.setPreview(-1);\n            }\n        });\n        a.forEach(function (t) {\n            if (i) {\n                i.push(n.poses[t]);\n            }\n            n.poses[t].setPreview(r ? 0 : 1);\n        });\n        return r;\n    },\n    getBlocksToPut: function (t) {\n        var e = this;\n        var i = Math.floor(this.dragBoardMoved.x / 106 + 0.5);\n        var n = Math.floor(-this.dragBoardMoved.y / 106 + 0.5);\n        var o = !0;\n        this.datas.forEach(function (s, c) {\n            if (0 == s) {\n                var a = c % 5;\n                var r = a + i;\n                var h = (c - a) / 5 + n;\n                if (r < 0 || h < 0 || r > 4 || h > 6) {\n                    o = !1;\n                } else {\n                    var d = 5 * h + r;\n                    if (e.poses[d]) {\n                        if (e.hasTryPlace(d)) {\n                            o = !1;\n                        } else {\n                            t.push(d);\n                        }\n                    } else {\n                        o = !1;\n                    }\n                }\n            }\n        });\n        return o;\n    },\n    debug: function () {\n        this.blocks.forEach(function (t) {\n            if (\n                t &&\n                t.item &&\n                t.item.myBlocks.every(function (e) {\n                    return e.i != t.i;\n                })\n            ) {\n                cc.warn(\"sync 1\");\n            }\n        });\n        this.boardItemsRoot.children.forEach(function (t) {\n            var e = t.getComponent(\"Item\");\n            if (e.myBlocks.length != e.xys.length) {\n                cc.warn(\"sync 2\");\n            }\n            if (\n                e.myBlocks.some(function (t) {\n                    return t.item != e;\n                })\n            ) {\n                cc.warn(\"sync 3\");\n            }\n            var i = t.x / 106;\n            var n = t.y / 106;\n            console.log(\"(\" + i + \",\" + n + \")\");\n        });\n    },\n    getBlockPos: function (t) {\n        var e = t % 5;\n        var i = (t - e) / 5;\n        return cc.v2(106 * e, 106 * -i);\n    },\n    createBlock: function (t) {\n        var e = this.blockPrefab.addNode(this.getBlockPos(t)).getComponent(\"Block\");\n        e.setRoot(this);\n        e.i = t;\n        this.blocks[t] = e;\n        this.poses[t].node.active = !1;\n        this.poses[t].item = null;\n    },\n    createBlocks: function () {\n        var t = this;\n        this.datas.forEach(function (e, i) {\n            if (0 == e) {\n                t.createBlock(i);\n            }\n        });\n    },\n    setExtendMode: function (t) {\n        this.extendModeBg.active = t;\n        this.ui1.active = !t;\n        this.ui2.active = t;\n        if (t) {\n            if (this.isExtendMode) {\n                //\n            } else {\n                this.toPutArr.length = 0;\n            }\n        }\n        this.isExtendMode = t;\n    },\n    resetBlocksPreview: function () {\n        this.blocks.forEach(function (t) {\n            if (t) {\n                t.setPreview(-1);\n                if (t.item) {\n                    t.item.hideUnderBuffEffect();\n                    t.item.updateLv5Effect();\n                }\n            }\n        });\n    },\n    resetPosesPreview: function () {\n        this.poses.forEach(function (t) {\n            if (t && t.node.active) {\n                t.setPreview(-1);\n            }\n        });\n    },\n    tryPlace: function (t) {\n        if (\n            -1 ==\n            this.toPutArr.findIndex(function (e) {\n                return e == t;\n            })\n        ) {\n            this.toPutArr.push(t);\n        }\n    },\n    undoTryPlace: function (t) {\n        var e = this.toPutArr.findIndex(function (e) {\n            return e == t;\n        });\n        if (-1 != e) {\n            this.toPutArr.splice(e, 1);\n        }\n    },\n    hasTryPlace: function (t) {\n        return this.toPutArr.some(function (e) {\n            return e.myBlocks.some(function (e) {\n                return e.i == t;\n            });\n        });\n    },\n    testCantPlace: function (t) {\n        var e = this;\n        var i = t % 5;\n        var n = (t - i) / 5;\n        return [\n            {\n                x: 0,\n                y: -1\n            },\n            {\n                x: 0,\n                y: 1\n            },\n            {\n                x: -1,\n                y: 0\n            },\n            {\n                x: 1,\n                y: 0\n            }\n        ].every(function (t) {\n            var o = t.x + i;\n            var s = t.y + n;\n            if (o < 0 || s < 0 || o > 4 || s > 6) {\n                return !0;\n            }\n            var c = 5 * s + o;\n            return -1 == e.datas[c];\n        });\n    },\n    onClickPlaceEnd: function () {\n        var t = this;\n        var e = function (e) {\n            for (var i = 0; i < e.length; i++) {\n                var n = e[i];\n                var o = n.myBlocks.map(function (t) {\n                    return t.i;\n                });\n                if (\n                    !o.every(function (e) {\n                        return t.testCantPlace(e);\n                    })\n                ) {\n                    o.forEach(function (e) {\n                        if (t.blocks[e]) {\n                            cc.warn(\"xxx\");\n                        }\n                        t.datas[e] = 0;\n                        t.createBlock(e);\n                    });\n                    n.removeFromBlock();\n                    n.node.parent = null;\n                    return !0;\n                }\n            }\n            return !1;\n        };\n        var i = [];\n        do {\n            i = this.toPutArr.map(function (t) {\n                return t;\n            });\n        } while (e(i));\n        i.forEach(function (t) {\n            t.removeFromBlock();\n            t.itemRoot.putdown(t, t.node.convertToWorldSpaceAR(cc.Vec2.ZERO));\n        });\n        this.setExtendMode(!1);\n        this.itemRoot.setCanDrag(!0);\n    },\n    getCrossItems: function (t, e, i) {\n        var n = this;\n        if (6 == t) {\n            var o = new Set();\n            var s = e % 5;\n            var c = (e - s) / 5;\n            [\n                [-1, 0],\n                [1, 0],\n                [0, -1],\n                [0, 1]\n            ].forEach(function (t) {\n                var e = s + t[0];\n                var i = c + t[1];\n                if (!(e < 0 || i < 0 || e > 4 || i > 6)) {\n                    var a = 5 * i + e;\n                    if (n.blocks[a] && n.blocks[a].item) {\n                        o.add(n.blocks[a].item);\n                    }\n                }\n            });\n            o.forEach(function (t) {\n                i(t);\n            });\n        }\n    },\n    isFull: function () {\n        return this.blocks.every(function (t) {\n            return null == t || null != t.item;\n        });\n    }\n});\n"]}