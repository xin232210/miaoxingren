{"version":3,"sources":["assets/mainUI/scripts/SignItem.js"],"names":["cc","Class","Component","properties","nameSprite","Sprite","bgSprite","rewardItem","Node","rewardPanel","finishNode","initSignItem","e","t","i","signDay","signJson","curDay","o","UISign","isRewardSign","active","a","reward","rewardDataList","c","Math","floor","length","s","n","r","pvz","utils","getRewardItem","children","getComponent","initRewardItem","push","h","p","setSpriteFrame","onGetSignReward","count","onCloseUI","popupManager","popup","ad","scale","GameConfig","UIFromType"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        nameSprite: cc.Sprite,\n        bgSprite: cc.Sprite,\n        rewardItem: cc.Node,\n        rewardPanel: cc.Node,\n        finishNode: cc.Node\n    },\n    initSignItem: function (e, t, i) {\n        this.signDay = e;\n        this.signJson = t;\n        this.curDay = i;\n        var o = this.signDay < this.curDay || (!(this.signDay > this.curDay) && cc.UISign.isRewardSign);\n        this.finishNode.active = o;\n        var a = this.signJson.reward;\n        this.rewardDataList = [];\n        if (7 == this.signDay) {\n            var c = Math.floor(a.length / 2);\n            var s = 0;\n            for (var n = 0; n < c; n++) {\n                var r = cc.pvz.utils.getRewardItem(a[s], a[s + 1]);\n                s += 2;\n                this.rewardPanel.children[n].getComponent(\"RewardItem\").initRewardItem(r, !1);\n                this.rewardDataList.push(r);\n            }\n        } else {\n            var h;\n            var p = cc.pvz.utils.getRewardItem(a[0], a[1]);\n            this.rewardItem.getComponent(\"RewardItem\").initRewardItem(p, !1);\n            this.rewardDataList.push(p);\n            cc.pvz.utils.setSpriteFrame(this.nameSprite, \"uiImage\", \"sign/day\" + this.signDay);\n            if (o) {\n                h = 1;\n            } else {\n                if (this.signDay > this.curDay) {\n                    h = 3;\n                } else {\n                    h = 2;\n                }\n            }\n            cc.pvz.utils.setSpriteFrame(this.bgSprite, \"uiImage\", \"sign/k\" + h);\n        }\n    },\n    onGetSignReward: function (e) {\n        if (void 0 === e) {\n            e = !1;\n        }\n        if (e) {\n            for (var t = 0; t < this.rewardDataList.length; t++) {\n                this.rewardDataList[t].count *= 2;\n            }\n        }\n        if (this.bgSprite) {\n            cc.pvz.utils.setSpriteFrame(this.bgSprite, \"uiImage\", \"sign/k1\");\n        }\n        this.finishNode.active = !0;\n        cc.UISign.onCloseUI();\n        cc.popupManager.popup(\n            \"mainUI\",\n            \"getrewardUI\",\n            \"UIReward\",\n            {\n                ad: !1,\n                scale: !1\n            },\n            this.rewardDataList,\n            cc.pvz.GameConfig.UIFromType[\"签到\"]\n        );\n    }\n});\n"]}