{"version":3,"sources":["assets/game/scripts/game1.js"],"names":["$blockRoot","require","$itemRoot","$prefabInfo","s","c","cc","Class","Component","properties","adBlockBtnNode","Node","adBlockCountLabel","Label","refreshFree","refreshCoin","refreshCoinLabel","refreshLv2Node","blockRoot","itemRoot","itemPrefabs","item3Preabs","blockPrefabs","adSupPrefab","setBtnNode","lv5btnNode","bagBottomUIRoot","startBtnNode","refreshBtnNode","placeBtnNode","stashNode","hpBar","ProgressBar","hpLabel","heroJsonFile","JsonAsset","buffJsonFile","moneyIconNode","bgMusic","AudioClip","fingerSpine","sp","Skeleton","onLoad","forEach","t","active","node","start","pvz","runtimeData","adBlockCount","items","attItems","e","i","n","PlayerData","getToolData","pos","push","some","loadJsonData","json","scene","logicEveryWave","lv2Count","TAUtils","trackAdUIShow","GameConfig","AdType","startLogic","updateHp","removeAllChildren","autoTimes","doRefreshLogic","saveRuntimeData","bagItems","id","id0Type","addItemByPrefab","hasAd","unlockAd","o","newEquipItem","lv","lockByAd","layoutChildren","resetBlocksPreview","updateMoney","butler","on","getStageLevel","stashEnable","guide","showGame1st","guideManager","showGuide","hideFinger","tip","updateMoveFinger","string","playMusic","getBuffValue","refreshCost","Math","round","updateRefreshBtns","updateRuntimeData","blocks","datas","boardItemsRoot","children","getComponent","near10","myBlocks","getCrossItems","bs","map","index","canUse","dragingRoot","saveData","childrenCount","prePosA","findIndex","y","convertToWorldSpaceAR","Vec2","ZERO","find","v2","a","r","isExtendMode","h","findPosForBlock","findBlockForItem","poses","position","add","offset","blockItemsRootNode","showMoveFinger","parent","convertToNodeSpaceAR","stopAllActions","setAnimation","setCompleteListener","runAction","sequence","moveTo","callFunc","hideMoveFinger","startGuide2","focus","btn","name","setTimeout","startGuide4","startGuide6","startGuide8","Layout","updateLayout","checkStartGame","popupManager","showToast","onClickStart","startHeroLogic","barPrefab","trackLevel","level","wave","onBackFromGame","stopHeroLogic","backFromGame","instantiate","initBy","math","randomRangeInt","length","forceAdWave","mode","player","paddingLeft","paddingRight","d","u","p","l","min","f","m","v","g","b","k","B","random","C","R","onClickWave7Guide","onStepFinished","onClickRefresh","freeTimes","money","buyCoinCount","popup","scale","addMoney","onClickAd3","AdUtils","showAdRewardVideo","onClickAdRefresh","color","Color","RED","WHITE","near6","reduce","updateMaxHp","maxHp","onItemChanged","showLv5UI"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $blockRoot = require(\"./BlockRoot\");\nvar $itemRoot = require(\"./ItemRoot\");\nvar $prefabInfo = require(\"../../scripts/PrefabInfo\");\nvar s = [3, 6, 8, 10];\nvar c = [1, 2, 4, 5, 7, 9, 11, 12];\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        adBlockBtnNode: cc.Node,\n        adBlockCountLabel: cc.Label,\n        refreshFree: cc.Node,\n        refreshCoin: cc.Node,\n        refreshCoinLabel: cc.Label,\n        refreshLv2Node: cc.Node,\n        blockRoot: $blockRoot,\n        itemRoot: $itemRoot,\n        itemPrefabs: [cc.Node],\n        item3Preabs: [cc.Node],\n        blockPrefabs: [cc.Node],\n        adSupPrefab: $prefabInfo,\n        setBtnNode: cc.Node,\n        lv5btnNode: cc.Node,\n        bagBottomUIRoot: cc.Node,\n        startBtnNode: cc.Node,\n        refreshBtnNode: cc.Node,\n        placeBtnNode: cc.Node,\n        stashNode: cc.Node,\n        hpBar: cc.ProgressBar,\n        hpLabel: cc.Label,\n        heroJsonFile: cc.JsonAsset,\n        buffJsonFile: cc.JsonAsset,\n        moneyIconNode: cc.Node,\n        bgMusic: cc.AudioClip,\n        fingerSpine: sp.Skeleton\n    },\n    onLoad: function () {\n        this.itemPrefabs.forEach(function (t) {\n            return (t.active = !1);\n        });\n        this.blockPrefabs.forEach(function (t) {\n            return (t.active = !1);\n        });\n        this.fingerSpine.node.active = !1;\n    },\n    start: function () {\n        var t = this;\n        this.adBlockBtnNode.active = cc.pvz.runtimeData.adBlockCount > 0;\n        this.items = [];\n        this.attItems = [];\n        this.itemPrefabs.forEach(function (e, i) {\n            var n = i + 1;\n            if (cc.pvz.PlayerData.getToolData(n).pos >= 0) {\n                t.items.push(n);\n                if (\n                    c.some(function (t) {\n                        return t == n;\n                    })\n                ) {\n                    t.attItems.push(n);\n                }\n            }\n        });\n        cc.pvz.runtimeData.loadJsonData(this.buffJsonFile.json);\n        this.blockRoot.scene = this;\n        this.itemRoot.scene = this;\n        this.logicEveryWave();\n        this.refreshLv2Node.active = cc.pvz.runtimeData.lv2Count > 0;\n        if (this.refreshLv2Node.active) {\n            cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"刷新2级\"]);\n        }\n        this.blockRoot.startLogic();\n        this.updateHp();\n        this.itemRoot.node.removeAllChildren();\n        if (cc.pvz.runtimeData.autoTimes > 0) {\n            this.doRefreshLogic(!0);\n            cc.pvz.runtimeData.autoTimes--;\n            this.saveRuntimeData();\n        } else {\n            cc.pvz.runtimeData.bagItems.forEach(function (e) {\n                if (0 == e.id) {\n                    var i = t.blockPrefabs[e.id0Type];\n                    var n = t.addItemByPrefab(i, -1, null);\n                    if (n.hasAd && !e.hasAd) {\n                        n.unlockAd();\n                    }\n                } else {\n                    var o = t.newEquipItem(e.lv, e.id, null);\n                    if (e.hasAd) {\n                        o.lockByAd(t.adSupPrefab);\n                    }\n                }\n            });\n            this.itemRoot.layoutChildren();\n        }\n        this.blockRoot.resetBlocksPreview();\n        this.updateMoney();\n        cc.butler.node.on(\"money\", this.updateMoney, this);\n        if (1 == cc.pvz.PlayerData.getStageLevel()) {\n            this.setBtnNode.active = !1;\n            this.blockRoot.stashEnable = !1;\n            if (0 == cc.pvz.runtimeData.guide) {\n                if (cc.pvz.runtimeData.showGame1st) {\n                    (this.bagBottomUIRoot.active = !1),\n                        cc.guideManager.showGuide(\n                            0,\n                            [\n                                {\n                                    hideFinger: !0,\n                                    tip: \"【背包】能强化上阵植物的能力。\"\n                                },\n                                {\n                                    hideFinger: !0,\n                                    tip: \"将刷新出的【工具】全部放入背包中强化植物!\"\n                                }\n                            ],\n                            function (e) {\n                                if (e) {\n                                    t.bagBottomUIRoot.active = !0;\n                                    t.startBtnNode.active = !1;\n                                    t.refreshBtnNode.active = !1;\n                                    t.refreshLv2Node.active = !1;\n                                    cc.pvz.runtimeData.guide = 3;\n                                    t.updateMoveFinger();\n                                }\n                            }\n                        ),\n                        (this.adBlockBtnNode.active = !1);\n                } else {\n                    (this.bagBottomUIRoot.active = !1),\n                        cc.guideManager.showGuide(\n                            0,\n                            [\n                                {\n                                    hideFinger: !0,\n                                    tip: \"欢迎来到卡皮巴拉的世界！\"\n                                },\n                                {\n                                    hideFinger: !0,\n                                    tip: \"将刷新出的卡皮巴拉放入游乐场！\"\n                                }\n                            ],\n                            function (e) {\n                                if (e) {\n                                    cc.pvz.runtimeData.guide = 1;\n                                    t.updateMoveFinger();\n                                }\n                            }\n                        ),\n                        (this.adBlockBtnNode.active = !1);\n                }\n            }\n        }\n        if (this.adBlockBtnNode.active) {\n            this.adBlockCountLabel.string = cc.pvz.runtimeData.adBlockCount;\n            cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"刷新广告格子\"]);\n        }\n    },\n    logicEveryWave: function () {\n        cc.butler.playMusic(this.bgMusic);\n        var t = cc.pvz.runtimeData.getBuffValue(13);\n        if (t > 0) {\n            this.refreshCost = Math.round(15 * (1 - 0.01 * t));\n        } else {\n            this.refreshCost = 15;\n        }\n        this.updateRefreshBtns();\n    },\n    updateRuntimeData: function () {\n        var t = this;\n        cc.pvz.runtimeData.blocks = [];\n        this.blockRoot.datas.forEach(function (t, e) {\n            if (-1 != t) {\n                cc.pvz.runtimeData.blocks.push(e);\n            }\n        });\n        this.blockRoot.boardItemsRoot.children.forEach(function (t) {\n            t.getComponent(\"Item\").near10 = !1;\n        });\n        this.blockRoot.boardItemsRoot.children.forEach(function (e) {\n            var i = e.getComponent(\"Item\");\n            if (10 == i.id) {\n                var n = i.myBlocks[0].i;\n                t.blockRoot.getCrossItems(i.id, n, function (t) {\n                    t.near10 = !0;\n                });\n            }\n        });\n        cc.pvz.runtimeData.items = [];\n        this.blockRoot.boardItemsRoot.children.forEach(function (t, e) {\n            var i = t.getComponent(\"Item\");\n            cc.pvz.runtimeData.items.push({\n                id: i.id,\n                lv: i.lv,\n                bs: i.myBlocks.map(function (t) {\n                    return t.i;\n                })\n            });\n            i.index = e;\n        });\n        cc.pvz.runtimeData.bagItems = [];\n        var e = function (t) {\n            cc.pvz.runtimeData.bagItems.push({\n                id: t.id,\n                lv: t.lv,\n                hasAd: t.hasAd && !t.canUse,\n                id0Type: t.id0Type\n            });\n        };\n        this.itemRoot.node.children.forEach(function (t) {\n            var i = t.getComponent(\"Item\");\n            e(i);\n        });\n        this.itemRoot.dragingRoot.children.forEach(function (t) {\n            var i = t.getComponent(\"Item\");\n            e(i);\n        });\n    },\n    saveRuntimeData: function () {\n        this.updateRuntimeData();\n        cc.pvz.runtimeData.saveData();\n    },\n    updateMoveFinger: function (t) {\n        if (void 0 === t) {\n            t = !1;\n        }\n        if (0 != this.itemRoot.node.childrenCount) {\n            var e;\n            if (!t && this.itemRoot.dragingRoot.childrenCount > 0) {\n                e = this.itemRoot.dragingRoot.children[0].getComponent(\"Item\");\n            } else {\n                e = null;\n            }\n            var i = this.prePosA;\n            if (!e) {\n                var n = this.itemRoot.node.children.findIndex(function (t) {\n                    return 0 == t.getComponent(\"Item\").id;\n                });\n                if (-1 == n) {\n                    n = 0;\n                }\n                if ((e = this.itemRoot.node.children[n].getComponent(\"Item\")).node.y > 5) {\n                    var o = e.node.y;\n                    e.node.y = 0;\n                    i = e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n                    e.node.y = o;\n                } else {\n                    i = e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n                }\n                this.prePosA = i;\n            }\n            var s = null;\n            var c = this.blockRoot.boardItemsRoot.children.find(function (t) {\n                var i = t.getComponent(\"Item\");\n                return i.id == e.id && i.lv == e.lv;\n            });\n            if (c) {\n                s = c.convertToWorldSpaceAR(cc.v2(15, -30));\n            } else {\n                var a;\n                var r = 0 == e.id || this.blockRoot.isExtendMode;\n                var h;\n                if (r) {\n                    h = this.blockRoot.findPosForBlock(e);\n                } else {\n                    h = this.blockRoot.findBlockForItem(e);\n                }\n                if (-1 != h) {\n                    if (r) {\n                        a = this.blockRoot.poses[h].node.position.add(e.offset);\n                    } else {\n                        a = this.blockRoot.blocks[h].node.position.add(e.offset);\n                    }\n                    s = this.itemRoot.blockItemsRootNode.convertToWorldSpaceAR(a).add(cc.v2(15, -30));\n                } else {\n                    s = this.blockRoot.node.convertToWorldSpaceAR(cc.v2(270, 0));\n                }\n            }\n            this.showMoveFinger(i, s);\n        }\n    },\n    showMoveFinger: function (t, e) {\n        var i = this;\n        var n = this.fingerSpine.node.parent.convertToNodeSpaceAR(t);\n        var o = this.fingerSpine.node.parent.convertToNodeSpaceAR(e);\n        this.fingerSpine.node.active = !0;\n        this.fingerSpine.node.stopAllActions();\n        (function t() {\n            i.fingerSpine.node.position = n;\n            i.fingerSpine.setAnimation(0, \"1\", !1);\n            i.fingerSpine.setCompleteListener(function () {\n                i.fingerSpine.node.runAction(\n                    cc.sequence(\n                        cc.moveTo(0.75, o),\n                        cc.callFunc(function () {\n                            i.fingerSpine.setAnimation(0, \"3\", !1);\n                            i.fingerSpine.setCompleteListener(function () {\n                                if (0 == i.itemRoot.node.childrenCount) {\n                                    t();\n                                } else {\n                                    i.updateMoveFinger();\n                                }\n                            });\n                        })\n                    )\n                );\n                i.fingerSpine.setAnimation(0, \"2\", !0);\n                i.fingerSpine.setCompleteListener(null);\n            });\n        })();\n    },\n    hideMoveFinger: function () {\n        this.fingerSpine.node.active = !1;\n        this.fingerSpine.node.stopAllActions();\n    },\n    startGuide2: function () {\n        var t = this;\n        this.hideMoveFinger();\n        cc.pvz.runtimeData.guide = 2;\n        this.bagBottomUIRoot.active = !0;\n        this.startBtnNode.active = !1;\n        this.refreshLv2Node.active = !1;\n        var e = this.refreshBtnNode;\n        cc.guideManager.showGuide(\n            0,\n            [\n                {\n                    tip: \"【刷新】获得更多卡皮巴拉\",\n                    focus: e,\n                    btn: e.name\n                }\n            ],\n            function (i) {\n                if (i) {\n                    e.y = -1e3;\n                    cc.pvz.runtimeData.guide = 3;\n                    setTimeout(function () {\n                        t.updateMoveFinger();\n                    });\n                }\n            }\n        );\n    },\n    startGuide4: function () {\n        this.hideMoveFinger();\n        cc.pvz.runtimeData.guide = 4;\n        var t = this.blockRoot.boardItemsRoot.children.find(function (t) {\n            return 3 == t.getComponent(\"Item\").id;\n        });\n        this.refreshBtnNode.y = 90;\n        var e = this.startBtnNode;\n        e.active = !0;\n        cc.guideManager.showGuide(\n            0,\n            [\n                {\n                    hideFinger: !0,\n                    tip: \"战斗中，【蝙蝠卡皮】会发射子弹攻击敌人\",\n                    focus: cc.find(\"gezi\", t),\n                    y: -400\n                },\n                {\n                    tip: \"准备就绪，去对抗入侵乐园的怪兽们吧！\",\n                    focus: e,\n                    btn: e.name\n                }\n            ],\n            function (t) {\n                if (t) {\n                    cc.pvz.runtimeData.guide = 5;\n                }\n            }\n        );\n    },\n    startGuide6: function () {\n        var t = this;\n        this.hideMoveFinger();\n        this.bagBottomUIRoot.active = !0;\n        this.startBtnNode.active = !1;\n        this.refreshLv2Node.active = !1;\n        this.refreshBtnNode.active = !1;\n        cc.guideManager.showGuide(\n            0,\n            [\n                {\n                    tip: \"确认放置位置\",\n                    focus: this.placeBtnNode,\n                    btn: this.placeBtnNode.name\n                }\n            ],\n            function (e) {\n                if (e) {\n                    cc.pvz.runtimeData.guide = 7;\n                    if (0 == t.itemRoot.node.childrenCount) {\n                        t.itemRoot.scene.startGuide8();\n                    } else {\n                        setTimeout(function () {\n                            t.updateMoveFinger(!0);\n                        });\n                    }\n                }\n            }\n        );\n    },\n    startGuide8: function () {\n        var t = this;\n        this.hideMoveFinger();\n        cc.pvz.runtimeData.guide = 8;\n        this.blockRoot.stashEnable = !0;\n        var e = this.refreshBtnNode;\n        e.active = !0;\n        e.parent.getComponent(cc.Layout).updateLayout();\n        cc.guideManager.showGuide(\n            0,\n            [\n                {\n                    tip: \"使用【刷新】，能获得更多卡皮巴拉\",\n                    focus: e,\n                    btn: e.name\n                },\n                {\n                    hideFinger: !0,\n                    tip: \"充分利用游乐场空间，做个背包整理达人吧\"\n                }\n            ],\n            function (e) {\n                if (e) {\n                    cc.pvz.runtimeData.guide = 9;\n                    t.startBtnNode.active = !0;\n                    t.refreshLv2Node.active = !0;\n                    t.adBlockBtnNode.active = !0;\n                    t.adBlockCountLabel.string = cc.pvz.runtimeData.adBlockCount;\n                    cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"刷新广告格子\"]);\n                }\n            }\n        );\n    },\n    checkStartGame: function () {\n        return 0 != this.blockRoot.boardItemsRoot.childrenCount || (cc.popupManager.showToast(\"上阵卡皮迎战敌人\"), !1);\n    },\n    onClickStart: function (t) {\n        var e = this;\n        if (this.checkStartGame(this.onClickStart)) {\n            this.saveRuntimeData();\n            this.blockRoot.boardItemsRoot.children.forEach(function (i) {\n                i.getComponent(\"Item\").startHeroLogic(e.itemRoot.barPrefab, t);\n            });\n            cc.pvz.TAUtils.trackLevel(cc.pvz.runtimeData.level, cc.pvz.runtimeData.wave);\n        }\n    },\n    onBackFromGame: function () {\n        this.blockRoot.boardItemsRoot.children.forEach(function (t) {\n            t.getComponent(\"Item\").stopHeroLogic();\n        });\n        this.blockRoot.backFromGame();\n        this.itemRoot.node.removeAllChildren();\n        this.logicEveryWave();\n    },\n    addItemByPrefab: function (t, e, i) {\n        var n = cc.instantiate(t);\n        n.position = cc.Vec2.ZERO;\n        var o = n.getComponent(\"Item\");\n        o.initBy(this.itemRoot, e, i);\n        n.active = !0;\n        if (i) {\n            //\n        } else {\n            n.parent = this.itemRoot.node;\n            this.itemRoot.layoutChildren();\n        }\n        return o;\n    },\n    newEquipItem: function (t, e, i) {\n        var n;\n        if (void 0 === e) {\n            e = -1;\n        }\n        if (void 0 === i) {\n            i = null;\n        }\n        if (-1 == e) {\n            e = this.items[cc.math.randomRangeInt(0, this.items.length)];\n        }\n        if (e > 100) {\n            n = this.item3Preabs.find(function (t) {\n                return t.getComponent(\"Item\").id == e;\n            });\n        } else {\n            n = this.itemPrefabs.find(function (t) {\n                return t.getComponent(\"Item\").id == e;\n            });\n        }\n        return this.addItemByPrefab(n, t, i);\n    },\n    doRefreshLogic: function (t) {\n        var e = this;\n        var i;\n        if (t) {\n            i = 3 + cc.pvz.runtimeData.getBuffValue(9);\n        } else {\n            i = 3;\n        }\n        this.itemRoot.node.removeAllChildren();\n        var n = cc.pvz.runtimeData.wave >= cc.pvz.runtimeData.forceAdWave;\n        if (0 == cc.pvz.runtimeData.mode && 1 == cc.player.level) {\n            if (0 == cc.pvz.runtimeData.guide) {\n                if (cc.pvz.runtimeData.showGame1st) {\n                    this.newEquipItem(0, 5);\n                    this.newEquipItem(0, 8);\n                    this.newEquipItem(0, 3);\n                } else {\n                    this.newEquipItem(0, 5);\n                    this.newEquipItem(0, 4);\n                    this.newEquipItem(0, 6);\n                }\n                return void this.itemRoot.layoutChildren();\n            }\n            if (3 == cc.pvz.runtimeData.guide) {\n                this.newEquipItem(0, 4);\n                this.newEquipItem(0, 2);\n                this.newEquipItem(0, 3);\n                return void this.itemRoot.layoutChildren();\n            }\n            if (5 == cc.pvz.runtimeData.guide) {\n                var o = this.blockPrefabs[1];\n                this.addItemByPrefab(o, -1);\n                this.newEquipItem(0, 1);\n                this.newEquipItem(0, 3);\n                this.itemRoot.layoutChildren();\n                this.bagBottomUIRoot.active = !1;\n                cc.guideManager.showGuide(\n                    0,\n                    [\n                        {\n                            hideFinger: !0,\n                            tip: \"出现新的格子，赶紧把游乐场空间扩大吧！\"\n                        }\n                    ],\n                    function (t) {\n                        if (t) {\n                            cc.pvz.runtimeData.guide = 6;\n                            e.updateMoveFinger();\n                        }\n                    }\n                );\n                return void (this.adBlockBtnNode.active = !1);\n            }\n            if (t && 6 == cc.pvz.runtimeData.wave) {\n                this.newEquipItem(3, 2).lockByAd(this.adSupPrefab);\n                this.newEquipItem(0, 6);\n                var c = this.blockPrefabs[3];\n                this.addItemByPrefab(c, -1);\n                var a = this.itemRoot.getComponent(cc.Layout);\n                a.paddingLeft = 100;\n                a.paddingRight = 100;\n                this.itemRoot.layoutChildren();\n                var r = cc.find(\"guide7\", this.node);\n                r.active = !0;\n                return void cc.guideManager.showGuide(\n                    0,\n                    [\n                        {\n                            hideFinger: !0,\n                            focus: r,\n                            tip: \"前方有首领怪物，赶紧上阵强力卡皮巴拉！\"\n                        }\n                    ],\n                    function (t) {\n                        if (t) {\n                            r.active = !1;\n                        }\n                    }\n                );\n            }\n        }\n        var h = 0.87;\n        var d = 0.97;\n        var u = cc.pvz.runtimeData.getBuffValue(8);\n        if (u > 0) {\n            h -= 0.01 * u;\n            d -= 0.01 * u;\n        }\n        var p = [];\n        this.blockRoot.boardItemsRoot.children.forEach(function (t) {\n            var e = t.getComponent(\"Item\");\n            if (0 == e.id || (2 != e.lv && 3 != e.lv)) {\n                //\n            } else {\n                p.push(e.id);\n            }\n        });\n        var l = Math.min(0.2, 0.06 + 0.02 * p.length);\n        var f = !1;\n        var m = !1;\n        var v = [-1, -1, -1];\n        for (var g = 0; g < i; g++) {\n            var b = 0;\n            var k = -1;\n            var B = -1;\n            if (n) {\n                b = 1;\n                k = cc.math.randomRangeInt(3, this.blockPrefabs.length);\n            } else if (!m && Math.random() < l) {\n                b = 3;\n                B = this.items[cc.math.randomRangeInt(0, this.items.length)];\n            } else if (!f) {\n                var C = Math.random();\n                if (C < h) {\n                    b = 0;\n                } else {\n                    if (C < d) {\n                        b = 1;\n                    } else {\n                        b = 2;\n                    }\n                }\n            }\n            if (2 == g && 1 != b && v[0] == v[1]) {\n                do {\n                    B = this.items[cc.math.randomRangeInt(0, this.items.length)];\n                } while (B == v[0]);\n            }\n            if (3 == b) {\n                for (; 3 == B; ) {\n                    B = this.items[cc.math.randomRangeInt(0, this.items.length)];\n                }\n            }\n            if (\n                0 == b &&\n                v.some(function (t) {\n                    return s.some(function (e) {\n                        return e == t;\n                    });\n                })\n            ) {\n                B = this.attItems[cc.math.randomRangeInt(0, this.attItems.length)];\n            }\n            switch (b) {\n                case 0:\n                    v[g] = this.newEquipItem(0, B).id;\n                    break;\n                case 1:\n                    if (-1 == k) {\n                        k = cc.math.randomRangeInt(0, this.blockPrefabs.length);\n                    }\n                    var y = this.blockPrefabs[k];\n                    v[g] = this.addItemByPrefab(y, -1).id;\n                    if (k > 2) {\n                        f = !0;\n                        if (n) {\n                            cc.pvz.runtimeData.forceAdWave += 5;\n                            n = !1;\n                        }\n                        cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"广告格子\"]);\n                    }\n                    break;\n                case 2:\n                    v[g] = this.newEquipItem(1, B).id;\n                    break;\n                case 3:\n                    var R = this.newEquipItem(2, B);\n                    R.lockByAd(this.adSupPrefab);\n                    v[g] = R.id;\n                    m = !0;\n            }\n        }\n        this.itemRoot.layoutChildren();\n    },\n    onClickWave7Guide: function () {\n        cc.guideManager.onStepFinished();\n    },\n    onClickRefresh: function () {\n        var t = this;\n        if (cc.pvz.runtimeData.freeTimes > 0) {\n            cc.pvz.runtimeData.freeTimes--;\n            this.updateRefreshBtns();\n        } else {\n            if (cc.pvz.runtimeData.money < this.refreshCost) {\n                if (2 == cc.pvz.runtimeData.mode && cc.pvz.runtimeData.buyCoinCount <= 0) {\n                    return void cc.popupManager.showToast(\"阳光不足\");\n                } else {\n                    return void cc.popupManager.popup(\n                        \"game\",\n                        \"YgbuyUI\",\n                        \"UIGameMoney\",\n                        {\n                            scale: !1\n                        },\n                        function () {\n                            t.saveRuntimeData();\n                        }\n                    );\n                }\n            }\n            cc.pvz.runtimeData.addMoney(-this.refreshCost);\n            this.updateMoney();\n        }\n        this.doRefreshLogic(!1);\n        this.saveRuntimeData();\n    },\n    onClickAd3: function () {\n        var t = this;\n        cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"刷新广告格子\"], function (e) {\n            if (e) {\n                var i = cc.math.randomRangeInt(1, 3);\n                var n = t.blockPrefabs[i];\n                t.addItemByPrefab(n, -1);\n                cc.pvz.runtimeData.adBlockCount--;\n                t.adBlockBtnNode.active = cc.pvz.runtimeData.adBlockCount > 0;\n                if (t.adBlockBtnNode.active) {\n                    t.adBlockCountLabel.string = cc.pvz.runtimeData.adBlockCount;\n                    cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"刷新广告格子\"]);\n                }\n                t.saveRuntimeData();\n            }\n        });\n    },\n    onClickAdRefresh: function () {\n        var t = this;\n        cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"刷新2级\"], function (e) {\n            if (e) {\n                cc.pvz.runtimeData.lv2Count = 0;\n                t.refreshLv2Node.active = !1;\n                t.doRefreshLogic(!1);\n                t.newEquipItem(1);\n                t.saveRuntimeData();\n            }\n        });\n    },\n    updateRefreshBtns: function () {\n        this.refreshFree.active = cc.pvz.runtimeData.freeTimes > 0;\n        this.refreshCoin.active = cc.pvz.runtimeData.freeTimes <= 0;\n        this.refreshCoinLabel.string = this.refreshCost;\n        if (cc.pvz.runtimeData.money < this.refreshCost) {\n            this.refreshCoinLabel.node.color = cc.Color.RED;\n        } else {\n            this.refreshCoinLabel.node.color = cc.Color.WHITE;\n        }\n    },\n    updateMoney: function () {\n        if (cc.pvz.runtimeData.money < this.refreshCost) {\n            this.refreshCoinLabel.node.color = cc.Color.RED;\n        } else {\n            this.refreshCoinLabel.node.color = cc.Color.WHITE;\n        }\n    },\n    updateHp: function () {\n        var t = this;\n        this.blockRoot.boardItemsRoot.children.forEach(function (t) {\n            t.getComponent(\"Item\").near6 = !1;\n        });\n        this.blockRoot.boardItemsRoot.children.forEach(function (e) {\n            var i = e.getComponent(\"Item\");\n            if (6 == i.id && i.myBlocks.length > 0) {\n                var n = i.myBlocks[0].i;\n                t.blockRoot.getCrossItems(i.id, n, function (t) {\n                    t.near6 = !0;\n                });\n            }\n        });\n        var e = this.blockRoot.boardItemsRoot.children.reduce(function (t, e) {\n            var i = e.getComponent(\"Item\");\n            i.updateMaxHp();\n            return t + i.maxHp;\n        }, 0);\n        this.hpLabel.string = Math.round(e);\n    },\n    onItemChanged: function () {\n        this.updateHp();\n    },\n    showLv5UI: function () {\n        cc.popupManager.popup(\n            \"game\",\n            \"HechengUI\",\n            \"UIGameLv5Info\",\n            {\n                scale: !1\n            },\n            this\n        );\n    }\n});"]}