{"version":3,"sources":["assets/mainUI/scripts/UIShopBoxDetail.js"],"names":["cc","Class","Component","properties","iconSprite","Sprite","tipLabel","Label","baseCardNode","Node","parentPanel","initBy","e","t","JsonControl","getItemJson","i","pvz","GameConfig","Quality","o","PlayerData","getStageLevel","utils","setSpriteFrame","a","ToolLockLevel","getComponent","initShopBoxToolItem","c","s","length","n","instantiate","parent","r","h","string","toFixed","onCloseUI","popupManager","removePopup"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAELC,UAAU,EAAE;IACRC,UAAU,EAAEJ,EAAE,CAACK,MADP;IAERC,QAAQ,EAAEN,EAAE,CAACO,KAFL;IAGRC,YAAY,EAAER,EAAE,CAACS,IAHT;IAIRC,WAAW,EAAEV,EAAE,CAACS;EAJR,CAFP;EAQLE,MAAM,EAAE,gBAAUC,CAAV,EAAa;IACjB,IAAIC,CAAC,GAAGb,EAAE,CAACc,WAAH,CAAeC,WAAf,CAA2BH,CAA3B,CAAR;IACA,IAAII,CAAC,GAAGhB,EAAE,CAACiB,GAAH,CAAOC,UAAP,CAAkB,YAAYL,CAAC,CAACM,OAAd,GAAwB,OAA1C,CAAR;IACA,IAAIC,CAAC,GAAGpB,EAAE,CAACiB,GAAH,CAAOI,UAAP,CAAkBC,aAAlB,EAAR;IACAtB,EAAE,CAACiB,GAAH,CAAOM,KAAP,CAAaC,cAAb,CAA4B,KAAKpB,UAAjC,EAA6C,SAA7C,EAAwD,eAAeQ,CAAC,GAAG,EAAnB,CAAxD;IACA,IAAIa,CAAC,GAAGL,CAAC,GAAGpB,EAAE,CAACiB,GAAH,CAAOC,UAAP,CAAkBQ,aAAlB,CAAgCV,CAAC,CAAC,CAAD,CAAD,GAAO,CAAvC,CAAZ;IACA,KAAKR,YAAL,CAAkBmB,YAAlB,CAA+B,YAA/B,EAA6CC,mBAA7C,CAAiEZ,CAAC,CAAC,CAAD,CAAlE,EAAuES,CAAvE;IACA,IAAII,CAAJ;;IACA,IAAIJ,CAAJ,EAAO;MACHI,CAAC,GAAG,CAAJ;IACH,CAFD,MAEO;MACHA,CAAC,GAAG,CAAJ;IACH;;IACD,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,CAAC,CAACe,MAAtB,EAA8BD,CAAC,EAA/B,EAAmC;MAC/B,IAAIE,CAAC,GAAGhC,EAAE,CAACiC,WAAH,CAAe,KAAKzB,YAApB,CAAR;MACAwB,CAAC,CAACE,MAAF,GAAW,KAAKxB,WAAhB;MACA,IAAIyB,CAAC,GAAGf,CAAC,GAAGpB,EAAE,CAACiB,GAAH,CAAOC,UAAP,CAAkBQ,aAAlB,CAAgCV,CAAC,CAACc,CAAD,CAAD,GAAO,CAAvC,CAAZ;MACAE,CAAC,CAACL,YAAF,CAAe,YAAf,EAA6BC,mBAA7B,CAAiDZ,CAAC,CAACc,CAAD,CAAlD,EAAuDK,CAAvD;;MACA,IAAIA,CAAJ,EAAO;QACHN,CAAC;MACJ;IACJ;;IACD,IAAIO,CAAC,GAAI,KAAKpB,CAAC,CAACe,MAAF,GAAWF,CAAhB,CAAD,GAAuB,GAA/B;IACA,KAAKvB,QAAL,CAAc+B,MAAd,GAAuBD,CAAC,CAACE,OAAF,CAAU,CAAV,IAAe,GAAtC;EACH,CAhCI;EAiCLC,SAAS,EAAE,qBAAY;IACnBvC,EAAE,CAACwC,YAAH,CAAgBC,WAAhB,CAA4B,IAA5B;EACH;AAnCI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        iconSprite: cc.Sprite,\n        tipLabel: cc.Label,\n        baseCardNode: cc.Node,\n        parentPanel: cc.Node\n    },\n    initBy: function (e) {\n        var t = cc.JsonControl.getItemJson(e);\n        var i = cc.pvz.GameConfig[\"Quality\" + t.Quality + \"Tools\"];\n        var o = cc.pvz.PlayerData.getStageLevel();\n        cc.pvz.utils.setSpriteFrame(this.iconSprite, \"uiImage\", \"shop/shop\" + (e + 15));\n        var a = o < cc.pvz.GameConfig.ToolLockLevel[i[0] - 1];\n        this.baseCardNode.getComponent(\"RewardItem\").initShopBoxToolItem(i[0], a);\n        var c;\n        if (a) {\n            c = 1;\n        } else {\n            c = 0;\n        }\n        for (var s = 1; s < i.length; s++) {\n            var n = cc.instantiate(this.baseCardNode);\n            n.parent = this.parentPanel;\n            var r = o < cc.pvz.GameConfig.ToolLockLevel[i[s] - 1];\n            n.getComponent(\"RewardItem\").initShopBoxToolItem(i[s], r);\n            if (r) {\n                c++;\n            }\n        }\n        var h = (1 / (i.length - c)) * 100;\n        this.tipLabel.string = h.toFixed(2) + \"%\";\n    },\n    onCloseUI: function () {\n        cc.popupManager.removePopup(this);\n    }\n});\n"]}