{"version":3,"sources":["assets/game/scripts/game.js"],"names":["$prefabInfo","require","cc","Class","Component","properties","bg2Sp","Sprite","groundAreaNode","Node","bgMusic2","AudioClip","shieldBar","ProgressBar","shieldLabel","Label","hpBar","hpLabel","pauseNode","speedNode","speedLabel","statsBtnNode","levelsJsonFile","JsonAsset","ground","objsRoot","bulletsRoot","fightNodes","heroJsonFile","eHurtNum","eHurtCritNum","eDiePrefab","ePoisonPrefab","eSlowPrefab","eIcePrefab","eWeakPrefab","eHpPrefab","eBossHpPrefab","eHitPrefab","eHitGroundPrefab","pHurtNum","pFireEffect","addBuffPrefab","accBuffPrefab","waveEndAniSpine","sp","Skeleton","moneyIconNode","tryPlantNode","tryPlantIcon","statsPanel","statsItemPrefab","angerBar","angerBarSp","angerBarSpfs","SpriteFrame","angerEmptyTip","angerBarNode","angerModeNode","onLoad","node","active","startLogic","t","e","i","hub","levelData","n","getBoundingBoxToWorld","groundAreaLB","convertToNodeSpaceAR","v2","xMin","yMin","groundAreaTR","xMax","yMax","timePaused","msIndex","frameActions","cbs2","cbId","pausedCbs","pausedCbs2","hasEnded","pvz","runtimeData","mode","maxWave","wave","isLastWave","enemys","taskEnemyCount1","taskEnemyCount2","butler","on","onGetHpBuff","initHeroes","updateHp","updateShield","updateSpeed","isAngerPressed","EventType","TOUCH_START","startAngerMode","TOUCH_END","stopAngerMode","TOUCH_CANCEL","updateAnger","director","getCollisionManager","enabled","showGame1st","guideManager","showGuide","hideFinger","tip","beginEmitEnemys","Director","EVENT_BEFORE_SCENE_LOADING","resetSpeed","onBackFromGame","forEach","removeAllChildren","off","heroes","IKBone","tween","to","x","y","start","level","popupManager","showToast","utils","useBundleAsset","emitEnemys","json","setSpeedLogic","progress","anger","width","opacity","getMoneyWPos","convertToWorldSpaceAR","Vec2","ZERO","getAngerBarWPos","showBuffEffect","o","addNode","s","getComponent","c","setAnimation","a","r","findBone","setTrackCompleteListener","bag","reduce","hp","item","maxHp","string","Math","round","shieldValue","parent","floor","insertFrameAction","find","ms","cbs","push","insertFrameCB","findIndex","length","splice","cb","id","setTimeout","clearTimeout","time","updateTimeout","setInterval","inteval","clearInterval","update","call","min","shift","playMusic","spriteFrame","bgMusic","startTween","_union","runAction","targetedAction","_target","pauseGame","pauseDirector","resumeGame","resumeDirector","onPopup1st","onAllClosed","blockRoot","boardItemsRoot","children","Prefab","instantiate","position","spine","initBy","index","lv1","PlayerData","getToolData","lv","maxLv","position2","add","attOffset","hero","initHeroNodes","hasHero","some","info","wavePlusHp","wavePlusAtk","hpwave","atkwave","enemyCount","filter","EnemyNum","Space","executeEvent2","sort","EnemyId","executeEventNewEnemy","math","randomRange","atk","actBuff2","hpadd","atkadd","getStageLevel","addEnemyIn","exp","showHpBar","addEnemy","delEnemy","getBuffValue","lvupJsonFile","playEffectAsync","popup","scale","checkIsSucc","updateExp","addEnemyHpBar","hpBarPos","addMissionProgress","GameConfig","MissionType","addMoney","isSucc","setCompleteListener","autoTimes","lv2Count","backToBag","TAUtils","trackEndLevel","chooseEnemy","sub","lengthSqr","chooseEnemys","randomRangeInt","chooseEnemyByBullet","chooseHero","abs","chooseMinHpHero","getHeroesMaxMarginX","max","righMargin","checkIsFail","hasDie","hasReborn","loadScene","showEnemyHurtNum","Animation","play","showJsEffect","showHeroHurtNum","onClickSpeed","openSpeed","speed","timeScale","getScheduler","setTimeScale","onClickStats","isStatsShown","hideStats","updateStats","wrapMode","WrapMode","Normal","stats","zd","root","__id","zIndex","setSpriteFrame","quality","skeletonData","name","toFixed","Reverse","once"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $prefabInfo = require(\"../../scripts/PrefabInfo\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        bg2Sp: cc.Sprite,\n        groundAreaNode: cc.Node,\n        bgMusic2: cc.AudioClip,\n        shieldBar: cc.ProgressBar,\n        shieldLabel: cc.Label,\n        hpBar: cc.ProgressBar,\n        hpLabel: cc.Label,\n        pauseNode: cc.Node,\n        speedNode: cc.Node,\n        speedLabel: cc.Label,\n        statsBtnNode: cc.Node,\n        levelsJsonFile: cc.JsonAsset,\n        ground: cc.Node,\n        objsRoot: cc.Node,\n        bulletsRoot: cc.Node,\n        fightNodes: [cc.Node],\n        heroJsonFile: cc.JsonAsset,\n        eHurtNum: $prefabInfo,\n        eHurtCritNum: $prefabInfo,\n        eDiePrefab: $prefabInfo,\n        ePoisonPrefab: $prefabInfo,\n        eSlowPrefab: $prefabInfo,\n        eIcePrefab: $prefabInfo,\n        eWeakPrefab: $prefabInfo,\n        eHpPrefab: $prefabInfo,\n        eBossHpPrefab: $prefabInfo,\n        eHitPrefab: $prefabInfo,\n        eHitGroundPrefab: $prefabInfo,\n        pHurtNum: $prefabInfo,\n        pFireEffect: $prefabInfo,\n        addBuffPrefab: $prefabInfo,\n        accBuffPrefab: $prefabInfo,\n        waveEndAniSpine: sp.Skeleton,\n        moneyIconNode: cc.Node,\n        tryPlantNode: cc.Node,\n        tryPlantIcon: cc.Sprite,\n        statsPanel: cc.Node,\n        statsItemPrefab: $prefabInfo,\n        angerBar: cc.ProgressBar,\n        angerBarSp: cc.Sprite,\n        angerBarSpfs: [cc.SpriteFrame],\n        angerEmptyTip: cc.Node,\n        angerBarNode: cc.Node,\n        angerModeNode: cc.Node\n    },\n    onLoad: function () {\n        this.waveEndAniSpine.node.active = !1;\n        if (this.statsPanel) {\n            this.statsPanel.active = !1;\n        }\n        this.angerEmptyTip.active = !1;\n    },\n    startLogic: function (t) {\n        var e = this;\n        var i = this.hub.levelData;\n        this.levelData = i;\n        var n = this.groundAreaNode.getBoundingBoxToWorld();\n        this.groundAreaLB = this.objsRoot.convertToNodeSpaceAR(cc.v2(n.xMin, n.yMin));\n        this.groundAreaTR = this.objsRoot.convertToNodeSpaceAR(cc.v2(n.xMax, n.yMax));\n        this.timePaused = !1;\n        this.t = 0;\n        this.msIndex = 0;\n        this.frameActions = [];\n        this.cbs2 = [];\n        this.cbId = 1;\n        this.pausedCbs = [];\n        this.pausedCbs2 = [];\n        this.hasEnded = !1;\n        this.statsBtnNode.active = !0;\n        if (2 == cc.pvz.runtimeData.mode) {\n            this.maxWave = 99999;\n        } else {\n            this.maxWave = i.wave;\n        }\n        this.isLastWave = 2 != cc.pvz.runtimeData.mode && cc.pvz.runtimeData.wave == i.wave - 1;\n        this.enemys = [];\n        this.taskEnemyCount1 = 0;\n        this.taskEnemyCount2 = 0;\n        cc.butler.node.on(\"maxHp\", this.onGetHpBuff, this);\n        this.initHeroes(t);\n        this.updateHp(!1);\n        this.updateShield();\n        this.updateSpeed();\n        this.isAngerPressed = !1;\n        this.angerBarNode.on(\n            cc.Node.EventType.TOUCH_START,\n            function () {\n                e.startAngerMode();\n            },\n            this\n        );\n        this.angerBarNode.on(\n            cc.Node.EventType.TOUCH_END,\n            function () {\n                e.stopAngerMode();\n                e.angerEmptyTip.active = !1;\n            },\n            this\n        );\n        this.angerBarNode.on(\n            cc.Node.EventType.TOUCH_CANCEL,\n            function () {\n                e.stopAngerMode();\n                e.angerEmptyTip.active = !1;\n            },\n            this\n        );\n        this.updateAnger();\n        cc.director.getCollisionManager().enabled = !0;\n        cc.pvz.runtimeData.mode;\n        if (cc.pvz.runtimeData.showGame1st && 0 == cc.pvz.runtimeData.wave) {\n            cc.guideManager.showGuide(\n                0,\n                [\n                    {\n                        hideFinger: !0,\n                        tip: \"僵尸正在进攻我们的花园，赶紧消灭他们!\"\n                    }\n                ],\n                function (t) {\n                    if (t) {\n                        e.beginEmitEnemys();\n                    }\n                }\n            );\n        } else {\n            this.beginEmitEnemys();\n        }\n        this.enabled = !0;\n        cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LOADING, this.resetSpeed, this);\n    },\n    onBackFromGame: function () {\n        this.stopAngerMode();\n        this.fightNodes.forEach(function (t) {\n            return t.removeAllChildren();\n        });\n        cc.butler.node.off(\"maxHp\", this.onGetHpBuff, this);\n        this.enabled = !1;\n        cc.director.off(cc.Director.EVENT_BEFORE_SCENE_LOADING, this.resetSpeed, this);\n        cc.director.getCollisionManager().enabled = !1;\n        this.heroes.forEach(function (t) {\n            if (t.IKBone) {\n                cc.tween(t.IKBone)\n                    .to(0.064, {\n                        x: 150,\n                        y: 50\n                    })\n                    .start();\n            }\n        });\n    },\n    beginEmitEnemys: function () {\n        var t = this;\n        var e = null;\n        var i = null;\n        switch (cc.pvz.runtimeData.mode) {\n            case 0:\n                e = \"game\";\n                i = \"config/Level\" + this.levelData.level;\n                if (cc.pvz.runtimeData.showGame1st) {\n                    i += \"B\";\n                }\n                break;\n            case 1:\n                e = \"game\";\n                i = \"config/\" + this.levelData.level;\n                break;\n            case 2:\n                e = \"rank\";\n                i = \"config/\" + this.levelData.level;\n                cc.popupManager.showToast(\"第\" + (cc.pvz.runtimeData.wave + 1) + \"波开始\");\n        }\n        cc.pvz.utils.useBundleAsset(e, i, cc.JsonAsset, function (e) {\n            t.emitEnemys(e.json);\n        });\n    },\n    resetSpeed: function () {\n        this.setSpeedLogic(1);\n    },\n    updateAnger: function () {\n        this.angerBar.progress = cc.pvz.runtimeData.anger / 1e3;\n        if (this.angerBar.node.width > 10) {\n            this.angerBar.node.opacity = 255;\n        } else {\n            this.angerBar.node.opacity = 0;\n        }\n    },\n    getMoneyWPos: function () {\n        return this.moneyIconNode.convertToWorldSpaceAR(cc.Vec2.ZERO);\n    },\n    getAngerBarWPos: function () {\n        return this.angerBar.node.convertToWorldSpaceAR(cc.v2(this.angerBar.node.width, 0));\n    },\n    showBuffEffect: function (t, e, i, n) {\n        var o = this.addBuffPrefab.addNode(e);\n        var s = o.getComponent(sp.Skeleton);\n        var c = s.setAnimation(0, t, !1);\n        if (i) {\n            var a = o.convertToNodeSpaceAR(i);\n            var r = s.findBone(\"IK\");\n            r.x = a.x;\n            r.y = a.y;\n        }\n        if (n) {\n            s.setTrackCompleteListener(c, n);\n        }\n    },\n    onGetHpBuff: function () {\n        this.bag.updateHp();\n        this.updateHp();\n    },\n    updateHp: function (t) {\n        var e = this.heroes.reduce(function (t, e) {\n            return t + e.hp;\n        }, 0);\n        var i = this.heroes.reduce(function (t, e) {\n            return t + e.item.maxHp;\n        }, 0);\n        if (0 != i) {\n            this.hpLabel.string = Math.round(e);\n            if (t) {\n                cc.tween(this.hpBar)\n                    .to(0.1, {\n                        progress: e / i\n                    })\n                    .start();\n            } else {\n                this.hpBar.progress = e / i;\n            }\n        }\n    },\n    updateShield: function () {\n        var t = this.heroes.reduce(function (t, e) {\n            return t + e.shieldValue;\n        }, 0);\n        var e = this.heroes.reduce(function (t, e) {\n            return t + e.item.maxHp;\n        }, 0);\n        var i = t > 0;\n        this.shieldBar.node.active = i;\n        this.shieldLabel.node.parent.active = i;\n        if (i) {\n            this.shieldLabel.string = Math.floor(t);\n            this.shieldBar.progress = t / e;\n        }\n    },\n    insertFrameAction: function (t, e) {\n        var i = this.frameActions.find(function (e) {\n            return e.ms == t;\n        });\n        if (i) {\n            i.cbs.push(e);\n        } else {\n            this.frameActions.push({\n                ms: t,\n                cbs: [e]\n            });\n        }\n    },\n    insertFrameCB: function (t, e) {\n        var i = this.cbId;\n        var n = this.cbs.findIndex(function (e) {\n            return e.ms > t;\n        });\n        var o;\n        if (-1 == n) {\n            o = this.cbs.length;\n        } else {\n            o = n;\n        }\n        this.cbs.splice(o, 0, {\n            ms: t,\n            cb: e,\n            id: i\n        });\n        this.cbId++;\n        return i;\n    },\n    setTimeout: function (t, e, i) {\n        if (i) {\n            this.clearTimeout(i);\n        }\n        var n = Math.floor(cc.pvz.time) + e;\n        return this.insertFrameCB(n, t);\n    },\n    clearTimeout: function (t) {\n        var e = this.cbs.findIndex(function (e) {\n            return e.id == t;\n        });\n        if (-1 != e) {\n            this.cbs.splice(e, 1);\n        }\n    },\n    updateTimeout: function (t, e, i) {\n        var n = this.cbs.find(function (t) {\n            return t.id == i;\n        });\n        if (n) {\n            return (n.ms += e), i;\n        } else {\n            return this.setTimeout(t, e, i);\n        }\n    },\n    setInterval: function (t, e) {\n        var i = this.cbId;\n        this.cbs2.push({\n            id: i,\n            cb: t,\n            ms: Math.floor(cc.pvz.time) + e,\n            inteval: e\n        });\n        this.cbId++;\n        return i;\n    },\n    clearInterval: function (t) {\n        var e = this.cbs2.findIndex(function (e) {\n            return e.id == t;\n        });\n        if (-1 != e) {\n            this.cbs2.splice(e, 1);\n        }\n    },\n    update: function (t) {\n        var e = this;\n        if (!this.timePaused) {\n            this.t += t;\n            this.t;\n            var i = 1e3 * this.t;\n            if (this.msIndex < this.frameActions.length && i >= this.frameActions[this.msIndex].ms) {\n                this.frameActions[this.msIndex].cbs.forEach(function (t) {\n                    return t.call(e);\n                });\n                this.msIndex++;\n            }\n            if (this.isAngerPressed) {\n                cc.pvz.runtimeData.anger -= 125 * t;\n                if (cc.pvz.runtimeData.anger <= 0) {\n                    this.angerEmptyTip.active = !0;\n                    this.stopAngerMode();\n                }\n            }\n            cc.pvz.runtimeData.anger = Math.min(1e3, cc.pvz.runtimeData.anger + 5 * t);\n            this.updateAnger();\n        }\n        for (; this.cbs.length > 0 && cc.pvz.time > this.cbs[0].ms; ) {\n            this.cbs.shift().cb.call(this);\n        }\n        this.cbs2.forEach(function (t) {\n            if (cc.pvz.time >= t.ms) {\n                t.cb.call(e);\n                t.ms += t.inteval;\n            }\n        });\n    },\n    startAngerMode: function () {\n        if (this.isAngerPressed || this.hasEnded) {\n            //\n        } else {\n            if (cc.pvz.runtimeData.anger > 0) {\n                cc.butler.playMusic(this.bgMusic2);\n                this.isAngerPressed = !0;\n                this.angerBarSp.spriteFrame = this.angerBarSpfs[1];\n                this.angerModeNode.active = !0;\n                this.heroes.forEach(function (t) {\n                    return t.item.startAngerMode();\n                });\n            }\n        }\n    },\n    stopAngerMode: function () {\n        if (this.isAngerPressed) {\n            cc.butler.playMusic(this.bag.bgMusic);\n            this.isAngerPressed = !1;\n            this.angerBarSp.spriteFrame = this.angerBarSpfs[0];\n            this.angerModeNode.active = !1;\n            this.heroes.forEach(function (t) {\n                return t.item.stopAngerMode();\n            });\n        }\n    },\n    startTween: function (t) {\n        var e = t._union();\n        this.node.runAction(cc.targetedAction(t._target, e));\n    },\n    pauseGame: function () {\n        cc.butler.pauseDirector(1);\n    },\n    resumeGame: function () {\n        cc.butler.resumeDirector(1);\n    },\n    onPopup1st: function () {\n        if (this.hasEnded) {\n            //\n        } else {\n            this.timePaused = !0;\n        }\n    },\n    onAllClosed: function () {\n        this.timePaused = !1;\n    },\n    initHeroes: function (t) {\n        var e = this;\n        this.heroes = [];\n        t.blockRoot.boardItemsRoot.children.forEach(function (t, i) {\n            var n = t.getComponent(\"Item\");\n            cc.pvz.utils.useBundleAsset(\"actors\", \"plant/plant\" + n.id, cc.Prefab, function (t) {\n                var o = cc.instantiate(t);\n                var s = o.getComponent(\"Hero\");\n                o.position = e.objsRoot.convertToNodeSpaceAR(n.spine.node.convertToWorldSpaceAR(cc.Vec2.ZERO));\n                o.parent = e.objsRoot;\n                s.initBy(e, n, {\n                    json: n.json,\n                    index: i,\n                    id: n.id,\n                    lv1: cc.pvz.PlayerData.getToolData(n.id).lv - 1,\n                    maxLv: 0\n                });\n                s.position2 = o.position.add(n.attOffset);\n                n.hero = s;\n                n.initHeroNodes();\n                e.heroes.push(s);\n                e.updateHp(!1);\n            });\n        });\n    },\n    hasHero: function (t) {\n        return this.heroes.some(function (e) {\n            return e.info.id == t && e.hp > 0;\n        });\n    },\n    emitEnemys: function (t) {\n        var e = this;\n        var i = cc.pvz.runtimeData.wave + 1;\n        if (2 == cc.pvz.runtimeData.mode) {\n            this.wavePlusHp = 0;\n            this.wavePlusAtk = 0;\n            if (i > 10) {\n                this.wavePlusHp = (i - 10) * this.levelData.hpwave;\n                this.wavePlusAtk = (i - 10) * this.levelData.atkwave;\n            }\n            if (i > 18) {\n                i = ((i - 19) % 5) + 14;\n            }\n        }\n        this.enemyCount = 0;\n        t.filter(function (t) {\n            return t.wave == i;\n        }).forEach(function (t) {\n            var i = e.t + t.time;\n            for (var n = 0; n < t.EnemyNum; n++) {\n                var o = 1e3 * (i + n * t.Space);\n                e.insertFrameAction(o, function () {\n                    e.executeEvent2(t);\n                });\n            }\n            e.enemyCount += t.EnemyNum;\n        });\n        this.frameActions.sort(function (t, e) {\n            return t.ms - e.ms;\n        });\n    },\n    executeEvent2: function (t) {\n        var e = this;\n        cc.pvz.utils.useBundleAsset(\"actors\", \"Zombie/Enemy\" + t.EnemyId, cc.Prefab, function (i) {\n            e.executeEventNewEnemy(i, t);\n        });\n    },\n    executeEventNewEnemy: function (t, e) {\n        var i = cc.instantiate(t);\n        var n = cc.math.randomRange(this.groundAreaLB.y, this.groundAreaTR.y);\n        var o = e.hp;\n        var s = e.atk;\n        switch (cc.pvz.runtimeData.actBuff2) {\n            case 101:\n            case 102:\n            case 103:\n                o *= [1.3, 1.4, 1.5][cc.pvz.runtimeData.actBuff2 - 101];\n                break;\n            case 107:\n            case 108:\n            case 109:\n                s *= [1.3, 1.4, 1.5][cc.pvz.runtimeData.actBuff2 - 107];\n        }\n        switch (cc.pvz.runtimeData.mode) {\n            case 0:\n                o *= this.levelData.hpadd / 100;\n                s *= this.levelData.atkadd / 100;\n                break;\n            case 1:\n                o *= 1 + (cc.pvz.PlayerData.getStageLevel() - 9) * this.levelData.hpadd;\n                s *= 1 + (cc.pvz.PlayerData.getStageLevel() - 9) * this.levelData.atkadd;\n                break;\n            case 2:\n                o *= 1 + (cc.pvz.PlayerData.getStageLevel() - 5) * this.levelData.hpadd + this.wavePlusHp;\n                s *= 1 + (cc.pvz.PlayerData.getStageLevel() - 5) * this.levelData.atkadd + this.wavePlusAtk;\n        }\n        var c = this.addEnemyIn(e.EnemyId, i, 360, n, o, s);\n        if (2 == cc.pvz.runtimeData.mode) {\n            c.exp = 0.6 * c.exp;\n        }\n    },\n    addEnemyIn: function (t, e, i, n, o, s) {\n        e.parent = this.objsRoot;\n        e.x = i;\n        e.y = n;\n        var c = e.getComponent(\"Enemy\");\n        c.initBy(this, this.bulletsRoot, o, s);\n        c.id = t;\n        c.showHpBar = t > 100;\n        this.addEnemy(c);\n        return c;\n    },\n    addEnemy: function (t) {\n        this.enemys.push(t);\n    },\n    delEnemy: function (t) {\n        var e = this.enemys.findIndex(function (e) {\n            return e == t;\n        });\n        if (-1 != e) {\n            this.enemys.splice(e, 1);\n        }\n        t.node.parent = null;\n        this.enemyCount--;\n        if (t.id > 100) {\n            this.taskEnemyCount1++;\n        } else {\n            this.taskEnemyCount2++;\n        }\n        if ((!this.isLastWave || this.enemyCount > 0) && t.exp > 0) {\n            var i = t.exp;\n            var n = cc.pvz.runtimeData.getBuffValue(11);\n            if (n > 0) {\n                i = Math.round(i * (1 + 0.01 * n));\n            }\n            cc.pvz.runtimeData.exp += i;\n            var o = this.hub.lvupJsonFile.json[cc.pvz.runtimeData.lv].exp;\n            if (cc.pvz.runtimeData.exp >= o) {\n                cc.pvz.runtimeData.exp -= o;\n                cc.pvz.runtimeData.lv++;\n                cc.butler.playEffectAsync(\"game\", \"sound/playerlevelup\");\n                cc.popupManager.popup(\n                    \"game\",\n                    \"BuffUI\",\n                    \"UIGameBuff\",\n                    {\n                        scale: !1\n                    },\n                    this\n                );\n            } else {\n                this.checkIsSucc();\n            }\n            this.hub.updateExp();\n        } else {\n            this.checkIsSucc();\n        }\n    },\n    addEnemyHpBar: function (t) {\n        if (!t.hpBar) {\n            var e = (t.showHpBar ? this.eBossHpPrefab : this.eHpPrefab).addNode(t.node.position);\n            cc.find(\"node\", e).position = t.hpBarPos;\n            t.hpBar = e.getComponent(cc.ProgressBar);\n        }\n    },\n    checkIsSucc: function () {\n        var t = this;\n        if (!this.hasEnded && 0 == this.enemyCount) {\n            cc.pvz.runtimeData.wave++;\n            if (this.taskEnemyCount1 > 0) {\n                cc.pvz.PlayerData.addMissionProgress(\n                    cc.pvz.GameConfig.MissionType[\"击败首领n个\"],\n                    this.taskEnemyCount1\n                );\n            }\n            if (this.taskEnemyCount2 > 0) {\n                cc.pvz.PlayerData.addMissionProgress(\n                    cc.pvz.GameConfig.MissionType[\"击败僵尸n个\"],\n                    this.taskEnemyCount2\n                );\n            }\n            cc.pvz.runtimeData.addMoney(10 + cc.pvz.runtimeData.getBuffValue(5));\n            if (this.isLastWave) {\n                this.isSucc = !0;\n                this.hasEnded = !0;\n                this.enabled = !1;\n                this.setSpeedLogic(1);\n                cc.popupManager.popup(\n                    \"game\",\n                    \"win\",\n                    \"UIGameEnd\",\n                    {\n                        scale: !1\n                    },\n                    this\n                );\n                cc.butler.playEffectAsync(\"game\", \"sound/win\");\n            } else {\n                this.waveEndAniSpine.node.active = !0;\n                var e = this.moneyIconNode.convertToWorldSpaceAR(cc.Vec2.ZERO);\n                var i = this.waveEndAniSpine.node.convertToNodeSpaceAR(e);\n                var n = this.waveEndAniSpine.findBone(\"IK\");\n                n.x = i.x;\n                n.y = i.y;\n                this.waveEndAniSpine.setCompleteListener(function () {\n                    cc.pvz.runtimeData.autoTimes++;\n                    cc.pvz.runtimeData.lv2Count = 1;\n                    t.hub.backToBag();\n                    t.waveEndAniSpine.node.active = !1;\n                    t.waveEndAniSpine.setCompleteListener(null);\n                });\n            }\n            if (0 == cc.pvz.runtimeData.mode) {\n                cc.pvz.TAUtils.trackEndLevel(cc.pvz.runtimeData.level, cc.pvz.runtimeData.wave - 1, !0);\n            }\n        }\n    },\n    chooseEnemy: function (t, e) {\n        if (this.hasEnded) {\n            return null;\n        }\n        var i = this.enemys.filter(function (t) {\n            return t.hp > 0;\n        });\n        var n;\n        if (this.isAngerPressed) {\n            n = 1e6;\n        } else {\n            n = e;\n        }\n        var o = null;\n        i.forEach(function (e) {\n            var i = e.node.position.sub(t.node.position).lengthSqr();\n            if (i < n) {\n                n = i;\n                o = e;\n            }\n        });\n        return o;\n    },\n    chooseEnemys: function (t, e, i) {\n        var n = this;\n        if (this.hasEnded) {\n            return null;\n        }\n        var o = this.enemys.filter(function (i) {\n            return (i.hp > 0 && n.isAngerPressed) || i.node.position.sub(t.node.position).lengthSqr() < e;\n        });\n        if (i >= o.length) {\n            return o;\n        }\n        var s = [];\n        for (var c = 0; c < i; c++) {\n            var a = cc.math.randomRangeInt(0, o.length);\n            s.push(o.splice(a, 1)[0]);\n        }\n        return s;\n    },\n    chooseEnemyByBullet: function () {\n        if (this.hasEnded) {\n            return null;\n        }\n        var t = this.enemys.filter(function (t) {\n            return t.hp > 0;\n        });\n        return t[cc.math.randomRangeInt(0, t.length)];\n    },\n    chooseHero: function (t) {\n        if (this.hasEnded) {\n            return null;\n        }\n        var e = this.heroes.filter(function (t) {\n            return t.hp > 0;\n        });\n        var i = 1600;\n        var n = e[0];\n        for (var o = 0; o < e.length; o++) {\n            var s;\n            if (e[o].position2) {\n                s = e[o].position2.x;\n            } else {\n                s = e[o].node.x;\n            }\n            var c = Math.abs(s - t.x);\n            if (c < i) {\n                i = c;\n                n = e[o];\n            }\n        }\n        return n;\n    },\n    chooseMinHpHero: function () {\n        var t = 1;\n        var e = null;\n        for (var i = 0; i < this.heroes.length; i++) {\n            if (this.heroes[i].hp > 0) {\n                var n = this.heroes[i].hp / this.heroes[i].item.maxHp;\n                if (n < t) {\n                    t = n;\n                    e = this.heroes[i];\n                }\n            }\n        }\n        return e;\n    },\n    getHeroesMaxMarginX: function () {\n        return this.heroes\n            .filter(function (t) {\n                return t.hp > 0;\n            })\n            .reduce(function (t, e) {\n                return Math.max(t, e.node.x + e.item.righMargin);\n            }, -360);\n    },\n    checkIsFail: function () {\n        var t = this;\n        if (\n            this.heroes.some(function (t) {\n                return !t.hasDie;\n            })\n        ) {\n            //\n        } else {\n            this.isSucc = !1;\n            this.hasEnded = !0;\n            cc.butler.playEffectAsync(\"game\", \"sound/fail\");\n            if (2 == cc.pvz.runtimeData.mode) {\n                this.setSpeedLogic(1),\n                    cc.popupManager.popup(\n                        \"rank\",\n                        \"Rankwin\",\n                        \"UIRankEnd\",\n                        {\n                            scale: !1\n                        },\n                        this\n                    );\n            } else {\n                if (cc.pvz.runtimeData.hasReborn) {\n                    this.setSpeedLogic(1),\n                        cc.popupManager.popup(\n                            \"game\",\n                            \"win\",\n                            \"UIGameEnd\",\n                            {\n                                scale: !1\n                            },\n                            this\n                        ),\n                        0 == cc.pvz.runtimeData.mode &&\n                            cc.pvz.TAUtils.trackEndLevel(cc.pvz.runtimeData.level, cc.pvz.runtimeData.wave, !1);\n                } else {\n                    cc.popupManager.popup(\n                        \"game\",\n                        \"fuhuoUI\",\n                        \"UIGameReborn\",\n                        {\n                            scale: !1\n                        },\n                        function (e) {\n                            if (e) {\n                                cc.pvz.runtimeData.addMoney(30);\n                                cc.pvz.runtimeData.anger = 1e3;\n                                cc.pvz.runtimeData.hasReborn = !0;\n                                cc.pvz.runtimeData.autoTimes++;\n                                cc.pvz.runtimeData.lv2Count = 1;\n                                cc.director.loadScene(\"game1\");\n                            } else {\n                                cc.popupManager.popup(\n                                    \"game\",\n                                    \"win\",\n                                    \"UIGameEnd\",\n                                    {\n                                        scale: !1\n                                    },\n                                    t\n                                );\n                            }\n                        }\n                    );\n                }\n            }\n        }\n    },\n    showEnemyHurtNum: function (t, e, i) {\n        var n = (1 == t ? this.eHurtCritNum : this.eHurtNum).addNode(e);\n        n.x += cc.math.randomRange(-40, 40);\n        n.y += 50 + cc.math.randomRange(-10, 40);\n        cc.find(\"num\", n).getComponent(cc.Label).string = \"-\" + Math.max(1, Math.floor(i));\n        n.getComponent(cc.Animation).play();\n        n.getComponent(cc.Animation).on(\"finished\", function () {\n            n.parent = null;\n        });\n    },\n    showJsEffect: function (t, e) {\n        if (12 != e) {\n            this.eHitPrefab\n                .addNode(t)\n                .getComponent(sp.Skeleton)\n                .setAnimation(0, \"zd\" + e + \"_hit\" + cc.math.randomRangeInt(1, 4), !1);\n        }\n        this.eHitGroundPrefab\n            .addNode(t)\n            .getComponent(sp.Skeleton)\n            .setAnimation(0, \"zd\" + e + \"_js\" + cc.math.randomRangeInt(1, 4), !1);\n    },\n    showHeroHurtNum: function (t, e) {\n        var i = this.pHurtNum.addNode(t);\n        i.x += cc.math.randomRange(-40, 40);\n        i.y += cc.math.randomRange(10, 70);\n        cc.find(\"num\", i).getComponent(cc.Label).string = \"-\" + Math.floor(e);\n        i.getComponent(cc.Animation).play();\n        i.getComponent(cc.Animation).on(\"finished\", function () {\n            i.parent = null;\n        });\n    },\n    onClickSpeed: function () {\n        if (cc.pvz.runtimeData.openSpeed) {\n            if (1 == cc.pvz.runtimeData.speed) {\n                cc.pvz.runtimeData.speed = 2;\n            } else {\n                cc.pvz.runtimeData.speed = 1;\n            }\n            this.updateSpeed();\n        } else {\n            cc.popupManager.popup(\n                \"game\",\n                \"2speedUI\",\n                \"UISpeed\",\n                {\n                    scale: !1\n                },\n                this\n            );\n        }\n    },\n    updateSpeed: function () {\n        this.setSpeedLogic(cc.pvz.runtimeData.speed);\n    },\n    setSpeedLogic: function (t) {\n        sp.timeScale = t;\n        cc.director.getScheduler().setTimeScale(t);\n    },\n    onClickStats: function () {\n        if (this.isStatsShown) {\n            this.hideStats();\n        } else {\n            this.statsPanel.active = !0;\n            this.isStatsShown = !0;\n            this.updateStats();\n            this.statsPanel.getComponent(cc.Animation).play().wrapMode = cc.WrapMode.Normal;\n            this.statsPanel.getComponent(cc.Animation).off(\"finished\");\n        }\n    },\n    updateStats: function () {\n        var t = this;\n        if (this.isStatsShown) {\n            var e = Math.max(\n                1,\n                cc.pvz.runtimeData.stats.reduce(function (t, e) {\n                    return t + e;\n                }, 0)\n            );\n            this.heroes\n                .sort(function (t, e) {\n                    return cc.pvz.runtimeData.stats[e.info.id] - cc.pvz.runtimeData.stats[t.info.id];\n                })\n                .forEach(function (i, n) {\n                    if (i.zd) {\n                        var o = t.statsItemPrefab.root.children.find(function (t) {\n                            return t.__id == i.info.id;\n                        });\n                        if (o) {\n                            //\n                        } else {\n                            (o = t.statsItemPrefab.addNode()).__id = i.info.id;\n                        }\n                        o.zIndex = n;\n                        var s = cc.pvz.runtimeData.stats[i.info.id];\n                        var c = i.info.json;\n                        cc.pvz.utils.setSpriteFrame(\n                            cc.find(\"quality\", o).getComponent(cc.Sprite),\n                            \"uiImage\",\n                            \"item/pz_\" + c.quality\n                        );\n                        var a = cc.find(\"icon\", o).getComponent(sp.Skeleton);\n                        a.skeletonData = i.spine.skeletonData;\n                        a.setAnimation(0, \"Idle\", !0);\n                        cc.find(\"name\", o).getComponent(cc.Label).string = c.name;\n                        var r = s / e;\n                        cc.find(\"num2\", o).getComponent(cc.Label).string = (100 * r).toFixed(2) + \"%\";\n                        cc.find(\"bar\", o).getComponent(cc.ProgressBar).progress = r;\n                    }\n                });\n        }\n    },\n    hideStats: function () {\n        var t = this;\n        this.isStatsShown = !1;\n        this.statsPanel.getComponent(cc.Animation).play().wrapMode = cc.WrapMode.Reverse;\n        this.statsPanel.getComponent(cc.Animation).once(\"finished\", function () {\n            t.statsPanel.active = !1;\n        });\n    }\n});"]}