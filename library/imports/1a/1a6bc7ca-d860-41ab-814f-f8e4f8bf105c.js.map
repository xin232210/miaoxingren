{"version":3,"sources":["assets/mainUI/scripts/UIAdBuy.js"],"names":["cc","Class","Component","properties","rewardItem","Node","nameLabel","Label","descLabel","initBy","e","t","isLookAd","rewardData","callBack","getComponent","initRewardItem","itemId","toolId","pvz","GameConfig","ItemType","i","JsonControl","getToolJson","string","name","desc","o","getItemJson","Name","Info","TAUtils","trackAdUIShow","AdType","onClickBuy","AdUtils","showAdRewardVideo","onAdClose","PlayerData","updateAdBuyBankTimes","updateAdBuyToolTimes","popupManager","popup","ad","scale","UIFromType","removePopup","onCloseUI"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        rewardItem: cc.Node,\n        nameLabel: cc.Label,\n        descLabel: cc.Label\n    },\n    initBy: function (e, t) {\n        if (void 0 === t) {\n            t = null;\n        }\n        this.isLookAd = !1;\n        this.rewardData = e;\n        this.callBack = t;\n        this.rewardItem.getComponent(\"RewardItem\").initRewardItem(this.rewardData, !1);\n        this.itemId = this.rewardData.itemId;\n        this.toolId = this.rewardData.toolId;\n        if (this.itemId === cc.pvz.GameConfig.ItemType[\"固定碎片\"]) {\n            var i = cc.JsonControl.getToolJson(this.toolId);\n            this.nameLabel.string = i.name;\n            this.descLabel.string = i.desc;\n        } else {\n            var o = cc.JsonControl.getItemJson(this.itemId);\n            this.nameLabel.string = o.Name;\n            this.descLabel.string = o.Info;\n        }\n        cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"道具不足\"]);\n    },\n    onClickBuy: function () {\n        var e = this;\n        if (this.isLookAd) {\n            //\n        } else {\n            this.isLookAd = !0;\n            cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"道具不足\"], function (t) {\n                e.onAdClose(t);\n            });\n        }\n    },\n    onAdClose: function (e) {\n        this.isLookAd = !1;\n        if (e) {\n            if (2 == this.itemId || 3 == this.itemId) {\n                cc.pvz.PlayerData.updateAdBuyBankTimes(2 == this.itemId ? 0 : 1);\n            } else {\n                cc.pvz.PlayerData.updateAdBuyToolTimes(this.toolId);\n            }\n            cc.popupManager.popup(\n                \"mainUI\",\n                \"getrewardUI\",\n                \"UIReward\",\n                {\n                    ad: !1,\n                    scale: !1\n                },\n                [this.rewardData],\n                cc.pvz.GameConfig.UIFromType[\"道具不足\"],\n                this.callBack\n            );\n            cc.popupManager.removePopup(this);\n        }\n    },\n    onCloseUI: function () {\n        if (this.isLookAd) {\n            //\n        } else {\n            cc.popupManager.removePopup(this);\n        }\n    }\n});\n"]}