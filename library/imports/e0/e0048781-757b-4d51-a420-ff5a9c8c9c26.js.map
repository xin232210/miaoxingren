{"version":3,"sources":["assets/mainUI/scripts/UIRankMode.js"],"names":["cc","Class","Component","properties","maxWaveLabel","Label","tryCountLabel","rankDot","Node","levelPlayerPanel","onLoad","UIRankMode","refreshLevelPlayerShow","getComponent","initHeroShow","initBy","node","active","pvz","utils","fadeInBtn","hasPopupType","UIPage","Rank","string","tmpScore","player","rankCount","tmpNewRecord","showFinish","onClickClose","onClickStart","popupManager","showToast","PlayerData","isEnoughArrayTool","getPower","GameConfig","BattlePower","isHaveBuyPowerTimes","popup","ad","scale","UIFromType","usePlayerPower","MainControl","checkPowerInfo","addMissionProgress","MissionType","MainUI","setClubBtnVisible","runtimeData","init","director","loadScene","onClickTip","onClickLastRank","testUpload_1_5","cloud","uploadScore","math","randomRangeInt","testUpload_6_10"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        maxWaveLabel: cc.Label,\n        tryCountLabel: cc.Label,\n        rankDot: cc.Node,\n        levelPlayerPanel: cc.Node\n    },\n    onLoad: function () {\n        cc.UIRankMode = this;\n    },\n    refreshLevelPlayerShow: function () {\n        this.levelPlayerPanel.getComponent(\"LevelPlayer\").initHeroShow();\n    },\n    initBy: function () {\n        this.node.active = !0;\n        cc.pvz.utils.fadeInBtn(this.node);\n        cc.hasPopupType = cc.UIPage.Rank;\n        this.maxWaveLabel.string = cc.tmpScore;\n        this.tryCountLabel.string = cc.player.rankCount;\n        this.rankDot.active = cc.tmpNewRecord;\n        this.refreshLevelPlayerShow();\n    },\n    showFinish: function () {},\n    onClickClose: function () {\n        cc.hasPopupType = 0;\n        this.node.active = !1;\n    },\n    onClickStart: function () {\n        if (cc.player.rankCount <= 0) {\n            cc.popupManager.showToast(\"今日次数已用完\");\n        } else {\n            if (cc.pvz.PlayerData.isEnoughArrayTool()) {\n                if (cc.pvz.PlayerData.getPower() < cc.pvz.GameConfig.BattlePower) {\n                    if (cc.pvz.PlayerData.isHaveBuyPowerTimes()) {\n                        cc.popupManager.popup(\n                            \"mainUI\",\n                            \"powerbuy\",\n                            \"UIPowerBuy\",\n                            {\n                                ad: !1,\n                                scale: !0\n                            },\n                            cc.pvz.GameConfig.UIFromType[\"排位赛\"]\n                        );\n                    } else {\n                        cc.popupManager.showToast(\"体力不足\");\n                    }\n                } else {\n                    cc.player.rankCount--,\n                        cc.pvz.PlayerData.usePlayerPower(-cc.pvz.GameConfig.BattlePower),\n                        cc.MainControl.checkPowerInfo(),\n                        cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"参与无尽挑战赛N次\"], 1),\n                        cc.MainUI.setClubBtnVisible(!1),\n                        cc.pvz.runtimeData.init(2, -1),\n                        cc.director.loadScene(\"game1\");\n                }\n            } else {\n                cc.popupManager.showToast(\"还有未上阵的卡皮巴拉哟！\");\n            }\n        }\n    },\n    onClickTip: function () {\n        cc.popupManager.popup(\"rank\", \"RankTipUI\", \"UIRankTip\", {\n            ad: !1,\n            scale: !1\n        });\n    },\n    onClickLastRank: function () {\n        cc.tmpNewRecord = !1;\n        this.rankDot.active = !1;\n        cc.popupManager.popup(\n            \"rank\",\n            \"RankList\",\n            \"UIRankList\",\n            {\n                ad: !1,\n                scale: !1\n            },\n            this.node\n        );\n    },\n    testUpload_1_5: function () {\n        cc.pvz.cloud.uploadScore(cc.math.randomRangeInt(1, 6), \"\" + cc.math.randomRangeInt(1, 14), function () {});\n    },\n    testUpload_6_10: function () {\n        cc.pvz.cloud.uploadScore(cc.math.randomRangeInt(6, 11), \"\" + cc.math.randomRangeInt(1, 14), function () {});\n    }\n});\n"]}