{"version":3,"sources":["assets/game2/scripts/UIGame2End.js"],"names":["cc","Class","Component","properties","waveLabel","Label","bgSpine","sp","Skeleton","tiSpine","onAniEndedNodes","Node","coinNode","initBy","e","i","isWin","string","pvz","runtimeData","wave","forEach","active","setAnimation","utils","spineFromTo","onClickClose","PlayerData","changeItemNum","GameConfig","ItemType","butler","playEffectAsync","popupManager","removeAllPopups","director","loadScene"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAELC,UAAU,EAAE;IACRC,SAAS,EAAEJ,EAAE,CAACK,KADN;IAERC,OAAO,EAAEC,EAAE,CAACC,QAFJ;IAGRC,OAAO,EAAEF,EAAE,CAACC,QAHJ;IAIRE,eAAe,EAAE,CAACV,EAAE,CAACW,IAAJ,CAJT;IAKRC,QAAQ,EAAEZ,EAAE,CAACW;EALL,CAFP;EASLE,MAAM,EAAE,gBAAUC,CAAV,EAAa;IACjB,IAAIC,CAAC,GAAG,IAAR;IACA,KAAKC,KAAL,GAAaF,CAAb;;IACA,IAAIA,CAAJ,EAAO;MACH,KAAKV,SAAL,CAAea,MAAf,GAAwBjB,EAAE,CAACkB,GAAH,CAAOC,WAAP,CAAmBC,IAAnB,GAA0B,CAAlD;IACH,CAFD,MAEO;MACH,KAAKhB,SAAL,CAAea,MAAf,GAAwBjB,EAAE,CAACkB,GAAH,CAAOC,WAAP,CAAmBC,IAAnB,GAA0B,CAAlD;IACH;;IACD,KAAKV,eAAL,CAAqBW,OAArB,CAA6B,UAAUP,CAAV,EAAa;MACtC,OAAQA,CAAC,CAACQ,MAAF,GAAW,CAAC,CAApB;IACH,CAFD;IAGA,KAAKV,QAAL,CAAcU,MAAd,GAAuB,CAAC,CAAxB;IACA,KAAKhB,OAAL,CAAaiB,YAAb,CAA0B,CAA1B,EAA6B,EAA7B,EAAiC,CAAC,CAAlC;;IACA,IAAIT,CAAJ,EAAO;MACHd,EAAE,CAACkB,GAAH,CAAOM,KAAP,CAAaC,WAAb,CAAyB,KAAKnB,OAA9B,EAAuC,YAAvC,EAAqD,YAArD;MACAN,EAAE,CAACkB,GAAH,CAAOM,KAAP,CAAaC,WAAb,CAAyB,KAAKhB,OAA9B,EAAuC,YAAvC,EAAqD,YAArD,EAAmE,CAAC,CAApE,EAAuE,YAAY;QAC/EM,CAAC,CAACH,QAAF,CAAWU,MAAX,GAAoB,CAAC,CAArB;QACAP,CAAC,CAACL,eAAF,CAAkBW,OAAlB,CAA0B,UAAUP,CAAV,EAAa;UACnC,OAAQA,CAAC,CAACQ,MAAF,GAAW,CAAC,CAApB;QACH,CAFD;MAGH,CALD;IAMH,CARD,MAQO;MACHtB,EAAE,CAACkB,GAAH,CAAOM,KAAP,CAAaC,WAAb,CAAyB,KAAKnB,OAA9B,EAAuC,WAAvC,EAAoD,WAApD;MACAN,EAAE,CAACkB,GAAH,CAAOM,KAAP,CAAaC,WAAb,CAAyB,KAAKhB,OAA9B,EAAuC,WAAvC,EAAoD,WAApD,EAAiE,CAAC,CAAlE,EAAqE,YAAY;QAC7EM,CAAC,CAACL,eAAF,CAAkBW,OAAlB,CAA0B,UAAUP,CAAV,EAAa;UACnC,OAAQA,CAAC,CAACQ,MAAF,GAAW,CAAC,CAApB;QACH,CAFD;MAGH,CAJD;IAKH;EACJ,CAtCI;EAuCLI,YAAY,EAAE,wBAAY;IACtB,IAAI,KAAKV,KAAT,EAAgB;MACZhB,EAAE,CAACkB,GAAH,CAAOS,UAAP,CAAkBC,aAAlB,CAAgC5B,EAAE,CAACkB,GAAH,CAAOW,UAAP,CAAkBC,QAAlB,CAA2B,IAA3B,CAAhC,EAAkE,GAAlE;MACA9B,EAAE,CAAC+B,MAAH,CAAUC,eAAV,CAA0B,MAA1B,EAAkC,eAAlC;IACH;;IACDhC,EAAE,CAACiC,YAAH,CAAgBC,eAAhB;IACAlC,EAAE,CAACmC,QAAH,CAAYC,SAAZ,CAAsB,QAAtB;EACH;AA9CI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        waveLabel: cc.Label,\n        bgSpine: sp.Skeleton,\n        tiSpine: sp.Skeleton,\n        onAniEndedNodes: [cc.Node],\n        coinNode: cc.Node\n    },\n    initBy: function (e) {\n        var i = this;\n        this.isWin = e;\n        if (e) {\n            this.waveLabel.string = cc.pvz.runtimeData.wave + 1;\n        } else {\n            this.waveLabel.string = cc.pvz.runtimeData.wave - 1;\n        }\n        this.onAniEndedNodes.forEach(function (e) {\n            return (e.active = !1);\n        });\n        this.coinNode.active = !1;\n        this.bgSpine.setAnimation(0, \"\", !1);\n        if (e) {\n            cc.pvz.utils.spineFromTo(this.bgSpine, \"shengli1_2\", \"shengli2_2\");\n            cc.pvz.utils.spineFromTo(this.tiSpine, \"shengli1_1\", \"shengli2_1\", !0, function () {\n                i.coinNode.active = !0;\n                i.onAniEndedNodes.forEach(function (e) {\n                    return (e.active = !0);\n                });\n            });\n        } else {\n            cc.pvz.utils.spineFromTo(this.bgSpine, \"shibai1_2\", \"shibai2_2\");\n            cc.pvz.utils.spineFromTo(this.tiSpine, \"shibai1_1\", \"shibai2_1\", !0, function () {\n                i.onAniEndedNodes.forEach(function (e) {\n                    return (e.active = !0);\n                });\n            });\n        }\n    },\n    onClickClose: function () {\n        if (this.isWin) {\n            cc.pvz.PlayerData.changeItemNum(cc.pvz.GameConfig.ItemType[\"金币\"], 200);\n            cc.butler.playEffectAsync(\"game\", \"sound/getCoin\");\n        }\n        cc.popupManager.removeAllPopups();\n        cc.director.loadScene(\"mainUI\");\n    }\n});\n"]}