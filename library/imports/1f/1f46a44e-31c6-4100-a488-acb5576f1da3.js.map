{"version":3,"sources":["assets/scripts/PopupManager.js"],"names":["$prefabInfo","require","cc","Class","Component","properties","default_sprite_splash","SpriteFrame","onPopup1st","EventHandler","onAllClosed","taskToastPrfefab","toastPrefab","effectPrefab","effectBattlePrefab","adToastNode","Node","onLoad","popupManager","active","zIndex","macro","MAX_ZINDEX","popups","showModals","isAutoPop","nonePopupUI","modal","createModal","e","width","node","height","color","Color","BLACK","opacity","addComponent","BlockInputEvents","t","Sprite","sizeMode","SizeMode","CUSTOM","spriteFrame","parent","onAllPopupClosed","emit","removeAllPopups","forEach","destroy","pvz","AdUtils","hideAdBanner","popup","o","a","n","i","ad","c","s","scale","r","l","adLeft","u","p","showModal","d","h","f","g","usingTop","v","y","arguments","length","m","Array","C","onPopupUI","some","w","findIndex","push","every","__showAd","main2","setUsingTopInfo","utils","useBundleAsset","Prefab","instantiate","getComponent","runAction","sequence","scaleTo","easing","easeElasticOut","callFunc","showFinish","apply","delayTime","__showAdAlignLeft","initBy","director","isPaused","sortAllChildren","removePopup","splice","onPopupClosed","showTaskToast","addNode","fadeOut","removeSelf","find","Label","string","showToast","moveBy","showEffectFly","addEffectNode","showBattleEffect","addBattleEffectNode","x","showAdToast","stopAllActions"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $prefabInfo = require(\"./PrefabInfo\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        default_sprite_splash: cc.SpriteFrame,\n        onPopup1st: cc.Component.EventHandler,\n        onAllClosed: cc.Component.EventHandler,\n        taskToastPrfefab: $prefabInfo,\n        toastPrefab: $prefabInfo,\n        effectPrefab: $prefabInfo,\n        effectBattlePrefab: $prefabInfo,\n        adToastNode: cc.Node\n    },\n    onLoad: function () {\n        cc.popupManager = this;\n        if (this.adToastNode) {\n            this.adToastNode.active = !1;\n            this.adToastNode.zIndex = cc.macro.MAX_ZINDEX - 2;\n        }\n        this.popups = [];\n        this.showModals = [];\n        this.isAutoPop = !1;\n    },\n    nonePopupUI: function () {\n        return !this.modal || !this.modal.active;\n    },\n    createModal: function () {\n        if (!this.modal) {\n            var e = new cc.Node();\n            e.width = 4 * this.node.width;\n            e.height = 4 * this.node.height;\n            e.color = cc.Color.BLACK;\n            e.opacity = 230;\n            e.addComponent(cc.BlockInputEvents);\n            var t = e.addComponent(cc.Sprite);\n            t.sizeMode = cc.Sprite.SizeMode.CUSTOM;\n            t.spriteFrame = this.default_sprite_splash;\n            this.modal = e;\n            this.modal.parent = this.node;\n        }\n    },\n    onAllPopupClosed: function () {\n        if (this.modal) {\n            this.modal.active = !1;\n        }\n        if (this.onAllClosed) {\n            this.onAllClosed.emit();\n        }\n    },\n    removeAllPopups: function () {\n        this.popups.forEach(function (e) {\n            e.node.destroy();\n        });\n        this.popups = [];\n        this.showModals = [];\n        cc.pvz.AdUtils.hideAdBanner();\n        this.onAllPopupClosed();\n    },\n    popup: function (e, t, o, a) {\n        var n = this;\n        var i = a.ad;\n        var c = void 0 === i || i;\n        var s = a.scale;\n        var r = void 0 === s || s;\n        var l = a.adLeft;\n        var u = void 0 !== l && l;\n        var p = a.showModal;\n        var d = void 0 === p || p;\n        var h = a.opacity;\n        var f;\n        if (void 0 === h) {\n            f = 225;\n        } else {\n            f = h;\n        }\n        var g = a.usingTop;\n        var v = void 0 !== g && g;\n        var y = arguments.length;\n        var m = new Array(y > 4 ? y - 4 : 0);\n        for (var C = 4; C < y; C++) {\n            m[C - 4] = arguments[C];\n        }\n        if (this.popups.length > 0 && this.popups[this.popups.length - 1].onPopupUI) {\n            this.popups[this.popups.length - 1].onPopupUI();\n        }\n        if (this.nonePopupUI()) {\n            this.createModal();\n            this.modal.active = !0;\n            if (this.onPopup1st) {\n                this.onPopup1st.emit();\n            }\n        }\n        if (\n            d ||\n            this.showModals.some(function (e) {\n                return e;\n            })\n        ) {\n            var w;\n            if (d) {\n                w = this.popups.length;\n            } else {\n                w = this.showModals.findIndex(function (e) {\n                    return e;\n                });\n            }\n            this.createModal();\n            this.modal.opacity = f;\n            this.modal.zIndex = 2 * w + 1;\n        } else {\n            if (this.modal) {\n                this.modal.opacity = 0;\n            }\n        }\n        this.showModals.push(d);\n        if (c) {\n            this.popups.every(function (e) {\n                return !e.__showAd;\n            });\n        }\n        if (v) {\n            cc.main2.setUsingTopInfo();\n        }\n        cc.pvz.utils.useBundleAsset(e, t, cc.Prefab, function (e) {\n            var t = cc.instantiate(e);\n            var a = t.getComponent(o);\n            t.parent = n.node;\n            t.zIndex = 2 * n.popups.length + 2;\n            if (r) {\n                t.scale = 0.5;\n                t.runAction(\n                    cc.sequence(\n                        cc.scaleTo(0.5, 1).easing(cc.easeElasticOut(3)),\n                        cc.callFunc(function () {\n                            if (a.showFinish) {\n                                a.showFinish.apply(a);\n                            }\n                        }, n)\n                    )\n                );\n            } else {\n                t.runAction(\n                    cc.sequence(\n                        cc.delayTime(0.032),\n                        cc.callFunc(function () {\n                            if (a.showFinish) {\n                                a.showFinish.apply(a);\n                            }\n                        }, n)\n                    )\n                );\n            }\n            a.__showAd = c;\n            a.__showAdAlignLeft = u;\n            n.popups.push(a);\n            if (a.initBy) {\n                a.initBy.apply(a, m);\n            }\n            if (cc.director.isPaused()) {\n                t.parent.sortAllChildren();\n            }\n        });\n    },\n    removePopup: function (e) {\n        var t = this.popups.findIndex(function (t) {\n            return t == e;\n        });\n        if (-1 != t) {\n            if (-1 != t) {\n                this.popups.splice(t, 1);\n                this.showModals.splice(t, 1);\n                if (t > 0 && this.popups[t - 1].onPopupClosed) {\n                    this.popups[t - 1].onPopupClosed();\n                }\n                var o = -1;\n                for (var a = this.showModals.length; --a >= 0; ) {\n                    if (this.showModals[a]) {\n                        o = a;\n                        break;\n                    }\n                }\n                if (-1 !== o) {\n                    this.createModal();\n                    this.modal.opacity = 210;\n                    this.modal.zIndex = 2 * o + 1;\n                } else {\n                    if (this.modal) {\n                        this.modal.active = !1;\n                    }\n                }\n            }\n            if (e.__showAd) {\n                for (var n = this.popups.length - 1; n >= 0 && !this.popups[n].__showAd; n--) {}\n            }\n            e.node.destroy();\n            if (this.nonePopupUI()) {\n                this.onAllPopupClosed();\n            }\n            if (cc.director.isPaused()) {\n                this.node.sortAllChildren();\n            }\n        }\n    },\n    showTaskToast: function (e) {\n        var t = this.taskToastPrfefab.addNode();\n        t.opacity = 255;\n        t.zIndex = cc.macro.MAX_ZINDEX - 3;\n        t.runAction(cc.sequence(cc.delayTime(1.2), cc.fadeOut(0.4), cc.removeSelf()));\n        cc.find(\"tip\", t).getComponent(cc.Label).string = e;\n    },\n    showToast: function (e) {\n        var t = this.toastPrefab.addNode();\n        t.y = 0;\n        t.opacity = 255;\n        t.zIndex = cc.macro.MAX_ZINDEX - 3;\n        t.runAction(cc.sequence(cc.moveBy(0.3, 0, 80), cc.delayTime(0.8), cc.fadeOut(0.3), cc.removeSelf()));\n        cc.find(\"tip\", t).getComponent(cc.Label).string = e;\n    },\n    showEffectFly: function (e, t, o) {\n        if (void 0 === o) {\n            o = 1;\n        }\n        this.effectPrefab.addEffectNode(e, t, o).zIndex = cc.macro.MAX_ZINDEX;\n    },\n    showBattleEffect: function (e, t) {\n        var o = this.effectBattlePrefab.addBattleEffectNode(e, t);\n        o.y = -200;\n        o.x = 0;\n        o.zIndex = cc.macro.MAX_ZINDEX - 3;\n        o.runAction(cc.sequence(cc.delayTime(2.5), cc.removeSelf()));\n    },\n    showAdToast: function (e) {\n        this.adToastNode.active = 2 != e;\n        if (this.adToastNode.active) {\n            cc.find(\"blockTouch\", this.adToastNode).active = 0 == e;\n            cc.find(\"tip\", this.adToastNode).getComponent(cc.Label).string = [\n                \"拉取广告中...\",\n                \"看完广告才有奖励\",\n                null,\n                \"广告加载失败\"\n            ][e];\n            this.adToastNode.y = 0;\n            this.adToastNode.opacity = 255;\n            this.adToastNode.stopAllActions();\n            if (0 != e) {\n                this.adToastNode.runAction(cc.sequence(cc.moveBy(0.3, 0, 80), cc.delayTime(0.8), cc.fadeOut(0.3)));\n            }\n        }\n    }\n});\n"]}