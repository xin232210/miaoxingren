{"version":3,"sources":["assets/rank/scripts/UIRankReward.js"],"names":["cc","Class","Component","properties","coinLabel","Label","diamondLabel","rankLabel","boxJsonFile","JsonAsset","initBy","e","t","n","getBoxIDByRank","c","json","find","ID","string","reward","player","rankWeek","pvz","utils","getStartOfWeek","PlayerData","changeItemNum","GameConfig","ItemType","closeCb","length","rank1","rank2","onClickClose","popupManager","showEffectFly","MainControl","getItemEffectPos","updateItemInfo","removePopup"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        coinLabel: cc.Label,\n        diamondLabel: cc.Label,\n        rankLabel: cc.Label,\n        boxJsonFile: cc.JsonAsset\n    },\n    initBy: function (e, t) {\n        var n = this.getBoxIDByRank(e);\n        var c = this.boxJsonFile.json.find(function (e) {\n            return e.ID == n;\n        });\n        this.coinLabel.string = \"x\" + c.reward[1];\n        this.diamondLabel.string = \"x\" + c.reward[3];\n        this.rankLabel.string = e + 1;\n        cc.player.rankWeek = cc.pvz.utils.getStartOfWeek();\n        cc.pvz.PlayerData.changeItemNum(cc.pvz.GameConfig.ItemType[\"金币\"], c.reward[1]);\n        cc.pvz.PlayerData.changeItemNum(cc.pvz.GameConfig.ItemType[\"钻石\"], c.reward[3]);\n        this.closeCb = t;\n    },\n    getBoxIDByRank: function (e) {\n        var t = e + 1;\n        for (var n = 0; n < this.boxJsonFile.json.length; n++) {\n            var c = this.boxJsonFile.json[n];\n            if (t >= c.rank1 && t <= c.rank2) {\n                return c.ID;\n            }\n        }\n        return this.boxJsonFile.json[this.boxJsonFile.json.length - 1].ID;\n    },\n    onClickClose: function () {\n        this.closeCb();\n        cc.popupManager.showEffectFly(\n            cc.pvz.GameConfig.ItemType[\"金币\"],\n            cc.MainControl.getItemEffectPos(cc.pvz.GameConfig.ItemType[\"金币\"]),\n            1\n        );\n        cc.popupManager.showEffectFly(\n            cc.pvz.GameConfig.ItemType[\"钻石\"],\n            cc.MainControl.getItemEffectPos(cc.pvz.GameConfig.ItemType[\"钻石\"]),\n            2\n        );\n        cc.MainControl.updateItemInfo();\n        cc.popupManager.removePopup(this);\n    }\n});\n"]}