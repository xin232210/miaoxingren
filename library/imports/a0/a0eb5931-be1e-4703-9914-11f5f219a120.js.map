{"version":3,"sources":["assets/mainUI/scripts/LevelMap.js"],"names":["cc","Class","Component","properties","lockNode","Node","mapNameLabel","Label","mapTipLabel","lockMapTipLabel","battlePanel","sweepBtn","battleBtn","sweepTimesLabel","sweepAdNode","boxSpineList","sp","Skeleton","boxLabelList","boxRewardPanel","rewardParent","onHideBoxRewardPanel","active","initLevelMap","e","curBoxId","stageLevel","levelJson","JsonControl","getLevelJson","curStageLevel","pvz","PlayerData","getStageLevel","sweepTimes","getSweepTimes","maxWave","getMaxLevelWave","isLock","isFinish","string","name","node","GameConfig","LevelFinishTip","LevelLockTip","replace","LevelMaxWaveTip","levelBoxData","getLevelBoxData","t","length","i","LevelBoxTip","o","setAnimation","onClickBox","MainUI","isLookAd","parseInt","a","c","s","Math","floor","n","rewardData","r","h","utils","getRewardItem","push","updateLevelBoxData","p","setCompleteListener","popupManager","popup","ad","scale","UIFromType","refreshBoxPanelInfo","showToast","position","v2","parent","x","y","childrenCount","children","getComponent","initBoxRewardItem","onClickSweep","getPower","BattlePower","isHaveBuyPowerTimes","usePlayerPower","MainControl","checkPowerInfo","addMissionProgress","MissionType","updateSweepTimes","RedControl","onCheckBattleRed","AdUtils","showAdRewardVideo","AdType","onAdClose","onClickBattle","isEnoughArrayTool","setClubBtnVisible","runtimeData","init","director","loadScene","TAUtils","trackBackpack"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        lockNode: cc.Node,\n        mapNameLabel: cc.Label,\n        mapTipLabel: cc.Label,\n        lockMapTipLabel: cc.Label,\n        battlePanel: cc.Node,\n        sweepBtn: cc.Node,\n        battleBtn: cc.Node,\n        sweepTimesLabel: cc.Label,\n        sweepAdNode: cc.Node,\n        boxSpineList: [sp.Skeleton],\n        boxLabelList: [cc.Label],\n        boxRewardPanel: cc.Node,\n        rewardParent: cc.Node\n    },\n    onHideBoxRewardPanel: function () {\n        this.boxRewardPanel.active = !1;\n    },\n    initLevelMap: function (e) {\n        this.boxRewardPanel.active = !1;\n        this.curBoxId = -1;\n        this.stageLevel = e;\n        this.levelJson = cc.JsonControl.getLevelJson(this.stageLevel);\n        this.curStageLevel = cc.pvz.PlayerData.getStageLevel();\n        this.sweepTimes = cc.pvz.PlayerData.getSweepTimes();\n        this.maxWave = cc.pvz.PlayerData.getMaxLevelWave();\n        this.isLock = this.stageLevel > this.curStageLevel;\n        this.isFinish = this.stageLevel < this.curStageLevel;\n        this.mapNameLabel.string = this.levelJson.name;\n        this.lockNode.active = this.isLock;\n        this.mapTipLabel.node.active = !this.isLock;\n        this.lockMapTipLabel.node.active = this.isLock;\n        this.battlePanel.active = !this.isLock;\n        this.sweepBtn.active = this.isFinish;\n        if (this.isFinish) {\n            this.mapTipLabel.string = cc.pvz.GameConfig.LevelFinishTip;\n            this.sweepTimesLabel.string = this.sweepTimes;\n            this.sweepTimesLabel.node.active = this.sweepTimes > 0;\n            this.sweepAdNode.active = this.sweepTimes <= 0;\n        } else {\n            if (this.isLock) {\n                this.lockMapTipLabel.string = cc.pvz.GameConfig.LevelLockTip.replace(\"$\", this.stageLevel - 1);\n            } else {\n                this.mapTipLabel.string = cc.pvz.GameConfig.LevelMaxWaveTip.replace(\"$\", this.maxWave);\n            }\n        }\n        this.levelBoxData = cc.pvz.PlayerData.getLevelBoxData(this.stageLevel);\n        for (var t = 0; t < this.boxLabelList.length; t++) {\n            var i = this.levelJson[\"wave\" + (t + 1)];\n            this.boxLabelList[t].string = cc.pvz.GameConfig.LevelBoxTip.replace(\"$\", i);\n            var o = this.boxSpineList[t];\n            if (this.isLock) {\n                o.setAnimation(0, \"baoxiang1\", !1);\n            } else {\n                if (1 == this.levelBoxData[t]) {\n                    o.setAnimation(0, \"baoxiang4\", !1);\n                } else {\n                    if (i <= this.maxWave || this.isFinish) {\n                        o.setAnimation(0, \"baoxiang2\", !0);\n                    } else {\n                        o.setAnimation(0, \"baoxiang1\", !1);\n                    }\n                }\n            }\n        }\n    },\n    onClickBox: function (e, t) {\n        if (!cc.MainUI.isLookAd) {\n            var i = parseInt(t);\n            if (1 != this.levelBoxData[i - 1]) {\n                var o;\n                var a = this.levelJson[\"wave\" + i];\n                o = !this.isLock && (a <= this.maxWave || this.isFinish);\n                var c = this.levelJson[\"reward\" + i];\n                var s = Math.floor(c.length / 2);\n                var n = 0;\n                this.rewardData = [];\n                for (var r = 0; r < s; r++) {\n                    var h = cc.pvz.utils.getRewardItem(c[n], c[n + 1]);\n                    this.rewardData.push(h);\n                    n += 2;\n                }\n                if (o) {\n                    this.boxRewardPanel.active = !1;\n                    cc.pvz.PlayerData.updateLevelBoxData(this.stageLevel, i);\n                    var p = this.boxSpineList[i - 1];\n                    p.setAnimation(0, \"baoxiang3\", !1);\n                    p.setCompleteListener(function () {\n                        p.setAnimation(0, \"baoxiang4\", !1);\n                        p.setCompleteListener(null);\n                    });\n                    cc.popupManager.popup(\n                        \"mainUI\",\n                        \"getrewardUI\",\n                        \"UIReward\",\n                        {\n                            ad: !1,\n                            scale: !1\n                        },\n                        this.rewardData,\n                        cc.pvz.GameConfig.UIFromType[\"关卡宝箱\"]\n                    );\n                } else {\n                    if (i != this.curBoxId) {\n                        this.curBoxId = i;\n                        this.boxRewardPanel.active = !0;\n                        this.refreshBoxPanelInfo(i);\n                    } else {\n                        this.boxRewardPanel.active = !this.boxRewardPanel.active;\n                    }\n                }\n            } else {\n                cc.popupManager.showToast(\"奖励已领取\");\n            }\n        }\n    },\n    refreshBoxPanelInfo: function (e) {\n        this.boxRewardPanel.position = cc.v2(\n            this.boxSpineList[e - 1].node.parent.position.x,\n            this.boxRewardPanel.position.y\n        );\n        for (var t = 0; t < this.rewardParent.childrenCount; t++) {\n            var i = this.rewardParent.children[t];\n            if (t < this.rewardData.length) {\n                i.active = !0;\n                i.getComponent(\"RewardItem\").initBoxRewardItem(this.rewardData[t]);\n            } else {\n                i.active = !1;\n            }\n        }\n    },\n    onClickSweep: function () {\n        var e = this;\n        if (cc.MainUI.isLookAd) {\n            //\n        } else {\n            if (cc.pvz.PlayerData.getPower() < cc.pvz.GameConfig.BattlePower) {\n                if (cc.pvz.PlayerData.isHaveBuyPowerTimes()) {\n                    cc.popupManager.popup(\n                        \"mainUI\",\n                        \"powerbuy\",\n                        \"UIPowerBuy\",\n                        {\n                            ad: !1,\n                            scale: !0\n                        },\n                        cc.pvz.GameConfig.UIFromType[\"主界面\"]\n                    );\n                } else {\n                    cc.popupManager.showToast(\"体力不足\");\n                }\n            } else {\n                cc.pvz.PlayerData.usePlayerPower(-5),\n                    cc.MainControl.checkPowerInfo(),\n                    this.sweepTimes > 0\n                        ? (cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"扫荡关卡n次\"], 1),\n                          cc.pvz.PlayerData.updateSweepTimes(),\n                          this.sweepTimes--,\n                          (this.sweepTimesLabel.string = this.sweepTimes),\n                          (this.sweepTimesLabel.node.active = this.sweepTimes > 0),\n                          (this.sweepAdNode.active = this.sweepTimes <= 0),\n                          cc.popupManager.popup(\n                              \"game\",\n                              \"win\",\n                              \"UIGameEnd\",\n                              {\n                                  ad: !1,\n                                  scale: !0\n                              },\n                              this,\n                              !1\n                          ),\n                          cc.RedControl.onCheckBattleRed())\n                        : ((cc.MainUI.isLookAd = !0),\n                          cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"关卡扫荡\"], function (t) {\n                              e.onAdClose(t);\n                          }));\n            }\n        }\n    },\n    onAdClose: function (e) {\n        cc.MainUI.isLookAd = !1;\n        if (e) {\n            cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"扫荡关卡n次\"], 1);\n            cc.popupManager.popup(\n                \"game\",\n                \"win\",\n                \"UIGameEnd\",\n                {\n                    ad: !1,\n                    scale: !0\n                },\n                this,\n                !1\n            );\n            cc.RedControl.onCheckBattleRed();\n        }\n    },\n    onClickBattle: function () {\n        if (cc.MainUI.isLookAd) {\n            //\n        } else {\n            if (cc.pvz.PlayerData.isEnoughArrayTool()) {\n                if (cc.pvz.PlayerData.getPower() < cc.pvz.GameConfig.BattlePower) {\n                    if (cc.pvz.PlayerData.isHaveBuyPowerTimes()) {\n                        cc.popupManager.popup(\n                            \"mainUI\",\n                            \"powerbuy\",\n                            \"UIPowerBuy\",\n                            {\n                                ad: !1,\n                                scale: !0\n                            },\n                            cc.pvz.GameConfig.UIFromType[\"主界面\"]\n                        );\n                    } else {\n                        cc.popupManager.showToast(\"体力不足\");\n                    }\n                } else {\n                    cc.pvz.PlayerData.usePlayerPower(-cc.pvz.GameConfig.BattlePower),\n                        cc.MainControl.checkPowerInfo(),\n                        cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"挑战主线章节1次\"], 1),\n                        cc.MainUI.setClubBtnVisible(!1),\n                        cc.pvz.runtimeData.init(0, this.stageLevel),\n                        cc.director.loadScene(\"game1\"),\n                        cc.pvz.TAUtils.trackBackpack(this.stageLevel);\n                }\n            } else {\n                cc.popupManager.showToast(\"还有未上阵的卡皮巴拉！\");\n            }\n        }\n    }\n});\n"]}