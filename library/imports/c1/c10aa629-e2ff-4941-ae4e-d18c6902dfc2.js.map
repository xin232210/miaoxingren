{"version":3,"sources":["assets/game/scripts/Hero.js"],"names":["$bullet","require","cc","Class","Component","properties","spine","sp","Skeleton","zd","zd2","landMineNode","Node","onLoad","node","active","e","console","error","enabled","start","initBy","t","i","characterSpine","n","scene","info","item","itemSpineOriginal","isSameSpine","parent","characterSpineInitialPos","position","clone","log","itemSpineInitialPos","id","o","json","range","atkRR","lvs","hp","maxHp","shieldValue","hasDie","setAnimation","setupAnimationEvents","isPhy","isMagic","is3gz","some","is2gz","butler","on","onLvup","initialPosition","moveSpeed","currentTarget","isMoving","hasReachedAttackRange","isInitialized","isAttacking","currentAttackTarget","inCoolDown","useCharacterAttack","defaultSkin","Math","sqrt","scale","opacity","index","lvup","hub","showLvupEffect","convertToWorldSpaceAR","Vec2","ZERO","setEventListener","trackEntry","event","data","name","onAnimationAttackEvent","target","chooseEnemy","damage","getAtk","lv","dealDamageToEnemy","enemy","checkBuff","critType","checkCrit","getCritPlus","math","randomRange","floor","hurtBy","showEnemyHurtNum","showJsEffect","pvz","runtimeData","stats","random","addBuffWeak","repulse","animName","animMap","setCompleteListener","min","lv1","attribute2","length","fightlvup2","getBuffValue","items","getShield","pushLvAndAtk","push","atk","playAttAndDo","checkToStartReloadTimer","playSound","playEffectAsync","tryShoot","tryShootCallCount","attackRangeBuffer","targetPos","add","v2","centerY","distSqr","sub","lengthSqr","toFixed","loggedNoTarget","attackFailCount","attackAnim","attackDelay","indexOf","cdTime","cdMs","setTimeout","needTargetCheck","nearTarget","distance","r","isValid","checkToShoot","bulletCount","IKBone","tween","to","x","y","findBone","hasEnableBuff","crossItems","forEach","hero","addShield","showBuffEffect","chooseMinHpHero","addHp","getAngerBarWPos","anger","updateAnger","lastBulletCount","instantiate","getHeroesMaxMarginX","groundAreaLB","groundAreaTR","objsRoot","zIndex","getComponent","Collider","s","max","chooseEnemys","c","a","h","bulletsRoot","defaultAnimation","d","u","convertToNodeSpaceAR","att","p","l","shift","shoot","bind","getShootAPos","HandBone","worldX","worldY","GPBone","shootN","shootIK","shoot1","atan2","hitCount","mode","moveByAngle","PI","collider","radius","setTrackEventListener","checkHeroBuff","doBulletAttLogic","weakNode","actBuff1","jsEffExclusive","buffSlow","addBuffSlow","buffIce","addBuffIce","attCounter","doLandMinesLogic","onLandminesCollision","find","utils","manuallyCheckCollider","destroy","updateHp","delHp","updateShield","hasEnded","hasUseReborn","hasHero","barNode","reborn","checkIsFail","addBuffPrefab","addNodeTo","update","loggedNotInit","warn","timePaused","director","getScheduler","getTimeScale","lastLogTime","currentTime","Date","now","enemys","updateMovement","returnToInitialPosition","movementDebugCount","aliveEnemyCount","enemyPositions","join","cos","sin","oldPos","updateItemSpinePosition","lastMoveLogTime","nowTime","position2","attOffset","aliveCount","heroWorldPos","spineLocalPos","loggedSpineUpdate","loggedSpineError"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $bullet = require(\"./Bullet\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        spine: sp.Skeleton,\n        zd: $bullet,\n        zd2: $bullet,\n        landMineNode: cc.Node\n    },\n    onLoad: function () {\n        try {\n            if (this.zd && this.zd.node) {\n                this.zd.node.active = !1;\n            }\n            if (this.zd2 && this.zd2.node) {\n                this.zd2.node.active = !1;\n            }\n            if (this.landMineNode) {\n                this.landMineNode.active = !1;\n            }\n        } catch (e) {\n            console.error(\"[Hero onLoad] :\", e);\n        }\n        // update\n        this.enabled = true;\n    },\n    start: function () {},\n    initBy: function (t, e, i, characterSpine) {\n        var n = this;\n        this.scene = t;\n        this.info = i;\n        this.item = e;\n        \n        // character spinespine\n        this.spine = characterSpine;\n        this.characterSpine = characterSpine;\n        \n        // item.spine\n        this.itemSpineOriginal = this.item.spine;\n        \n        // spinecharacter spine\n        var isSameSpine = (this.itemSpineOriginal === characterSpine);\n        \n        // character spineHeroItem\n        // spine\n        if (characterSpine && characterSpine.node && characterSpine.node.parent === e.node) {\n            this.characterSpineInitialPos = characterSpine.node.position.clone();\n            console.log(\"[Hero] character spineItem:\", this.characterSpineInitialPos);\n        }\n        \n        // item.spinecharacter spineItem\n        this.item.spine = characterSpine;\n        \n        // item.spine\n        if (this.itemSpineOriginal && this.itemSpineOriginal.node) {\n            this.itemSpineInitialPos = this.itemSpineOriginal.node.position.clone();\n            \n            // spinecharacter spinespine\n            // character spine\n            if (!isSameSpine) {\n                console.log(\"[Hero] plant spineID:\" + this.info.id);\n                this.itemSpineOriginal.node.active = false;\n            } else {\n                console.log(\"[Hero] spineID:\" + this.info.id);\n            }\n        }\n        \n        // spine\n        if (this.spine && this.spine.node) {\n            this.spine.node.active = true;\n            console.log(\"[Hero] spineID:\" + this.info.id + \", active:\" + this.spine.node.active);\n        }\n        \n        var o = this.info.json.range;\n        this.atkRR = o * o;\n        this.lvs = [];\n        this.hp = this.item.maxHp;\n        this.shieldValue = 0;\n        this.hasDie = !1;\n        \n        // \n        this.setAnimation(0, \"Idle\", !0, null);\n        this.setupAnimationEvents();\n        \n        this.isPhy = !0;\n        this.isMagic = !0;\n        this.is3gz = [2, 5, 9, 10].some(function (t) {\n            return t == n.item.id;\n        });\n        this.is2gz = [2, 4, 8].some(function (t) {\n            return t == n.item.id;\n        });\n        cc.butler.node.on(\"lvup\", this.onLvup, this);\n        \n        // \n        this.initialPosition = this.node.position.clone();\n        this.moveSpeed = 20; // \n        this.currentTarget = null;\n        this.isMoving = false;\n        this.hasReachedAttackRange = false;\n        this.isInitialized = true;\n        \n        // \n        this.isAttacking = false;\n        this.currentAttackTarget = null;\n        this.item.inCoolDown = false; // \n        \n        // \n        this.useCharacterAttack = true;\n        \n        console.log(\"[Hero] ID:\" + this.info.id + \", isAttacking:\" + this.isAttacking + \", inCoolDown:\" + this.item.inCoolDown);\n        \n        // Heroupdate\n        this.enabled = true;\n        \n        // \n        console.log(\"[Hero] initByID:\" + this.info.id + \", enabled:\" + this.enabled + \", spine:\" + (this.spine ? this.spine.defaultSkin : \"null\") + \", :\" + Math.sqrt(this.atkRR));\n        console.log(\"[Hero] spine - active:\" + (this.spine && this.spine.node ? this.spine.node.active : \"null\") + \n                    \", :\" + (this.spine && this.spine.node ? this.spine.node.position : \"null\") + \n                    \", :\" + (this.spine && this.spine.node ? this.spine.node.scale : \"null\") + \n                    \", :\" + (this.spine && this.spine.node ? this.spine.node.opacity : \"null\"));\n    },\n    onLvup: function (t) {\n        if (this.item.index == t) {\n            this.item.lvup(!1);\n            this.scene.hub.showLvupEffect(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO));\n        }\n    },\n    setupAnimationEvents: function () {\n        var n = this;\n        // Spine\n        if (this.spine && this.spine.setEventListener) {\n            this.spine.setEventListener(function (trackEntry, event) {\n                // \"attack\"\"hit\"\n                if (event.data.name === \"attack\" || event.data.name === \"hit\") {\n                    n.onAnimationAttackEvent();\n                }\n            });\n        }\n    },\n    onAnimationAttackEvent: function () {\n        // \n        var target = this.scene.chooseEnemy(this, this.atkRR);\n        if (target && target.hp > 0) {\n            var damage = this.getAtk(this.item.lv);\n            this.dealDamageToEnemy(target, damage);\n        }\n    },\n    dealDamageToEnemy: function (enemy, damage) {\n        console.log(\"[Hero dealDamageToEnemy] ID:\" + this.info.id + \", :\" + damage + \", HP:\" + enemy.hp);\n        \n        // \n        if (this.checkBuff(101)) {\n            damage *= 1.25;\n        }\n        if (this.checkBuff(201)) {\n            damage *= 1.25;\n        }\n        if (this.checkBuff(504)) {\n            damage *= 1.5;\n        }\n        if (this.checkBuff(701)) {\n            damage *= 1.25;\n        }\n        if (this.checkBuff(901)) {\n            damage *= 1.25;\n        }\n        if (this.checkBuff(1101)) {\n            damage *= 1.25;\n        }\n        if (this.checkBuff(1201)) {\n            damage *= 1.25;\n        }\n        \n        // \n        var critType = 0;\n        if (this.checkCrit({}, enemy)) {\n            critType = 1;\n            damage *= this.getCritPlus({}, enemy);\n            console.log(\"[Hero] :\" + damage);\n        }\n        \n        // \n        damage *= cc.math.randomRange(0.95, 1.05);\n        \n        console.log(\"[Hero dealDamageToEnemy] :\" + Math.floor(damage) + \", :\" + (critType === 1));\n        \n        // \n        enemy.hurtBy(this, damage);\n        \n        // \n        this.scene.showEnemyHurtNum(critType, enemy.node.position, damage);\n        \n        // characterplant\n        // character\n        if (!this.useCharacterAttack) {\n            this.scene.showJsEffect(enemy.node.position, this.info.id);\n        }\n        \n        // \n        cc.pvz.runtimeData.stats[this.info.id] += damage;\n        \n        // debuff\n        if (this.checkBuff(704) && Math.random() < 0.5) {\n            enemy.addBuffWeak();\n        }\n        if (this.checkBuff(204)) {\n            enemy.repulse(this.node.position);\n        }\n        if (this.checkBuff(403)) {\n            enemy.repulse(this.node.position);\n        }\n        if (this.checkBuff(1102)) {\n            enemy.repulse(this.node.position);\n        }\n        \n        console.log(\"[Hero dealDamageToEnemy] HP:\" + enemy.hp);\n    },\n    setAnimation: function (t, e, i, n) {\n        // this.spine.setAnimation(t, e + (this.item.lv + 1), i);\n        \n        if (!this.spine) {\n            console.error(\"[Hero setAnimation] spineID:\" + (this.info ? this.info.id : \"unknown\"));\n            return;\n        }\n        \n        // character spine\n        var animName = e;\n        if (this.characterSpine && this.spine === this.characterSpine) {\n            // plant -> character\n            var animMap = {\n                \"Idle\": \"Idle\",\n                \"Hit\": \"Hit\",\n                \"Dead\": \"Dead\",\n                \"Walk\": \"Walk\",\n                \"fuhuo\": \"Idle\"  // Idlecharacterfuhuo\n            };\n            animName = animMap[e] || e;\n        }\n        \n        console.log(\"[Hero setAnimation] ID:\" + (this.info ? this.info.id : \"unknown\") + \", :\" + animName + \", spineactive:\" + (this.spine.node ? this.spine.node.active : \"null\"));\n        \n        this.spine.setAnimation(t, animName, i);\n        this.spine.setCompleteListener(n);\n    },\n    getAtk: function (t) {\n        var e = Math.min(this.info.lv1, this.info.json.attribute2.length - 1);\n        var i = this.info.json.attribute2[e];\n        if (t > 0) {\n            i *= this.info.json.fightlvup2[t - 1] / 100;\n        }\n        var n = cc.pvz.runtimeData.getBuffValue(2);\n        var o = cc.pvz.runtimeData.getBuffValue(10);\n        if (o > 0) {\n            n += o * cc.pvz.runtimeData.items.length;\n        }\n        if (n > 0) {\n            i *= 1 + 0.01 * n;\n        }\n        return i;\n    },\n    getShield: function (t) {\n        var e = Math.min(this.info.lv1, this.info.json.attribute2.length - 1);\n        var i = this.info.json.attribute2[e];\n        if (t > 0) {\n            i *= this.info.json.fightlvup2[t - 1] / 100;\n        }\n        return i;\n    },\n    pushLvAndAtk: function (t) {\n        var e = this.getAtk(t.lv);\n        this.lvs.push({\n            lv: t.lv,\n            atk: e\n        });\n    },\n    playAttAndDo: function (t, e) {\n        var i = this;\n        this.setAnimation(0, \"Hit\", !1, function () {\n            i.item.checkToStartReloadTimer();\n            i.setAnimation(0, \"Idle\", !0, null);\n            if (e) {\n                e();\n            }\n        });\n        this.spine.setEventListener(function () {\n            if (t) {\n                t();\n            }\n        });\n    },\n    playSound: function () {\n        switch (this.info.id) {\n            case 3:\n            case 12:\n                break;\n            case 6:\n                cc.butler.playEffectAsync(\"game\", \"sound/dun\");\n                break;\n            case 8:\n                cc.butler.playEffectAsync(\"game\", \"sound/hp\");\n                break;\n            case 9:\n                cc.butler.playEffectAsync(\"game\", \"sound/jiguang\");\n                break;\n            case 10:\n                cc.butler.playEffectAsync(\"game\", \"sound/getSunShine\");\n                break;\n            default:\n                cc.butler.playEffectAsync(\"game\", \"sound/shoot\");\n        }\n    },\n    tryShoot: function (t, e) {\n        var i = this;\n        \n        // \n        if (!this.tryShootCallCount) {\n            this.tryShootCallCount = 0;\n        }\n        this.tryShootCallCount++;\n        \n        // 10\n        if (this.tryShootCallCount % 10 === 1) {\n            console.log(\"[Hero tryShoot] ID:\" + this.info.id + \" :\" + this.tryShootCallCount + \n                        \", useCharacterAttack:\" + this.useCharacterAttack + \n                        \", isAttacking:\" + this.isAttacking +\n                        \", inCoolDown:\" + this.item.inCoolDown);\n        }\n        \n        // character\n        if (this.useCharacterAttack) {\n            // updateMovement\n            var target = e || this.currentTarget;\n            \n            // \n            if (!target || target.hp <= 0) {\n                // \n                var attackRangeBuffer = this.atkRR * 1.05; // 5%\n                target = this.scene.chooseEnemy(this, attackRangeBuffer);\n            }\n            \n            // updateMovement\n            if (target && target.hp > 0) {\n                var targetPos = target.node.position.add(cc.v2(0, target.centerY));\n                var distSqr = targetPos.sub(this.node.position).lengthSqr();\n                var attackRangeBuffer = this.atkRR * 1.05;\n                \n                // \n                if (distSqr > attackRangeBuffer) {\n                    if (this.tryShootCallCount % 30 === 1) {\n                        console.log(\"[Hero tryShoot] ID:\" + this.info.id + \" :\" + Math.sqrt(distSqr).toFixed(1) + \" > :\" + Math.sqrt(attackRangeBuffer).toFixed(1) + \"\");\n                    }\n                    target = null;\n                }\n            } else {\n                target = null;\n            }\n            \n            if (!target || target.hp <= 0) {\n                if (!this.loggedNoTarget || this.tryShootCallCount % 30 === 1) {\n                    console.log(\"[Hero tryShoot] ID:\" + this.info.id + \" :\" + Math.sqrt(this.atkRR).toFixed(1));\n                    this.loggedNoTarget = true;\n                }\n                // \n                if (this.isAttacking) {\n                    console.log(\"[Hero tryShoot] ID:\" + this.info.id + \" \");\n                    this.isAttacking = false;\n                }\n                // \n                if (this.hasReachedAttackRange) {\n                    // \n                    if (!this.attackFailCount) {\n                        this.attackFailCount = 0;\n                    }\n                    this.attackFailCount++;\n                    \n                    // \n                    if (this.attackFailCount >= 5) {\n                        console.log(\"[Hero tryShoot]  ID:\" + this.info.id + \" \" + this.attackFailCount + \"hasReachedAttackRange\");\n                        this.hasReachedAttackRange = false;\n                        this.attackFailCount = 0;\n                    }\n                }\n                return false;\n            }\n            \n            // \n            this.attackFailCount = 0;\n            \n            // \"\"\n            this.loggedNoTarget = false;\n            \n            // \n            if (this.isAttacking) {\n                return false;\n            }\n            \n            this.isAttacking = true;\n            this.currentAttackTarget = target;\n            \n            // HitThrowing\n            var attackAnim = \"Hit\"; // \n            var attackDelay = 200; // 200ms\n            \n            // Throwing\n            if ([4, 5, 12].indexOf(this.info.id) !== -1) {\n                attackAnim = \"Throwing\";\n                attackDelay = 300; // \n            }\n            \n            console.log(\"[Hero tryShoot]  ID:\" + this.info.id + \" :\" + attackAnim + \n                        \", ID:\" + target.id + \", HP:\" + target.hp + \n                        \", spine:\" + !!this.spine + \", spine.node.active:\" + (this.spine && this.spine.node ? this.spine.node.active : \"null\"));\n            \n            this.setAnimation(0, attackAnim, false, function () {\n                console.log(\"[Hero]  ID:\" + i.info.id + \" isAttacking:\" + i.isAttacking + \"  false\");\n                i.isAttacking = false;\n                i.setAnimation(0, \"Idle\", true, null);\n                \n                // character\n                // Item.jsinCoolDown=true\n                console.log(\"[Hero] ID:\" + i.info.id + \"  inCoolDown:\" + i.item.inCoolDown);\n                \n                // Item.jsinCoolDown=true\n                var cdTime = i.item.cdMs || 500; // 500ms\n                console.log(\"[Hero] ID:\" + i.info.id + \" :\" + cdTime + \"ms\");\n                i.scene.setTimeout(function() {\n                    i.item.inCoolDown = false;\n                    console.log(\"[Hero]  ID:\" + i.info.id + \" inCoolDown:\" + i.item.inCoolDown);\n                }, cdTime);\n            });\n            \n            // \n            this.scene.setTimeout(function () {\n                console.log(\"[Hero]  ID:\" + i.info.id + \" \");\n                if (i.currentAttackTarget && i.currentAttackTarget.hp > 0) {\n                    var damage = i.getAtk(i.item.lv);\n                    console.log(\"[Hero]  ID:\" + i.info.id + \" :\" + damage + \" ID:\" + i.currentAttackTarget.id);\n                    i.dealDamageToEnemy(i.currentAttackTarget, damage);\n                } else {\n                    console.log(\"[Hero]  ID:\" + i.info.id + \" \");\n                }\n            }, attackDelay);\n            \n            this.playSound();\n            return true;\n        }\n        \n        // \n        // ID 1,2,4,5,7,9,12\n        // todo \n        var needTargetCheck = [1, 2, 3, 4, 5, 6, 7, 9, 12];\n        if (needTargetCheck.indexOf(this.info.id) !== -1) {\n            // \n            // updateMovement\n            // \n            if (!this.currentTarget || this.currentTarget.hp <= 0) {\n                // \n                var nearTarget = this.scene.chooseEnemy(this, this.atkRR);\n                if (!nearTarget) {\n                    // false\n                    return false;\n                }\n                this.currentTarget = nearTarget;\n            }\n            \n            // \n            var targetPos = this.currentTarget.node.position.add(cc.v2(0, this.currentTarget.centerY));\n            var distance = targetPos.sub(this.node.position).lengthSqr();\n            if (distance > this.atkRR) {\n                // false\n                return false;\n            }\n        }\n        \n        switch (this.info.id) {\n            case 3:\n                // 3\n                var r = e || this.scene.chooseEnemy(this, this.atkRR);\n                return (\n                    !!r &&\n                    (this.pushLvAndAtk(t),\n                    !this.isAttacking &&\n                        ((this.isAttacking = !0),\n                        this.playAttAndDo(\n                            function () {\n                                if (r.isValid) {\n                                    i.isAttacking = !1;\n                                    i.checkToShoot(r);\n                                }\n                            },\n                            function () {\n                                if (i.item.bulletCount <= 0 && i.IKBone) {\n                                    cc.tween(i.IKBone)\n                                        .to(0.064, {\n                                            x: 150,\n                                            y: 50\n                                        })\n                                        .start();\n                                }\n                            }\n                        ),\n                        // plant spineIK\n                        // character spineIK\n                        (!this.characterSpine || this.spine !== this.characterSpine) && (\n                            this.IKBone || (this.IKBone = this.spine.findBone(\"IK\")),\n                            cc\n                                .tween(this.IKBone)\n                                .to(0.064, {\n                                    x: (r.node.x - this.node.x) / 0.76,\n                                    y: (r.node.y + r.centerY - this.node.y) / 0.76\n                                })\n                                .start()\n                        ),\n                        !0))\n                );\n            case 6:\n                this.playAttAndDo(function () {\n                    var t = i.getAtk(i.item.lv) / 100;\n                    var e = 0;\n                    if (cc.pvz.runtimeData.hasEnableBuff(601)) {\n                        e = 0.15;\n                    }\n                    if (cc.pvz.runtimeData.hasEnableBuff(602)) {\n                        e += 0.3;\n                    }\n                    if (e > 0) {\n                        t *= 1 + e;\n                    }\n                    i.item.crossItems.forEach(function (e) {\n                        if (e.hero && e.hero.hp > 0) {\n                            e.hero.addShield(e.maxHp * t);\n                            i.scene.showBuffEffect(\"shield\", e.hero.node.position);\n                        }\n                    });\n                });\n                return !0;\n            case 8:\n                var n = this.scene.chooseMinHpHero();\n                return (\n                    !!n &&\n                    (this.playAttAndDo(function () {\n                        var t = i.getAtk(i.item.lv);\n                        if (i.checkBuff(802)) {\n                            t *= 1.2;\n                        }\n                        n.addHp(t);\n                        i.scene.showBuffEffect(\"HP\", n.node.position);\n                    }),\n                    !0)\n                );\n            case 10:\n                this.playAttAndDo(function () {\n                    var t = i.getAtk(i.item.lv);\n                    var e = 0;\n                    if (cc.pvz.runtimeData.hasEnableBuff(1001)) {\n                        e = 0.1;\n                    }\n                    if (cc.pvz.runtimeData.hasEnableBuff(1002)) {\n                        e += 0.2;\n                    }\n                    if (e > 0) {\n                        t *= 1 + e;\n                    }\n                    i.scene.showBuffEffect(\n                        \"music\",\n                        i.node.position.add(cc.v2(0, 50)),\n                        i.scene.getAngerBarWPos(),\n                        function () {\n                            cc.pvz.runtimeData.anger += t;\n                            i.scene.updateAnger();\n                        }\n                    );\n                });\n                return !0;\n            case 11:\n                this.playAttAndDo(function () {\n                    var t = 1;\n                    if (cc.pvz.runtimeData.hasEnableBuff(1104)) {\n                        if (i.lastBulletCount) {\n                            if (1 == i.lastBulletCount) {\n                                t = 2;\n                            } else {\n                                t = 1;\n                            }\n                        }\n                        i.lastBulletCount = t;\n                    }\n                    var e = function () {\n                        var t = cc.instantiate(i.landMineNode);\n                        var e = cc.v2(\n                            i.scene.getHeroesMaxMarginX() + cc.math.randomRange(0, 150),\n                            cc.math.randomRange(i.scene.groundAreaLB.y + 120, i.scene.groundAreaTR.y - 120)\n                        );\n                        t.position = i.node.position;\n                        t.active = !0;\n                        t.parent = i.scene.objsRoot;\n                        t.zIndex = -t.y;\n                        var n = t.getComponent(cc.Collider);\n                        n.enabled = !1;\n                        var o = t.getComponent(sp.Skeleton);\n                        var s = o.findBone(\"IK\");\n                        s.x = (e.x - t.x) / t.scale;\n                        s.y = (e.y - t.y) / t.scale;\n                        s.x = Math.max(0, s.x);\n                        o.setAnimation(0, \"zd11_1\", !0);\n                        o.setCompleteListener(function () {\n                            t.position = e;\n                            n.enabled = !0;\n                            o.setAnimation(0, \"zd11_2\", !1);\n                            o.setCompleteListener(null);\n                        });\n                    };\n                    for (var n = 0; n < t; n++) {\n                        e();\n                    }\n                });\n                return !0;\n            case 12:\n                var o = this.checkBuff(1204) ? 2 : 1,\n                    s = this.scene.chooseEnemys(this, this.atkRR, o);\n                if (0 == s.length) {\n                    return !1;\n                }\n                var c = this.scene.getHeroesMaxMarginX(),\n                    a = 0;\n                this.playAttAndDo(function () {\n                    if (1 != a || i.checkBuff(1204)) {\n                        var t = s[Math.min(s.length - 1, a)];\n                        var e = t.node.position.add(cc.v2(0, t.centerY));\n                        var n = cc.v2(Math.min(c, e.x), e.y);\n                        var o = i.scene.objsRoot.convertToWorldSpaceAR(n);\n                        var r = cc.instantiate(i.zd.node);\n                        var h = r.getComponent(\"Bullet\");\n                        r.parent = i.scene.bulletsRoot;\n                        r.active = !0;\n                        r.position = i.node.position;\n                        h.spine.setAnimation(0, h.spine.defaultAnimation, !0);\n                        var d = h.spine.findBone(\"IK\");\n                        var u = h.spine.node.convertToNodeSpaceAR(o);\n                        d.x = u.x;\n                        d.y = u.y;\n                        h.initBy(i.scene, i.item.lv);\n                        h.a = i;\n                        h.att = i.getAtk(i.item.lv);\n                        var p = function (t) {\n                            i.scene.setTimeout(function () {\n                                i.scene.showJsEffect(cc.v2(n.x + 100 * t, n.y), i.info.id);\n                            }, 48 * t);\n                        };\n                        for (var l = 1; l < 5; l++) {\n                            p(l);\n                        }\n                        cc.butler.playEffectAsync(\"game\", \"sound/gunzi\");\n                        a++;\n                    }\n                });\n                return !0;\n        }\n        var r = e || this.scene.chooseEnemy(this, this.atkRR);\n        return (\n            !!r &&\n            (this.pushLvAndAtk(t),\n            !this.isAttacking &&\n                ((this.isAttacking = !0),\n                this.playAttAndDo(\n                    function () {\n                        if (r.isValid) {\n                            i.isAttacking = !1;\n                            i.checkToShoot(r);\n                        }\n                    },\n                    function () {\n                        if (i.item.bulletCount <= 0 && i.IKBone) {\n                            cc.tween(i.IKBone)\n                                .to(0.064, {\n                                    x: 150,\n                                    y: 50\n                                })\n                                .start();\n                        }\n                    }\n                        ),\n                        // plant spineIK\n                        // character spineIK\n                        (!this.characterSpine || this.spine !== this.characterSpine) && (\n                            this.IKBone || (this.IKBone = this.spine.findBone(\"IK\")),\n                            cc\n                                .tween(this.IKBone)\n                                .to(0.064, {\n                                    x: (r.node.x - this.node.x) / 0.76,\n                                    y: (r.node.y + r.centerY - this.node.y) / 0.76\n                                })\n                                .start()\n                        ),\n                        !0))\n        );\n    },\n    checkToShoot: function (t) {\n        if (0 != this.lvs.length) {\n            if (this.zd) {\n                var e = this.lvs.shift();\n                var i = t || this.scene.chooseEnemy(this, this.atkRR);\n                if (i) {\n                    this.shoot(i, this.item.lv, e.atk);\n                }\n            }\n            if (this.lvs.length > 0) {\n                this.scene.setTimeout(this.checkToShoot.bind(this), 80);\n            }\n        }\n    },\n    getShootAPos: function () {\n        // characterHand_F\n        if (this.useCharacterAttack && this.spine) {\n            if (!this.HandBone) {\n                this.HandBone = this.spine.findBone(\"Hand_F\");\n            }\n            if (this.HandBone) {\n                var t = cc.v2(this.HandBone.worldX, this.HandBone.worldY);\n                return this.spine.node.convertToWorldSpaceAR(t);\n            } else {\n                // Hand_Fspine\n                return this.spine.node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n            }\n        }\n        \n        // \n        if (this.GPBone) {\n            //\n        } else {\n            this.GPBone = this.spine.findBone(\"GP\");\n        }\n        var t = cc.v2(this.GPBone.worldX, this.GPBone.worldY);\n        return this.spine.node.convertToWorldSpaceAR(t);\n    },\n    shoot: function (t, e, i) {\n        if (4 == this.info.id) {\n            var n;\n            if (this.checkBuff(401)) {\n                n = 9;\n            } else {\n                n = 5;\n            }\n            return this.shootN(n, t, e, i);\n        }\n        if (this.checkBuff(904)) {\n            return this.shootN(3, t, e, i);\n        } else {\n            if (7 == this.info.id) {\n                return this.shootIK(t, e, i);\n            } else {\n                return void this.shoot1(t, e, i);\n            }\n        }\n    },\n    shoot1: function (t, e, i) {\n        var n = this.getShootAPos();\n        var o = this.scene.bulletsRoot.convertToNodeSpaceAR(n);\n        var s = t.node.position.add(cc.v2(0, t.centerY)).sub(o);\n        if (s.x < 0) {\n            s.x = 0;\n        }\n        var c = Math.atan2(s.y, s.x);\n        var a = this.zd;\n        var r = cc.instantiate(a.node);\n        r.parent = this.scene.bulletsRoot;\n        r.active = !0;\n        r.position = o;\n        var h = r.getComponent(\"Bullet\");\n        if (this.checkBuff(104)) {\n            h.hitCount = 2;\n        }\n        if (this.checkBuff(503)) {\n            h.hitCount = 2;\n        }\n        h.initBy(this.scene, e);\n        h.a = this;\n        if (13 == this.info.id && 2 == cc.pvz.runtimeData.mode) {\n            h.att = i / 2;\n        } else {\n            h.att = i;\n        }\n        h.moveByAngle((180 * c) / Math.PI);\n    },\n    shootN: function (t, e, i, n) {\n        var o = this.getShootAPos();\n        var s = this.scene.bulletsRoot.convertToNodeSpaceAR(o);\n        var c = e.node.position.add(cc.v2(0, e.centerY)).sub(s);\n        if (c.x < 0) {\n            c.x = 0;\n        }\n        var a = (180 * Math.atan2(c.y, c.x)) / Math.PI;\n        var r;\n        if (t > 5) {\n            r = [0, -10, -20, -30, 40, 10, 20, 30, 40];\n        } else {\n            r = [0, -15, 15, -30, 30];\n        }\n        for (var h = 0; h < t; h++) {\n            var d = cc.instantiate(this.zd.node);\n            d.parent = this.scene.bulletsRoot;\n            d.active = !0;\n            d.position = s;\n            var u = d.getComponent(\"Bullet\");\n            u.initBy(this.scene, i);\n            u.a = this;\n            u.att = n;\n            u.moveByAngle(a + r[h]);\n        }\n    },\n    shootIK: function (t, e, i) {\n        var n = this;\n        var o = this.getShootAPos();\n        var s = this.scene.bulletsRoot.convertToNodeSpaceAR(o);\n        var c = t.node.convertToWorldSpaceAR(cc.v2(0, t.centerY));\n        var a = cc.instantiate(this.zd.node);\n        var r = a.getComponent(\"Bullet\");\n        a.parent = this.scene.bulletsRoot;\n        a.active = !0;\n        a.position = s;\n        if (this.checkBuff(702)) {\n            a.getComponent(\"EventCollider\").collider.radius *= 1.3;\n        }\n        var h = r.spine.setAnimation(0, r.spine.defaultAnimation, !0);\n        r.spine.setTrackEventListener(h, function () {\n            n.scene.showJsEffect(t.node.position, n.info.id);\n        });\n        var d = r.spine.findBone(\"IK\");\n        var u = r.spine.node.convertToNodeSpaceAR(c);\n        d.x = u.x;\n        d.y = u.y;\n        d.x = Math.max(0, d.x);\n        r.initBy(this.scene, e);\n        r.a = this;\n        r.att = i;\n    },\n    checkHeroBuff: function () {\n        return !1;\n    },\n    checkBuff: function (t) {\n        var e = (t - (t % 100)) / 100;\n        return this.info.id == e && cc.pvz.runtimeData.hasEnableBuff(t);\n    },\n    doBulletAttLogic: function (t, e) {\n        var i = t.att;\n        if (this.checkBuff(101)) {\n            i *= 1.25;\n        }\n        if (this.checkBuff(201)) {\n            i *= 1.25;\n        }\n        if (this.checkBuff(504)) {\n            i *= 1.5;\n        }\n        if (this.checkBuff(701)) {\n            i *= 1.25;\n        }\n        if (this.checkBuff(901)) {\n            i *= 1.25;\n        }\n        if (this.checkBuff(1101)) {\n            i *= 1.25;\n        }\n        if (this.checkBuff(1201)) {\n            i *= 1.25;\n        }\n        if (e.weakNode && this.isPhy) {\n            i *= 1.2;\n        }\n        switch (cc.pvz.runtimeData.actBuff1) {\n            case 1:\n            case 2:\n            case 3:\n                if (this.isPhy) {\n                    i *= [1.3, 1.4, 1.5][cc.pvz.runtimeData.actBuff1 - 1];\n                }\n                break;\n            case 4:\n            case 5:\n            case 6:\n                if (this.is3gz) {\n                    i *= [1.3, 1.4, 1.5][cc.pvz.runtimeData.actBuff1 - 4];\n                }\n                break;\n            case 10:\n            case 11:\n            case 12:\n                if (this.is2gz) {\n                    i *= [1.3, 1.4, 1.5][cc.pvz.runtimeData.actBuff1 - 10];\n                }\n        }\n        var n = 0;\n        if (this.checkCrit(t, e)) {\n            n = 1;\n            i *= this.getCritPlus(t, e);\n        }\n        i *= cc.math.randomRange(0.95, 1.05);\n        e.hurtBy(this, i);\n        this.scene.showEnemyHurtNum(n, e.node.position, i);\n        if (t.jsEffExclusive) {\n            //\n        } else {\n            this.scene.showJsEffect(e.node.position, this.info.id);\n        }\n        cc.pvz.runtimeData.stats[this.info.id] += i;\n        if (t.buffSlow) {\n            e.addBuffSlow();\n        }\n        if (t.buffIce && this.checkBuff(1203) && Math.random() < 0.2) {\n            e.addBuffIce();\n        }\n        if (this.checkBuff(704) && Math.random() < 0.5) {\n            e.addBuffWeak();\n        }\n        if (this.checkBuff(204)) {\n            e.repulse(this.node.position);\n        }\n        if (this.checkBuff(403)) {\n            e.repulse(this.node.position);\n        }\n        if (this.checkBuff(1102)) {\n            e.repulse(this.node.position);\n        }\n    },\n    checkCrit: function () {\n        if (this.checkBuff(501)) {\n            if (this.attCounter) {\n                this.attCounter = this.attCounter + 1;\n            } else {\n                this.attCounter = 1;\n            }\n            var t;\n            if (this.checkBuff(502)) {\n                t = 2;\n            } else {\n                t = 3;\n            }\n            if (this.attCounter >= t) {\n                this.attCounter = 0;\n                return !0;\n            }\n        }\n        var e = 0;\n        if (this.checkBuff(102)) {\n            e += 0.25;\n        }\n        if (this.checkBuff(404)) {\n            e += 0.25;\n        }\n        if (this.checkBuff(903)) {\n            e += 0.1;\n        }\n        return Math.random() < e;\n    },\n    getCritPlus: function () {\n        var t = 1.5;\n        if (this.checkBuff(103)) {\n            t += 0.5;\n        }\n        return t;\n    },\n    doLandMinesLogic: function (t) {\n        var e = t.getComponent(\"Enemy\");\n        if (e && e.hp > 0) {\n            this.doBulletAttLogic(\n                {\n                    att: this.getAtk(this.item.lv),\n                    lv: this.item.lv,\n                    jsEffExclusive: !0\n                },\n                e\n            );\n        }\n    },\n    onLandminesCollision: function (t, e) {\n        if (e.enabled) {\n            var i = t.getComponent(\"Enemy\");\n            if (i && i.hp > 0) {\n                e.enabled = !1;\n                var n = e.node.getComponent(sp.Skeleton);\n                var o = cc.find(\"range\", e.node).getComponent(cc.Collider);\n                cc.pvz.utils.manuallyCheckCollider(o);\n                this.scene.showJsEffect(e.node.position, this.info.id);\n                n.node.destroy();\n            }\n        }\n    },\n    addHp: function (t) {\n        this.hp = Math.min(this.item.maxHp, this.hp + t);\n        this.item.updateHp(this.hp / this.item.maxHp);\n        this.scene.updateHp(!0);\n    },\n    delHp: function (t) {\n        this.hp = Math.max(0, this.hp - t);\n        this.item.updateHp(this.hp / this.item.maxHp);\n        this.scene.updateHp(!0);\n    },\n    addShield: function (t) {\n        this.shieldValue = Math.min(this.item.maxHp, this.shieldValue + t);\n        this.item.updateShield(this.shieldValue / this.item.maxHp);\n        this.scene.updateShield();\n    },\n    hurtBy: function (t, e, i) {\n        // \n        var n = this;\n        if (!(this.hasEnded || this.hp <= 0)) {\n            if (this.shieldValue > 0) {\n                var o = Math.min(this.shieldValue, i);\n                i -= o;\n                this.shieldValue -= o;\n                this.item.updateShield(this.shieldValue / this.item.maxHp);\n            }\n            if (i > 0 && (this.delHp(i), this.hp <= 0)) {\n                var s =\n                    !cc.pvz.runtimeData.hasUseReborn &&\n                    (8 == this.info.id || this.scene.hasHero(8)) &&\n                    cc.pvz.runtimeData.hasEnableBuff(803);\n                if (s) {\n                    cc.pvz.runtimeData.hasUseReborn = !0;\n                } else {\n                    // \n                    this.item.barNode.active = !1;\n                }\n                this.setAnimation(0, \"Dead\", !1, function () {\n                    if (s) {\n                        n.reborn(cc.pvz.runtimeData.hasEnableBuff(804) ? 1 : 0.3);\n                        n.showBuffEffect(\"revive\", !1);\n                    } else {\n                        n.hasDie = !0;\n                        n.scene.checkIsFail();\n                        n.spine.setCompleteListener(null);\n                    }\n                });\n            }\n        }\n    },\n    reborn: function (t) {\n        // \n        var e = this;\n        this.setAnimation(0, \"fuhuo\", !1, function () {\n            e.hp = e.item.maxHp * t;\n            e.item.updateHp();\n            e.hasDie = !1;\n            e.setAnimation(0, \"Idle\", !0, null);\n        });\n    },\n    showBuffEffect: function (t, e) {\n        if (void 0 === e) {\n            e = !1;\n        }\n        if (e) {\n            this.scene.addBuffPrefab\n                .addNodeTo(this.item.spine.node, cc.Vec2.ZERO)\n                .getComponent(sp.Skeleton)\n                .setAnimation(0, t, !1);\n        } else {\n            this.scene.showBuffEffect(t, this.node.position);\n        }\n    },\n    update: function (t) {\n        // \n        if (!this.isInitialized || !this.scene) {\n            if (!this.loggedNotInit) {\n                console.warn(\"[Hero Update] ID, scene\");\n                this.loggedNotInit = true;\n            }\n            return;\n        }\n        if (this.scene && !this.scene.timePaused && !(this.scene.hasEnded || this.hp <= 0 || this.hasDie)) {\n            var e = t * cc.director.getScheduler().getTimeScale();\n            // \n            if (!this.lastLogTime) {\n                this.lastLogTime = 0;\n            }\n            var currentTime = Date.now();\n            if (currentTime - this.lastLogTime > 1000) {\n                console.log(\"[Hero Update] ID:\" + this.info.id + \", enabled:\" + this.enabled + \", :\" + this.node.position + \", :\" + (this.scene.enemys ? this.scene.enemys.length : 0) + \", isMoving:\" + this.isMoving);\n                this.lastLogTime = currentTime;\n            }\n            this.updateMovement(e);\n        }\n    },\n    updateMovement: function (t) {\n        // \n        if (!this.scene.enemys || this.scene.enemys.length === 0) {\n            // \n            this.returnToInitialPosition(t);\n            return;\n        }\n        \n        // \n        if (this.currentTarget && this.currentTarget.hp <= 0) {\n            console.log(\"[Hero] ID:\" + this.info.id + \" \");\n            this.currentTarget = null;\n            // \n            if (this.hasReachedAttackRange) {\n                this.hasReachedAttackRange = false;\n                console.log(\"[Hero] ID:\" + this.info.id + \" \");\n            }\n        }\n        \n        // \n        var e = this.scene.chooseEnemy(this, 999999);\n        \n        // \n        if (!this.movementDebugCount) {\n            this.movementDebugCount = 0;\n        }\n        this.movementDebugCount++;\n        \n        // 2\n        if (this.movementDebugCount % 120 === 1) {\n            // \n            var aliveEnemyCount = 0;\n            var enemyPositions = [];\n            if (this.scene.enemys) {\n                this.scene.enemys.forEach(function(enemy) {\n                    if (enemy.hp > 0) {\n                        aliveEnemyCount++;\n                        enemyPositions.push(\"(\" + enemy.node.x.toFixed(0) + \",\" + enemy.node.y.toFixed(0) + \",HP:\" + enemy.hp.toFixed(0) + \")\");\n                    }\n                });\n            }\n            \n            console.log(\"[Hero updateMovement] ID:\" + this.info.id + \n                        \", :(\" + this.node.x.toFixed(0) + \",\" + this.node.y.toFixed(0) + \")\" +\n                        \", :\" + !!e + \n                        (e ? \", :(\" + e.node.x.toFixed(0) + \",\" + e.node.y.toFixed(0) + \"), HP:\" + e.hp.toFixed(0) : \"\") +\n                        \", :\" + aliveEnemyCount + \"/\" + this.scene.enemys.length +\n                        \", isMoving:\" + this.isMoving +\n                        \", isAttacking:\" + this.isAttacking +\n                        \", hasReachedAttackRange:\" + this.hasReachedAttackRange);\n            \n            if (aliveEnemyCount > 0 && aliveEnemyCount <= 10) {\n                console.log(\"[Hero updateMovement] : \" + enemyPositions.join(\", \"));\n            }\n        }\n        \n        if (e && e.hp > 0) {\n            this.currentTarget = e;\n            var i = e.node.position.add(cc.v2(0, e.centerY));\n            var n = i.sub(this.node.position);\n            var o = n.lengthSqr();\n            \n            // 2\n            if (this.movementDebugCount % 120 === 1) {\n                console.log(\"[Hero updateMovement] ID:\" + this.info.id + \n                            \", :\" + Math.sqrt(o).toFixed(1) + \n                            \", :\" + Math.sqrt(this.atkRR).toFixed(1) + \n                            \", :\" + Math.sqrt(this.atkRR * 0.98).toFixed(1) +\n                            \", :\" + (o <= this.atkRR * 0.98));\n            }\n            \n            // 0.98\n            // \n            var attackRangeBuffer = this.atkRR * 0.98; // \n            if (o <= attackRangeBuffer) {\n                // \n                if (this.isMoving) {\n                    this.isMoving = false;\n                    this.hasReachedAttackRange = true;\n                    console.log(\"[Hero] ID:\" + this.info.id + \" \");\n                    // \n                }\n            } else {\n                // \n                if (!this.isMoving) {\n                    this.isMoving = true;\n                    this.hasReachedAttackRange = false;\n                    console.log(\"[Hero]  ID:\" + this.info.id + \" :\" + Math.sqrt(o).toFixed(1) + \", :\" + e.node.position.x.toFixed(1) + \",\" + e.node.position.y.toFixed(1));\n                    // \n                    if (!this.isAttacking) {\n                        this.setAnimation(0, \"Walk\", !0, null);\n                    } else {\n                        console.log(\"[Hero]  ID:\" + this.info.id + \" \");\n                    }\n                }\n                \n                // \n                var s = Math.atan2(n.y, n.x);\n                var c = cc.v2(this.moveSpeed * Math.cos(s) * t, this.moveSpeed * Math.sin(s) * t);\n                \n                // \n                var oldPos = this.node.position.clone();\n                this.node.position = this.node.position.add(c);\n                this.node.zIndex = -this.node.y;\n                this.item.barNode.position = this.item.barNode.position.add(c);\n\n                this.updateItemSpinePosition();\n                \n                // 2\n                if (!this.lastMoveLogTime) {\n                    this.lastMoveLogTime = 0;\n                }\n                var nowTime = Date.now();\n                if (nowTime - this.lastMoveLogTime > 2000) {\n                    console.log(\"[Hero Move]  ID:\" + this.info.id + \" :\" + this.node.position.x.toFixed(1) + \",\" + this.node.position.y.toFixed(1));\n                    this.lastMoveLogTime = nowTime;\n                }\n                \n                // position2\n                this.position2 = this.node.position.add(this.item.attOffset);\n            }\n        } else {\n            // \n            // \n            if (this.movementDebugCount % 120 === 1) {\n                var aliveCount = 0;\n                if (this.scene.enemys) {\n                    this.scene.enemys.forEach(function(enemy) {\n                        if (enemy.hp > 0) aliveCount++;\n                    });\n                }\n                if (aliveCount > 0) {\n                    console.warn(\"[Hero updateMovement]  ID:\" + this.info.id + \" chooseEnemynull\" + aliveCount + \"\");\n                }\n            }\n            this.returnToInitialPosition(t);\n        }\n    },\n    updateItemSpinePosition: function () {\n        // characteritem.spine\n        // character spineHero\n        if (this.useCharacterAttack) {\n            return;\n        }\n        \n        // plantitem.spine\n        // Heroitem.spine\n        if (this.item && this.item.spine && this.item.spine.node) {\n            // Hero\n            var heroWorldPos = this.node.parent.convertToWorldSpaceAR(this.node.position);\n            // item.spine\n            var spineLocalPos = this.item.spine.node.parent.convertToNodeSpaceAR(heroWorldPos);\n            \n            // \n            if (!this.loggedSpineUpdate) {\n                console.log(\"[Hero] ID:\" + this.info.id + \" spine - Hero:\", heroWorldPos, \"spine:\", spineLocalPos);\n                this.loggedSpineUpdate = true;\n            }\n            \n            // item.spine\n            this.item.spine.node.position = spineLocalPos;\n        } else {\n            if (!this.loggedSpineError) {\n                console.error(\"[Hero] ID:\" + this.info.id + \" spineitem:\", !!this.item, \"spine:\", !!(this.item && this.item.spine), \"spine.node:\", !!(this.item && this.item.spine && this.item.spine.node));\n                this.loggedSpineError = true;\n            }\n        }\n    },\n    returnToInitialPosition: function (t) {\n        var distSqr = this.node.position.sub(this.initialPosition).lengthSqr();\n        if (distSqr > 1) {\n            if (!this.isMoving) {\n                this.isMoving = true;\n                if (!this.isAttacking) {\n                    this.setAnimation(0, \"Walk\", !0, null);\n                }\n            }\n            var a = this.initialPosition.sub(this.node.position);\n            var r = Math.atan2(a.y, a.x);\n            var h = cc.v2(this.moveSpeed * Math.cos(r) * t, this.moveSpeed * Math.sin(r) * t);\n            if (h.lengthSqr() > a.lengthSqr()) {\n                this.node.position = this.initialPosition.clone();\n            } else {\n                this.node.position = this.node.position.add(h);\n            }\n            this.node.zIndex = -this.node.y;\n            \n            // item.spine\n            this.updateItemSpinePosition();\n            \n            this.position2 = this.node.position.add(this.item.attOffset);\n        } else {\n            if (this.isMoving) {\n                this.isMoving = false;\n                // item.spine\n                // characteritem.spine\n                if (!this.useCharacterAttack && \n                    this.item && this.item.spine && this.item.spine.node) {\n                    this.item.spine.node.position = this.itemSpineInitialPos.clone();\n                }\n                if (!this.isAttacking) {\n                    this.setAnimation(0, \"Idle\", !0, null);\n                }\n            }\n        }\n    },\n});"]}