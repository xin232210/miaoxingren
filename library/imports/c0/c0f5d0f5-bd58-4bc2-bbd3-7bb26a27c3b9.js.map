{"version":3,"sources":["assets/mainUI/scripts/UIShop.js"],"names":["i","cc","Class","name","properties","itemId","count","toolId","buyTimes","priceType","price","discount","Component","shopJsonFile","JsonAsset","shopBoxJsonFile","shopDailyPanel","Node","refreshTimesLabel","Label","shopCoinList","boxLvLabel","boxLvBar","ProgressBar","boxLvProgress","boxItemList","scrollPanel","ScrollView","redTips","onClickRefresh","e","isLookAd","refreshTimes","popupManager","showToast","onStopShopScroll","pvz","AdUtils","showAdRewardVideo","GameConfig","AdType","t","onAdClose","PlayerData","updateShopTimes","ShopTimesType","getShopTimes","string","initShopDailyData","onClickShopBoxTip","popup","ad","scale","shopBoxData","lv","shopBoxJson","onLoad","UIShop","shopJson","json","start","node","Math","min","width","height","updateRedTip","active","initBy","utils","fadeInBtn","stageLevel","getStageLevel","checkAndResetShop","isNewShopStatus","refreshShopUI","TAUtils","trackAdUIShow","stopAutoScroll","onShopToCoin","scrollToBottom","onShopToDiamond","scrollToTop","o","a","c","randomWeightIndex","wgt","s","item","n","r","h","discountWgt","length","p","priceNum","l","buyNum","priceItem","ceil","ItemType","onGetRandomTool","setShopData","addShopData","refreshDailyUI","changeShopStatus","JsonControl","getItemJson","getOpenToolList","Quality","math","randomRangeInt","initShopBoxUI","initCoinShopUI","children","getComponent","initShopDailyItem","getShopBoxData","shopBoxLvJson","player","progress","exp","initShopBoxItem","onChekBoxLvUp","updateShopBoxlV","initShopCoinItem","onCloseUI"],"mappings":"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","sourceRoot":"/","sourcesContent":["var i = cc.Class({\n    name: \"ShopData\",\n    properties: {\n        itemId: 1,\n        count: 1,\n        toolId: -1,\n        buyTimes: 0,\n        priceType: 2,\n        price: 1,\n        discount: 1\n    }\n});\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        shopJsonFile: cc.JsonAsset,\n        shopBoxJsonFile: cc.JsonAsset,\n        shopDailyPanel: cc.Node,\n        refreshTimesLabel: cc.Label,\n        shopCoinList: [cc.Node],\n        boxLvLabel: cc.Label,\n        boxLvBar: cc.ProgressBar,\n        boxLvProgress: cc.Label,\n        boxItemList: [cc.Node],\n        scrollPanel: cc.ScrollView,\n        redTips: [cc.Node]\n    },\n    onClickRefresh: function () {\n        var e = this;\n        if (this.isLookAd) {\n            //\n        } else {\n            if (this.refreshTimes <= 0) {\n                cc.popupManager.showToast(\"刷新次数不足！\");\n            } else {\n                this.onStopShopScroll(),\n                    (this.isLookAd = !0),\n                    cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"商店刷新\"], function (t) {\n                        e.onAdClose(t);\n                    });\n            }\n        }\n    },\n    onAdClose: function (e) {\n        this.isLookAd = !1;\n        if (e) {\n            cc.pvz.PlayerData.updateShopTimes(cc.pvz.GameConfig.ShopTimesType[\"商店刷新\"]);\n            this.refreshTimes = cc.pvz.PlayerData.getShopTimes(cc.pvz.GameConfig.ShopTimesType[\"商店刷新\"]);\n            this.refreshTimesLabel.string = this.refreshTimes;\n            this.initShopDailyData(!0);\n        }\n    },\n    onClickShopBoxTip: function () {\n        if (this.isLookAd) {\n            //\n        } else {\n            this.onStopShopScroll();\n            cc.popupManager.popup(\n                \"mainUI\",\n                \"shopboxTip\",\n                \"UIShopBoxTip\",\n                {\n                    ad: !1,\n                    scale: !0\n                },\n                this.shopBoxData.lv,\n                this.shopBoxJson\n            );\n        }\n    },\n    onLoad: function () {\n        cc.UIShop = this;\n        this.isLookAd = !1;\n        this.shopJson = this.shopJsonFile.json;\n        this.shopBoxJson = this.shopBoxJsonFile.json;\n    },\n    start: function () {\n        this.scrollPanel.node.scale = Math.min(1.4, this.node.width / 720);\n        this.scrollPanel.node.height /= this.scrollPanel.node.scale;\n    },\n    updateRedTip: function () {\n        this.redTips[0].active = 1 == cc.pvz.PlayerData.getShopTimes(cc.pvz.GameConfig.ShopTimesType[\"钻石免费\"]);\n        this.redTips[1].active = 7 == cc.pvz.PlayerData.getShopTimes(cc.pvz.GameConfig.ShopTimesType[\"金币免费\"]);\n    },\n    initBy: function () {\n        cc.pvz.utils.fadeInBtn(this.node);\n        this.node.active = !0;\n        this.stageLevel = cc.pvz.PlayerData.getStageLevel();\n        cc.pvz.PlayerData.checkAndResetShop();\n        this.refreshTimes = cc.pvz.PlayerData.getShopTimes(cc.pvz.GameConfig.ShopTimesType[\"商店刷新\"]);\n        this.refreshTimesLabel.string = this.refreshTimes;\n        if (cc.pvz.PlayerData.isNewShopStatus()) {\n            this.initShopDailyData(!1);\n        } else {\n            this.refreshShopUI();\n        }\n        this.updateRedTip();\n        cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"商店刷新\"]);\n        cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"商店宝箱\"]);\n        cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"商店钻石\"]);\n        cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"商店金币\"]);\n    },\n    onStopShopScroll: function () {\n        this.scrollPanel.stopAutoScroll();\n    },\n    onShopToCoin: function () {\n        this.scrollPanel.scrollToBottom(0.1);\n    },\n    onShopToDiamond: function () {\n        this.scrollPanel.scrollToTop(0.1);\n    },\n    initShopDailyData: function (e) {\n        if (void 0 === e) {\n            e = !1;\n        }\n        for (var t = e ? 1 : 0; t < 6; t++) {\n            var o = t + 1;\n            var a = this.shopJson[t];\n            var c;\n            if (1 == o) {\n                c = 0;\n            } else {\n                c = cc.pvz.utils.randomWeightIndex(a.wgt);\n            }\n            var s = a.item[c];\n            if (this.stageLevel < 5 && 7 == s) {\n                c = cc.pvz.utils.randomWeightIndex([a.wgt[0], a.wgt[1]]);\n                s = a.item[c];\n            }\n            var n = a[\"num\" + (c + 1)];\n            var r = n[cc.pvz.utils.randomWeightIndex(n)];\n            var h = 10;\n            if (a.discountWgt.length > 0) {\n                h = a.discount[cc.pvz.utils.randomWeightIndex(a.discountWgt)];\n            }\n            var p = a.priceNum[c] * r * (h / 10);\n            var l = new i();\n            l.count = r;\n            l.buyTimes = a.buyNum[0];\n            l.priceType = a.priceItem[0];\n            l.discount = h;\n            l.price = Math.ceil(p);\n            if (s >= 5 && s <= 7) {\n                l.itemId = cc.pvz.GameConfig.ItemType[\"固定碎片\"];\n                l.toolId = this.onGetRandomTool(s);\n            } else {\n                l.itemId = s;\n                l.toolId = -1;\n            }\n            if (e) {\n                cc.pvz.PlayerData.setShopData(o, l);\n            } else {\n                cc.pvz.PlayerData.addShopData(o, l);\n            }\n        }\n        if (e) {\n            this.refreshDailyUI();\n        } else {\n            cc.pvz.PlayerData.changeShopStatus();\n            this.refreshShopUI();\n        }\n    },\n    onGetRandomTool: function (e) {\n        var t = cc.JsonControl.getItemJson(e);\n        var i = cc.pvz.utils.getOpenToolList(t.Quality);\n        return i[cc.math.randomRangeInt(0, i.length)];\n    },\n    refreshShopUI: function () {\n        this.refreshDailyUI();\n        this.initShopBoxUI();\n        this.initCoinShopUI();\n    },\n    refreshDailyUI: function () {\n        for (var e = 0; e < 6; e++) {\n            var t = e + 1;\n            this.shopDailyPanel.children[e].getComponent(\"ShopDailyItem\").initShopDailyItem(t, this.shopJson[e]);\n        }\n    },\n    initShopBoxUI: function () {\n        var e = this;\n        this.shopBoxData = cc.pvz.PlayerData.getShopBoxData();\n        this.shopBoxLvJson = this.shopBoxJson[this.shopBoxData.lv - 1];\n        this.boxLvLabel.string = \"\" + this.shopBoxData.lv;\n        if (cc.player.shopBoxData.lv >= 10) {\n            this.boxLvProgress.string = \"已满级\";\n            this.boxLvBar.progress = 1;\n        } else {\n            this.boxLvProgress.string = this.shopBoxData.exp + \"/\" + this.shopBoxLvJson.exp;\n            this.boxLvBar.progress = this.shopBoxData.exp / this.shopBoxLvJson.exp;\n        }\n        for (var t = 0; t < this.boxItemList.length; t++) {\n            this.boxItemList[t].getComponent(\"ShopBoxItem\").initShopBoxItem(t + 1, this.shopBoxLvJson, function () {\n                e.onChekBoxLvUp();\n            });\n        }\n    },\n    onChekBoxLvUp: function () {\n        if (!(cc.player.shopBoxData.lv >= 10)) {\n            this.shopBoxData = cc.pvz.PlayerData.getShopBoxData();\n            this.shopBoxLvJson = this.shopBoxJson[this.shopBoxData.lv - 1];\n            var e = this.shopBoxData.exp - this.shopBoxLvJson.exp;\n            if (e >= 0) {\n                cc.pvz.PlayerData.updateShopBoxlV(1, e);\n                this.initShopBoxUI();\n                cc.popupManager.popup(\n                    \"mainUI\",\n                    \"shopboxlveft\",\n                    \"UIShopBoxLvUp\",\n                    {\n                        ad: !1,\n                        scale: !0\n                    },\n                    this.shopBoxData.lv,\n                    this.shopBoxJson\n                );\n            }\n            this.boxLvLabel.string = \"\" + this.shopBoxData.lv;\n            if (cc.player.shopBoxData.lv >= 10) {\n                this.boxLvProgress.string = \"已满级\";\n                this.boxLvBar.progress = 1;\n            } else {\n                this.boxLvProgress.string = this.shopBoxData.exp + \"/\" + this.shopBoxLvJson.exp;\n                this.boxLvBar.progress = this.shopBoxData.exp / this.shopBoxLvJson.exp;\n            }\n        }\n    },\n    initCoinShopUI: function () {\n        for (var e = 0; e < 3; e++) {\n            var t = e + 7;\n            this.shopCoinList[e].getComponent(\"ShopCoinItem\").initShopCoinItem(t, this.shopJson[t - 1]);\n        }\n    },\n    onCloseUI: function () {\n        this.node.active = !1;\n    }\n});\n"]}