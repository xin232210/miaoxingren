{"version":3,"sources":["assets/scripts/CustomSafeArea.js"],"names":["o","cc","Enum","WIN","PARENT","CANVAS","Class","SafeArea","properties","fitTarget","type","ensureLeft","ensureRight","ensureTop","ensureBottom","top","updateArea","e","getComponent","Widget","updateAlignment","node","position","getAnchorPoint","t","a","winSize","width","height","parent","view","getCanvasSize","n","sys","getSafeAreaRect","isAlignLeft","platform","WECHAT_GAME","i","wx","getWindowInfo","getSystemInfoSync","safeArea","left","screenWidth","console","log","isAlignRight","right","x","isAlignTop","y","isAlignBottom","bottom","_widgetManager","add"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o = cc.Enum({\n    WIN: 0,\n    PARENT: 1,\n    CANVAS: 2\n});\ncc.Class({\n    extends: cc.SafeArea,\n    properties: {\n        fitTarget: {\n            type: o,\n            default: o.WIN\n        },\n        ensureLeft: !0,\n        ensureRight: !0,\n        ensureTop: !0,\n        ensureBottom: !0,\n        top: 0\n    },\n    updateArea: function () {\n        var e = this.getComponent(cc.Widget);\n        if (e) {\n            e.updateAlignment();\n            this.node.position;\n            this.node.getAnchorPoint();\n            var t = 0;\n            var a = 0;\n            switch (this.fitTarget) {\n                case o.WIN:\n                    t = cc.winSize.width;\n                    a = cc.winSize.height;\n                    break;\n                case o.PARENT:\n                    t = this.node.parent.width;\n                    a = this.node.parent.height;\n                    break;\n                case o.CANVAS:\n                    t = cc.view.getCanvasSize().width;\n                    a = cc.view.getCanvasSize().height;\n            }\n            var n = cc.sys.getSafeAreaRect();\n            if (this.ensureLeft) {\n                e.isAlignLeft = !0;\n                if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n                    var i;\n                    if (wx.getWindowInfo) {\n                        i = wx.getWindowInfo();\n                    } else {\n                        i = wx.getSystemInfoSync();\n                    }\n                    if (i.safeArea) {\n                        e.left = (1600 * i.safeArea.left) / i.screenWidth;\n                    } else {\n                        e.left = 0;\n                    }\n                } else {\n                    e.left = 0;\n                }\n                console.log(\"ensureLeft:\", e.left);\n            }\n            if (this.ensureRight) {\n                e.isAlignRight = !0;\n                e.right = t - n.x - n.width;\n                console.log(\"ensureRight:\", e.right);\n            }\n            if (this.ensureTop) {\n                e.isAlignTop = !0;\n                e.top = a - n.y - n.height + this.top;\n                console.log(\"ensureTop:\", e.top);\n            }\n            if (this.ensureBottom) {\n                e.isAlignBottom = !0;\n                e.bottom = n.y;\n                console.log(\"ensureBottom:\", e.bottom);\n            }\n            e.updateAlignment();\n            cc._widgetManager.add(e);\n        }\n    }\n});\n"]}