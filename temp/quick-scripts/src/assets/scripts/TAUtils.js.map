{"version":3,"sources":["assets/scripts/TAUtils.js"],"names":["o","a","init","initShareConfig","e","cc","sys","platform","WECHAT_GAME","wx","onShareAppMessage","getShareIndex","title","pvz","GameConfig","ShareTitileList","imageUrlId","ShareIDList","imageUrl","ShareUrlList","query","cloud","uid","showShareMenu","withShareTicket","menus","share","t","console","log","lastShareType","shareIndex","popupManager","showToast","isFromShare","shareCB","shareDate","Date","now","shareAppMessage","shareCurrent","onWxShow","getGlobalConfig","utils","sendMsg","GameConst","SERVER_CONFIG_URL","then","Promise","resolve","getSwitch","gameGlobalConfig","buttonCfgList","find","button_name","flag","getSwitchAd","initShareKey","getTwtraceidSwitch","Twtraceid","getTwtraceidFrom","getLaunchOptionsSync","getThreshold","valueCfgList","value_name","value_num","Object","keys","length","onCheckGameVersion","getUpdateManager","onCheckForUpdate","hasUpdate","onUpdateReady","showModal","content","confirmText","showCancel","success","confirm","applyUpdate","onUpdateFailed","uploadRegisterData","DESKTOP_BROWSER","WIN32","MOBILE_BROWSER","sid","roleid","rolename","level","P8LogSDK","signLog","uploadLoginData","name","vip","oaid","pushLoginData","uploadLvUpData","player","upGradeRecord","trackP8AdClick","ad_slot","AdType","ad_unit_id","AD_UNITS_REWARD","type","status","wxVideoLog","trackP8AdSucc","track","trackLogin","trackLoading","trackBackpack","trackLevel","trackEndLevel","trackAdUIShow","trackAdBtnClick","trackAdClose","trackAdEnd","trackSystemUI","TAUtils","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o = 0;\nvar a = {\n    init: function () {},\n    initShareConfig: function () {\n        var e = this;\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            wx.onShareAppMessage(function () {\n                o = e.getShareIndex();\n                return {\n                    title: cc.pvz.GameConfig.ShareTitileList[o],\n                    imageUrlId: cc.pvz.GameConfig.ShareIDList[o],\n                    imageUrl: cc.pvz.GameConfig.ShareUrlList[o],\n                    query: \"fromuid=\" + (cc.pvz.cloud.uid ? cc.pvz.cloud.uid : 0)\n                };\n            });\n            wx.showShareMenu({\n                withShareTicket: !0,\n                menus: [\"shareAppMessage\", \"shareTimeline\"]\n            });\n        }\n    },\n    share: function (e, t) {\n        console.log(\"share\", e);\n        if (this.lastShareType != e) {\n            this.shareIndex = 0;\n            this.lastShareType = e;\n        }\n        o = this.getShareIndex();\n        if (cc.sys.platform != cc.sys.WECHAT_GAME) {\n            cc.popupManager.showToast(\"分享\");\n            return void t(!0);\n        }\n        var a = {\n            title: cc.pvz.GameConfig.ShareTitileList[o],\n            imageUrlId: cc.pvz.GameConfig.ShareIDList[o],\n            imageUrl: cc.pvz.GameConfig.ShareUrlList[o],\n            query: \"fromuid=\" + (cc.pvz.cloud.uid ? cc.pvz.cloud.uid : 0)\n        };\n        this.isFromShare = !0;\n        this.shareCB = t;\n        this.shareDate = Date.now();\n        wx.shareAppMessage(a);\n    },\n    shareCurrent: function (e, t) {\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            var o = {\n                title: e,\n                query: \"fromuid=\" + (cc.pvz.cloud.uid ? cc.pvz.cloud.uid : 0)\n            };\n            wx.shareAppMessage(o);\n        } else {\n            t(!0);\n        }\n    },\n    getShareIndex: function () {\n        return 0;\n    },\n    onWxShow: function () {\n        if (this.isFromShare && this.shareCB) {\n            this.shareCB(!0);\n            this.shareIndex++;\n        }\n        this.isFromShare = !1;\n    },\n    getGlobalConfig: function () {\n        return cc.pvz.utils\n            .sendMsg(cc.pvz.GameConst.SERVER_CONFIG_URL, null, \"GET\")\n            .then(function (e) {\n                return Promise.resolve(e);\n            })\n            .catch(function (e) {\n                console.log(\"getGlobalConfig data error\", e);\n                return Promise.resolve({});\n            });\n    },\n    getSwitch: function (e) {\n        if (!cc.gameGlobalConfig) {\n            return !1;\n        }\n        var t;\n        if (cc.gameGlobalConfig.buttonCfgList) {\n            t = cc.gameGlobalConfig.buttonCfgList.find(function (t) {\n                return t.button_name == e;\n            });\n        } else {\n            t = null;\n        }\n        if (t) {\n            return console.log(\"getSwitch\", e, !!t.flag && 1 == t.flag), !!t.flag && 1 == t.flag;\n        } else {\n            return console.log(\"getSwitch using default\", e, !1), !1;\n        }\n    },\n    getSwitchAd: function () {\n        return !0;\n    },\n    initShareKey: function () {},\n    getTwtraceidSwitch: function (e) {\n        if (void 0 === e) {\n            e = \"yxbn\";\n        }\n        return (\n            cc.sys.platform != cc.sys.WECHAT_GAME ||\n            ((cc.Twtraceid = this.getTwtraceidFrom(wx.getLaunchOptionsSync())), cc.Twtraceid == e)\n        );\n    },\n    getThreshold: function (e, t) {\n        if (cc.gameGlobalConfig.valueCfgList) {\n            var o = cc.gameGlobalConfig.valueCfgList.find(function (t) {\n                return t.value_name == e;\n            });\n            if (o) {\n                console.log(\"getThreshold\", e, o.value_num);\n                return o.value_num;\n            }\n        }\n        console.log(\"getThreshold using default\", e, t);\n        return t;\n    },\n    getTwtraceidFrom: function (e) {\n        if (Object.keys(e.query).length > 0) {\n            for (var t in e.query) {\n                if (\"?twtraceid\" == t) {\n                    return e.query[t];\n                }\n                if (\"twtraceid\" == t) {\n                    return e.query[t];\n                }\n            }\n        }\n        return \"\";\n    },\n    onCheckGameVersion: function () {\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            console.log(\"onCheckGameVersion\");\n            var e = wx.getUpdateManager();\n            e.onCheckForUpdate(function (e) {\n                console.log(\"请求完新版本信息的回调 : \", e.hasUpdate);\n            });\n            e.onUpdateReady(function () {\n                wx.showModal({\n                    title: \"更新提示\",\n                    content: \"新版本已准备就绪，请重启游戏！\",\n                    confirmText: \"重启游戏\",\n                    showCancel: !1,\n                    success: function (t) {\n                        if (t.confirm) {\n                            e.applyUpdate();\n                        }\n                    }\n                });\n            });\n            e.onUpdateFailed(function () {});\n        }\n    },\n    uploadRegisterData: function (e) {\n        if (\n            cc.sys.platform != cc.sys.DESKTOP_BROWSER &&\n            cc.sys.platform != cc.sys.WIN32 &&\n            cc.sys.platform != cc.sys.MOBILE_BROWSER\n        ) {\n            console.log(\"准备上报注册信息\");\n            var t = {\n                sid: \"1\",\n                roleid: e.uid + \"\",\n                rolename: \"玩家\" + e.uid,\n                level: \"1\"\n            };\n            P8LogSDK.signLog(t).then(function (e) {\n                console.log(\"已上报注册信息:\", e);\n            });\n        }\n    },\n    uploadLoginData: function (e) {\n        if (\n            cc.sys.platform != cc.sys.DESKTOP_BROWSER &&\n            cc.sys.platform != cc.sys.WIN32 &&\n            cc.sys.platform != cc.sys.MOBILE_BROWSER\n        ) {\n            console.log(\"准备上报登录信息\");\n            var t = {\n                sid: \"1\",\n                roleid: e.uid + \"\",\n                rolename: \"NONAME\" === e.name ? \"玩家\" + e.uid : e.name,\n                level: e.level + \"\",\n                vip: \"1\",\n                oaid: \"\"\n            };\n            P8LogSDK.pushLoginData(t).then(function (e) {\n                console.log(\"已上报登录信息:\", e);\n            });\n        }\n    },\n    uploadLvUpData: function () {\n        if (\n            cc.sys.platform != cc.sys.DESKTOP_BROWSER &&\n            cc.sys.platform != cc.sys.WIN32 &&\n            cc.sys.platform != cc.sys.MOBILE_BROWSER\n        ) {\n            console.log(\"准备上报升级信息\");\n            var e = {\n                level: \"\" + cc.player.level,\n                sid: \"1\",\n                roleid: \"\" + cc.pvz.cloud.uid,\n                rolename: \"\" + cc.pvz.cloud.name,\n                vip: \"1\",\n                oaid: \"\"\n            };\n            P8LogSDK.upGradeRecord(e).then(function (e) {\n                console.log(\"已上报登录信息:\", e);\n            });\n        }\n    },\n    trackP8AdClick: function (e) {\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            var t = {\n                sid: \"1\",\n                uid: \"\" + cc.pvz.cloud.uid,\n                roleid: \"\" + cc.pvz.cloud.uid,\n                rolename: \"玩家\" + cc.pvz.cloud.uid,\n                level: \"\" + cc.player.level,\n                ad_slot: \"\" + cc.pvz.GameConfig.AdType[e],\n                ad_unit_id: cc.pvz.GameConst.AD_UNITS_REWARD[0],\n                type: \"RewardedVideoAd\",\n                status: \"0\"\n            };\n            P8LogSDK.wxVideoLog(t).then(function (e) {\n                console.log(e);\n            });\n        }\n    },\n    trackP8AdSucc: function (e) {\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            var t = {\n                sid: \"1\",\n                uid: \"\" + cc.pvz.cloud.uid,\n                roleid: \"\" + cc.pvz.cloud.uid,\n                rolename: \"勇士\" + cc.pvz.cloud.uid,\n                level: \"\" + cc.player.level,\n                ad_slot: \"\" + cc.pvz.GameConfig.AdType[e],\n                ad_unit_id: cc.pvz.GameConst.AD_UNITS_REWARD[0],\n                type: \"RewardedVideoAd\",\n                status: \"1\"\n            };\n            P8LogSDK.wxVideoLog(t).then(function (e) {\n                console.log(e);\n            });\n        }\n    },\n    track: function () {},\n    trackLogin: function () {},\n    trackLoading: function (e, t) {\n        if (void 0 === t) {\n            t = 0;\n        }\n    },\n    trackBackpack: function () {},\n    trackLevel: function () {},\n    trackEndLevel: function () {},\n    trackAdUIShow: function () {},\n    trackAdBtnClick: function () {},\n    trackAdClose: function () {},\n    trackAdEnd: function () {},\n    trackSystemUI: function () {}\n};\nif (cc.pvz) {\n    //\n} else {\n    cc.pvz = {};\n}\ncc.pvz.TAUtils = a;\nmodule.exports = a;\n"]}