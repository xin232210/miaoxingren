{"version":3,"sources":["assets/scripts/Cloud.js"],"names":["o","a","uid","header","access","isGM","needSaveToCloud","baseData","login","e","t","cc","sys","platform","DESKTOP_BROWSER","WIN32","MOBILE_BROWSER","console","log","P8SDK","then","data","openid","loginSelf","n","BYTEDANCE_GAME","wx","request","url","method","loginCode","success","pvz","TAUtils","uploadRegisterData","name","uToken","token","getOnlineData","fail","req","errMsg","ok","checkUpdatePlayerInfo","updatePlayerInfo","WECHAT_GAME","i","c","JSON","stringify","lv","PlayerData","getAchieveProgress","GameConfig","MissionType","info","rsn","showToast","title","icon","duration","sendC","setAvatar","avatarUrl","uploadScore","setTimeout","score","exInfo","exInfo2","myRank","rank","sector","isCheat","rankLastWeek","rankList","fromIdx","ret","uInfo","makeFriend","getEnterOptionsSync","query","fromuid","uid2","parseInt","updatePlayerSub","tt","flag","cloud","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o = \"https://yiyouzan.cn/xsapi/rabbit/\";\nvar a = {\n    uid: null,\n    header: null,\n    access: 0,\n    isGM: !1,\n    needSaveToCloud: 0,\n    baseData: \"{}\",\n    login: function (e) {\n        var t = this;\n        if (\n            cc.sys.platform == cc.sys.DESKTOP_BROWSER ||\n            cc.sys.platform == cc.sys.WIN32 ||\n            cc.sys.platform == cc.sys.MOBILE_BROWSER\n        ) {\n            this.access = 100;\n            return void e(!0);\n        }\n        var o = function (t) {\n            if (e) {\n                e(t);\n            }\n        };\n        console.log(\"perpare p8 login\");\n        P8SDK.login().then(function (e) {\n            var a = e.data.openid;\n            t.loginSelf(a, o);\n        });\n    },\n    loginSelf: function (e, t) {\n        var a = this;\n        var n = o + (cc.sys.platform == cc.sys.BYTEDANCE_GAME ? \"user/bytelogin2\" : \"/user/p8loginkp\");\n        wx.request({\n            url: n,\n            method: \"POST\",\n            data: {\n                loginCode: e\n            },\n            success: function (e) {\n                console.log(\"login success:\", e.data);\n                if (e.data.new) {\n                    cc.pvz.TAUtils.uploadRegisterData({\n                        uid: e.data.uid\n                    });\n                }\n                a.uid = e.data.uid;\n                if (e.data.name) {\n                    a.name = e.data.name;\n                } else {\n                    a.name = \"玩家\" + a.uid;\n                }\n                a.access = e.data.access;\n                a.header = {\n                    uid: e.data.uid,\n                    uToken: e.data.token\n                };\n                a.isGM = e.data.access;\n                a.getOnlineData(t);\n            },\n            fail: function () {\n                t(!1);\n            }\n        });\n    },\n    req: function (e, t, a, n) {\n        wx.request({\n            url: o + e,\n            method: t ? \"POST\" : \"GET\",\n            header: this.header,\n            data: a,\n            success: function (e) {\n                console.log(\"req success, data:\", e.data);\n                n(!0, e.data);\n            },\n            fail: function (e) {\n                console.log(\"req fail, errMsg:\", e.errMsg);\n                n(!1);\n            }\n        });\n    },\n    getOnlineData: function (e) {\n        var t = this;\n        wx.request({\n            url: o + \"game/infokp\",\n            method: \"GET\",\n            header: t.header,\n            success: function (o) {\n                if (1 == o.data.ok) {\n                    t.baseData = o.data.baseData;\n                    e(!0);\n                } else {\n                    e(!1);\n                }\n            },\n            fail: function (t) {\n                console.log(\"info errMsg:\", t.errMsg);\n                e(!1);\n            }\n        });\n    },\n    checkUpdatePlayerInfo: function (e, t) {\n        var o = this;\n        if (this.uid) {\n            this.updatePlayerInfo(e, t);\n        } else {\n            this.login(function (a) {\n                if (a) {\n                    o.updatePlayerInfo(e, t);\n                } else {\n                    t(!1);\n                }\n            });\n        }\n    },\n    updatePlayerInfo: function (e, t) {\n        console.log(\"updatePlayerInfo\");\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            var a = 0;\n            var n = !0;\n            var i = function (e) {\n                if (e) {\n                    //\n                } else {\n                    n = !1;\n                }\n                if (++a >= 0) {\n                    t(n);\n                }\n            };\n            var c = JSON.stringify(e);\n            wx.request({\n                url: o + \"game/setbaseinfokp\",\n                method: \"POST\",\n                header: this.header,\n                data: {\n                    lv: cc.pvz.PlayerData.getAchieveProgress(cc.pvz.GameConfig.MissionType[\"装备总等级n\"]),\n                    info: c\n                },\n                success: function (e) {\n                    console.log(\"setbaseinfo success:\", e.data);\n                    i(1 == e.data.ok);\n                    if (0 == e.data.ok && \"not login\" == e.data.rsn) {\n                        wx.showToast({\n                            title: \"登录已失效\",\n                            icon: \"success\",\n                            duration: 1500\n                        });\n                    }\n                },\n                fail: function (e) {\n                    console.log(\"setbaseinfo errMsg:\", e.errMsg);\n                    i(!1);\n                }\n            });\n            this.sendC++;\n        } else {\n            t(!0);\n        }\n    },\n    setAvatar: function (e, t, a) {\n        wx.request({\n            url: o + \"game/authkp\",\n            method: \"POST\",\n            header: this.header,\n            data: {\n                name: e,\n                avatarUrl: t\n            },\n            success: function (e) {\n                console.log(\"authkp success:\", e.data);\n                a(1 == e.data.ok);\n            },\n            fail: function (e) {\n                console.log(\"authkp fail:\", e.errMsg);\n                a(!1);\n            }\n        });\n    },\n    uploadScore: function (e, t, a, n) {\n        if (cc.sys.platform != cc.sys.WECHAT_GAME) {\n            console.log(\"update score:\", e, \",exInfo:\", t, \",exInfo2:\", a);\n            return void setTimeout(function () {\n                n(!0);\n            });\n        }\n        wx.request({\n            url: o + \"game/updatescorekp\",\n            method: \"POST\",\n            header: this.header,\n            data: {\n                score: e,\n                exInfo: t,\n                exInfo2: a\n            },\n            success: function (e) {\n                console.log(\"updatescorekp success:\", e.data);\n                n(1 == e.data.ok);\n            },\n            fail: function (e) {\n                console.log(\"updatescorekp fail:\", e.errMsg);\n                n(!1);\n            }\n        });\n    },\n    myRank: function (e) {\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            wx.request({\n                url: o + \"game/myrankkp\",\n                method: \"GET\",\n                header: this.header,\n                success: function (t) {\n                    console.log(\"myrankkp success:\", t.data);\n                    e(1 == t.data.ok, t.data);\n                },\n                fail: function (t) {\n                    console.log(\"myrankkp fail:\", t.errMsg);\n                    e(!1);\n                }\n            });\n        } else {\n            setTimeout(function () {\n                e(!0, {\n                    ok: 1,\n                    rank: 0,\n                    info: {\n                        uid: 40303867,\n                        sector: 2,\n                        name: \"momo\",\n                        avatarUrl: \"\",\n                        score: 13,\n                        exInfo: \"\",\n                        isCheat: 0,\n                        rankLastWeek: 4\n                    }\n                });\n            });\n        }\n    },\n    rankList: function (e, t) {\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            wx.request({\n                url: o + \"game/ranklistkp\",\n                method: \"POST\",\n                header: this.header,\n                data: {\n                    fromIdx: e\n                },\n                success: function (e) {\n                    console.log(\"ranklistkp success:\", e.data);\n                    t(1 == e.data.ok, e.data.ret);\n                },\n                fail: function (e) {\n                    console.log(\"ranklistkp fail:\", e.errMsg);\n                    t(!1);\n                }\n            });\n        } else {\n            setTimeout(function () {\n                t(!0, [\n                    {\n                        rank: 0,\n                        uInfo: {\n                            uid: 40000006,\n                            sector: 2,\n                            name: \"NONAME\",\n                            avatarUrl: \"\",\n                            score: 15,\n                            exInfo: \"8\",\n                            isCheat: 0\n                        }\n                    }\n                ]);\n            });\n        }\n    },\n    makeFriend: function () {\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            if (wx.getEnterOptionsSync) {\n                var e = wx.getEnterOptionsSync();\n                if (e.query && e.query.fromuid) {\n                    console.log(\"setrelationkp to\", e.query.fromuid);\n                    this.req(\n                        \"game/setrelationkp\",\n                        !0,\n                        {\n                            uid2: parseInt(e.query.fromuid)\n                        },\n                        function (t, o) {\n                            console.log(\"setrelationkp to\", e.query.fromuid, t, o);\n                        }\n                    );\n                } else {\n                    console.log(\"no query!\", e);\n                }\n            } else {\n                console.log(\"no option func\");\n            }\n        } else {\n            console.log(\"make friend relation.\");\n        }\n    },\n    updatePlayerSub: function (e) {\n        var t = o + \"game/subscribekp\";\n        if (cc.sys.platform == cc.sys.BYTEDANCE_GAME) {\n            tt.request({\n                url: t,\n                method: \"POST\",\n                header: this.header,\n                data: {\n                    flag: e\n                },\n                success: function (e) {\n                    console.log(\"subscribe success:\", e.data);\n                },\n                fail: function (e) {\n                    console.log(\"subscribe fail:\", e.errMsg);\n                }\n            });\n        } else {\n            if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n                wx.request({\n                    url: t,\n                    method: \"POST\",\n                    header: this.header,\n                    data: {\n                        flag: e\n                    },\n                    success: function (e) {\n                        console.log(\"subscribe success:\", e.data);\n                    },\n                    fail: function (e) {\n                        console.log(\"subscribe fail:\", e.errMsg);\n                    }\n                });\n            }\n        }\n    }\n};\nif (cc.pvz) {\n    //\n} else {\n    cc.pvz = {};\n}\ncc.pvz.cloud = a;\nmodule.exports = a;\n"]}