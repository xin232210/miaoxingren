{"version":3,"sources":["assets/scripts/Pool.js"],"names":["a","cc","_decorator","n","ccclass","i","property","c","e","t","apply","arguments","inPool","poolIdx","pool","poolDirc","size","actives","sleeps","__extends","prototype","createPool","getNewPoolItem","parseInt","active","o","instantiate","setParent","node","push","inPoolIdx","length","name","destroyPoolItem","destroyAllPoolItem","children","getAllActiveItem","start","__decorate","Prefab","Integer","Component","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var a = cc._decorator;\nvar n = a.ccclass;\nvar i = a.property;\nvar c = (function (e) {\n    function t() {\n        var t = (null !== e && e.apply(this, arguments)) || this;\n        t.inPool = null;\n        t.poolIdx = 0;\n        t.pool = [];\n        t.poolDirc = {};\n        t.size = 100;\n        t.actives = {};\n        t.sleeps = {};\n        return t;\n    }\n    __extends(t, e);\n    t.prototype.createPool = function (e) {\n        this.size = e;\n    };\n    t.prototype.getNewPoolItem = function () {\n        for (var e in this.sleeps) {\n            delete this.sleeps[e];\n            this.actives[e] = 1;\n            var t = parseInt(e) - 1e5 * this.poolIdx;\n            this.pool[t].active = !0;\n            return this.pool[t];\n        }\n        var o = cc.instantiate(this.inPool);\n        o.setParent(this.node);\n        this.pool.push(o);\n        o.inPoolIdx = this.pool.length - 1 + 1e5 * this.poolIdx;\n        o.name = \"pool\" + o.inPoolIdx;\n        this.actives[o.inPoolIdx] = 1;\n        this.poolDirc[o.inPoolIdx] = o;\n        return o;\n    };\n    t.prototype.destroyPoolItem = function (e) {\n        this.pool[e.inPoolIdx - 1e5 * this.poolIdx].active = !1;\n        delete this.actives[e.inPoolIdx];\n        this.sleeps[e.inPoolIdx] = 1;\n    };\n    t.prototype.destroyAllPoolItem = function () {\n        for (var e = 0; e < this.node.children.length; e++) {\n            if (this.node.children[e].active) {\n                this.destroyPoolItem(this.node.children[e]);\n            }\n        }\n    };\n    t.prototype.getAllActiveItem = function () {\n        var e = [];\n        for (var t in this.actives) {\n            var o = parseInt(t) - 1e5 * this.poolIdx;\n            e.push(this.pool[o]);\n        }\n        return e;\n    };\n    t.prototype.start = function () {};\n    __decorate([i(cc.Prefab)], t.prototype, \"inPool\", void 0);\n    __decorate([i(cc.Integer)], t.prototype, \"poolIdx\", void 0);\n    __decorate([i(cc.Integer)], t.prototype, \"size\", void 0);\n    return __decorate([n], t);\n})(cc.Component);\nexports.default = c;\n"]}