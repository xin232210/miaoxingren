{"version":3,"sources":["assets/scripts/Bullet2.js"],"names":["$soundManager","require","$pool","$battleGround2Ctrl","$gate2","$role2","r","cc","_decorator","l","ccclass","u","property","p","e","t","apply","arguments","label","bodySpr","bodySFS","collBody","par","v","dmg","hitTimes","fCount","state","cIdx","tarColHandle","o","__extends","prototype","init","node","x","y","JSONManager","ConfigBattle","getComponent","Sprite","spriteFrame","Math","floor","bulletHandles","push","enabled","length","playEffect2","remove","updateBulletHandles","parent","destroyPoolItem","start","onCollisionEnter","collTimes","tag","beHit","shift","update","__decorate","Label","Node","SpriteFrame","BoxCollider","Component","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $soundManager = require(\"./SoundManager\");\nvar $pool = require(\"./Pool\");\nvar $battleGround2Ctrl = require(\"./BattleGround2Ctrl\");\nvar $gate2 = require(\"./Gate2\");\nvar $role2 = require(\"./Role2\");\nvar r = cc._decorator;\nvar l = r.ccclass;\nvar u = r.property;\nvar p = (function (e) {\n    function t() {\n        var t = (null !== e && e.apply(this, arguments)) || this;\n        t.label = null;\n        t.bodySpr = null;\n        t.bodySFS = [];\n        t.collBody = null;\n        t.par = null;\n        t.v = 500;\n        t.dmg = 1;\n        t.hitTimes = 0;\n        t.fCount = 0;\n        t.state = 0;\n        t.cIdx = 0;\n        t.tarColHandle = null;\n        return t;\n    }\n    var o;\n    __extends(t, e);\n    o = t;\n    t.prototype.init = function (e, t, o) {\n        this.node.x = e;\n        this.node.y = t;\n        this.par = o.par;\n        this.hitTimes = 0;\n        this.v = $battleGround2Ctrl.default.JSONManager.ConfigBattle[6].v[6];\n        this.dmg = o.dmg;\n        this.bodySpr.getComponent(cc.Sprite).spriteFrame = this.bodySFS[0];\n        this.cIdx = Math.floor((this.node.x + 299) / 10);\n        if (this.par.bulletHandles[this.cIdx]) {\n            //\n        } else {\n            this.par.bulletHandles[this.cIdx] = [];\n        }\n        this.par.bulletHandles[this.cIdx].push(this.node);\n        this.collBody.enabled = 1 === this.par.bulletHandles[this.cIdx].length;\n        $soundManager.default.playEffect2(0);\n        this.state = 0;\n    };\n    t.prototype.remove = function (e) {\n        this.updateBulletHandles();\n        if (1 === e) {\n            this.v = 0;\n            this.state = 1;\n            this.fCount = 0;\n            this.bodySpr.getComponent(cc.Sprite).spriteFrame = this.bodySFS[1];\n        } else {\n            this.node.parent.getComponent($pool.default).destroyPoolItem(this.node);\n        }\n    };\n    t.prototype.start = function () {};\n    t.prototype.onCollisionEnter = function (e) {\n        o.collTimes++;\n        if (this.hitTimes > 0) {\n            //\n        } else {\n            if (1 === e.tag) {\n                e.node.getComponent($role2.default).beHit(this);\n            } else {\n                3 === e.tag && e.node.getComponent($gate2.default).beHit(this);\n            }\n            this.collBody.enabled = !1;\n            this.hitTimes++;\n            this.remove(1);\n        }\n    };\n    t.prototype.updateBulletHandles = function () {\n        this.par.bulletHandles[this.cIdx].shift();\n        if (this.par.bulletHandles[this.cIdx].length >= 1) {\n            this.par.bulletHandles[this.cIdx][0].getComponent(o).collBody.enabled = !0;\n        }\n    };\n    t.prototype.update = function (e) {\n        if (10 === this.par.state) {\n            if (1 === this.state) {\n                this.fCount++,\n                    3 === this.fCount\n                        ? (this.bodySpr.getComponent(cc.Sprite).spriteFrame = this.bodySFS[2])\n                        : 6 === this.fCount && this.remove(0);\n            } else {\n                (this.node.y += this.v * e), this.node.y >= 799 && this.remove(0);\n            }\n        }\n    };\n    t.collTimes = 0;\n    __decorate([u(cc.Label)], t.prototype, \"label\", void 0);\n    __decorate([u(cc.Node)], t.prototype, \"bodySpr\", void 0);\n    __decorate([u(cc.SpriteFrame)], t.prototype, \"bodySFS\", void 0);\n    __decorate([u(cc.BoxCollider)], t.prototype, \"collBody\", void 0);\n    return (o = __decorate([l], t));\n})(cc.Component);\nexports.default = p;\n"]}