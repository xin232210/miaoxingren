{"version":3,"sources":["assets/mainUI/scripts/UIShopBuy.js"],"names":["cc","Class","Component","properties","rewardItem","Node","nameLabel","Label","priceType","Sprite","priceLabel","descLabel","initBy","e","t","i","o","rewardData","priceData","callBack","isDailyShop","string","a","JsonControl","getItemJson","getItemIcon","Icon","getComponent","initRewardItem","itemId","toolId","pvz","GameConfig","ItemType","c","getToolJson","name","desc","s","Name","Info","onClickBuy","PlayerData","isItemEnough","changeItemNum","addMissionProgress","MissionType","RedControl","onCheckBattleRed","popupManager","popup","ad","scale","UIFromType","removePopup","isHaveAdBuyBankTimes","utils","getRewardItem","showToast","onCloseUI"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAELC,UAAU,EAAE;IACRC,UAAU,EAAEJ,EAAE,CAACK,IADP;IAERC,SAAS,EAAEN,EAAE,CAACO,KAFN;IAGRC,SAAS,EAAER,EAAE,CAACS,MAHN;IAIRC,UAAU,EAAEV,EAAE,CAACO,KAJP;IAKRI,SAAS,EAAEX,EAAE,CAACO;EALN,CAFP;EASLK,MAAM,EAAE,gBAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;IAC1B,IAAI,KAAK,CAAL,KAAWA,CAAf,EAAkB;MACdA,CAAC,GAAG,CAAC,CAAL;IACH;;IACD,KAAKC,UAAL,GAAkBJ,CAAlB;IACA,KAAKK,SAAL,GAAiBJ,CAAjB;IACA,KAAKK,QAAL,GAAgBJ,CAAhB;IACA,KAAKK,WAAL,GAAmBJ,CAAnB;IACA,KAAKN,UAAL,CAAgBW,MAAhB,GAAyB,KAAKH,SAAL,CAAe,CAAf,CAAzB;IACA,IAAII,CAAC,GAAGtB,EAAE,CAACuB,WAAH,CAAeC,WAAf,CAA2B,KAAKN,SAAL,CAAe,CAAf,CAA3B,CAAR;IACAlB,EAAE,CAACuB,WAAH,CAAeE,WAAf,CAA2B,KAAKjB,SAAhC,EAA2Cc,CAAC,CAACI,IAA7C;IACA,KAAKtB,UAAL,CAAgBuB,YAAhB,CAA6B,YAA7B,EAA2CC,cAA3C,CAA0D,KAAKX,UAA/D,EAA2E,CAAC,CAA5E;IACA,KAAKY,MAAL,GAAc,KAAKZ,UAAL,CAAgBY,MAA9B;IACA,KAAKC,MAAL,GAAc,KAAKb,UAAL,CAAgBa,MAA9B;;IACA,IAAI,KAAKD,MAAL,KAAgB7B,EAAE,CAAC+B,GAAH,CAAOC,UAAP,CAAkBC,QAAlB,CAA2B,MAA3B,CAApB,EAAwD;MACpD,IAAIC,CAAC,GAAGlC,EAAE,CAACuB,WAAH,CAAeY,WAAf,CAA2B,KAAKL,MAAhC,CAAR;MACA,KAAKxB,SAAL,CAAee,MAAf,GAAwBa,CAAC,CAACE,IAA1B;MACA,KAAKzB,SAAL,CAAeU,MAAf,GAAwBa,CAAC,CAACG,IAA1B;IACH,CAJD,MAIO;MACH,IAAIC,CAAC,GAAGtC,EAAE,CAACuB,WAAH,CAAeC,WAAf,CAA2B,KAAKK,MAAhC,CAAR;MACA,KAAKvB,SAAL,CAAee,MAAf,GAAwBiB,CAAC,CAACC,IAA1B;MACA,KAAK5B,SAAL,CAAeU,MAAf,GAAwBiB,CAAC,CAACE,IAA1B;IACH;EACJ,CAhCI;EAiCLC,UAAU,EAAE,sBAAY;IACpB,IAAIzC,EAAE,CAAC+B,GAAH,CAAOW,UAAP,CAAkBC,YAAlB,CAA+B,KAAKzB,SAAL,CAAe,CAAf,CAA/B,EAAkD,KAAKA,SAAL,CAAe,CAAf,CAAlD,CAAJ,EAA0E;MACtElB,EAAE,CAAC+B,GAAH,CAAOW,UAAP,CAAkBE,aAAlB,CAAgC,KAAK1B,SAAL,CAAe,CAAf,CAAhC,EAAmD,CAAC,KAAKA,SAAL,CAAe,CAAf,CAApD;MACA,KAAKE,WAAL,KACKpB,EAAE,CAAC+B,GAAH,CAAOW,UAAP,CAAkBG,kBAAlB,CAAqC7C,EAAE,CAAC+B,GAAH,CAAOC,UAAP,CAAkBc,WAAlB,CAA8B,YAA9B,CAArC,EAAkF,CAAlF,GACD9C,EAAE,CAAC+C,UAAH,CAAcC,gBAAd,EAFJ;MAGAhD,EAAE,CAACiD,YAAH,CAAgBC,KAAhB,CACI,QADJ,EAEI,aAFJ,EAGI,UAHJ,EAII;QACIC,EAAE,EAAE,CAAC,CADT;QAEIC,KAAK,EAAE,CAAC;MAFZ,CAJJ,EAQI,CAAC,KAAKnC,UAAN,CARJ,EASIjB,EAAE,CAAC+B,GAAH,CAAOC,UAAP,CAAkBqB,UAAlB,CAA6B,MAA7B,CATJ,EAUI,KAAKlC,QAVT;MAYAnB,EAAE,CAACiD,YAAH,CAAgBK,WAAhB,CAA4B,IAA5B;IACH,CAlBD,MAkBO;MACH,IAAIzC,CAAC,GAAG,KAAK,KAAKK,SAAL,CAAe,CAAf,CAAb;;MACA,IAAIlB,EAAE,CAAC+B,GAAH,CAAOW,UAAP,CAAkBa,oBAAlB,CAAuC1C,CAAC,GAAG,CAAH,GAAO,CAA/C,CAAJ,EAAuD;QACnD,IAAIC,CAAC,GAAGd,EAAE,CAAC+B,GAAH,CAAOyB,KAAP,CAAaC,aAAb,CAA2B,KAAKvC,SAAL,CAAe,CAAf,CAA3B,EAA8CL,CAAC,GAAG,IAAH,GAAU,GAAzD,CAAR;QACAb,EAAE,CAACiD,YAAH,CAAgBC,KAAhB,CACI,QADJ,EAEI,SAFJ,EAGI,SAHJ,EAII;UACIC,EAAE,EAAE,CAAC,CADT;UAEIC,KAAK,EAAE,CAAC;QAFZ,CAJJ,EAQItC,CARJ;QAUAd,EAAE,CAACiD,YAAH,CAAgBK,WAAhB,CAA4B,IAA5B;MACH,CAbD,MAaO;QACH,IAAIvC,CAAJ;;QACA,IAAI,KAAK,KAAKG,SAAL,CAAe,CAAf,CAAT,EAA4B;UACxBH,CAAC,GAAG,IAAJ;QACH,CAFD,MAEO;UACHA,CAAC,GAAG,IAAJ;QACH;;QACDf,EAAE,CAACiD,YAAH,CAAgBS,SAAhB,CAA0B3C,CAAC,GAAG,KAA9B;MACH;IACJ;EACJ,CA7EI;EA8EL4C,SAAS,EAAE,qBAAY;IACnB3D,EAAE,CAACiD,YAAH,CAAgBK,WAAhB,CAA4B,IAA5B;EACH;AAhFI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        rewardItem: cc.Node,\n        nameLabel: cc.Label,\n        priceType: cc.Sprite,\n        priceLabel: cc.Label,\n        descLabel: cc.Label\n    },\n    initBy: function (e, t, i, o) {\n        if (void 0 === o) {\n            o = !0;\n        }\n        this.rewardData = e;\n        this.priceData = t;\n        this.callBack = i;\n        this.isDailyShop = o;\n        this.priceLabel.string = this.priceData[1];\n        var a = cc.JsonControl.getItemJson(this.priceData[0]);\n        cc.JsonControl.getItemIcon(this.priceType, a.Icon);\n        this.rewardItem.getComponent(\"RewardItem\").initRewardItem(this.rewardData, !1);\n        this.itemId = this.rewardData.itemId;\n        this.toolId = this.rewardData.toolId;\n        if (this.itemId === cc.pvz.GameConfig.ItemType[\"固定碎片\"]) {\n            var c = cc.JsonControl.getToolJson(this.toolId);\n            this.nameLabel.string = c.name;\n            this.descLabel.string = c.desc;\n        } else {\n            var s = cc.JsonControl.getItemJson(this.itemId);\n            this.nameLabel.string = s.Name;\n            this.descLabel.string = s.Info;\n        }\n    },\n    onClickBuy: function () {\n        if (cc.pvz.PlayerData.isItemEnough(this.priceData[0], this.priceData[1])) {\n            cc.pvz.PlayerData.changeItemNum(this.priceData[0], -this.priceData[1]);\n            this.isDailyShop &&\n                (cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"每日商店购买n次物品\"], 1),\n                cc.RedControl.onCheckBattleRed());\n            cc.popupManager.popup(\n                \"mainUI\",\n                \"getrewardUI\",\n                \"UIReward\",\n                {\n                    ad: !1,\n                    scale: !1\n                },\n                [this.rewardData],\n                cc.pvz.GameConfig.UIFromType[\"每日商店\"],\n                this.callBack\n            );\n            cc.popupManager.removePopup(this);\n        } else {\n            var e = 2 == this.priceData[0];\n            if (cc.pvz.PlayerData.isHaveAdBuyBankTimes(e ? 0 : 1)) {\n                var t = cc.pvz.utils.getRewardItem(this.priceData[0], e ? 2500 : 100);\n                cc.popupManager.popup(\n                    \"mainUI\",\n                    \"adbuyUI\",\n                    \"UIAdBuy\",\n                    {\n                        ad: !1,\n                        scale: !0\n                    },\n                    t\n                );\n                cc.popupManager.removePopup(this);\n            } else {\n                var i;\n                if (2 == this.priceData[0]) {\n                    i = \"金币\";\n                } else {\n                    i = \"钻石\";\n                }\n                cc.popupManager.showToast(i + \"不足！\");\n            }\n        }\n    },\n    onCloseUI: function () {\n        cc.popupManager.removePopup(this);\n    }\n});\n"]}