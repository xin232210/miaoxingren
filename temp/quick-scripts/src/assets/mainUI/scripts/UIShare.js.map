{"version":3,"sources":["assets/mainUI/scripts/UIShare.js"],"names":["cc","Class","Component","properties","btnSprite","Sprite","gettedNode","Node","initBy","pvz","PlayerData","checkAndResetShare","e","utils","getRewardItem","GameConfig","ItemType","t","i","rewardList","active","player","isShare","onClickShare","TAUtils","share","popupManager","showToast","finishShare","popup","ad","scale","UIFromType","MainControl","updateItemInfo","RedControl","refreshAllRedTip","removePopup","onCloseUI"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAELC,UAAU,EAAE;IACRC,SAAS,EAAEJ,EAAE,CAACK,MADN;IAERC,UAAU,EAAEN,EAAE,CAACO;EAFP,CAFP;EAMLC,MAAM,EAAE,kBAAY;IAChBR,EAAE,CAACS,GAAH,CAAOC,UAAP,CAAkBC,kBAAlB;IACA,IAAIC,CAAC,GAAGZ,EAAE,CAACS,GAAH,CAAOI,KAAP,CAAaC,aAAb,CAA2Bd,EAAE,CAACS,GAAH,CAAOM,UAAP,CAAkBC,QAAlB,CAA2B,IAA3B,CAA3B,EAA6D,GAA7D,CAAR;IACA,IAAIC,CAAC,GAAGjB,EAAE,CAACS,GAAH,CAAOI,KAAP,CAAaC,aAAb,CAA2Bd,EAAE,CAACS,GAAH,CAAOM,UAAP,CAAkBC,QAAlB,CAA2B,IAA3B,CAA3B,EAA6D,EAA7D,CAAR;IACA,IAAIE,CAAC,GAAGlB,EAAE,CAACS,GAAH,CAAOI,KAAP,CAAaC,aAAb,CAA2Bd,EAAE,CAACS,GAAH,CAAOM,UAAP,CAAkBC,QAAlB,CAA2B,QAA3B,CAA3B,EAAiE,CAAjE,CAAR;IACA,KAAKG,UAAL,GAAkB,CAACP,CAAD,EAAIK,CAAJ,EAAOC,CAAP,CAAlB;IACA,KAAKZ,UAAL,CAAgBc,MAAhB,GAAyBpB,EAAE,CAACqB,MAAH,CAAUC,OAAnC;EACH,CAbI;EAcLC,YAAY,EAAE,wBAAY;IACtB,IAAIX,CAAC,GAAG,IAAR;;IACA,IAAIZ,EAAE,CAACqB,MAAH,CAAUC,OAAd,EAAuB;MACnBtB,EAAE,CAACS,GAAH,CAAOe,OAAP,CAAeC,KAAf,CAAqB,CAAC,CAAtB,EAAyB,YAAY;QACjCzB,EAAE,CAAC0B,YAAH,CAAgBC,SAAhB,CAA0B,MAA1B;MACH,CAFD;IAGH,CAJD,MAIO;MACH3B,EAAE,CAACS,GAAH,CAAOe,OAAP,CAAeC,KAAf,CAAqB,CAArB,EAAwB,UAAUR,CAAV,EAAa;QACjC,IAAIA,CAAJ,EAAO;UACH,IAAIjB,EAAE,CAACqB,MAAH,CAAUC,OAAd,EAAuB,CACnB;UACH,CAFD,MAEO;YACHtB,EAAE,CAACS,GAAH,CAAOC,UAAP,CAAkBkB,WAAlB;YACA5B,EAAE,CAAC0B,YAAH,CAAgBG,KAAhB,CACI,QADJ,EAEI,aAFJ,EAGI,UAHJ,EAII;cACIC,EAAE,EAAE,CAAC,CADT;cAEIC,KAAK,EAAE,CAAC;YAFZ,CAJJ,EAQInB,CAAC,CAACO,UARN,EASInB,EAAE,CAACS,GAAH,CAAOM,UAAP,CAAkBiB,UAAlB,CAA6B,MAA7B,CATJ,EAUI,YAAY;cACRhC,EAAE,CAACiC,WAAH,CAAeC,cAAf;cACAlC,EAAE,CAACmC,UAAH,CAAcC,gBAAd;cACApC,EAAE,CAAC0B,YAAH,CAAgBW,WAAhB,CAA4BzB,CAA5B;YACH,CAdL;UAgBH;QACJ;MACJ,CAxBD;IAyBH;EACJ,CA/CI;EAgDL0B,SAAS,EAAE,qBAAY;IACnBtC,EAAE,CAACiC,WAAH,CAAeC,cAAf;IACAlC,EAAE,CAACmC,UAAH,CAAcC,gBAAd;IACApC,EAAE,CAAC0B,YAAH,CAAgBW,WAAhB,CAA4B,IAA5B;EACH;AApDI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        btnSprite: cc.Sprite,\n        gettedNode: cc.Node\n    },\n    initBy: function () {\n        cc.pvz.PlayerData.checkAndResetShare();\n        var e = cc.pvz.utils.getRewardItem(cc.pvz.GameConfig.ItemType[\"金币\"], 2e3);\n        var t = cc.pvz.utils.getRewardItem(cc.pvz.GameConfig.ItemType[\"钻石\"], 25);\n        var i = cc.pvz.utils.getRewardItem(cc.pvz.GameConfig.ItemType[\"随机蓝色碎片\"], 6);\n        this.rewardList = [e, t, i];\n        this.gettedNode.active = cc.player.isShare;\n    },\n    onClickShare: function () {\n        var e = this;\n        if (cc.player.isShare) {\n            cc.pvz.TAUtils.share(-1, function () {\n                cc.popupManager.showToast(\"分享成功\");\n            });\n        } else {\n            cc.pvz.TAUtils.share(0, function (t) {\n                if (t) {\n                    if (cc.player.isShare) {\n                        //\n                    } else {\n                        cc.pvz.PlayerData.finishShare();\n                        cc.popupManager.popup(\n                            \"mainUI\",\n                            \"getrewardUI\",\n                            \"UIReward\",\n                            {\n                                ad: !0,\n                                scale: !1\n                            },\n                            e.rewardList,\n                            cc.pvz.GameConfig.UIFromType[\"分享奖励\"],\n                            function () {\n                                cc.MainControl.updateItemInfo();\n                                cc.RedControl.refreshAllRedTip();\n                                cc.popupManager.removePopup(e);\n                            }\n                        );\n                    }\n                }\n            });\n        }\n    },\n    onCloseUI: function () {\n        cc.MainControl.updateItemInfo();\n        cc.RedControl.refreshAllRedTip();\n        cc.popupManager.removePopup(this);\n    }\n});\n"]}