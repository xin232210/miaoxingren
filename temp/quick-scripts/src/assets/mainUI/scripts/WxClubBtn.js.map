{"version":3,"sources":["assets/mainUI/scripts/WxClubBtn.js"],"names":["cc","Class","Component","properties","url","onLoad","e","sys","platform","WECHAT_GAME","setTimeout","createBtn","popupManager","nonePopupUI","clubBtn","setVisible","wx","getWindowInfo","getSystemInfoSync","t","view","getViewportRect","i","node","getBoundingBoxToWorld","o","getScaleX","x","y","a","getDevicePixelRatio","c","s","getScaleY","n","type","image","style","left","top","windowHeight","height","width","createGameClubButton","show","console","log","hide"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAELC,UAAU,EAAE;IACRC,GAAG,EAAE;EADG,CAFP;EAKLC,MAAM,EAAE,kBAAY;IAChB,IAAIC,CAAC,GAAG,IAAR;;IACA,IAAIN,EAAE,CAACO,GAAH,CAAOC,QAAP,IAAmBR,EAAE,CAACO,GAAH,CAAOE,WAA9B,EAA2C;MACvCC,UAAU,CAAC,YAAY;QACnBJ,CAAC,CAACK,SAAF;MACH,CAFS,CAAV;IAGH;EACJ,CAZI;EAaLA,SAAS,EAAE,qBAAY;IACnB,IAAIX,EAAE,CAACY,YAAH,CAAgBC,WAAhB,EAAJ,EAAmC;MAC/B,IAAIb,EAAE,CAACO,GAAH,CAAOC,QAAP,IAAmBR,EAAE,CAACO,GAAH,CAAOE,WAA9B,EAA2C;QACvC,IAAI,KAAKK,OAAT,EAAkB;UACd,KAAKC,UAAL,CAAgB,CAAC,CAAjB;QACH,CAFD,MAEO;UACH,IAAIT,CAAJ;;UACA,IAAIU,EAAE,CAACC,aAAP,EAAsB;YAClBX,CAAC,GAAGU,EAAE,CAACC,aAAH,EAAJ;UACH,CAFD,MAEO;YACHX,CAAC,GAAGU,EAAE,CAACE,iBAAH,EAAJ;UACH;;UACD,IAAIC,CAAC,GAAGnB,EAAE,CAACoB,IAAH,CAAQC,eAAR,EAAR;UACA,IAAIC,CAAC,GAAG,KAAKC,IAAL,CAAUC,qBAAV,EAAR;UACA,IAAIC,CAAC,GAAGzB,EAAE,CAACoB,IAAH,CAAQM,SAAR,EAAR;UACAJ,CAAC,CAACK,CAAF,IAAOR,CAAC,CAACQ,CAAF,GAAMF,CAAb;UACAH,CAAC,CAACM,CAAF,IAAOT,CAAC,CAACS,CAAF,GAAMH,CAAb;UACA,IAAII,CAAC,GAAG7B,EAAE,CAACoB,IAAH,CAAQU,mBAAR,EAAR;UACA,IAAIC,CAAC,GAAGN,CAAC,GAAGI,CAAZ;UACA,IAAIG,CAAC,GAAGhC,EAAE,CAACoB,IAAH,CAAQa,SAAR,KAAsBJ,CAA9B;UACA,IAAIK,CAAC,GAAG;YACJC,IAAI,EAAE,OADF;YAEJC,KAAK,EAAE,KAAKhC,GAFR;YAGJiC,KAAK,EAAE;cACHC,IAAI,EAAEhB,CAAC,CAACK,CAAF,GAAMI,CADT;cAEHQ,GAAG,EAAEjC,CAAC,CAACkC,YAAF,GAAiB,CAAClB,CAAC,CAACM,CAAF,GAAMN,CAAC,CAACmB,MAAT,IAAmBT,CAFtC;cAGHU,KAAK,EAAEpB,CAAC,CAACoB,KAAF,GAAUX,CAHd;cAIHU,MAAM,EAAEnB,CAAC,CAACmB,MAAF,GAAWT;YAJhB;UAHH,CAAR;UAUA,KAAKlB,OAAL,GAAeE,EAAE,CAAC2B,oBAAH,CAAwBT,CAAxB,CAAf;UACA,KAAKpB,OAAL,CAAa8B,IAAb;QACH;MACJ,CA/BD,MA+BO;QACHC,OAAO,CAACC,GAAR,CAAY,WAAZ;MACH;IACJ;EACJ,CAlDI;EAmDL/B,UAAU,EAAE,oBAAUT,CAAV,EAAa;IACrB,IAAIA,CAAJ,EAAO;MACH,IAAI,KAAKQ,OAAT,EAAkB;QACd,KAAKA,OAAL,CAAa8B,IAAb;MACH,CAFD,MAEO;QACH,KAAKjC,SAAL;MACH;IACJ,CAND,MAMO;MACH,IAAI,KAAKG,OAAT,EAAkB;QACd,KAAKA,OAAL,CAAaiC,IAAb;MACH;IACJ;EACJ;AA/DI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        url: \"\"\n    },\n    onLoad: function () {\n        var e = this;\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            setTimeout(function () {\n                e.createBtn();\n            });\n        }\n    },\n    createBtn: function () {\n        if (cc.popupManager.nonePopupUI()) {\n            if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n                if (this.clubBtn) {\n                    this.setVisible(!0);\n                } else {\n                    var e;\n                    if (wx.getWindowInfo) {\n                        e = wx.getWindowInfo();\n                    } else {\n                        e = wx.getSystemInfoSync();\n                    }\n                    var t = cc.view.getViewportRect();\n                    var i = this.node.getBoundingBoxToWorld();\n                    var o = cc.view.getScaleX();\n                    i.x += t.x / o;\n                    i.y += t.y / o;\n                    var a = cc.view.getDevicePixelRatio();\n                    var c = o / a;\n                    var s = cc.view.getScaleY() / a;\n                    var n = {\n                        type: \"image\",\n                        image: this.url,\n                        style: {\n                            left: i.x * c,\n                            top: e.windowHeight - (i.y + i.height) * s,\n                            width: i.width * c,\n                            height: i.height * s\n                        }\n                    };\n                    this.clubBtn = wx.createGameClubButton(n);\n                    this.clubBtn.show();\n                }\n            } else {\n                console.log(\"createBtn\");\n            }\n        }\n    },\n    setVisible: function (e) {\n        if (e) {\n            if (this.clubBtn) {\n                this.clubBtn.show();\n            } else {\n                this.createBtn();\n            }\n        } else {\n            if (this.clubBtn) {\n                this.clubBtn.hide();\n            }\n        }\n    }\n});\n"]}