{"version":3,"sources":["assets/mainUI/scripts/UIToolInfo.js"],"names":["cc","Class","Component","properties","bgSprites","Sprite","toolCardNode","Node","attrbibuteIcons","attrNumLabels","Label","attrNameLabels","attriNextLabels","priceLabel","levelUpSpine","sp","Skeleton","lvBtn","maxTipNode","lockTipLabel","lockTipNode","skinBtn","baseSkillNode","skillParentPanel","lvBtnSprites","actionLabel","actionBtnNode","onLoad","node","active","initBy","e","t","i","o","ui","toolId","isLock","callBack","toolData","pvz","PlayerData","getToolData","toolJson","JsonControl","getToolJson","inLv","lv","toolCardItem","getComponent","initToolCardItem","isMaxLv","string","GameConfig","ToolLockTip","replace","ToolLockLevel","pos","a","length","setMaterial","materialList","initAttributeInfo","initSkillInfo","refreshLvInfo","tempGuideIndex","scheduleOnce","startGuide","find","MainControl","btnNodeList","MainUI","guideManager","showGuide","tip","focus","btn","name","player","guide1","onDataChanged","getToolLvUpJson","quality","priceCoin","priceFrag","isEnoughCoin","isItemEnough","ItemType","instantiate","parent","getToolAttriIcon","ToolAttriNameList","getAttributeNums","Atk","cdtxt","utils","foramtAttributeNum","c","s","n","showLvUpSpine","setAnimation","setCompleteListener","butler","playEffect","lvUpSound","refreshLevelUp","children","onClickLvUp","isEnoughFrag","addMissionProgress","MissionType","changeItemNum","updateToolFragCount","updateToolLv","onLvUpRefreshCard","updateItemInfo","RedControl","refreshAllRedTip","isHaveAdBuyToolTimes","getRewardToolItem","AdBuyTooldCounts","popupManager","popup","ad","scale","showToast","isHaveAdBuyBankTimes","getRewardItem","onClickUpDown","onClickUp","onClickDown","UITool","isChangeArray","onCloseUI","onClickSkin","onCheckToolLvRed","onCheckBattleRed","removePopup"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        bgSprites: [cc.Sprite],\n        toolCardNode: cc.Node,\n        attrbibuteIcons: [cc.Sprite],\n        attrNumLabels: [cc.Label],\n        attrNameLabels: [cc.Label],\n        attriNextLabels: [cc.Label],\n        priceLabel: cc.Label,\n        levelUpSpine: sp.Skeleton,\n        lvBtn: cc.Node,\n        maxTipNode: cc.Node,\n        lockTipLabel: cc.Label,\n        lockTipNode: cc.Node,\n        skinBtn: cc.Node,\n        baseSkillNode: cc.Node,\n        skillParentPanel: cc.Node,\n        lvBtnSprites: [cc.Sprite],\n        actionLabel: cc.Label,\n        actionBtnNode: cc.Node\n    },\n    onLoad: function () {\n        this.levelUpSpine.node.active = !1;\n    },\n    initBy: function (e, t, i, o) {\n        if (void 0 === i) {\n            i = !1;\n        }\n        if (void 0 === o) {\n            o = null;\n        }\n        this.ui = e;\n        this.toolId = t;\n        this.isLock = i;\n        this.callBack = o;\n        this.toolData = cc.pvz.PlayerData.getToolData(this.toolId);\n        this.toolJson = cc.JsonControl.getToolJson(this.toolId);\n        this.inLv = this.toolData.lv;\n        this.toolCardItem = this.toolCardNode.getComponent(\"ToolCard\");\n        this.toolCardItem.initToolCardItem(this.ui, this.toolId);\n        this.maxTipNode.active = this.toolCardItem.isMaxLv;\n        this.lvBtn.active = !this.isLock && !this.toolCardItem.isMaxLv;\n        this.lockTipLabel.node.active = this.isLock;\n        this.lockTipLabel.string = cc.pvz.GameConfig.ToolLockTip.replace(\n            \"$\",\n            cc.pvz.GameConfig.ToolLockLevel[this.toolId - 1]\n        );\n        this.lockTipNode.active = this.isLock;\n        this.skinBtn.active = !this.isLock;\n        this.actionBtnNode.active = !this.isLock;\n        if (this.actionBtnNode.active) {\n            if (-1 == this.toolData.pos) {\n                this.actionLabel.string = \"上阵\";\n            } else {\n                this.actionLabel.string = \"卸下\";\n            }\n        }\n        for (var a = 0; a < this.bgSprites.length; a++) {\n            this.bgSprites[a].setMaterial(0, cc.JsonControl.materialList[this.isLock ? 1 : 0]);\n        }\n        this.initAttributeInfo();\n        this.initSkillInfo();\n        if (this.toolCardItem.isMaxLv || this.isLock) {\n            //\n        } else {\n            this.refreshLvInfo();\n        }\n        if (2 == cc.tempGuideIndex) {\n            this.scheduleOnce(this.startGuide, 0.42);\n        }\n    },\n    startGuide: function () {\n        if (2 == cc.tempGuideIndex) {\n            var e = cc.find(\"back\", this.node);\n            var t = cc.MainControl.btnNodeList[2];\n            var i = cc.find(\"btn/battlePanel/btn_start\", cc.MainUI.node);\n            cc.guideManager.showGuide(\n                0,\n                [\n                    {\n                        tip: \"消耗碎片和金币能使卡皮巴拉变得更强！\",\n                        focus: this.lvBtn,\n                        btn: this.lvBtn.name\n                    },\n                    {\n                        tip: \"关卡中获得更多卡皮巴拉碎片\",\n                        focus: e,\n                        btn: e.name\n                    },\n                    {\n                        tip: \"前方怪兽们正在接近，赶紧过去看看！\",\n                        focus: t,\n                        btn: t.name\n                    },\n                    {\n                        tip: \"让怪兽们看看你的厉害，开始战斗吧！\",\n                        focus: i,\n                        btn: i.name\n                    }\n                ],\n                function (e, t) {\n                    if (e) {\n                        cc.tempGuideIndex = 3;\n                    } else {\n                        if (1 == t) {\n                            cc.player.guide1 = 1;\n                            cc.pvz.PlayerData.onDataChanged();\n                        }\n                    }\n                }\n            );\n        }\n    },\n    refreshLvInfo: function () {\n        var e = cc.JsonControl.getToolLvUpJson(this.toolData.lv);\n        var t = this.toolJson.quality;\n        this.priceCoin = e[\"coins\" + t];\n        this.priceLabel.string = \"\" + this.priceCoin;\n        this.priceFrag = e[\"sp\" + t];\n        this.isEnoughCoin = cc.pvz.PlayerData.isItemEnough(cc.pvz.GameConfig.ItemType[\"金币\"], this.priceCoin);\n        for (var i = 0; i < this.lvBtnSprites.length; i++) {\n            this.lvBtnSprites[i].setMaterial(0, cc.JsonControl.materialList[this.isEnoughCoin ? 0 : 1]);\n        }\n    },\n    initSkillInfo: function () {\n        this.baseSkillNode.getComponent(\"ToolSkillInfo\").initSkillInfo(this.toolId, 1, this.toolData.lv, this.isLock);\n        for (var e = 1; e < 5; e++) {\n            var t = cc.instantiate(this.baseSkillNode);\n            t.parent = this.skillParentPanel;\n            t.active = !0;\n            t.getComponent(\"ToolSkillInfo\").initSkillInfo(this.toolId, e + 1, this.toolData.lv, this.isLock);\n        }\n    },\n    initAttributeInfo: function () {\n        for (var e = 0; e < this.attrbibuteIcons.length; e++) {\n            var t = this.toolJson[\"attributetype\" + (e + 1)];\n            cc.JsonControl.getToolAttriIcon(this.attrbibuteIcons[e], t);\n            this.attrNameLabels[e].string = cc.pvz.GameConfig.ToolAttriNameList[t - 1];\n        }\n        for (var i = 0; i < this.attrNumLabels.length; i++) {\n            this.attrNumLabels[i].string = this.getAttributeNums(i);\n        }\n    },\n    getAttributeNums: function (e) {\n        var t = \"\";\n        var i;\n        if (0 == this.toolData.lv) {\n            i = 1;\n        } else {\n            i = this.toolData.lv;\n        }\n        switch (e) {\n            case 0:\n                t = \"\" + this.toolJson.Atk;\n                break;\n            case 1:\n                if (3 == this.toolId || 10 == this.toolId) {\n                    t = this.toolJson.cdtxt[i - 1] + \"秒\";\n                    if (this.toolJson.cdtxt.length > i) {\n                        this.attriNextLabels[2].node.active = !0;\n                        var o = this.toolJson.cdtxt[i - 1] - this.toolJson.cdtxt[i];\n                        o = cc.pvz.utils.foramtAttributeNum(o);\n                        this.attriNextLabels[2].string = \"-\" + o;\n                    } else {\n                        this.attriNextLabels[2].node.active = !1;\n                    }\n                } else {\n                    t = this.toolJson.cdtxt + (8 == this.toolId || 6 == this.toolId ? \"秒\" : \"\");\n                    this.attriNextLabels[2].node.active = !1;\n                }\n                break;\n            case 2:\n            case 3:\n                var a = this.toolJson[\"attributetype\" + (e - 1)],\n                    c = this.toolJson[\"attribute\" + (e - 1)],\n                    s = 0;\n                if (1 == c.length) {\n                    s = c[0];\n                    this.attriNextLabels[e - 2].node.active = !1;\n                } else if (((s = c[i - 1]), c.length > i)) {\n                    var n = c[i] - s;\n                    n = cc.pvz.utils.foramtAttributeNum(n);\n                    this.attriNextLabels[e - 2].node.active = !0;\n                    this.attriNextLabels[e - 2].string = \"+\" + n + (9 == a ? \"%\" : \"\");\n                } else {\n                    this.attriNextLabels[e - 2].node.active = !1;\n                }\n                t = s + (9 == a ? \"%\" : \"\");\n        }\n        return t;\n    },\n    showLvUpSpine: function () {\n        var e = this;\n        this.levelUpSpine.node.active = !0;\n        this.levelUpSpine.setAnimation(0, \"zb_sj\", !1);\n        this.levelUpSpine.setCompleteListener(function () {\n            e.levelUpSpine.node.active = !1;\n            e.levelUpSpine.setCompleteListener(null);\n        });\n        cc.butler.playEffect(cc.MainControl.lvUpSound);\n    },\n    refreshLevelUp: function () {\n        this.maxTipNode.active = this.toolCardItem.isMaxLv;\n        this.lvBtn.active = !this.toolCardItem.isMaxLv;\n        for (var e = 0; e < this.attrNumLabels.length; e++) {\n            this.attrNumLabels[e].string = this.getAttributeNums(e);\n        }\n        for (var t = 0; t < 5; t++) {\n            this.skillParentPanel.children[t]\n                .getComponent(\"ToolSkillInfo\")\n                .initSkillInfo(this.toolId, t + 1, this.toolData.lv);\n        }\n        if (this.toolCardItem.isMaxLv) {\n            //\n        } else {\n            this.refreshLvInfo();\n        }\n    },\n    onClickLvUp: function () {\n        var e = this;\n        if (this.isEnoughCoin) {\n            if (this.toolCardItem.isEnoughFrag) {\n                this.showLvUpSpine();\n                cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"升级任意装备1次\"], 1);\n                cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"装备总等级n\"]);\n                cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"装备最高等级达到n\"]);\n                cc.pvz.PlayerData.changeItemNum(cc.pvz.GameConfig.ItemType[\"金币\"], -this.priceCoin);\n                cc.pvz.PlayerData.updateToolFragCount(this.toolId, -this.priceFrag);\n                cc.pvz.PlayerData.updateToolLv(this.toolId, 1);\n                this.toolCardItem.onLvUpRefreshCard();\n                this.refreshLevelUp();\n                cc.MainControl.updateItemInfo();\n                cc.RedControl.refreshAllRedTip();\n            } else if (cc.pvz.PlayerData.isHaveAdBuyToolTimes(this.toolId)) {\n                var t = cc.pvz.utils.getRewardToolItem(\n                    this.toolId,\n                    cc.pvz.GameConfig.AdBuyTooldCounts[this.toolJson.quality - 2]\n                );\n                cc.popupManager.popup(\n                    \"mainUI\",\n                    \"adbuyUI\",\n                    \"UIAdBuy\",\n                    {\n                        ad: !1,\n                        scale: !0\n                    },\n                    t,\n                    function () {\n                        e.toolCardItem.onLvUpRefreshCard();\n                    }\n                );\n            } else {\n                cc.popupManager.showToast(\"碎片不足！\");\n            }\n        } else if (cc.pvz.PlayerData.isHaveAdBuyBankTimes(0)) {\n            var i = cc.pvz.utils.getRewardItem(cc.pvz.GameConfig.ItemType[\"金币\"], 2500);\n            cc.popupManager.popup(\n                \"mainUI\",\n                \"adbuyUI\",\n                \"UIAdBuy\",\n                {\n                    ad: !1,\n                    scale: !0\n                },\n                i,\n                function () {\n                    e.isEnoughCoin = cc.pvz.PlayerData.isItemEnough(cc.pvz.GameConfig.ItemType[\"金币\"], e.priceCoin);\n                    for (var t = 0; t < e.lvBtnSprites.length; t++) {\n                        e.lvBtnSprites[t].setMaterial(0, cc.JsonControl.materialList[e.isEnoughCoin ? 0 : 1]);\n                    }\n                }\n            );\n        } else {\n            cc.popupManager.showToast(\"金币不足！\");\n        }\n    },\n    onClickUpDown: function () {\n        if (-1 == this.toolData.pos) {\n            this.ui.onClickUp(this);\n        } else {\n            this.ui.onClickDown(this.toolId);\n        }\n        cc.UITool.isChangeArray = !0;\n        this.onCloseUI();\n    },\n    onClickSkin: function () {\n        cc.popupManager.popup(\n            \"mainUI\",\n            \"plantskin\",\n            \"UIToolSkin\",\n            {\n                ad: !1,\n                scale: !0\n            },\n            this.toolId\n        );\n    },\n    onCloseUI: function () {\n        if (this.inLv != this.toolData.lv) {\n            cc.RedControl.onCheckToolLvRed();\n            cc.RedControl.onCheckBattleRed();\n        }\n        if (this.callBack) {\n            this.callBack();\n        }\n        cc.popupManager.removePopup(this);\n    }\n});\n"]}