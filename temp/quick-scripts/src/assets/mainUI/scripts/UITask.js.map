{"version":3,"sources":["assets/mainUI/scripts/UITask.js"],"names":["cc","TaskPage","Enum","taskPage","achievePage","Class","Component","properties","coinLabel","Label","diamondLabel","boxBgSprite","Sprite","scoreSprite","scoreLabel","boxScorePanel","Node","boxSpinePanel","missionProBar","ProgressBar","missionWeekProBar","missionPanel","missionScroll","ScrollView","missionParent","baseMissionItem","achievePanel","achieveScroll","achieveParent","baseAchieveItem","timesLabel","redTips","boxPanel","rewardParent","initTimeShow","isDayMission","lastTime","pvz","utils","getTodayLastTimes","e","t","getCurDayInWeek","string","formatCDTime","schedule","refreshTimeShow","unschedule","onCloseUI","MainControl","updateItemInfo","RedControl","refreshAllRedTip","popupManager","removePopup","onToggleChange","i","parseInt","curPage","initBy","UITask","active","onCheckDayMissionRed","onCheckWeekMissionRed","onCheckAchieveMissionRed","stageLevel","PlayerData","getStageLevel","initBoxInfo","scoreNum","getItemNum","GameConfig","ItemType","node","progress","BoxJson","length","score","setSpriteFrame","children","getComponent","getDayBoxData","ID","isReward","getWeekBoxData","sp","Skeleton","setAnimation","onClickBox","o","a","showToast","c","s","reward","n","Math","floor","r","rewardData","h","p","l","d","getRewardItem","push","finishDayBoxReward","finishWeekBoxReward","v","UIFromType","popup","ad","scale","curBoxId","refreshBoxPanelInfo","position","v2","x","y","childrenCount","initBoxRewardItem","formatItemNum","getItemEffectPos","convertToWorldSpaceAR","refreshPage1","checkAndResetDayMission","JsonControl","getDayMissionBoxJson","getAllDayMissionJson","map","sort","getDayMissionData","func","need","pro","instantiate","parent","initMissionItem","scrollToTop","refreshPage2","checkAndResetWeekMission","getWeekMissionBoxJson","getAllWeekMissionJson","getWeekMissionData","refreshPage3","achieveList","AchieveJson","getAllAchieveJson","getAchieveData","end","lv","getAchieveJson","getAchieveProgress","initAchieveMissionItem"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.TaskPage = cc.Enum({\n    taskPage: 1,\n    achievePage: 2\n});\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        coinLabel: cc.Label,\n        diamondLabel: cc.Label,\n        boxBgSprite: cc.Sprite,\n        scoreSprite: cc.Sprite,\n        scoreLabel: cc.Label,\n        boxScorePanel: cc.Node,\n        boxSpinePanel: cc.Node,\n        missionProBar: cc.ProgressBar,\n        missionWeekProBar: cc.ProgressBar,\n        missionPanel: cc.Node,\n        missionScroll: cc.ScrollView,\n        missionParent: cc.Node,\n        baseMissionItem: cc.Node,\n        achievePanel: cc.Node,\n        achieveScroll: cc.ScrollView,\n        achieveParent: cc.Node,\n        baseAchieveItem: cc.Node,\n        timesLabel: cc.Label,\n        redTips: [cc.Node],\n        boxPanel: cc.Node,\n        rewardParent: cc.Node\n    },\n    initTimeShow: function () {\n        if (this.isDayMission) {\n            this.lastTime = cc.pvz.utils.getTodayLastTimes();\n        } else {\n            var e = cc.pvz.utils.getTodayLastTimes();\n            var t = cc.pvz.utils.getCurDayInWeek();\n            if (7 == t) {\n                this.lastTime = e;\n            } else {\n                this.lastTime = e + 86400 * (7 - t);\n            }\n        }\n        this.timesLabel.string = cc.pvz.utils.formatCDTime(this.lastTime);\n        this.schedule(this.refreshTimeShow, 1);\n    },\n    refreshTimeShow: function () {\n        this.lastTime--;\n        if (this.lastTime > 0) {\n            this.timesLabel.string = cc.pvz.utils.formatCDTime(this.lastTime);\n        } else {\n            this.unschedule(this.refreshTimeShow, this);\n        }\n    },\n    onCloseUI: function () {\n        cc.MainControl.updateItemInfo();\n        cc.RedControl.refreshAllRedTip();\n        cc.popupManager.removePopup(this);\n    },\n    onToggleChange: function (e, t) {\n        var i = parseInt(t);\n        if (i != this.curPage) {\n            this.curPage = i;\n            this[\"refreshPage\" + i]();\n        }\n    },\n    initBy: function (e) {\n        if (void 0 === e) {\n            e = 1;\n        }\n        cc.UITask = this;\n        this.updateItemInfo();\n        this.curPage = e;\n        this[\"refreshPage\" + e]();\n        this.redTips[0].active = cc.RedControl.onCheckDayMissionRed();\n        this.redTips[1].active = cc.RedControl.onCheckWeekMissionRed();\n        this.redTips[2].active = cc.RedControl.onCheckAchieveMissionRed();\n        this.stageLevel = cc.pvz.PlayerData.getStageLevel();\n    },\n    initBoxInfo: function () {\n        this.scoreNum = cc.pvz.PlayerData.getItemNum(\n            this.isDayMission ? cc.pvz.GameConfig.ItemType[\"日常任务积分\"] : cc.pvz.GameConfig.ItemType[\"周常任务积分\"]\n        );\n        this.scoreLabel.string = this.scoreNum;\n        this.missionProBar.node.active = this.isDayMission;\n        this.missionWeekProBar.node.active = !this.isDayMission;\n        if (this.isDayMission) {\n            this.missionProBar.progress = this.scoreNum / this.BoxJson[this.BoxJson.length - 1].score;\n        } else {\n            this.missionWeekProBar.progress = this.scoreNum / this.BoxJson[this.BoxJson.length - 1].score;\n        }\n        cc.pvz.utils.setSpriteFrame(this.boxBgSprite, \"uiImage\", \"mission/bg\" + (this.isDayMission ? 1 : 2));\n        cc.pvz.utils.setSpriteFrame(this.scoreSprite, \"uiImage\", \"item/item\" + (this.isDayMission ? 50 : 51));\n        for (var e = 0; e < this.BoxJson.length; e++) {\n            this.boxScorePanel.children[e].getComponent(cc.Label).string = this.BoxJson[e].score;\n            var t;\n            if (\n                this.isDayMission\n                    ? cc.pvz.PlayerData.getDayBoxData(this.BoxJson[e].ID).isReward\n                    : cc.pvz.PlayerData.getWeekBoxData(this.BoxJson[e].ID).isReward\n            ) {\n                t = 3;\n            } else {\n                if (this.scoreNum >= this.BoxJson[e].score) {\n                    t = 2;\n                } else {\n                    t = 1;\n                }\n            }\n            this.boxSpinePanel.children[e].getComponent(sp.Skeleton).setAnimation(0, \"libao\" + t, !0);\n        }\n    },\n    onClickBox: function (e, t) {\n        var i = this;\n        var o = parseInt(t);\n        var a = this.BoxJson[o - 1];\n        if (\n            (this.isDayMission ? cc.pvz.PlayerData.getDayBoxData(a.ID) : cc.pvz.PlayerData.getWeekBoxData(a.ID))\n                .isReward\n        ) {\n            cc.popupManager.showToast(\"奖励已领取\");\n        } else {\n            var c = this.scoreNum >= a.score;\n            var s = a.reward;\n            var n = Math.floor(s.length / 2);\n            var r = 0;\n            this.rewardData = [];\n            for (var h = 0; h < n; h++) {\n                var p = s[r];\n                var l = s[r + 1];\n                if (p == cc.pvz.GameConfig.ItemType[\"金币\"]) {\n                    if (this.isDayMission) {\n                        l += 50 * (this.stageLevel - 1);\n                    } else {\n                        l += 100 * (this.stageLevel - 1);\n                    }\n                }\n                var d = cc.pvz.utils.getRewardItem(p, l);\n                this.rewardData.push(d);\n                r += 2;\n            }\n            if (c) {\n                this.boxPanel.active = !1;\n                if (this.isDayMission) {\n                    cc.pvz.PlayerData.finishDayBoxReward(o);\n                    this.redTips[0].active = cc.RedControl.onCheckDayMissionRed();\n                } else {\n                    cc.pvz.PlayerData.finishWeekBoxReward(o);\n                    this.redTips[1].active = cc.RedControl.onCheckWeekMissionRed();\n                }\n                this.boxSpinePanel.children[o - 1].getComponent(sp.Skeleton).setAnimation(0, \"libao3\", !0);\n                var v;\n                if (this.isDayMission) {\n                    v = cc.pvz.GameConfig.UIFromType[\"日常任务\"];\n                } else {\n                    v = cc.pvz.GameConfig.UIFromType[\"周常任务\"];\n                }\n                cc.popupManager.popup(\n                    \"mainUI\",\n                    \"getrewardUI\",\n                    \"UIReward\",\n                    {\n                        ad: !1,\n                        scale: !1\n                    },\n                    this.rewardData,\n                    v,\n                    function () {\n                        i.updateItemInfo();\n                    }\n                );\n            } else {\n                if (o != this.curBoxId) {\n                    this.curBoxId = o;\n                    this.boxPanel.active = !0;\n                    this.refreshBoxPanelInfo(o);\n                } else {\n                    if (this.boxPanel.active) {\n                        this.boxPanel.active = !1;\n                    } else {\n                        this.boxPanel.active = !0;\n                    }\n                }\n            }\n        }\n    },\n    refreshBoxPanelInfo: function (e) {\n        var t = this.boxSpinePanel.children[e - 1].position;\n        this.boxPanel.position = cc.v2(t.x, this.boxPanel.position.y);\n        for (var i = 0; i < this.rewardParent.childrenCount; i++) {\n            var o = this.rewardParent.children[i];\n            if (i < this.rewardData.length) {\n                o.active = !0;\n                o.getComponent(\"RewardItem\").initBoxRewardItem(this.rewardData[i]);\n            } else {\n                o.active = !1;\n            }\n        }\n    },\n    updateItemInfo: function () {\n        var e = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType[\"金币\"]);\n        this.coinLabel.string = cc.pvz.utils.formatItemNum(e);\n        var t = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType[\"钻石\"]);\n        this.diamondLabel.string = cc.pvz.utils.formatItemNum(t);\n    },\n    getItemEffectPos: function (e) {\n        if (e === cc.pvz.GameConfig.ItemType[\"钻石\"]) {\n            return this.diamondLabel.node.convertToWorldSpaceAR(cc.v2());\n        } else {\n            return this.coinLabel.node.convertToWorldSpaceAR(cc.v2());\n        }\n    },\n    refreshPage1: function () {\n        var e = this;\n        this.missionPanel.active = !0;\n        this.achievePanel.active = !1;\n        this.boxPanel.active = !1;\n        this.curBoxId = -1;\n        cc.pvz.PlayerData.checkAndResetDayMission();\n        this.isDayMission = !0;\n        this.BoxJson = cc.JsonControl.getDayMissionBoxJson();\n        this.initBoxInfo();\n        var t = cc.JsonControl.getAllDayMissionJson()\n            .map(function (e) {\n                return e;\n            })\n            .sort(function (e, t) {\n                var i = cc.pvz.PlayerData.getDayMissionData(e.func);\n                var o = e.need;\n                var a;\n                if (i.isReward) {\n                    a = 2;\n                } else {\n                    if (i.pro >= o) {\n                        a = 0;\n                    } else {\n                        a = 1;\n                    }\n                }\n                var c = cc.pvz.PlayerData.getDayMissionData(t.func);\n                var s = t.need;\n                return a - (c.isReward ? 2 : c.pro >= s ? 0 : 1);\n            });\n        var i = t.length;\n        var o = i - this.missionParent.childrenCount;\n        if (o > 0) {\n            for (var a = 0; a < o; a++) {\n                (n = cc.instantiate(this.baseMissionItem)).parent = this.missionParent;\n            }\n        } else {\n            for (var c = i; c < this.missionParent.childrenCount; c++) {\n                this.missionParent.children[c].active = !1;\n            }\n        }\n        for (var s = 0; s < i; s++) {\n            var n;\n            (n = this.missionParent.children[s]).active = !0;\n            n.getComponent(\"TaskItem\").initMissionItem(!0, t[s], function () {\n                e.initBoxInfo();\n                e.redTips[0].active = cc.RedControl.onCheckDayMissionRed();\n            });\n        }\n        this.initTimeShow();\n        this.missionScroll.scrollToTop(0.1);\n    },\n    refreshPage2: function () {\n        var e = this;\n        this.missionPanel.active = !0;\n        this.achievePanel.active = !1;\n        this.boxPanel.active = !1;\n        this.curBoxId = -1;\n        cc.pvz.PlayerData.checkAndResetWeekMission();\n        this.isDayMission = !1;\n        this.BoxJson = cc.JsonControl.getWeekMissionBoxJson();\n        this.initBoxInfo();\n        var t = cc.JsonControl.getAllWeekMissionJson()\n            .map(function (e) {\n                return e;\n            })\n            .sort(function (e, t) {\n                var i = cc.pvz.PlayerData.getWeekMissionData(e.func);\n                var o = e.need;\n                var a;\n                if (i.isReward) {\n                    a = 2;\n                } else {\n                    if (i.pro >= o) {\n                        a = 0;\n                    } else {\n                        a = 1;\n                    }\n                }\n                var c = cc.pvz.PlayerData.getWeekMissionData(t.func);\n                var s = t.need;\n                return a - (c.isReward ? 2 : c.pro >= s ? 0 : 1);\n            });\n        var i = t.length;\n        var o = i - this.missionParent.childrenCount;\n        if (o > 0) {\n            for (var a = 0; a < o; a++) {\n                (n = cc.instantiate(this.baseMissionItem)).parent = this.missionParent;\n            }\n        } else {\n            for (var c = i; c < this.missionParent.childrenCount; c++) {\n                this.missionParent.children[c].active = !1;\n            }\n        }\n        for (var s = 0; s < i; s++) {\n            var n;\n            (n = this.missionParent.children[s]).active = !0;\n            n.getComponent(\"TaskItem\").initMissionItem(!1, t[s], function () {\n                e.initBoxInfo();\n                e.redTips[1].active = cc.RedControl.onCheckWeekMissionRed();\n            });\n        }\n        this.initTimeShow();\n        this.missionScroll.scrollToTop(0.1);\n    },\n    refreshPage3: function () {\n        var e = this;\n        this.missionPanel.active = !1;\n        this.achievePanel.active = !0;\n        this.boxPanel.active = !1;\n        this.achieveList = [];\n        this.AchieveJson = cc.JsonControl.getAllAchieveJson();\n        var t = Math.floor(this.AchieveJson[this.AchieveJson.length - 1].ID / 100);\n        var i = [];\n        for (var o = 0; o < t; o++) {\n            i.push(o + 1);\n        }\n        i.sort(function (e, t) {\n            var i = cc.pvz.PlayerData.getAchieveData(e);\n            var o = 0;\n            if (i.end) {\n                o = 2;\n            } else {\n                var a = 100 * e + i.lv;\n                var c = cc.JsonControl.getAchieveJson(a);\n                var s = cc.pvz.PlayerData.getAchieveProgress(c.func);\n                if (c.need[0] <= s) {\n                    o = 0;\n                } else {\n                    o = 1;\n                }\n            }\n            var n = cc.pvz.PlayerData.getAchieveData(t);\n            var r = 0;\n            if (n.end) {\n                r = 2;\n            } else {\n                var h = 100 * t + n.lv;\n                var p = cc.JsonControl.getAchieveJson(h);\n                var l = cc.pvz.PlayerData.getAchieveProgress(p.func);\n                if (p.need[0] <= l) {\n                    r = 0;\n                } else {\n                    r = 1;\n                }\n            }\n            return o - r;\n        });\n        var a = t - this.achieveParent.childrenCount;\n        if (a > 0) {\n            for (var c = 0; c < a; c++) {\n                cc.instantiate(this.baseAchieveItem).parent = this.achieveParent;\n            }\n        } else {\n            for (var s = t; s < this.achieveParent.childrenCount; s++) {\n                this.achieveParent.children[s].active = !1;\n            }\n        }\n        for (var n = 0; n < t; n++) {\n            this.achieveParent.children[n].getComponent(\"TaskItem\").initAchieveMissionItem(i[n], function () {\n                e.updateItemInfo();\n                e.redTips[2].active = cc.RedControl.onCheckAchieveMissionRed();\n            });\n        }\n        this.achieveScroll.scrollToTop(0.1);\n    }\n});\n"]}