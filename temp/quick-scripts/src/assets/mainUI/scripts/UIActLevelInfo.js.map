{"version":3,"sources":["assets/mainUI/scripts/UIActLevelInfo.js"],"names":["cc","Class","Component","properties","coinLabel","Label","diamondLabel","powerPanel","Node","timeLabel","scoreLabel","scoreBar","ProgressBar","buffIconList","Sprite","buffTipPanel","buffDescLabel","RichText","boxSpineList","sp","Skeleton","boxLabelList","boxRewardPanel","rewardParent","battleBtn","moreAdNode","levelPlayerPanel","refreshLevelPlayerShow","getComponent","initHeroShow","updateItemInfo","e","pvz","PlayerData","getItemNum","GameConfig","ItemType","string","utils","formatItemNum","t","updatePowerInfo","checkPowerInfo","checkPowerShow","onLoad","UIActLevelInfo","onCloseAllTip","active","initBy","hasPopupType","UIPage","Fuben","callback","isLookAd","ActLevelJson","JsonControl","ActLevelBuffJson","ActLevelBoxJson","stageLevel","getStageLevel","checkAndResetActLevel","ActLevelData","getActLevelData","curBuffIndex","curBoxId","score","progress","MaxActLevelScore","initActBuffData","initLevelBoxData","lastTime","getTodayLastTimes","formatSeconds3","schedule","refreshLoastTime","times","isHaveMoreActTimes","TAUtils","trackAdUIShow","AdType","i","o","children","setSpriteGray","initLevelMap","buffList","getRandomBuff","updateActLevelBuff","getActBuffJson","setSpriteFrame","icon","length","id","push","math","randomRangeInt","onClickBuff","parseInt","a","desc","position","v2","node","parent","x","y","levelBoxData","boxStatus","setAnimation","onClickBox","c","reward","s","Math","floor","n","rewardData","r","h","p","l","getRewardItem","updateActLevelBoxStatus","d","setCompleteListener","popupManager","popup","ad","scale","UIFromType","refreshBoxPanelInfo","showToast","childrenCount","initBoxRewardItem","onAdInGameLogic","AdUtils","showAdRewardVideo","onAdClose","updateAdActTimes","inActBattleGame","addMissionProgress","MissionType","MainUI","setClubBtnVisible","runtimeData","init","player","actLevelData","level","director","loadScene","onClickBattleGame","isEnoughArrayTool","getPower","BattlePower","isHaveBuyPowerTimes","usePlayerPower","updateActLevelTimes","onCloseUI","removePopup","onClickBuyPower","onClickBuyCoin","MainControl","onClickBuyDiamond"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        coinLabel: cc.Label,\n        diamondLabel: cc.Label,\n        powerPanel: cc.Node,\n        timeLabel: cc.Label,\n        scoreLabel: cc.Label,\n        scoreBar: cc.ProgressBar,\n        buffIconList: [cc.Sprite],\n        buffTipPanel: cc.Node,\n        buffDescLabel: cc.RichText,\n        boxSpineList: [sp.Skeleton],\n        boxLabelList: [cc.Label],\n        boxRewardPanel: cc.Node,\n        rewardParent: cc.Node,\n        battleBtn: cc.Node,\n        moreAdNode: cc.Node,\n        levelPlayerPanel: cc.Node\n    },\n    refreshLevelPlayerShow: function () {\n        this.levelPlayerPanel.getComponent(\"LevelPlayer\").initHeroShow();\n    },\n    updateItemInfo: function () {\n        var e = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType[\"金币\"]);\n        this.coinLabel.string = cc.pvz.utils.formatItemNum(e);\n        var t = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType[\"钻石\"]);\n        this.diamondLabel.string = cc.pvz.utils.formatItemNum(t);\n    },\n    updatePowerInfo: function () {\n        this.powerPanel.getComponent(\"PowerInfo\").updatePowerInfo();\n    },\n    checkPowerInfo: function () {\n        this.powerPanel.getComponent(\"PowerInfo\").checkPowerShow();\n    },\n    onLoad: function () {\n        cc.UIActLevelInfo = this;\n    },\n    onCloseAllTip: function () {\n        this.buffTipPanel.active = !1;\n        this.boxRewardPanel.active = !1;\n    },\n    initBy: function (e) {\n        if (void 0 === e) {\n            e = null;\n        }\n        cc.hasPopupType = cc.UIPage.Fuben;\n        this.callback = e;\n        this.isLookAd = !1;\n        this.ActLevelJson = cc.JsonControl.ActLevelJson;\n        this.ActLevelBuffJson = cc.JsonControl.ActLevelBuffJson;\n        this.ActLevelBoxJson = cc.JsonControl.ActLevelBoxJson;\n        this.updatePowerInfo();\n        this.updateItemInfo();\n        this.stageLevel = cc.pvz.PlayerData.getStageLevel();\n        cc.pvz.PlayerData.checkAndResetActLevel();\n        this.ActLevelData = cc.pvz.PlayerData.getActLevelData();\n        this.curBuffIndex = -1;\n        this.buffTipPanel.active = !1;\n        this.boxRewardPanel.active = !1;\n        this.curBoxId = -1;\n        this.scoreLabel.string = this.ActLevelData.score;\n        if (this.ActLevelData.score <= 2500) {\n            this.scoreBar.progress = 0;\n        } else {\n            this.scoreBar.progress = (this.ActLevelData.score - 2500) / (cc.pvz.GameConfig.MaxActLevelScore - 2500);\n        }\n        this.initActBuffData();\n        this.initLevelBoxData();\n        this.lastTime = cc.pvz.utils.getTodayLastTimes();\n        this.timeLabel.string = cc.pvz.utils.formatSeconds3(this.lastTime);\n        this.schedule(this.refreshLoastTime, 1);\n        if (\n            this.ActLevelData.score < cc.pvz.GameConfig.MaxActLevelScore &&\n            this.ActLevelData.times <= 0 &&\n            cc.pvz.PlayerData.isHaveMoreActTimes()\n        ) {\n            this.moreAdNode.active = !0;\n            cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType[\"额外挑战\"]);\n        } else {\n            this.moreAdNode.active = !1;\n            var t = this.ActLevelData.times <= 0;\n            for (var i = 0; i < 1; i++) {\n                var o = this.battleBtn.children[i].getComponent(cc.Sprite);\n                cc.JsonControl.setSpriteGray(o, t);\n            }\n        }\n        this.refreshLevelPlayerShow();\n    },\n    initLevelMap: function () {},\n    initActBuffData: function () {\n        for (var e = 0; e < 2; e++) {\n            var t = this.ActLevelData.buffList[e];\n            if (-1 == t) {\n                t = this.getRandomBuff(0 == e);\n                cc.pvz.PlayerData.updateActLevelBuff(e + 1, t);\n            }\n            var i = cc.JsonControl.getActBuffJson(t);\n            cc.pvz.utils.setSpriteFrame(this.buffIconList[e], \"uiImage\", \"tiaozhan/buff\" + i.icon);\n        }\n    },\n    getRandomBuff: function (e) {\n        if (void 0 === e) {\n            e = !0;\n        }\n        var t = [];\n        for (var i = 0; i < this.ActLevelBuffJson.length; i++) {\n            var o = this.ActLevelBuffJson[i];\n            if (e) {\n                if (o.id < 100) {\n                    t.push(o.id);\n                }\n            } else {\n                if (o.id > 100) {\n                    t.push(o.id);\n                }\n            }\n        }\n        return t[cc.math.randomRangeInt(0, t.length)];\n    },\n    onClickBuff: function (e, t) {\n        this.boxRewardPanel.active = !1;\n        var i = parseInt(t);\n        if (i != this.curBuffIndex) {\n            this.curBuffIndex = i;\n            var o = this.ActLevelData.buffList[i - 1];\n            var a = cc.JsonControl.getActBuffJson(o);\n            this.buffTipPanel.active = !0;\n            this.buffDescLabel.string = a.desc;\n            this.buffTipPanel.position = cc.v2(\n                this.buffIconList[i - 1].node.parent.position.x,\n                this.buffTipPanel.position.y\n            );\n        } else {\n            this.buffTipPanel.active = !this.buffTipPanel.active;\n        }\n    },\n    initLevelBoxData: function () {\n        this.levelBoxData = this.ActLevelData.boxStatus;\n        for (var e = 0; e < this.boxLabelList.length; e++) {\n            var t = this.ActLevelBoxJson[e].score;\n            this.boxLabelList[e].string = \"\" + t;\n            var i = this.boxSpineList[e];\n            if (1 == this.levelBoxData[e]) {\n                i.setAnimation(0, \"baoxiang4\", !1);\n            } else {\n                if (t <= this.ActLevelData.score) {\n                    i.setAnimation(0, \"baoxiang2\", !0);\n                } else {\n                    i.setAnimation(0, \"baoxiang1\", !1);\n                }\n            }\n        }\n    },\n    onClickBox: function (e, t) {\n        var i = this;\n        if (!this.isLookAd) {\n            this.buffTipPanel.active = !1;\n            var o = parseInt(t);\n            if (1 != this.levelBoxData[o - 1]) {\n                var a = this.ActLevelBoxJson[o - 1].score <= this.ActLevelData.score;\n                var c = this.ActLevelBoxJson[o - 1].reward;\n                var s = Math.floor(c.length / 2);\n                var n = 0;\n                this.rewardData = [];\n                for (var r = 0; r < s; r++) {\n                    var h = c[n];\n                    var p = c[n + 1];\n                    if (h == cc.pvz.GameConfig.ItemType[\"金币\"]) {\n                        p += this.stageLevel * (1 == o ? 10 : 20);\n                    } else {\n                        if (h == cc.pvz.GameConfig.ItemType[\"钻石\"]) {\n                            p += this.stageLevel * (2 == o ? 3 : 5);\n                        }\n                    }\n                    var l = cc.pvz.utils.getRewardItem(h, p);\n                    this.rewardData.push(l);\n                    n += 2;\n                }\n                if (a) {\n                    this.boxRewardPanel.active = !1;\n                    cc.pvz.PlayerData.updateActLevelBoxStatus(o);\n                    var d = this.boxSpineList[o - 1];\n                    d.setAnimation(0, \"baoxiang3\", !1);\n                    d.setCompleteListener(function () {\n                        d.setAnimation(0, \"baoxiang4\", !1);\n                        d.setCompleteListener(null);\n                    });\n                    cc.popupManager.popup(\n                        \"mainUI\",\n                        \"getrewardUI\",\n                        \"UIReward\",\n                        {\n                            ad: !1,\n                            scale: !1\n                        },\n                        this.rewardData,\n                        cc.pvz.GameConfig.UIFromType[\"挑战副本\"],\n                        function () {\n                            i.updateItemInfo();\n                        }\n                    );\n                } else {\n                    if (o != this.curBoxId) {\n                        this.curBoxId = o;\n                        this.boxRewardPanel.active = !0;\n                        this.refreshBoxPanelInfo(o);\n                    } else {\n                        this.boxRewardPanel.active = !this.boxRewardPanel.active;\n                    }\n                }\n            } else {\n                cc.popupManager.showToast(\"奖励已领取\");\n            }\n        }\n    },\n    refreshBoxPanelInfo: function (e) {\n        this.boxRewardPanel.position = cc.v2(\n            this.boxSpineList[e - 1].node.parent.position.x,\n            this.boxRewardPanel.position.y\n        );\n        for (var t = 0; t < this.rewardParent.childrenCount; t++) {\n            var i = this.rewardParent.children[t];\n            if (t < this.rewardData.length) {\n                i.active = !0;\n                i.getComponent(\"RewardItem\").initBoxRewardItem(this.rewardData[t]);\n            } else {\n                i.active = !1;\n            }\n        }\n    },\n    refreshLoastTime: function () {\n        this.lastTime--;\n        this.timeLabel.string = cc.pvz.utils.formatSeconds3(this.lastTime);\n        if (this.lastTime <= 0) {\n            this.lastTime = 86400;\n            this.timeLabel.string = cc.pvz.utils.formatSeconds3(this.lastTime);\n            this.initBy();\n        }\n    },\n    onAdInGameLogic: function () {\n        var e = this;\n        if (this.isLookAd) {\n            //\n        } else {\n            this.isLookAd = !0;\n            cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"额外挑战\"], function (t) {\n                e.onAdClose(t);\n            });\n        }\n    },\n    onAdClose: function (e) {\n        this.isLookAd = !1;\n        if (e) {\n            cc.pvz.PlayerData.updateAdActTimes();\n            this.inActBattleGame();\n        }\n    },\n    inActBattleGame: function () {\n        cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType[\"参与挑战关卡n次\"], 1);\n        cc.MainUI.setClubBtnVisible(!1);\n        cc.pvz.runtimeData.init(1, cc.player.actLevelData.level);\n        cc.director.loadScene(\"game1\");\n    },\n    onClickBattleGame: function () {\n        if (this.isLookAd) {\n            //\n        } else {\n            if (cc.pvz.PlayerData.isEnoughArrayTool()) {\n                if (this.ActLevelData.times <= 0) {\n                    if (this.moreAdNode.active) {\n                        this.onAdInGameLogic();\n                    } else {\n                        cc.popupManager.showToast(\"今日次数已用完！\");\n                    }\n                } else {\n                    if (cc.pvz.PlayerData.getPower() < cc.pvz.GameConfig.BattlePower) {\n                        cc.pvz.PlayerData.isHaveBuyPowerTimes()\n                            ? cc.popupManager.popup(\n                                  \"mainUI\",\n                                  \"powerbuy\",\n                                  \"UIPowerBuy\",\n                                  {\n                                      ad: !1,\n                                      scale: !0\n                                  },\n                                  cc.pvz.GameConfig.UIFromType[\"挑战副本\"]\n                              )\n                            : cc.popupManager.showToast(\"体力不足\");\n                    } else {\n                        cc.pvz.PlayerData.usePlayerPower(-5),\n                            this.checkPowerInfo(),\n                            cc.pvz.PlayerData.updateActLevelTimes(),\n                            this.inActBattleGame();\n                    }\n                }\n            } else {\n                cc.popupManager.showToast(\"还有未上阵的卡皮巴拉的哦！\");\n            }\n        }\n    },\n    onCloseUI: function () {\n        cc.hasPopupType = 0;\n        cc.popupManager.removePopup(this);\n        if (this.callback) {\n            this.callback();\n        }\n    },\n    onClickBuyPower: function () {},\n    onClickBuyCoin: function () {\n        cc.popupManager.removePopup(this);\n        cc.MainControl.onClickBuyCoin();\n    },\n    onClickBuyDiamond: function () {\n        cc.popupManager.removePopup(this);\n        cc.MainControl.onClickBuyDiamond();\n    }\n});\n"]}