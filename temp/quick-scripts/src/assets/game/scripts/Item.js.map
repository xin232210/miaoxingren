{"version":3,"sources":["assets/game/scripts/Item.js"],"names":["i","cc","Class","Component","properties","xys","Vec2","offset","id","id0Type","lv","lvSp","Sprite","bgSp","hasAd","adAni","adSupOffset","spine","sp","Skeleton","righMargin","barPos","v2","attOffset","onLoad","enabled","setSelfListenEvent","t","node","on","Node","EventType","TOUCH_START","onClickBegan","TOUCH_MOVE","onClickMoved","TOUCH_END","onClickEnded","TOUCH_CANCEL","off","updateLvBlocks","pvz","utils","setSpriteFrame","json","lattice2","cantDrag","skeletonData","self","useBundleAsset","SkeletonData","console","log","skinName","findSkin","setSkin","setAnimation","warn","error","lvup","checkToUpdateMaxHp","showLvupEffect","convertToWorldSpaceAR","ZERO","itemRoot","scene","hub","initBy","e","n","heroJsonFile","near6","forEach","put","myBlocks","o","position","add","zIndex","y","canUse","setBgSpParent","hero","angerEff","lineIKBones","getMaxLv","PlayerData","getToolData","showUnderBuffEffect","buffNode","active","buffEffect","addNodeTo","hideUnderBuffEffect","updateLv5Effect","hideLv5Effect","lv5FlagNode","setCanDrag","opacity","updatePreviewByPos","blockRoot","testBlock","testItem","lockByAd","getComponent","find","unlockAd","isValid","TAUtils","track","message","stack","pickupFromBoard","hasMoved","clickWPos","removeFromBlock","getLocation","pickup","initSameIDLvLine","parent","convertToNodeSpaceAR","updateLineIKBones","pick","length","undoTryPlace","Set","item","s","size","c","values","next","value","every","resetBlocksPreview","putdown","tryPlace","a","blockItemsRootNode","resetPosesPreview","runtimeData","guide","startGuide6","childrenCount","startGuide2","updateMoveFinger","startGuide4","hideMoveFinger","startGuide8","r","sub","Math","abs","x","popupManager","popup","scale","hideLines","layoutChildren","getSwitchAd","AdUtils","showAdRewardVideo","GameConfig","AdType","saveRuntimeData","onItemChanged","initHeroNodes","mul","barNode","barPrefab","addNode","hpBar","ProgressBar","cdBar","shieldBar","progress","lv1","cdMs","cd","reloadMs","Array","isArray","bulletcd","near10","hasEnableBuff","inCoolDown","bulletCount","startReloadTimer","onReloadReady","startHeroLogic","showGame1st","crossItems","getCrossItems","push","reloadT1","reloadT2","bullet","onCDReady","stopHeroLogic","hp","reborn","showBuffEffect","maxHp","destroy","checkToStartReloadTimer","checkBuff","time","startAngerMode","timeScale","accBuffPrefab","stopAngerMode","update","timePaused","hasEnded","hasDie","isAngerPressed","tryShoot","playSound","setTimeout","bind","getMaxHp","attribute1","fightlvup1","getBuffValue","updateMaxHp","updateHp","updateShield","linePrefab","findBone","IKBone","wPos","children","boardItemBgsRoot"],"mappings":"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","sourceRoot":"/","sourcesContent":["var i = [\"bai_\", \"lv_\", \"lan_\", \"zi_\", \"cheng_\"];\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        xys: [cc.Vec2],\n        offset: cc.Vec2,\n        id: 1,\n        id0Type: 0,\n        lv: 0,\n        lvSp: cc.Sprite,\n        bgSp: cc.Sprite,\n        hasAd: !1,\n        adAni: \"\",\n        adSupOffset: cc.Vec2,\n        spine: sp.Skeleton,\n        righMargin: 53,\n        barPos: {\n            default: cc.v2(0, 120)\n        },\n        attOffset: cc.Vec2\n    },\n    onLoad: function () {\n        this.enabled = !1;\n    },\n    setSelfListenEvent: function (t) {\n        if (t) {\n            this.node.on(cc.Node.EventType.TOUCH_START, this.onClickBegan, this);\n            this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onClickMoved, this);\n            this.node.on(cc.Node.EventType.TOUCH_END, this.onClickEnded, this);\n            this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onClickEnded, this);\n        } else {\n            this.node.off(cc.Node.EventType.TOUCH_START, this.onClickBegan, this);\n            this.node.off(cc.Node.EventType.TOUCH_MOVE, this.onClickMoved, this);\n            this.node.off(cc.Node.EventType.TOUCH_END, this.onClickEnded, this);\n            this.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onClickEnded, this);\n        }\n    },\n    updateLvBlocks: function () {\n        if (this.bgSp) {\n            cc.pvz.utils.setSpriteFrame(this.bgSp, \"uiImage\", \"gezi/\" + i[this.lv] + this.json.lattice2);\n        }\n        if (this.lvSp) {\n            cc.pvz.utils.setSpriteFrame(this.lvSp, \"uiImage\", \"item/\" + (this.lv + 1));\n        }\n        if (this.spine) {\n            // 修改为使用character目录下的资源，并添加错误处理\n            var t = (this.cantDrag ? \"black_\" : \"stand\") + (this.lv + 1);\n            \n            // 如果还没有设置skeletonData，则设置它\n            if (!this.spine.skeletonData) {\n                var self = this;\n                cc.pvz.utils.useBundleAsset(\"actors\", \"character/Characters\", sp.SkeletonData, function (skeletonData) {\n                    if (skeletonData) {\n                        console.log(\"角色资源加载成功:\", skeletonData);\n                        self.spine.skeletonData = skeletonData;\n                        // 根据id设置对应的皮肤，确保皮肤名称正确\n                        var skinName = \"Character\" + (self.id < 10 ? \"0\" + self.id : self.id);\n                        if (self.spine.findSkin(skinName)) {\n                            console.log(\"找到皮肤:\", skinName);\n                            self.spine.setSkin(skinName);\n                            self.spine.setAnimation(0, t, !0);\n                        } else {\n                            console.warn(\"皮肤不存在:\", skinName);\n                            // 如果皮肤不存在，尝试使用默认皮肤\n                            self.spine.setAnimation(0, t, !0);\n                        }\n                    } else {\n                        console.error(\"无法加载角色资源\");\n                    }\n                });\n            } else {\n                // 如果已经设置了skeletonData，直接更新动画\n                this.spine.setAnimation(0, t, !0);\n            }\n        }\n    },\n    lvup: function (t) {\n        if (void 0 === t) {\n            t = !0;\n        }\n        this.lv++;\n        this.updateLvBlocks();\n        this.checkToUpdateMaxHp();\n        if (t) {\n            this.showLvupEffect();\n        }\n    },\n    showLvupEffect: function () {\n        var t = this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n        this.itemRoot.scene.hub.showLvupEffect(t);\n    },\n    initBy: function (t, e, i) {\n        var n = this;\n        this.itemRoot = t;\n        this.json = this.itemRoot.scene.heroJsonFile.json[this.id - 1];\n        this.near6 = !1;\n        this.lv = e;\n        this.updateLvBlocks();\n        if (i) {\n            i.forEach(function (t) {\n                t.put(n);\n            });\n            this.myBlocks = i;\n            var o = i[0].node.position.add(this.offset);\n            this.node.position = o;\n            this.node.zIndex = -(o.y + this.spine.node.y);\n            this.canUse = !0;\n        } else {\n            this.myBlocks = [];\n            this.canUse = !this.hasAd;\n            this.setSelfListenEvent(!0);\n            this.setBgSpParent(!0);\n        }\n        this.hero = null;\n        this.angerEff = null;\n        this.lineIKBones = [];\n    },\n    getMaxLv: function () {\n        if (cc.pvz.PlayerData.getToolData(this.id).lv >= 5) {\n            return 4;\n        } else {\n            return 3;\n        }\n    },\n    showUnderBuffEffect: function () {\n        if (this.buffNode) {\n            this.buffNode.active = !0;\n        } else {\n            var t = this.itemRoot.buffEffect.addNodeTo(this.node, this.spine.position);\n            this.buffNode = t;\n        }\n    },\n    hideUnderBuffEffect: function () {\n        if (this.buffNode) {\n            this.buffNode.active = !1;\n        }\n    },\n    updateLv5Effect: function () {\n        this.lv;\n    },\n    hideLv5Effect: function () {\n        if (this.lv5FlagNode) {\n            this.lv5FlagNode.active = !1;\n        }\n    },\n    setCanDrag: function (t) {\n        if (this.spine) {\n            this.spine.setAnimation(0, (t ? \"stand\" : \"black_\") + (this.lv + 1), !0);\n        } else {\n            if (t) {\n                this.node.opacity = 255;\n            } else {\n                this.node.opacity = 100;\n            }\n        }\n        this.cantDrag = !t;\n    },\n    updatePreviewByPos: function (t, e) {\n        if (0 == this.id) {\n            return this.itemRoot.blockRoot.testBlock(this, t, e);\n        } else {\n            return this.itemRoot.blockRoot.testItem(this, t, e);\n        }\n    },\n    lockByAd: function (t) {\n        var e = t.addNodeTo(this.node);\n        e.getComponent(sp.Skeleton).setAnimation(0, this.adAni, !0);\n        cc.find(\"ad\", e).position = this.adSupOffset;\n        this.hasAd = !0;\n        this.canUse = !1;\n    },\n    unlockAd: function () {\n        if (this.isValid) {\n            var t = cc.find(\"ad\", this.node);\n            if (t) {\n                t.active = !1;\n                this.canUse = !0;\n            } else {\n                cc.pvz.TAUtils.track(\"error\", {\n                    message: \"unlockAd\",\n                    stack: \"noAdNode, id:\" + this.id + \",lv:\" + this.lv\n                });\n            }\n        }\n    },\n    pickupFromBoard: function (t) {\n        if (this.cantDrag) {\n            //\n        } else {\n            this.hasMoved = !1;\n            this.clickWPos = t;\n            this.removeFromBlock();\n            this.itemRoot.pickupFromBoard(this, t);\n            this.updatePreviewByPos(t);\n        }\n    },\n    onClickBegan: function (t) {\n        if (!this.cantDrag) {\n            var e = t.getLocation();\n            this.hasMoved = !1;\n            this.clickWPos = e;\n            this.itemRoot.pickup(this, e);\n            this.updatePreviewByPos(e);\n            this.initSameIDLvLine();\n        }\n    },\n    onClickMoved: function (t) {\n        if (this.cantDrag) {\n            //\n        } else {\n            this.hasMoved = !0;\n            this.node.position = this.node.parent.convertToNodeSpaceAR(t.getLocation());\n            this.updatePreviewByPos(t.getLocation());\n            this.updateLineIKBones();\n        }\n    },\n    removeFromBlock: function () {\n        this.myBlocks.forEach(function (t) {\n            return t.pick();\n        });\n        this.myBlocks.length = 0;\n        if (0 == this.id) {\n            this.itemRoot.blockRoot.undoTryPlace(this);\n        } else {\n            this.hideUnderBuffEffect();\n        }\n        this.checkToUpdateMaxHp();\n    },\n    onClickEnded: function (t) {\n        var e = this;\n        if (!this.cantDrag) {\n            if (this.canUse) {\n                var i = [];\n                if (this.updatePreviewByPos(t.getLocation(), i)) {\n                    var n = i[0].node.position.add(this.offset);\n                    var o = new Set();\n                    i.forEach(function (t) {\n                        if (t.item) {\n                            o.add(t.item);\n                        }\n                    });\n                    var s = !1;\n                    if (0 != this.id && this.lv < this.getMaxLv() && 1 == o.size) {\n                        var c = o.values().next().value;\n                        if (\n                            c.id == this.id &&\n                            c.lv == this.lv &&\n                            i.every(function (t) {\n                                return t.item == c;\n                            })\n                        ) {\n                            s = !0;\n                            c.lvup();\n                            this.setBgSpParent(!0);\n                            this.node.parent = null;\n                            this.itemRoot.blockRoot.resetBlocksPreview();\n                        }\n                    }\n                    if (!s) {\n                        o.forEach(function (t) {\n                            if (t != e) {\n                                t.hideLv5Effect();\n                                t.removeFromBlock();\n                                t.itemRoot.putdown(t, t.node.convertToWorldSpaceAR(cc.Vec2.ZERO));\n                            }\n                        });\n                        i.forEach(function (t) {\n                            t.put(e);\n                        });\n                        this.myBlocks = i;\n                        if (0 == this.id) {\n                            this.itemRoot.blockRoot.tryPlace(this);\n                            var a = this.itemRoot.blockItemsRootNode.convertToWorldSpaceAR(n);\n                            this.node.position = this.node.parent.convertToNodeSpaceAR(a);\n                        } else {\n                            if (-1 == i[0].i) {\n                                this.node.parent = i[0].node;\n                                this.node.position = cc.Vec2.ZERO;\n                            } else {\n                                this.node.parent = this.itemRoot.blockItemsRootNode;\n                                this.node.position = n;\n                                this.node.zIndex = -(n.y + this.spine.node.y);\n                            }\n                        }\n                        this.setSelfListenEvent(!1);\n                        this.checkToUpdateMaxHp();\n                        if (0 == this.id) {\n                            this.itemRoot.blockRoot.resetPosesPreview();\n                            6 == cc.pvz.runtimeData.guide && this.itemRoot.scene.startGuide6();\n                        } else {\n                            this.itemRoot.blockRoot.resetBlocksPreview();\n                        }\n                    }\n                    if (1 == cc.pvz.runtimeData.guide) {\n                        if (0 == this.itemRoot.node.childrenCount) {\n                            this.itemRoot.scene.startGuide2();\n                        } else {\n                            this.itemRoot.scene.updateMoveFinger();\n                        }\n                    }\n                    if (3 == cc.pvz.runtimeData.guide) {\n                        if (0 == this.itemRoot.node.childrenCount) {\n                            this.itemRoot.scene.startGuide4();\n                        } else {\n                            this.itemRoot.scene.updateMoveFinger();\n                        }\n                    }\n                    if (6 == cc.pvz.runtimeData.guide) {\n                        if (0 == this.id) {\n                            this.itemRoot.scene.hideMoveFinger();\n                        } else {\n                            this.itemRoot.scene.updateMoveFinger();\n                        }\n                    }\n                    if (7 == cc.pvz.runtimeData.guide) {\n                        if (0 == this.itemRoot.node.childrenCount) {\n                            this.itemRoot.scene.startGuide8();\n                        } else {\n                            this.itemRoot.scene.updateMoveFinger();\n                        }\n                    }\n                } else {\n                    this.hideLv5Effect();\n                    this.removeFromBlock();\n                    this.itemRoot.putdown(this, t.getLocation());\n                    if (0 == this.id) {\n                        this.itemRoot.blockRoot.resetPosesPreview();\n                    } else {\n                        this.itemRoot.blockRoot.resetBlocksPreview();\n                    }\n                    1 == cc.pvz.runtimeData.guide && this.itemRoot.scene.updateMoveFinger();\n                    3 == cc.pvz.runtimeData.guide && this.itemRoot.scene.updateMoveFinger();\n                    6 == cc.pvz.runtimeData.guide && this.itemRoot.scene.updateMoveFinger();\n                    7 == cc.pvz.runtimeData.guide && this.itemRoot.scene.updateMoveFinger();\n                }\n                if (0 != this.id) {\n                    var r = t.getLocation().sub(this.clickWPos);\n                    if (Math.abs(r.x) < 16 && Math.abs(r.y) < 16) {\n                        cc.popupManager.popup(\n                            \"game\",\n                            \"plantInfo2\",\n                            \"UIGameToolInfo\",\n                            {\n                                scale: !1\n                            },\n                            this.id,\n                            this.lv\n                        );\n                    }\n                }\n                this.hideLines();\n                this.itemRoot.layoutChildren();\n            } else {\n                if (cc.pvz.TAUtils.getSwitchAd()) {\n                    this.hideLines();\n                    cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType[\"广告格子\"], function (i) {\n                        if (i) {\n                            e.unlockAd();\n                            e.onClickEnded(t);\n                            e.itemRoot.scene.saveRuntimeData();\n                        } else {\n                            e.removeFromBlock();\n                            e.itemRoot.putdown(e, t.getLocation());\n                            if (0 == e.id) {\n                                e.itemRoot.blockRoot.resetPosesPreview();\n                            } else {\n                                e.itemRoot.blockRoot.resetBlocksPreview();\n                            }\n                        }\n                    });\n                } else {\n                    cc.popupManager.popup(\n                        \"game\",\n                        \"bagbuyUI\",\n                        \"UIBuyBlock\",\n                        {\n                            scale: !1\n                        },\n                        this\n                    );\n                }\n            }\n        }\n    },\n    checkToUpdateMaxHp: function () {\n        this.itemRoot.scene.onItemChanged();\n    },\n    initHeroNodes: function () {\n        var t = this.hero.node.position.add(this.barPos.mul(0.82));\n        if (this.barNode) {\n            //\n        } else {\n            this.barNode = this.barPrefab.addNode(t);\n            this.hpBar = cc.find(\"hp\", this.barNode).getComponent(cc.ProgressBar);\n            this.cdBar = cc.find(\"cd\", this.barNode).getComponent(cc.ProgressBar);\n            this.shieldBar = cc.find(\"dun\", this.barNode).getComponent(cc.ProgressBar);\n        }\n        this.barNode.active = !0;\n        this.barNode.position = t;\n        this.hpBar.progress = 1;\n        this.shieldBar.progress = 0;\n        this.angerEff = null;\n        this.lv1 = cc.pvz.PlayerData.getToolData(this.id).lv - 1;\n        this.cdMs = 1e3 * this.json.cd;\n        this.reloadMs = 1e3 * (Array.isArray(this.json.bulletcd) ? this.json.bulletcd[this.lv1] : this.json.bulletcd);\n        if (this.near10 && cc.pvz.runtimeData.hasEnableBuff(1004)) {\n            this.cdMs *= 0.8;\n        }\n        this.hpBar.progress = 1;\n        this.shieldBar.progress = 0;\n        this.enabled = !0;\n        if (3 == this.id || 6 == this.id || 8 == this.id || 10 == this.id) {\n            this.inCoolDown = !0;\n            this.bulletCount = 0;\n            this.cdBar.progress = 0;\n            this.startReloadTimer();\n        } else {\n            this.onReloadReady();\n        }\n    },\n    startHeroLogic: function (t, e) {\n        this.barPrefab = t;\n        this.scene = e;\n        \n        // 隐藏格子和等级显示（非新手引导状态）\n        if (!cc.pvz.runtimeData.showGame1st) {\n            if (this.bgSp && this.bgSp.node) {\n                this.bgSp.node.active = false;\n            }\n            if (this.lvSp && this.lvSp.node) {\n                this.lvSp.node.active = false;\n            }\n        }\n        \n        if (6 == this.id) {\n            var n = this.myBlocks[0].i;\n            this.crossItems = [];\n            var self = this;\n            this.itemRoot.blockRoot.getCrossItems(this.id, n, function (t) {\n                self.crossItems.push(t);\n            });\n        }\n    },\n    onReloadReady: function () {\n        this.inCoolDown = !1;\n        this.cdBar.progress = 1;\n        this.reloadT1 = -1;\n        this.reloadT2 = -1;\n        this.bulletCount = this.json.bullet;\n        if (2 == this.id && cc.pvz.runtimeData.hasEnableBuff(203)) {\n            this.bulletCount += this.json.bullet / 2;\n        }\n    },\n    onCDReady: function () {\n        this.inCoolDown = !1;\n    },\n    stopHeroLogic: function () {\n        if (this.barNode) {\n            this.barNode.parent = null;\n            this.barNode = null;\n        }\n        this.enabled = !1;\n        \n        // 恢复格子和等级显示（非新手引导状态）\n        if (!cc.pvz.runtimeData.showGame1st) {\n            if (this.bgSp && this.bgSp.node) {\n                this.bgSp.node.active = true;\n            }\n            if (this.lvSp && this.lvSp.node) {\n                this.lvSp.node.active = true;\n            }\n        }\n        \n        if (this.hero.hp <= 0) {\n            this.hero.reborn();\n            this.hero.showBuffEffect(\"revive\", !0);\n        } else {\n            if (this.hero.hp < this.maxHp) {\n                this.hero.showBuffEffect(\"HP\", !0);\n            }\n        }\n        this.hero.setAnimation(0, \"stand\", !0, null);\n        this.hero.destroy();\n        this.hero = null;\n    },\n    checkToStartReloadTimer: function () {\n        if (this.bulletCount <= 0) {\n            this.startReloadTimer();\n        }\n    },\n    startReloadTimer: function () {\n        var t = this.reloadMs;\n        if (this.checkBuff(202)) {\n            t /= 2;\n        }\n        if (this.checkBuff(301)) {\n            t *= 0.8;\n        }\n        if (this.checkBuff(603)) {\n            t *= 0.8;\n        }\n        if (this.checkBuff(801)) {\n            t *= 0.8;\n        }\n        if (this.checkBuff(1003)) {\n            t *= 0.8;\n        }\n        if (this.checkBuff(703)) {\n            t *= 0.7;\n        }\n        if (this.checkBuff(902)) {\n            t *= 0.8;\n        }\n        if (this.checkBuff(1103)) {\n            t *= 0.8;\n        }\n        if (this.checkBuff(1202)) {\n            t *= 0.8;\n        }\n        this.reloadT1 = cc.pvz.time;\n        this.reloadT2 = cc.pvz.time + t;\n    },\n    startAngerMode: function () {\n        this.spine.timeScale = 2;\n        if (-1 != this.reloadT1) {\n            var t = cc.pvz.time - this.reloadT1;\n            this.reloadT1 += t / 2;\n            this.reloadT2 += t / 2;\n        }\n        if (this.hero.hp > 0) {\n            if (this.angerEff) {\n                this.angerEff.node.position = this.hero.node.position;\n                this.angerEff.node.active = !0;\n            } else {\n                var e = this.scene.accBuffPrefab.addNode(this.hero.node.position);\n                this.angerEff = e.getComponent(sp.Skeleton);\n                this.angerEff.setAnimation(0, \"accelerate\", !0);\n            }\n        }\n    },\n    stopAngerMode: function () {\n        this.spine.timeScale = 1;\n        if (-1 != this.reloadT1) {\n            var t = cc.pvz.time - this.reloadT1;\n            this.reloadT1 -= t;\n            this.reloadT2 -= t;\n        }\n        if (this.angerEff) {\n            this.angerEff.node.active = !1;\n        }\n    },\n    update: function () {\n        if (\n            this.hero &&\n            !this.hero.scene.timePaused &&\n            !this.hero.scene.hasEnded &&\n            !(this.hasDie || this.hero.hp <= 0)\n        ) {\n            var t = this.hero.scene.isAngerPressed;\n            if (this.inCoolDown) {\n                if (-1 != this.reloadT1) {\n                    var e = cc.pvz.time - this.reloadT1;\n                    if (t) {\n                        e *= 2;\n                    }\n                    if (this.reloadT1 + e >= this.reloadT2) {\n                        this.onReloadReady();\n                    } else {\n                        this.cdBar.progress = e / (this.reloadT2 - this.reloadT1);\n                    }\n                }\n            } else if (\n                this.hero.tryShoot({\n                    lv: this.lv\n                }) &&\n                (this.hero.playSound(),\n                (this.inCoolDown = !0),\n                (t && 1 != this.json.bullet) ||\n                    (this.bulletCount--, (this.cdBar.progress = this.bulletCount / this.json.bullet)),\n                this.bulletCount > 0)\n            ) {\n                var i;\n                if (t) {\n                    i = this.cdMs / 2;\n                } else {\n                    i = this.cdMs;\n                }\n                this.scene.setTimeout(this.onCDReady.bind(this), i);\n            }\n        }\n    },\n    getMaxHp: function () {\n        var t = cc.pvz.PlayerData.getToolData(this.id).lv;\n        var e = this.json.attribute1[t - 1];\n        if (this.lv > 0) {\n            e *= this.json.fightlvup1[this.lv - 1] / 100;\n        }\n        e *= 1 + 0.01 * cc.pvz.runtimeData.getBuffValue(1);\n        if (this.near6 && cc.pvz.runtimeData.hasEnableBuff(604)) {\n            e *= 1.1;\n        }\n        if (this.checkBuff(402)) {\n            e *= 1.3;\n        }\n        return e;\n    },\n    updateMaxHp: function () {\n        var t = this.getMaxHp();\n        var e = t - this.maxHp;\n        this.maxHp = t;\n        if (this.hero) {\n            this.hero.hp += e;\n        }\n    },\n    updateHp: function (t) {\n        this.hpBar.progress = t;\n    },\n    updateShield: function (t) {\n        this.shieldBar.progress = t;\n        this.scene.updateShield();\n    },\n    checkBuff: function (t) {\n        var e = (t - (t % 100)) / 100;\n        return this.id == e && cc.pvz.runtimeData.hasEnableBuff(t);\n    },\n    initSameIDLvLine: function () {\n        var t = this;\n        this.setBgSpParent(!0);\n        if (0 != this.id && this.lv < this.getMaxLv()) {\n            var e = function (e) {\n                var i = e.getComponent(\"Item\");\n                if (i && i != t && i.id == t.id && i.lv == t.lv) {\n                    var n = t.itemRoot.linePrefab\n                        .addNodeTo(t.node, t.spine.node.position.add(cc.v2(0, 45)))\n                        .getComponent(sp.Skeleton);\n                    var o = n.findBone(\"IK\");\n                    var s = i.spine.node.convertToWorldSpaceAR(cc.v2(0, 45));\n                    t.lineIKBones.push({\n                        spine: n,\n                        IKBone: o,\n                        wPos: s\n                    });\n                }\n            };\n            this.lineIKBones.length = 0;\n            this.itemRoot.blockItemsRootNode.children.forEach(function (t) {\n                return e(t);\n            });\n            this.itemRoot.node.children.forEach(function (t) {\n                return e(t);\n            });\n            this.updateLineIKBones();\n        }\n    },\n    updateLineIKBones: function () {\n        if (0 != this.id) {\n            this.lineIKBones.forEach(function (t) {\n                var e = t.spine.node.convertToNodeSpaceAR(t.wPos);\n                t.IKBone.x = e.x;\n                t.IKBone.y = e.y;\n            });\n        }\n    },\n    hideLines: function () {\n        this.setBgSpParent(!(this.myBlocks.length > 0));\n        if (0 != this.id) {\n            this.lineIKBones.forEach(function (t) {\n                t.spine.node.parent = null;\n            });\n            this.lineIKBones.length = 0;\n        }\n    },\n    setBgSpParent: function (t) {\n        if (this.bgSp) {\n            if (t) {\n                if (this.bgSp.node.parent != this.node) {\n                    this.bgSp.node.zIndex = -1;\n                    this.bgSp.node.position = cc.Vec2.ZERO;\n                    this.bgSp.node.parent = this.node;\n                }\n            } else if (this.node.parent && this.bgSp.node.parent == this.node) {\n                var e = this.bgSp.node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n                this.bgSp.node.parent = this.itemRoot.blockRoot.boardItemBgsRoot;\n                this.bgSp.node.position = this.bgSp.node.parent.convertToNodeSpaceAR(e);\n            }\n        }\n    }\n});"]}