{"version":3,"sources":["assets/game/scripts/UIGameToolInfo.js"],"names":["cc","Class","Component","properties","nameLabel","Label","lvLabel","iconSpine","sp","Skeleton","attrbibuteIcons","Sprite","attrNumLabels","attrNameLabels","arrti4Panel","Node","initBy","t","e","i","toolId","fakeToolId","toolLv","active","n","pvz","PlayerData","getToolData","lv","o","JsonControl","getToolJson","string","name","gameToolLv","utils","useBundleAsset","SkeletonData","skeletonData","setAnimation","toolJson","initAttributeInfo","butler","resumeDirector","attributetype1","getToolAttriIcon","GameConfig","ToolAttriNameList","getAttributeNums","length","Atk","cdtxt","s","toFixed","Math","floor","onCloseUI","popupManager","removePopup"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        nameLabel: cc.Label,\n        lvLabel: cc.Label,\n        iconSpine: sp.Skeleton,\n        attrbibuteIcons: [cc.Sprite],\n        attrNumLabels: [cc.Label],\n        attrNameLabels: [cc.Label],\n        arrti4Panel: cc.Node\n    },\n    initBy: function (t, e) {\n        var i = this;\n        this.toolId = t;\n        if (t > 100) {\n            this.fakeToolId = t - 100;\n        } else {\n            this.fakeToolId = t;\n        }\n        if (99 == this.toolId) {\n            this.toolLv = 1;\n            this.arrti4Panel.active = !1;\n        } else {\n            var n = cc.pvz.PlayerData.getToolData(this.fakeToolId);\n            if (0 == n.lv) {\n                this.toolLv = 1;\n            } else {\n                this.toolLv = n.lv;\n            }\n        }\n        var o = cc.JsonControl.getToolJson(this.toolId);\n        this.nameLabel.string = o.name;\n        this.gameToolLv = e + 1;\n        cc.pvz.utils.useBundleAsset(\"actors\", \"character/Characters\", sp.SkeletonData, function (t) {\n            i.iconSpine.skeletonData = t;\n            var e = i.gameToolLv;\n            i.iconSpine.setAnimation(0, \"Idle\", !0);\n        });\n        this.lvLabel.string = \"合成等级\" + this.gameToolLv;\n        this.toolJson = cc.JsonControl.getToolJson(this.fakeToolId);\n        this.initAttributeInfo();\n        cc.butler.resumeDirector(1);\n    },\n    initAttributeInfo: function () {\n        if (99 == this.toolId) {\n            var t = this.toolJson.attributetype1;\n            cc.JsonControl.getToolAttriIcon(this.attrbibuteIcons[0], t);\n            this.attrNameLabels[0].string = cc.pvz.GameConfig.ToolAttriNameList[t - 1];\n            for (var e = 0; e < 3; e++) {\n                this.attrNumLabels[e].string = this.getAttributeNums(e);\n            }\n        } else {\n            for (var i = 0; i < this.attrbibuteIcons.length; i++) {\n                var n = this.toolJson[\"attributetype\" + (i + 1)];\n                cc.JsonControl.getToolAttriIcon(this.attrbibuteIcons[i], n);\n                this.attrNameLabels[i].string = cc.pvz.GameConfig.ToolAttriNameList[n - 1];\n            }\n            for (var o = 0; o < this.attrNumLabels.length; o++) {\n                this.attrNumLabels[o].string = this.getAttributeNums(o);\n            }\n        }\n    },\n    getAttributeNums: function (t) {\n        var e = \"\";\n        switch (t) {\n            case 0:\n                e = \"\" + this.toolJson.Atk;\n                break;\n            case 1:\n                e =\n                    3 == this.toolId || 10 == this.toolId\n                        ? this.toolJson.cdtxt[this.toolLv - 1] + \"秒\"\n                        : this.toolJson.cdtxt + (8 == this.toolId || 6 == this.toolId ? \"秒\" : \"\");\n                break;\n            case 2:\n            case 3:\n                var i = 0,\n                    n = this.toolJson[\"attributetype\" + (t - 1)],\n                    o = this.toolJson[\"attribute\" + (t - 1)],\n                    s = this.toolJson[\"fighttype\" + (t - 1)];\n                i = 1 == o.length ? o[0] : o[this.toolLv - 1];\n                if (this.gameToolLv > 1 && \"\" != s) {\n                    i *= this.toolJson[\"fightlvup\" + (t - 1)][this.gameToolLv - 2] / 100;\n                    if (9 == n) {\n                        (10 * i) % 10 != 0 && (i = i.toFixed(1));\n                    } else {\n                        i = Math.floor(i);\n                    }\n                }\n                e = i + (9 == n ? \"%\" : \"\");\n        }\n        return e;\n    },\n    onCloseUI: function () {\n        cc.popupManager.removePopup(this);\n    }\n});"]}