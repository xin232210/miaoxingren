{"version":3,"sources":["assets/game/scripts/Enemy.js"],"names":["i","cc","Class","name","properties","subNode","Node","opAni","hpRate","atkRate","Component","spine","sp","Skeleton","spinePre","spineEx","showChuChang","speed","tooltip","attRange","attCD","centerY","exp","zdSpine","zdIsIKMode","subEnemys","hpBarPos","Vec2","onLoad","moveSpeed","v2","node","active","forEach","t","start","initBy","e","n","scene","bulletsRoot","hp","maxHp","atk","hpBar","inBuff12","slowTimer","slowNode","poisonNode","poisonInfos","iceTimer","iceNode1","iceNode2","weakTimer","weakNode","attRangeRR","pvz","runtimeData","actBuff2","setStatus","setAnimation","o","aniName","setTrackCompleteListener","getAtk","zIndex","y","chooseHero","position","target","checkInAttRange","math","randomRange","add","sub","s","Math","atan2","x","cos","sin","TAUtils","track","message","stack","id","hasEnded","enemyCount","heroes","length","attTime","setEventListener","newBulletIKMode","newBullet","doAttLogic","status","instantiate","parent","GPBone","findBone","worldX","worldY","getComponent","setCompleteListener","len","angle","PI","runAction","sequence","moveBy","callFunc","repulse","max","groundAreaLB","clamp","groundAreaTR","enabled","moveTo","update","timePaused","director","getScheduler","getTimeScale","timeScale","getBuffValue","doLogic","position2","lengthSqr","hasEnableBuff","random","showHeroHurtNum","hurtBy","mul","time","doDieLogic","clearTimeout","clearInterval","t1","timer","addEnemyIn","delEnemy","removeIceBuff","eDiePrefab","addNode","randomRangeInt","addEnemyHpBar","progress","onBuffCollisionEnter","tag","onBuffCollisionExit","addBuffSlow","eSlowPrefab","addNodeTo","ZERO","macro","MIN_ZINDEX","setTimeout","addBuffPoison","find","a","ePoisonPrefab","setInterval","showEnemyHurtNum","push","findIndex","splice","addBuffIce","eIcePrefab","children","MAX_ZINDEX","paused","bind","addBuffWeak","eWeakPrefab"],"mappings":"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","sourceRoot":"/","sourcesContent":["var i = cc.Class({\n    name: \"SubEnemyConfig\",\n    properties: {\n        subNode: cc.Node,\n        opAni: \"qishen\",\n        hpRate: 1,\n        atkRate: 1\n    }\n});\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        spine: sp.Skeleton,\n        spinePre: \"\",\n        spineEx: \"\",\n        showChuChang: !0,\n        speed: {\n            default: 120,\n            tooltip: \"每秒移动距离: y\"\n        },\n        attRange: {\n            default: 100,\n            tooltip: \"攻击距离: x\"\n        },\n        attCD: {\n            default: 2e3,\n            tooltip: \"攻击间隔: 毫秒\"\n        },\n        centerY: 50,\n        exp: 10,\n        zdSpine: sp.Skeleton,\n        zdIsIKMode: !1,\n        subEnemys: [i],\n        hpBarPos: cc.Vec2\n    },\n    onLoad: function () {\n        this.moveSpeed = cc.v2(-this.speed, 0);\n        if (this.zdSpine) {\n            this.zdSpine.node.active = !1;\n        }\n        this.subEnemys.forEach(function (t) {\n            return (t.subNode.active = !1);\n        });\n    },\n    start: function () {},\n    initBy: function (t, e, i, n) {\n        this.scene = t;\n        this.bulletsRoot = e;\n        this.hp = this.maxHp = i;\n        this.atk = n;\n        this.hpBar = null;\n        this.inBuff12 = !1;\n        this.slowTimer = -1;\n        this.slowNode = null;\n        this.poisonNode = null;\n        this.poisonInfos = [];\n        this.iceTimer = -1;\n        this.iceNode1 = null;\n        this.iceNode2 = null;\n        this.weakTimer = -1;\n        this.weakNode = null;\n        this.attRangeRR = this.attRange * this.attRange;\n        switch (cc.pvz.runtimeData.actBuff2) {\n            case 104:\n            case 105:\n            case 106:\n                this.attCD /= [1.3, 1.4, 1.5][cc.pvz.runtimeData.actBuff2 - 104];\n        }\n        if (this.showChuChang) {\n            this.setStatus(3);\n        } else {\n            this.setStatus(0);\n        }\n    },\n    setAnimation: function (t, e, i, n) {\n        if (void 0 === n) {\n            n = null;\n        }\n        var o = this.spine.setAnimation(t, this.aniName(e), i);\n        if (n) {\n            this.spine.setTrackCompleteListener(o, n);\n        }\n        return o;\n    },\n    aniName: function (t) {\n        return this.spinePre + t + this.spineEx;\n    },\n    getAtk: function () {\n        if (this.inBuff12) {\n            return 1.2 * this.atk;\n        } else {\n            return this.atk;\n        }\n    },\n    setStatus: function (t) {\n        var e = this;\n        switch (t) {\n            case 3:\n                this.setAnimation(0, \"chuchang\", !1, function () {\n                    e.setStatus(0);\n                    e.setAnimation(0, \"walk\", !0);\n                });\n                this.node.zIndex = -this.node.y;\n                break;\n            case 0:\n                this.moveSpeed = cc.v2(-this.speed, 0);\n                this.setAnimation(0, \"walk\", !0);\n                break;\n            case 1:\n                var i = this.scene.chooseHero(this.node.position);\n                if (i) {\n                    this.target = i;\n                    if (this.checkInAttRange(i)) {\n                        this.setStatus(2);\n                        this.setAnimation(0, \"stand\", !0);\n                    } else {\n                        var n;\n                        if (this.zdSpine) {\n                            n = cc.v2(0, 0);\n                        } else {\n                            n = cc.v2(this.attRange + cc.math.randomRange(-20, 0), cc.math.randomRange(-5, 5));\n                        }\n                        var o = i.node.position.add(n).sub(this.node.position);\n                        var s = Math.atan2(o.y, o.x);\n                        this.moveSpeed = cc.v2(this.speed * Math.cos(s), this.speed * Math.sin(s));\n                    }\n                } else {\n                    this.target = null;\n                    cc.pvz.TAUtils.track(\"error\", {\n                        message: \"Enemy\",\n                        stack:\n                            \"setStatus, id:\" +\n                            this.id +\n                            \",hp:\" +\n                            this.hp +\n                            \",hasEnded:\" +\n                            this.scene.hasEnded +\n                            \",enemyCount:\" +\n                            this.scene.enemyCount +\n                            \",heroCount:\" +\n                            (this.scene.heroes ? this.scene.heroes.length : 0)\n                    });\n                }\n                break;\n            case 2:\n                this.attTime = -1;\n                this.spine.setEventListener(function () {\n                    if (e.zdSpine) {\n                        if (e.zdIsIKMode) {\n                            e.newBulletIKMode();\n                        } else {\n                            e.newBullet();\n                        }\n                    } else {\n                        e.doAttLogic(e.target, 0);\n                    }\n                });\n        }\n        this.status = t;\n    },\n    newBulletIKMode: function () {\n        var t = this;\n        var e = this.scene.chooseHero(this.node.position);\n        if (e) {\n            var i = cc.instantiate(this.zdSpine.node);\n            i.parent = this.scene.bulletsRoot;\n            i.active = !0;\n            if (this.GPBone) {\n                //\n            } else {\n                this.GPBone = this.spine.findBone(\"GP\");\n            }\n            i.position = this.node.position.add(cc.v2(this.GPBone.worldX, this.GPBone.worldY));\n            var n = e.node.position.add(cc.v2(0, 50));\n            var o = i.getComponent(sp.Skeleton);\n            var s = o.findBone(\"zhadan\");\n            s.x = n.x - i.x;\n            s.y = n.y - i.y;\n            o.setAnimation(0, this.aniName(\"zd\"), !0);\n            o.setCompleteListener(function () {\n                t.doAttLogic(e, 1);\n                i.position = n;\n                o.setAnimation(0, t.aniName(\"bz\"), !1);\n                o.setCompleteListener(null);\n            });\n        }\n    },\n    newBullet: function () {\n        var t = this;\n        var e = this.scene.chooseHero(this.node.position);\n        if (e) {\n            var i = cc.instantiate(this.zdSpine.node);\n            i.parent = this.scene.bulletsRoot;\n            i.active = !0;\n            if (this.GPBone) {\n                //\n            } else {\n                this.GPBone = this.spine.findBone(\"GP\");\n            }\n            i.position = this.node.position.add(cc.v2(this.GPBone.worldX, this.GPBone.worldY));\n            var n = e.node.position.add(cc.v2(0, 50)).sub(i.position);\n            var o = n.len() / 800;\n            i.angle = (180 * Math.atan2(n.y, n.x)) / Math.PI + 180;\n            i.runAction(\n                cc.sequence(\n                    cc.moveBy(o, n),\n                    cc.callFunc(function () {\n                        t.doAttLogic(e, 1);\n                        s.setAnimation(0, t.aniName(\"zd2\"), !1);\n                        s.setCompleteListener(function () {\n                            i.parent = null;\n                            s.setCompleteListener(null);\n                        });\n                    })\n                )\n            );\n            var s = i.getComponent(sp.Skeleton);\n            s.setAnimation(0, this.aniName(\"zd1\"), !0);\n            s.setCompleteListener(null);\n        }\n    },\n    repulse: function (t) {\n        var e = this;\n        if (!(this.hp <= 0 || this.id >= 100)) {\n            var i = this.node.position.sub(t);\n            var n = Math.atan2(i.y, i.x);\n            var o = cc.v2(10 * Math.cos(n), 10 * Math.sin(n));\n            if (o.x < 0) {\n                o.x = 0;\n            }\n            var s = cc.v2(\n                Math.max(this.node.x + o.x, this.scene.groundAreaLB.x),\n                cc.math.clamp(this.node.y + o.y, this.scene.groundAreaLB.y, this.scene.groundAreaTR.y)\n            );\n            if (this.node.x <= this.scene.groundAreaTR.x && s.x > this.scene.groundAreaTR.x) {\n                s.x = this.scene.groundAreaTR.x;\n            }\n            this.enabled = !1;\n            this.node.runAction(\n                cc.sequence(\n                    cc.moveTo(0.1, s),\n                    cc.callFunc(function () {\n                        if (e.hp > 0) {\n                            e.enabled = !0;\n                            e.setStatus(0);\n                        }\n                    })\n                )\n            );\n        }\n    },\n    update: function (t) {\n        if (!this.scene.timePaused && !(this.scene.hasEnded || this.hp <= 0)) {\n            var e = t * cc.director.getScheduler().getTimeScale() * this.spine.timeScale;\n            var i = cc.pvz.runtimeData.getBuffValue(4);\n            if (i > 0) {\n                e *= 1 - 0.01 * i;\n            }\n            switch (cc.pvz.runtimeData.actBuff2) {\n                case 110:\n                case 111:\n                case 112:\n                    e *= [1.2, 1.3, 1.4][cc.pvz.runtimeData.actBuff2 - 110];\n            }\n            this.doLogic(e);\n            if (this.hpBar) {\n                this.hpBar.node.position = this.node.position;\n            }\n        }\n    },\n    checkInAttRange: function (t) {\n        var e = t.position2 || t.node.position;\n        if (this.zdSpine) {\n            return this.node.position.sub(e).lengthSqr() < this.attRangeRR;\n        } else {\n            return this.node.x - e.x <= this.attRange;\n        }\n    },\n    doAttLogic: function (t, e) {\n        var i = this.getAtk();\n        if (0 == e && cc.pvz.runtimeData.hasEnableBuff(1103) && Math.random() < 0.2) {\n            i *= 0.5;\n        }\n        if (1 == e && cc.pvz.runtimeData.hasEnableBuff(1104) && Math.random() < 0.2) {\n            i *= 0.5;\n        }\n        i *= cc.math.randomRange(0.95, 1.05);\n        this.scene.showHeroHurtNum(t.node.position, i);\n        t.hurtBy(this, e, i);\n    },\n    doLogic: function (t) {\n        var e = this;\n        switch (this.status) {\n            case 0:\n                this.node.position = this.node.position.add(this.moveSpeed.mul(t));\n                this.node.zIndex = -this.node.y;\n                if (this.node.x < 250) {\n                    this.setStatus(1);\n                }\n                break;\n            case 1:\n                if (this.target && this.target.hp > 0) {\n                    this.node.position = this.node.position.add(this.moveSpeed.mul(t));\n                    this.node.zIndex = -this.node.y;\n                    this.checkInAttRange(this.target) && (this.setStatus(2), this.setAnimation(0, \"stand\", !0));\n                } else {\n                    this.setStatus(1);\n                    this.setAnimation(0, \"walk\", !0);\n                }\n                break;\n            case 2:\n                if (cc.pvz.time > this.attTime) {\n                    this.setAnimation(0, \"attack\", !1, function () {\n                        if (!e.target || e.target.hp <= 0) {\n                            e.setStatus(1);\n                            if (e.target && 1 == e.status) {\n                                e.setAnimation(0, \"walk\", !0);\n                            } else {\n                                e.setAnimation(0, \"stand\", !0);\n                            }\n                        } else {\n                            e.setAnimation(0, \"stand\", !0);\n                        }\n                    });\n                    this.attTime = cc.pvz.time + this.attCD;\n                }\n        }\n    },\n    doDieLogic: function () {\n        var t = this;\n        if (-1 != this.slowTimer) {\n            this.slowNode.parent = null;\n            this.slowNode = null;\n            this.scene.clearTimeout(this.slowTimer);\n            this.slowTimer = -1;\n        }\n        if (this.poisonNode) {\n            this.poisonNode.parent = null;\n            this.poisonNode = null;\n        }\n        this.poisonInfos.forEach(function (e) {\n            t.scene.clearInterval(e.t1);\n            t.scene.clearTimeout(e.timer);\n        });\n        this.poisonInfos.length = 0;\n        if (-1 != this.iceTimer) {\n            this.iceNode1.parent = null;\n            this.iceNode1 = null;\n            this.iceNode2.parent = null;\n            this.iceNode2 = null;\n            this.scene.clearTimeout(this.iceTimer);\n            this.iceTimer = -1;\n        }\n        if (-1 != this.weakTimer) {\n            this.weakNode.parent = null;\n            this.weakNode = null;\n            this.scene.clearTimeout(this.weakTimer);\n            this.weakTimer = -1;\n        }\n        if (this.hpBar) {\n            this.hpBar.node.parent = null;\n            this.hpBar = null;\n        }\n        this.subEnemys.forEach(function (e) {\n            var i = t.node.position.add(e.subNode.position);\n            e.subNode.active = !0;\n            t.scene.addEnemyIn(-1, e.subNode, i.x, i.y, t.maxHp * e.hpRate, Math.max(1, t.atk * e.atkRate));\n        });\n        this.scene.enemyCount += this.subEnemys.length;\n        this.scene.delEnemy(this);\n    },\n    hurtBy: function (t, e) {\n        var i = this;\n        if (this.hp <= 0) {\n            //\n        } else {\n            this.hp -= e;\n            if (this.hp <= 0) {\n                -1 != this.iceTimer && (this.scene.clearTimeout(this.iceTimer), this.removeIceBuff()),\n                    this.setAnimation(0, \"die\", !1, function () {\n                        i.doDieLogic();\n                    }),\n                    this.scene.eDiePrefab\n                        .addNode(this.node.position)\n                        .getComponent(sp.Skeleton)\n                        .setAnimation(0, this.id > 99 ? \"die_BOSS\" : \"die\" + cc.math.randomRangeInt(1, 4), !1);\n            } else {\n                this.scene.addEnemyHpBar(this),\n                    this.hpBar && (this.hpBar.progress = this.hp / this.maxHp),\n                    this.setAnimation(1, \"hit\", !1);\n            }\n        }\n    },\n    onBuffCollisionEnter: function (t) {\n        if (1 != t.tag) {\n            t.getComponent(\"Enemy\").inBuff12 = !0;\n        }\n    },\n    onBuffCollisionExit: function (t) {\n        if (1 != t.tag) {\n            t.getComponent(\"Enemy\").inBuff12 = !1;\n        }\n    },\n    addBuffSlow: function () {\n        var t = this;\n        if (-1 == this.slowTimer) {\n            this.slowNode = this.scene.eSlowPrefab.addNodeTo(this.node, cc.Vec2.ZERO);\n            this.slowNode.zIndex = cc.macro.MIN_ZINDEX;\n        }\n        this.spine.timeScale = 0.75;\n        this.slowTimer = this.scene.setTimeout(\n            function () {\n                t.spine.timeScale = 1;\n                t.slowNode.parent = null;\n                t.slowNode = null;\n                t.slowTimer = -1;\n            },\n            5e3,\n            this.slowTimer\n        );\n    },\n    addBuffPoison: function (t, e, i) {\n        var n = this;\n        var o = this.poisonInfos.find(function (e) {\n            return e.a == t;\n        });\n        if (!o) {\n            if (this.poisonNode) {\n                //\n            } else {\n                this.poisonNode = this.scene.ePoisonPrefab.addNodeTo(this.node, cc.Vec2.ZERO);\n            }\n            var s = 0.1 * i;\n            (o = {\n                a: t\n            }).t1 = this.scene.setInterval(function () {\n                n.hurtBy(t, s);\n                n.scene.showEnemyHurtNum(0, n.node.position, s);\n            }, 1e3);\n            this.poisonInfos.push(o);\n        }\n        o.timer = this.scene.setTimeout(\n            function () {\n                var e = n.poisonInfos.findIndex(function (e) {\n                    return e.a == t;\n                });\n                n.scene.clearInterval(n.poisonInfos[e].t1);\n                n.poisonInfos.splice(e, 1);\n                if (0 == n.poisonInfos.length) {\n                    n.poisonNode.parent = null;\n                    n.poisonNode = null;\n                }\n            },\n            e,\n            o.timer\n        );\n    },\n    addBuffIce: function () {\n        if (!(this.hp <= 0)) {\n            if (-1 == this.iceTimer) {\n                this.iceNode1 = this.scene.eIcePrefab.addNodeTo(this.node, this.hpBarPos);\n                var t = this.iceNode1.children[0].getComponent(sp.Skeleton);\n                t.setAnimation(0, \"stun\", !0);\n                t.setCompleteListener(null);\n                this.iceNode1.zIndex = cc.macro.MAX_ZINDEX;\n            }\n            this.spine.paused = !0;\n            this.enabled = !1;\n            this.iceTimer = this.scene.setTimeout(this.removeIceBuff.bind(this), 3e3, this.iceTimer);\n        }\n    },\n    removeIceBuff: function () {\n        this.spine.paused = !1;\n        this.enabled = !0;\n        this.iceNode1.parent = null;\n        this.iceNode1 = null;\n        this.iceTimer = -1;\n    },\n    addBuffWeak: function () {\n        var t = this;\n        if (-1 == this.weakTimer) {\n            this.weakNode = this.scene.eWeakPrefab.addNodeTo(this.node, cc.Vec2.ZERO);\n        }\n        this.weakTimer = this.scene.setTimeout(\n            function () {\n                t.weakNode.parent = null;\n                t.weakNode = null;\n                t.weakTimer = -1;\n            },\n            3e3,\n            this.weakTimer\n        );\n    }\n});"]}