{"version":3,"sources":["assets/game/scripts/UIGameStastics.js"],"names":["$prefabInfo","require","cc","Class","Component","properties","prefab","initBy","t","e","i","pvz","runtimeData","stats","forEach","heroes","map","sort","info","id","n","o","json","s","addNode","utils","setSpriteFrame","find","getComponent","Sprite","quality","maxLv","Label","string","name","Math","round","c","toFixed","ProgressBar","progress","timer","director","isPaused","root","Layout","updateLayout","onClickClose","popupManager","removePopup"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $prefabInfo = require(\"../../scripts/PrefabInfo\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        prefab: $prefabInfo\n    },\n    initBy: function (t) {\n        var e = this;\n        var i = 1;\n        cc.pvz.runtimeData.stats.forEach(function (t) {\n            i += t;\n        });\n        t.heroes\n            .map(function (t) {\n                return t;\n            })\n            .sort(function (t, e) {\n                return cc.pvz.runtimeData.stats[e.info.id] - cc.pvz.runtimeData.stats[t.info.id];\n            })\n            .forEach(function (t) {\n                if (3 != t.info.id && 7 != t.info.id && 11 != t.info.id) {\n                    var n = cc.pvz.runtimeData.stats[t.info.id];\n                    var o = t.info.json;\n                    var s = e.prefab.addNode();\n                    cc.pvz.utils.setSpriteFrame(\n                        cc.find(\"quality\", s).getComponent(cc.Sprite),\n                        \"uiImage\",\n                        \"item/pz_\" + o.quality\n                    );\n                    cc.pvz.utils.setSpriteFrame(\n                        cc.find(\"icon\", s).getComponent(cc.Sprite),\n                        \"uiImage\",\n                        \"plant/wq/zw_\" + t.info.id + \"_\" + (t.info.maxLv + 1)\n                    );\n                    cc.find(\"name\", s).getComponent(cc.Label).string = o.name;\n                    cc.find(\"num\", s).getComponent(cc.Label).string = Math.round(n);\n                    var c = n / i;\n                    cc.find(\"num2\", s).getComponent(cc.Label).string = (100 * c).toFixed(2) + \"%\";\n                    cc.find(\"bar\", s).getComponent(cc.ProgressBar).progress = c;\n                }\n            });\n        this.timer = -1;\n        if (cc.director.isPaused()) {\n            this.prefab.root.getComponent(cc.Layout).updateLayout();\n        }\n    },\n    onClickClose: function () {\n        cc.popupManager.removePopup(this);\n    }\n});\n"]}