{"version":3,"sources":["assets/rank/scripts/UIRankList.js"],"names":["cc","Class","Component","properties","top123Nodes","Node","rank1234Nodes","emptyTip","rankMeNode","boxJsonFile","JsonAsset","boxPopupRoot","getBoxIDByRank","e","t","n","json","length","c","rank1","rank2","ID","fillRankNode","rank","uInfo","info","instantiate","parent","o","name","uid","find","getComponent","Label","string","score","i","Sprite","avatarUrl","assetManager","loadRemote","ext","SpriteFrame","setTexture","spriteFrame","a","r","pvz","utils","setSpriteFrame","Button","clickEvents","customEventData","node","active","s","p","exInfo","useBundleAsset","sp","SkeletonData","Skeleton","skeletonData","setAnimation","initBy","uiNode","forEach","pageCount","cloud","rankList","updateMyRank","myRank","tmpRank","showRankUp","tmpScore","showFinish","onScrollEvent","ScrollView","EventType","SCROLL_BEGAN","SCROLL_TO_BOTTOM","isFetching","hideBoxPopup","Prefab","onClickClose","popupManager","removePopup","onClickAuthorize","popup","ad","scale","onClickShare","TAUtils","shareCurrent","showToast","onClickBox","parseInt","reward","target","convertToWorldSpaceAR","Vec2","ZERO","convertToNodeSpaceAR","position","onClickBg","onClickUpload","uploadScore"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        top123Nodes: [cc.Node],\n        rank1234Nodes: [cc.Node],\n        emptyTip: cc.Node,\n        rankMeNode: cc.Node,\n        boxJsonFile: cc.JsonAsset,\n        boxPopupRoot: cc.Node\n    },\n    getBoxIDByRank: function (e) {\n        var t = e + 1;\n        for (var n = 0; n < this.boxJsonFile.json.length; n++) {\n            var c = this.boxJsonFile.json[n];\n            if (t >= c.rank1 && t <= c.rank2) {\n                return c.ID;\n            }\n        }\n        return this.boxJsonFile.json[this.boxJsonFile.json.length - 1].ID;\n    },\n    fillRankNode: function (e, t) {\n        var n = -1 != t.rank;\n        var c = null;\n        if (e) {\n            c = this.rankMeNode;\n            t.uInfo = t.info;\n        } else {\n            if (t.rank < 3) {\n                c = this.rank1234Nodes[t.rank];\n            } else {\n                (c = cc.instantiate(this.rank1234Nodes[3])).parent = this.rank1234Nodes[3].parent;\n            }\n        }\n        var o;\n        if (t.uInfo.name && \"NONAME\" != t.uInfo.name) {\n            o = t.uInfo.name;\n        } else {\n            o = \"用户\" + t.uInfo.uid;\n        }\n        if (n) {\n            cc.find(\"ranknum\", c).getComponent(cc.Label).string = t.rank + 1;\n        } else {\n            cc.find(\"ranknum\", c).getComponent(cc.Label).string = \"无\";\n        }\n        cc.find(\"name\", c).getComponent(cc.Label).string = o;\n        cc.find(\"wavenum\", c).getComponent(cc.Label).string = t.uInfo.score + \"波\";\n        var i = cc.find(\"icon\", c).getComponent(cc.Sprite);\n        if (t.uInfo.avatarUrl && t.uInfo.avatarUrl.length > 0) {\n            cc.assetManager.loadRemote(\n                t.uInfo.avatarUrl,\n                {\n                    ext: \".jpg\"\n                },\n                function (e, t) {\n                    var n = new cc.SpriteFrame();\n                    n.setTexture(t);\n                    i.spriteFrame = n;\n                }\n            );\n        }\n        var a = cc.find(\"box\", c).getComponent(cc.Sprite);\n        if (n) {\n            var r = this.getBoxIDByRank(t.rank);\n            cc.pvz.utils.setSpriteFrame(a, \"rank\", \"img/bx\" + r);\n            a.getComponent(cc.Button).clickEvents[0].customEventData = r;\n        } else {\n            a.node.active = !1;\n        }\n        if (n && t.rank < 3) {\n            var s = this.top123Nodes[t.rank];\n            cc.find(\"name\", s).getComponent(cc.Label).string = o;\n            cc.find(\"wavenum\", s).getComponent(cc.Label).string = t.uInfo.score + \"波\";\n            var p;\n            if (t.uInfo.exInfo.length > 0) {\n                p = t.uInfo.exInfo;\n            } else {\n                p = \"1\";\n            }\n            cc.pvz.utils.useBundleAsset(\"actors\", \"character/Characters\", sp.SkeletonData, function (e) {\n                var t = cc.find(\"spine\", s).getComponent(sp.Skeleton);\n                t.skeletonData = e;\n                t.setAnimation(0, \"stand1\", !0);\n            });\n            s.active = !0;\n        }\n        c.active = !0;\n    },\n    initBy: function (e) {\n        var t = this;\n        this.uiNode = e;\n        this.top123Nodes.forEach(function (e) {\n            return (e.active = !1);\n        });\n        this.rank1234Nodes.forEach(function (e) {\n            return (e.active = !1);\n        });\n        this.emptyTip.active = !0;\n        this.boxPopupRoot.active = !1;\n        this.pageCount = 0;\n        cc.pvz.cloud.rankList(0, function (e, n) {\n            if (e && n.length > 0) {\n                n.forEach(function (e) {\n                    t.fillRankNode(!1, e);\n                });\n                t.pageCount = 1;\n                t.emptyTip.active = !1;\n            }\n        });\n        this.updateMyRank();\n    },\n    updateMyRank: function () {\n        var e = this;\n        cc.pvz.cloud.myRank(function (t, n) {\n            if (t) {\n                if (-1 != n.rank && n.rank < cc.tmpRank) {\n                    e.showRankUp(cc.tmpRank + 1, n.rank + 1);\n                }\n                cc.tmpRank = n.rank;\n                cc.tmpScore = n.info.score;\n                e.fillRankNode(!0, n);\n            }\n        });\n    },\n    showFinish: function () {\n        this.uiNode.active = !1;\n    },\n    onScrollEvent: function (e, t) {\n        var n = this;\n        if (t != cc.ScrollView.EventType.SCROLL_BEGAN) {\n            if (t == cc.ScrollView.EventType.SCROLL_TO_BOTTOM && this.pageCount < 5) {\n                if (this.isFetching) {\n                    return;\n                }\n                this.isFetching = !0;\n                cc.pvz.cloud.rankList(20 * this.pageCount, function (e, t) {\n                    n.isFetching = !1;\n                    if (e && t.length > 0) {\n                        t.forEach(function (e) {\n                            n.fillRankNode(!1, e);\n                        });\n                        n.pageCount++;\n                    }\n                });\n            }\n        } else {\n            this.hideBoxPopup();\n        }\n    },\n    showRankUp: function (e, t) {\n        var n = this;\n        cc.pvz.utils.useBundleAsset(\"rank\", \"RankUpEffect\", cc.Prefab, function (c) {\n            var o = cc.instantiate(c);\n            o.getComponent(\"UIRankUpEffect\").initBy(e, t);\n            o.parent = n.node;\n        });\n    },\n    onClickClose: function () {\n        this.uiNode.active = !0;\n        cc.popupManager.removePopup(this);\n    },\n    onClickAuthorize: function () {\n        var e = this;\n        cc.popupManager.popup(\n            \"rank\",\n            \"shouquanUI\",\n            \"UIAuthorize\",\n            {\n                ad: !1,\n                scale: !1\n            },\n            function (t) {\n                if (t) {\n                    e.updateMyRank();\n                }\n            }\n        );\n    },\n    onClickShare: function () {\n        var e;\n        if (cc.tmpRank >= 0) {\n            e = \"我获得了第\" + (cc.tmpRank + 1) + \"名，你也来试试吧\";\n        } else {\n            e = \"无尽排位赛，你也来试试吧\";\n        }\n        cc.pvz.TAUtils.shareCurrent(e, function () {\n            cc.popupManager.showToast(\"分享成功\");\n        });\n    },\n    onClickBox: function (e, t) {\n        var n = parseInt(t);\n        var c = this.boxJsonFile.json.find(function (e) {\n            return e.ID == n;\n        });\n        cc.find(\"num1\", this.boxPopupRoot).getComponent(cc.Label).string = \"x\" + c.reward[1];\n        cc.find(\"num2\", this.boxPopupRoot).getComponent(cc.Label).string = \"x\" + c.reward[3];\n        var o = e.target.convertToWorldSpaceAR(cc.Vec2.ZERO);\n        var i = this.boxPopupRoot.parent.convertToNodeSpaceAR(o);\n        this.boxPopupRoot.position = i;\n        this.boxPopupRoot.active = !0;\n    },\n    onClickBg: function () {\n        this.hideBoxPopup();\n    },\n    hideBoxPopup: function () {\n        this.boxPopupRoot.active = !1;\n    },\n    onClickUpload: function () {\n        cc.pvz.cloud.uploadScore(13, function () {});\n        cc.pvz.cloud.myRank(function () {});\n        cc.pvz.cloud.rankList(0, function () {});\n        cc.pvz.cloud.rankList(20, function () {});\n    }\n});"]}