
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game/scripts/UIGameToolInfo.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '422a7XlnftNMJN+tNEKeA6A', 'UIGameToolInfo');
// game/scripts/UIGameToolInfo.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    nameLabel: cc.Label,
    lvLabel: cc.Label,
    iconSpine: sp.Skeleton,
    attrbibuteIcons: [cc.Sprite],
    attrNumLabels: [cc.Label],
    attrNameLabels: [cc.Label],
    arrti4Panel: cc.Node
  },
  initBy: function initBy(t, e) {
    var i = this;
    this.toolId = t;

    if (t > 100) {
      this.fakeToolId = t - 100;
    } else {
      this.fakeToolId = t;
    }

    if (99 == this.toolId) {
      this.toolLv = 1;
      this.arrti4Panel.active = !1;
    } else {
      var n = cc.pvz.PlayerData.getToolData(this.fakeToolId);

      if (0 == n.lv) {
        this.toolLv = 1;
      } else {
        this.toolLv = n.lv;
      }
    }

    var o = cc.JsonControl.getToolJson(this.toolId);
    this.nameLabel.string = o.name;
    this.gameToolLv = e + 1;
    cc.pvz.utils.useBundleAsset("actors", "character/Characters", sp.SkeletonData, function (t) {
      i.iconSpine.skeletonData = t;
      var e = i.gameToolLv;
      i.iconSpine.setAnimation(0, "Idle", !0);
    });
    this.lvLabel.string = "合成等级" + this.gameToolLv;
    this.toolJson = cc.JsonControl.getToolJson(this.fakeToolId);
    this.initAttributeInfo();
    cc.butler.resumeDirector(1);
  },
  initAttributeInfo: function initAttributeInfo() {
    if (99 == this.toolId) {
      var t = this.toolJson.attributetype1;
      cc.JsonControl.getToolAttriIcon(this.attrbibuteIcons[0], t);
      this.attrNameLabels[0].string = cc.pvz.GameConfig.ToolAttriNameList[t - 1];

      for (var e = 0; e < 3; e++) {
        this.attrNumLabels[e].string = this.getAttributeNums(e);
      }
    } else {
      for (var i = 0; i < this.attrbibuteIcons.length; i++) {
        var n = this.toolJson["attributetype" + (i + 1)];
        cc.JsonControl.getToolAttriIcon(this.attrbibuteIcons[i], n);
        this.attrNameLabels[i].string = cc.pvz.GameConfig.ToolAttriNameList[n - 1];
      }

      for (var o = 0; o < this.attrNumLabels.length; o++) {
        this.attrNumLabels[o].string = this.getAttributeNums(o);
      }
    }
  },
  getAttributeNums: function getAttributeNums(t) {
    var e = "";

    switch (t) {
      case 0:
        e = "" + this.toolJson.Atk;
        break;

      case 1:
        e = 3 == this.toolId || 10 == this.toolId ? this.toolJson.cdtxt[this.toolLv - 1] + "秒" : this.toolJson.cdtxt + (8 == this.toolId || 6 == this.toolId ? "秒" : "");
        break;

      case 2:
      case 3:
        var i = 0,
            n = this.toolJson["attributetype" + (t - 1)],
            o = this.toolJson["attribute" + (t - 1)],
            s = this.toolJson["fighttype" + (t - 1)];
        i = 1 == o.length ? o[0] : o[this.toolLv - 1];

        if (this.gameToolLv > 1 && "" != s) {
          i *= this.toolJson["fightlvup" + (t - 1)][this.gameToolLv - 2] / 100;

          if (9 == n) {
            10 * i % 10 != 0 && (i = i.toFixed(1));
          } else {
            i = Math.floor(i);
          }
        }

        e = i + (9 == n ? "%" : "");
    }

    return e;
  },
  onCloseUI: function onCloseUI() {
    cc.popupManager.removePopup(this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9nYW1lL3NjcmlwdHMvVUlHYW1lVG9vbEluZm8uanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJuYW1lTGFiZWwiLCJMYWJlbCIsImx2TGFiZWwiLCJpY29uU3BpbmUiLCJzcCIsIlNrZWxldG9uIiwiYXR0cmJpYnV0ZUljb25zIiwiU3ByaXRlIiwiYXR0ck51bUxhYmVscyIsImF0dHJOYW1lTGFiZWxzIiwiYXJydGk0UGFuZWwiLCJOb2RlIiwiaW5pdEJ5IiwidCIsImUiLCJpIiwidG9vbElkIiwiZmFrZVRvb2xJZCIsInRvb2xMdiIsImFjdGl2ZSIsIm4iLCJwdnoiLCJQbGF5ZXJEYXRhIiwiZ2V0VG9vbERhdGEiLCJsdiIsIm8iLCJKc29uQ29udHJvbCIsImdldFRvb2xKc29uIiwic3RyaW5nIiwibmFtZSIsImdhbWVUb29sTHYiLCJ1dGlscyIsInVzZUJ1bmRsZUFzc2V0IiwiU2tlbGV0b25EYXRhIiwic2tlbGV0b25EYXRhIiwic2V0QW5pbWF0aW9uIiwidG9vbEpzb24iLCJpbml0QXR0cmlidXRlSW5mbyIsImJ1dGxlciIsInJlc3VtZURpcmVjdG9yIiwiYXR0cmlidXRldHlwZTEiLCJnZXRUb29sQXR0cmlJY29uIiwiR2FtZUNvbmZpZyIsIlRvb2xBdHRyaU5hbWVMaXN0IiwiZ2V0QXR0cmlidXRlTnVtcyIsImxlbmd0aCIsIkF0ayIsImNkdHh0IiwicyIsInRvRml4ZWQiLCJNYXRoIiwiZmxvb3IiLCJvbkNsb3NlVUkiLCJwb3B1cE1hbmFnZXIiLCJyZW1vdmVQb3B1cCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7RUFDTCxXQUFTRCxFQUFFLENBQUNFLFNBRFA7RUFFTEMsVUFBVSxFQUFFO0lBQ1JDLFNBQVMsRUFBRUosRUFBRSxDQUFDSyxLQUROO0lBRVJDLE9BQU8sRUFBRU4sRUFBRSxDQUFDSyxLQUZKO0lBR1JFLFNBQVMsRUFBRUMsRUFBRSxDQUFDQyxRQUhOO0lBSVJDLGVBQWUsRUFBRSxDQUFDVixFQUFFLENBQUNXLE1BQUosQ0FKVDtJQUtSQyxhQUFhLEVBQUUsQ0FBQ1osRUFBRSxDQUFDSyxLQUFKLENBTFA7SUFNUlEsY0FBYyxFQUFFLENBQUNiLEVBQUUsQ0FBQ0ssS0FBSixDQU5SO0lBT1JTLFdBQVcsRUFBRWQsRUFBRSxDQUFDZTtFQVBSLENBRlA7RUFXTEMsTUFBTSxFQUFFLGdCQUFVQyxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7SUFDcEIsSUFBSUMsQ0FBQyxHQUFHLElBQVI7SUFDQSxLQUFLQyxNQUFMLEdBQWNILENBQWQ7O0lBQ0EsSUFBSUEsQ0FBQyxHQUFHLEdBQVIsRUFBYTtNQUNULEtBQUtJLFVBQUwsR0FBa0JKLENBQUMsR0FBRyxHQUF0QjtJQUNILENBRkQsTUFFTztNQUNILEtBQUtJLFVBQUwsR0FBa0JKLENBQWxCO0lBQ0g7O0lBQ0QsSUFBSSxNQUFNLEtBQUtHLE1BQWYsRUFBdUI7TUFDbkIsS0FBS0UsTUFBTCxHQUFjLENBQWQ7TUFDQSxLQUFLUixXQUFMLENBQWlCUyxNQUFqQixHQUEwQixDQUFDLENBQTNCO0lBQ0gsQ0FIRCxNQUdPO01BQ0gsSUFBSUMsQ0FBQyxHQUFHeEIsRUFBRSxDQUFDeUIsR0FBSCxDQUFPQyxVQUFQLENBQWtCQyxXQUFsQixDQUE4QixLQUFLTixVQUFuQyxDQUFSOztNQUNBLElBQUksS0FBS0csQ0FBQyxDQUFDSSxFQUFYLEVBQWU7UUFDWCxLQUFLTixNQUFMLEdBQWMsQ0FBZDtNQUNILENBRkQsTUFFTztRQUNILEtBQUtBLE1BQUwsR0FBY0UsQ0FBQyxDQUFDSSxFQUFoQjtNQUNIO0lBQ0o7O0lBQ0QsSUFBSUMsQ0FBQyxHQUFHN0IsRUFBRSxDQUFDOEIsV0FBSCxDQUFlQyxXQUFmLENBQTJCLEtBQUtYLE1BQWhDLENBQVI7SUFDQSxLQUFLaEIsU0FBTCxDQUFlNEIsTUFBZixHQUF3QkgsQ0FBQyxDQUFDSSxJQUExQjtJQUNBLEtBQUtDLFVBQUwsR0FBa0JoQixDQUFDLEdBQUcsQ0FBdEI7SUFDQWxCLEVBQUUsQ0FBQ3lCLEdBQUgsQ0FBT1UsS0FBUCxDQUFhQyxjQUFiLENBQTRCLFFBQTVCLEVBQXNDLHNCQUF0QyxFQUE4RDVCLEVBQUUsQ0FBQzZCLFlBQWpFLEVBQStFLFVBQVVwQixDQUFWLEVBQWE7TUFDeEZFLENBQUMsQ0FBQ1osU0FBRixDQUFZK0IsWUFBWixHQUEyQnJCLENBQTNCO01BQ0EsSUFBSUMsQ0FBQyxHQUFHQyxDQUFDLENBQUNlLFVBQVY7TUFDQWYsQ0FBQyxDQUFDWixTQUFGLENBQVlnQyxZQUFaLENBQXlCLENBQXpCLEVBQTRCLE1BQTVCLEVBQW9DLENBQUMsQ0FBckM7SUFDSCxDQUpEO0lBS0EsS0FBS2pDLE9BQUwsQ0FBYTBCLE1BQWIsR0FBc0IsU0FBUyxLQUFLRSxVQUFwQztJQUNBLEtBQUtNLFFBQUwsR0FBZ0J4QyxFQUFFLENBQUM4QixXQUFILENBQWVDLFdBQWYsQ0FBMkIsS0FBS1YsVUFBaEMsQ0FBaEI7SUFDQSxLQUFLb0IsaUJBQUw7SUFDQXpDLEVBQUUsQ0FBQzBDLE1BQUgsQ0FBVUMsY0FBVixDQUF5QixDQUF6QjtFQUNILENBMUNJO0VBMkNMRixpQkFBaUIsRUFBRSw2QkFBWTtJQUMzQixJQUFJLE1BQU0sS0FBS3JCLE1BQWYsRUFBdUI7TUFDbkIsSUFBSUgsQ0FBQyxHQUFHLEtBQUt1QixRQUFMLENBQWNJLGNBQXRCO01BQ0E1QyxFQUFFLENBQUM4QixXQUFILENBQWVlLGdCQUFmLENBQWdDLEtBQUtuQyxlQUFMLENBQXFCLENBQXJCLENBQWhDLEVBQXlETyxDQUF6RDtNQUNBLEtBQUtKLGNBQUwsQ0FBb0IsQ0FBcEIsRUFBdUJtQixNQUF2QixHQUFnQ2hDLEVBQUUsQ0FBQ3lCLEdBQUgsQ0FBT3FCLFVBQVAsQ0FBa0JDLGlCQUFsQixDQUFvQzlCLENBQUMsR0FBRyxDQUF4QyxDQUFoQzs7TUFDQSxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsQ0FBcEIsRUFBdUJBLENBQUMsRUFBeEIsRUFBNEI7UUFDeEIsS0FBS04sYUFBTCxDQUFtQk0sQ0FBbkIsRUFBc0JjLE1BQXRCLEdBQStCLEtBQUtnQixnQkFBTCxDQUFzQjlCLENBQXRCLENBQS9CO01BQ0g7SUFDSixDQVBELE1BT087TUFDSCxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsS0FBS1QsZUFBTCxDQUFxQnVDLE1BQXpDLEVBQWlEOUIsQ0FBQyxFQUFsRCxFQUFzRDtRQUNsRCxJQUFJSyxDQUFDLEdBQUcsS0FBS2dCLFFBQUwsQ0FBYyxtQkFBbUJyQixDQUFDLEdBQUcsQ0FBdkIsQ0FBZCxDQUFSO1FBQ0FuQixFQUFFLENBQUM4QixXQUFILENBQWVlLGdCQUFmLENBQWdDLEtBQUtuQyxlQUFMLENBQXFCUyxDQUFyQixDQUFoQyxFQUF5REssQ0FBekQ7UUFDQSxLQUFLWCxjQUFMLENBQW9CTSxDQUFwQixFQUF1QmEsTUFBdkIsR0FBZ0NoQyxFQUFFLENBQUN5QixHQUFILENBQU9xQixVQUFQLENBQWtCQyxpQkFBbEIsQ0FBb0N2QixDQUFDLEdBQUcsQ0FBeEMsQ0FBaEM7TUFDSDs7TUFDRCxLQUFLLElBQUlLLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsS0FBS2pCLGFBQUwsQ0FBbUJxQyxNQUF2QyxFQUErQ3BCLENBQUMsRUFBaEQsRUFBb0Q7UUFDaEQsS0FBS2pCLGFBQUwsQ0FBbUJpQixDQUFuQixFQUFzQkcsTUFBdEIsR0FBK0IsS0FBS2dCLGdCQUFMLENBQXNCbkIsQ0FBdEIsQ0FBL0I7TUFDSDtJQUNKO0VBQ0osQ0E3REk7RUE4RExtQixnQkFBZ0IsRUFBRSwwQkFBVS9CLENBQVYsRUFBYTtJQUMzQixJQUFJQyxDQUFDLEdBQUcsRUFBUjs7SUFDQSxRQUFRRCxDQUFSO01BQ0ksS0FBSyxDQUFMO1FBQ0lDLENBQUMsR0FBRyxLQUFLLEtBQUtzQixRQUFMLENBQWNVLEdBQXZCO1FBQ0E7O01BQ0osS0FBSyxDQUFMO1FBQ0loQyxDQUFDLEdBQ0csS0FBSyxLQUFLRSxNQUFWLElBQW9CLE1BQU0sS0FBS0EsTUFBL0IsR0FDTSxLQUFLb0IsUUFBTCxDQUFjVyxLQUFkLENBQW9CLEtBQUs3QixNQUFMLEdBQWMsQ0FBbEMsSUFBdUMsR0FEN0MsR0FFTSxLQUFLa0IsUUFBTCxDQUFjVyxLQUFkLElBQXVCLEtBQUssS0FBSy9CLE1BQVYsSUFBb0IsS0FBSyxLQUFLQSxNQUE5QixHQUF1QyxHQUF2QyxHQUE2QyxFQUFwRSxDQUhWO1FBSUE7O01BQ0osS0FBSyxDQUFMO01BQ0EsS0FBSyxDQUFMO1FBQ0ksSUFBSUQsQ0FBQyxHQUFHLENBQVI7UUFBQSxJQUNJSyxDQUFDLEdBQUcsS0FBS2dCLFFBQUwsQ0FBYyxtQkFBbUJ2QixDQUFDLEdBQUcsQ0FBdkIsQ0FBZCxDQURSO1FBQUEsSUFFSVksQ0FBQyxHQUFHLEtBQUtXLFFBQUwsQ0FBYyxlQUFldkIsQ0FBQyxHQUFHLENBQW5CLENBQWQsQ0FGUjtRQUFBLElBR0ltQyxDQUFDLEdBQUcsS0FBS1osUUFBTCxDQUFjLGVBQWV2QixDQUFDLEdBQUcsQ0FBbkIsQ0FBZCxDQUhSO1FBSUFFLENBQUMsR0FBRyxLQUFLVSxDQUFDLENBQUNvQixNQUFQLEdBQWdCcEIsQ0FBQyxDQUFDLENBQUQsQ0FBakIsR0FBdUJBLENBQUMsQ0FBQyxLQUFLUCxNQUFMLEdBQWMsQ0FBZixDQUE1Qjs7UUFDQSxJQUFJLEtBQUtZLFVBQUwsR0FBa0IsQ0FBbEIsSUFBdUIsTUFBTWtCLENBQWpDLEVBQW9DO1VBQ2hDakMsQ0FBQyxJQUFJLEtBQUtxQixRQUFMLENBQWMsZUFBZXZCLENBQUMsR0FBRyxDQUFuQixDQUFkLEVBQXFDLEtBQUtpQixVQUFMLEdBQWtCLENBQXZELElBQTRELEdBQWpFOztVQUNBLElBQUksS0FBS1YsQ0FBVCxFQUFZO1lBQ1AsS0FBS0wsQ0FBTixHQUFXLEVBQVgsSUFBaUIsQ0FBakIsS0FBdUJBLENBQUMsR0FBR0EsQ0FBQyxDQUFDa0MsT0FBRixDQUFVLENBQVYsQ0FBM0I7VUFDSCxDQUZELE1BRU87WUFDSGxDLENBQUMsR0FBR21DLElBQUksQ0FBQ0MsS0FBTCxDQUFXcEMsQ0FBWCxDQUFKO1VBQ0g7UUFDSjs7UUFDREQsQ0FBQyxHQUFHQyxDQUFDLElBQUksS0FBS0ssQ0FBTCxHQUFTLEdBQVQsR0FBZSxFQUFuQixDQUFMO0lBekJSOztJQTJCQSxPQUFPTixDQUFQO0VBQ0gsQ0E1Rkk7RUE2RkxzQyxTQUFTLEVBQUUscUJBQVk7SUFDbkJ4RCxFQUFFLENBQUN5RCxZQUFILENBQWdCQyxXQUFoQixDQUE0QixJQUE1QjtFQUNIO0FBL0ZJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBuYW1lTGFiZWw6IGNjLkxhYmVsLFxuICAgICAgICBsdkxhYmVsOiBjYy5MYWJlbCxcbiAgICAgICAgaWNvblNwaW5lOiBzcC5Ta2VsZXRvbixcbiAgICAgICAgYXR0cmJpYnV0ZUljb25zOiBbY2MuU3ByaXRlXSxcbiAgICAgICAgYXR0ck51bUxhYmVsczogW2NjLkxhYmVsXSxcbiAgICAgICAgYXR0ck5hbWVMYWJlbHM6IFtjYy5MYWJlbF0sXG4gICAgICAgIGFycnRpNFBhbmVsOiBjYy5Ob2RlXG4gICAgfSxcbiAgICBpbml0Qnk6IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZhciBpID0gdGhpcztcbiAgICAgICAgdGhpcy50b29sSWQgPSB0O1xuICAgICAgICBpZiAodCA+IDEwMCkge1xuICAgICAgICAgICAgdGhpcy5mYWtlVG9vbElkID0gdCAtIDEwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmFrZVRvb2xJZCA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDk5ID09IHRoaXMudG9vbElkKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xMdiA9IDE7XG4gICAgICAgICAgICB0aGlzLmFycnRpNFBhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG4gPSBjYy5wdnouUGxheWVyRGF0YS5nZXRUb29sRGF0YSh0aGlzLmZha2VUb29sSWQpO1xuICAgICAgICAgICAgaWYgKDAgPT0gbi5sdikge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbEx2ID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sTHYgPSBuLmx2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBvID0gY2MuSnNvbkNvbnRyb2wuZ2V0VG9vbEpzb24odGhpcy50b29sSWQpO1xuICAgICAgICB0aGlzLm5hbWVMYWJlbC5zdHJpbmcgPSBvLm5hbWU7XG4gICAgICAgIHRoaXMuZ2FtZVRvb2xMdiA9IGUgKyAxO1xuICAgICAgICBjYy5wdnoudXRpbHMudXNlQnVuZGxlQXNzZXQoXCJhY3RvcnNcIiwgXCJjaGFyYWN0ZXIvQ2hhcmFjdGVyc1wiLCBzcC5Ta2VsZXRvbkRhdGEsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBpLmljb25TcGluZS5za2VsZXRvbkRhdGEgPSB0O1xuICAgICAgICAgICAgdmFyIGUgPSBpLmdhbWVUb29sTHY7XG4gICAgICAgICAgICBpLmljb25TcGluZS5zZXRBbmltYXRpb24oMCwgXCJJZGxlXCIsICEwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubHZMYWJlbC5zdHJpbmcgPSBcIuWQiOaIkOetiee6p1wiICsgdGhpcy5nYW1lVG9vbEx2O1xuICAgICAgICB0aGlzLnRvb2xKc29uID0gY2MuSnNvbkNvbnRyb2wuZ2V0VG9vbEpzb24odGhpcy5mYWtlVG9vbElkKTtcbiAgICAgICAgdGhpcy5pbml0QXR0cmlidXRlSW5mbygpO1xuICAgICAgICBjYy5idXRsZXIucmVzdW1lRGlyZWN0b3IoMSk7XG4gICAgfSxcbiAgICBpbml0QXR0cmlidXRlSW5mbzogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoOTkgPT0gdGhpcy50b29sSWQpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy50b29sSnNvbi5hdHRyaWJ1dGV0eXBlMTtcbiAgICAgICAgICAgIGNjLkpzb25Db250cm9sLmdldFRvb2xBdHRyaUljb24odGhpcy5hdHRyYmlidXRlSWNvbnNbMF0sIHQpO1xuICAgICAgICAgICAgdGhpcy5hdHRyTmFtZUxhYmVsc1swXS5zdHJpbmcgPSBjYy5wdnouR2FtZUNvbmZpZy5Ub29sQXR0cmlOYW1lTGlzdFt0IC0gMV07XG4gICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IDM7IGUrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0ck51bUxhYmVsc1tlXS5zdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZU51bXMoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXR0cmJpYnV0ZUljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLnRvb2xKc29uW1wiYXR0cmlidXRldHlwZVwiICsgKGkgKyAxKV07XG4gICAgICAgICAgICAgICAgY2MuSnNvbkNvbnRyb2wuZ2V0VG9vbEF0dHJpSWNvbih0aGlzLmF0dHJiaWJ1dGVJY29uc1tpXSwgbik7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyTmFtZUxhYmVsc1tpXS5zdHJpbmcgPSBjYy5wdnouR2FtZUNvbmZpZy5Ub29sQXR0cmlOYW1lTGlzdFtuIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IHRoaXMuYXR0ck51bUxhYmVscy5sZW5ndGg7IG8rKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0ck51bUxhYmVsc1tvXS5zdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZU51bXMobyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldEF0dHJpYnV0ZU51bXM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlID0gXCJcIjtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgZSA9IFwiXCIgKyB0aGlzLnRvb2xKc29uLkF0aztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBlID1cbiAgICAgICAgICAgICAgICAgICAgMyA9PSB0aGlzLnRvb2xJZCB8fCAxMCA9PSB0aGlzLnRvb2xJZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnRvb2xKc29uLmNkdHh0W3RoaXMudG9vbEx2IC0gMV0gKyBcIuenklwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMudG9vbEpzb24uY2R0eHQgKyAoOCA9PSB0aGlzLnRvb2xJZCB8fCA2ID09IHRoaXMudG9vbElkID8gXCLnp5JcIiA6IFwiXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHZhciBpID0gMCxcbiAgICAgICAgICAgICAgICAgICAgbiA9IHRoaXMudG9vbEpzb25bXCJhdHRyaWJ1dGV0eXBlXCIgKyAodCAtIDEpXSxcbiAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMudG9vbEpzb25bXCJhdHRyaWJ1dGVcIiArICh0IC0gMSldLFxuICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy50b29sSnNvbltcImZpZ2h0dHlwZVwiICsgKHQgLSAxKV07XG4gICAgICAgICAgICAgICAgaSA9IDEgPT0gby5sZW5ndGggPyBvWzBdIDogb1t0aGlzLnRvb2xMdiAtIDFdO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdhbWVUb29sTHYgPiAxICYmIFwiXCIgIT0gcykge1xuICAgICAgICAgICAgICAgICAgICBpICo9IHRoaXMudG9vbEpzb25bXCJmaWdodGx2dXBcIiArICh0IC0gMSldW3RoaXMuZ2FtZVRvb2xMdiAtIDJdIC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoOSA9PSBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoMTAgKiBpKSAlIDEwICE9IDAgJiYgKGkgPSBpLnRvRml4ZWQoMSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IE1hdGguZmxvb3IoaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZSA9IGkgKyAoOSA9PSBuID8gXCIlXCIgOiBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9LFxuICAgIG9uQ2xvc2VVSTogZnVuY3Rpb24gKCkge1xuICAgICAgICBjYy5wb3B1cE1hbmFnZXIucmVtb3ZlUG9wdXAodGhpcyk7XG4gICAgfVxufSk7Il19