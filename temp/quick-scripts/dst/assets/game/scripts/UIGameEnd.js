
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game/scripts/UIGameEnd.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '39fb4cjzNNDVpgqwKsJePsb', 'UIGameEnd');
// game/scripts/UIGameEnd.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    waveLabel: cc.Label,
    levelLabel: cc.Label,
    bgNodes: [cc.Node],
    batterWaveTip: cc.Node,
    bgSpine: sp.Skeleton,
    tiSpine: sp.Skeleton,
    baseItemNode: cc.Node,
    rewardParent: cc.Node,
    infoPanel: cc.Node,
    sweepTip: cc.Node,
    actGameTip: cc.Node,
    btnPanel: cc.Node,
    adBtn: cc.Node
  },
  initBy: function initBy(t, e) {
    var i = this;

    if (void 0 === e) {
      e = !0;
    }

    this.scene = t;
    this.isInGame = e;
    this.isLookAd = !1;
    this.rewardParent.active = !1;
    this.btnPanel.active = !1;
    this.infoPanel.active = !1;
    this.actGameTip.active = !1;
    this.levelLabel.node.active = !1;
    this.sweepTip.active = !1;
    this.bgNodes[0].active = !1;
    this.bgNodes[1].active = !1;

    if (this.isInGame) {
      this.bgSpine.setAnimation(0, "", !1);

      if (this.scene.isSucc) {
        cc.pvz.utils.spineFromTo(this.bgSpine, "shengli1_2", "shengli2_2"), cc.pvz.utils.spineFromTo(this.tiSpine, "shengli1_1", "shengli2_1", !0, function () {
          i.onGameSpineEnd();
        });
      } else {
        cc.pvz.utils.spineFromTo(this.bgSpine, "shibai1_2", "shibai2_2"), cc.pvz.utils.spineFromTo(this.tiSpine, "shibai1_1", "shibai2_1", !0, function () {
          i.onGameSpineEnd();
        });
      }

      this.levelLabel.string = "" + cc.pvz.runtimeData.level;
      this.waveLabel.string = cc.pvz.runtimeData.wave;
      cc.pvz.runtimeData.level == cc.pvz.PlayerData.getStageLevel() && this.scene.isSucc && cc.pvz.PlayerData.updateStageLevel(1);

      if (cc.pvz.runtimeData.level == cc.pvz.PlayerData.getStageLevel() && cc.pvz.runtimeData.wave > cc.pvz.PlayerData.getMaxLevelWave()) {
        this.batterWaveTip.active = !0, cc.pvz.PlayerData.updateMaxLevelWave(cc.pvz.runtimeData.wave);
      } else {
        this.batterWaveTip.active = !1;
      }

      this.scene.isSucc && (0 == cc.pvz.runtimeData.mode ? cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType["通关主线副本n次"], 1) : cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType["通关挑战关卡n次"], 1));
      cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType["关卡结算"]);
      cc.pvz.PlayerData.getStageLevel() > 1 && cc.pvz.PlayerData.saveDataToLocalOnline();
    } else {
      this.levelLabel.string = "" + this.scene.stageLevel;
      cc.pvz.utils.spineFromTo(this.bgSpine, "shengli1_2", "shengli2_2");
      cc.pvz.utils.spineFromTo(this.tiSpine, "shengli1_1", "shengli2_1", !0, function () {
        i.levelLabel.node.active = !0;
        i.sweepTip.active = !0;
        i.bgNodes[0].active = !0;
        var t = cc.JsonControl.getLevelData(i.scene.stageLevel);
        i.initRewardData(t.reward, 1);
      });
    }

    if (this.isInGame) {
      cc.butler.resumeDirector(1);
    }
  },
  onGameSpineEnd: function onGameSpineEnd() {
    this.infoPanel.active = !0;
    this.levelLabel.node.active = 0 == cc.pvz.runtimeData.mode;
    this.actGameTip.active = 0 != cc.pvz.runtimeData.mode;
    this.bgNodes[this.scene.isSucc ? 0 : 1].active = !0;
    this.initInGameReward();
  },
  initInGameReward: function initInGameReward() {
    var t;

    if (this.scene.isSucc) {
      t = 1;
    } else {
      t = Math.max(1, cc.pvz.runtimeData.wave) / this.scene.maxWave;
    }

    var e = this.scene.hub.levelData;

    switch (cc.pvz.runtimeData.mode) {
      case 0:
        this.adBtn.active = !0;
        this.initRewardData(e.reward, t);
        break;

      case 1:
        this.adBtn.active = !1;
        this.initRewardData(e.reward, t);
    }
  },
  initRewardData: function initRewardData(t, e) {
    var i = this;
    var n = e;

    if (this.isInGame && 0 == cc.pvz.runtimeData.mode) {
      n *= 1 + 0.01 * cc.pvz.runtimeData.getBuffValue(7);
    }

    var o = Math.floor(t.length / 2);
    var s = 0;
    var c = [];

    for (var a = 0; a < o; a++) {
      var r = Math.floor(n * t[s + 1]);
      var h = cc.pvz.utils.getRewardItem(t[s], r);
      c.push(h);
      s += 2;
    }

    this.rewardData = [];

    for (var d = 0; d < c.length; d++) {
      var u = c[d];

      if (u.itemId >= 5 && u.itemId <= 7) {
        cc.pvz.utils.onCheckRandomTool(u, this.rewardData);
      } else {
        this.rewardData.push(u);
      }
    }

    this.rewardParent.active = !0;
    var p = this.rewardData.length;
    this.baseItemNode.active = !0;

    if (this.isInGame) {//
    } else {
      cc.pvz.utils.fadeInBtn(this.baseItemNode);
    }

    this.baseItemNode.getComponent("RewardItem").initRewardItem(this.rewardData[0], !0);

    if (this.isInGame) {
      for (var l = 1; l < p; l++) {
        var f = cc.instantiate(this.baseItemNode);
        f.parent = this.rewardParent;
        cc.pvz.utils.fadeInBtn(f);
        f.getComponent("RewardItem").initRewardItem(this.rewardData[l], !0);
      }

      this.btnPanel.active = !0;
    } else {
      var m = function m(t) {
        setTimeout(function () {
          var e = cc.instantiate(i.baseItemNode);
          e.parent = i.rewardParent;
          cc.pvz.utils.fadeInBtn(e);
          e.getComponent("RewardItem").initRewardItem(i.rewardData[t], !1);

          if (t == p - 1) {
            i.onSaveLogic();
            cc.pvz.utils.fadeInBtn(i.btnPanel);
          }
        }, 40 * (t - 1) + 120);
      };

      for (var v = 1; v < p; v++) {
        m(v);
      }
    }
  },
  onSaveLogic: function onSaveLogic() {
    console.log(" save ");

    for (var t = 1; t < this.rewardData.length; t++) {
      this.rewardParent.children[t].getComponent("RewardItem").onSaveReward();
    }
  },
  onClickAd: function onClickAd() {
    var t = this;

    if (this.isLookAd) {//
    } else {
      this.isLookAd = !0;
      cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType["关卡结算"], function (e) {
        t.onAdClose(e);
      });
    }
  },
  onAdClose: function onAdClose(t) {
    this.isLookAd = !1;

    if (t) {
      this.onShowDoubleReward();
    }
  },
  onShowDoubleReward: function onShowDoubleReward() {
    var t = this;
    this.onGetDoubleReward();
    cc.popupManager.removePopup(this);
    cc.popupManager.popup("mainUI", "getrewardUI", "UIReward", {
      ad: !1,
      scale: !1
    }, this.rewardData, cc.pvz.GameConfig.UIFromType["双倍结算"], function () {
      t.onClickClose();
    });
  },
  onGetDoubleReward: function onGetDoubleReward() {
    for (var t = 0; t < this.rewardData.length; t++) {
      this.rewardParent.children[t].getComponent("RewardItem").onSaveReward();
      this.rewardData[t].count *= 2;
    }
  },
  onClickShare: function onClickShare() {
    if (this.isLookAd) {//
    } else {
      cc.popupManager.showToast("分享成功了哟！");
      this.onShowDoubleReward();
    }
  },
  onClickClose: function onClickClose() {
    if (this.isLookAd) {//
    } else {
      cc.butler.playEffectAsync("game", "sound/getCoin");

      if (this.isInGame) {
        cc.popupManager.removeAllPopups(), 1 == cc.pvz.PlayerData.getStageLevel() ? (cc.pvz.runtimeData.init(0, 1), cc.director.loadScene("game1"), cc.pvz.TAUtils.trackBackpack(1)) : (cc.pvz.runtimeData.removeData(), cc.director.loadScene("mainUI"));
      } else {
        cc.popupManager.removePopup(this), cc.MainControl.updateItemInfo(), cc.RedControl.refreshAllRedTip();
      }
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9nYW1lL3NjcmlwdHMvVUlHYW1lRW5kLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwid2F2ZUxhYmVsIiwiTGFiZWwiLCJsZXZlbExhYmVsIiwiYmdOb2RlcyIsIk5vZGUiLCJiYXR0ZXJXYXZlVGlwIiwiYmdTcGluZSIsInNwIiwiU2tlbGV0b24iLCJ0aVNwaW5lIiwiYmFzZUl0ZW1Ob2RlIiwicmV3YXJkUGFyZW50IiwiaW5mb1BhbmVsIiwic3dlZXBUaXAiLCJhY3RHYW1lVGlwIiwiYnRuUGFuZWwiLCJhZEJ0biIsImluaXRCeSIsInQiLCJlIiwiaSIsInNjZW5lIiwiaXNJbkdhbWUiLCJpc0xvb2tBZCIsImFjdGl2ZSIsIm5vZGUiLCJzZXRBbmltYXRpb24iLCJpc1N1Y2MiLCJwdnoiLCJ1dGlscyIsInNwaW5lRnJvbVRvIiwib25HYW1lU3BpbmVFbmQiLCJzdHJpbmciLCJydW50aW1lRGF0YSIsImxldmVsIiwid2F2ZSIsIlBsYXllckRhdGEiLCJnZXRTdGFnZUxldmVsIiwidXBkYXRlU3RhZ2VMZXZlbCIsImdldE1heExldmVsV2F2ZSIsInVwZGF0ZU1heExldmVsV2F2ZSIsIm1vZGUiLCJhZGRNaXNzaW9uUHJvZ3Jlc3MiLCJHYW1lQ29uZmlnIiwiTWlzc2lvblR5cGUiLCJUQVV0aWxzIiwidHJhY2tBZFVJU2hvdyIsIkFkVHlwZSIsInNhdmVEYXRhVG9Mb2NhbE9ubGluZSIsInN0YWdlTGV2ZWwiLCJKc29uQ29udHJvbCIsImdldExldmVsRGF0YSIsImluaXRSZXdhcmREYXRhIiwicmV3YXJkIiwiYnV0bGVyIiwicmVzdW1lRGlyZWN0b3IiLCJpbml0SW5HYW1lUmV3YXJkIiwiTWF0aCIsIm1heCIsIm1heFdhdmUiLCJodWIiLCJsZXZlbERhdGEiLCJuIiwiZ2V0QnVmZlZhbHVlIiwibyIsImZsb29yIiwibGVuZ3RoIiwicyIsImMiLCJhIiwiciIsImgiLCJnZXRSZXdhcmRJdGVtIiwicHVzaCIsInJld2FyZERhdGEiLCJkIiwidSIsIml0ZW1JZCIsIm9uQ2hlY2tSYW5kb21Ub29sIiwicCIsImZhZGVJbkJ0biIsImdldENvbXBvbmVudCIsImluaXRSZXdhcmRJdGVtIiwibCIsImYiLCJpbnN0YW50aWF0ZSIsInBhcmVudCIsIm0iLCJzZXRUaW1lb3V0Iiwib25TYXZlTG9naWMiLCJ2IiwiY29uc29sZSIsImxvZyIsImNoaWxkcmVuIiwib25TYXZlUmV3YXJkIiwib25DbGlja0FkIiwiQWRVdGlscyIsInNob3dBZFJld2FyZFZpZGVvIiwib25BZENsb3NlIiwib25TaG93RG91YmxlUmV3YXJkIiwib25HZXREb3VibGVSZXdhcmQiLCJwb3B1cE1hbmFnZXIiLCJyZW1vdmVQb3B1cCIsInBvcHVwIiwiYWQiLCJzY2FsZSIsIlVJRnJvbVR5cGUiLCJvbkNsaWNrQ2xvc2UiLCJjb3VudCIsIm9uQ2xpY2tTaGFyZSIsInNob3dUb2FzdCIsInBsYXlFZmZlY3RBc3luYyIsInJlbW92ZUFsbFBvcHVwcyIsImluaXQiLCJkaXJlY3RvciIsImxvYWRTY2VuZSIsInRyYWNrQmFja3BhY2siLCJyZW1vdmVEYXRhIiwiTWFpbkNvbnRyb2wiLCJ1cGRhdGVJdGVtSW5mbyIsIlJlZENvbnRyb2wiLCJyZWZyZXNoQWxsUmVkVGlwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztFQUNMLFdBQVNELEVBQUUsQ0FBQ0UsU0FEUDtFQUVMQyxVQUFVLEVBQUU7SUFDUkMsU0FBUyxFQUFFSixFQUFFLENBQUNLLEtBRE47SUFFUkMsVUFBVSxFQUFFTixFQUFFLENBQUNLLEtBRlA7SUFHUkUsT0FBTyxFQUFFLENBQUNQLEVBQUUsQ0FBQ1EsSUFBSixDQUhEO0lBSVJDLGFBQWEsRUFBRVQsRUFBRSxDQUFDUSxJQUpWO0lBS1JFLE9BQU8sRUFBRUMsRUFBRSxDQUFDQyxRQUxKO0lBTVJDLE9BQU8sRUFBRUYsRUFBRSxDQUFDQyxRQU5KO0lBT1JFLFlBQVksRUFB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QUNnQyxHQUFILENBQU9RLFVBQVAsQ0FBa0JDLGFBQWxCLEVBQUwsSUFDT3pDLEVBQUUsQ0FBQ2dDLEdBQUgsQ0FBT0ssV0FBUCxDQUFtQmdGLElBQW5CLENBQXdCLENBQXhCLEVBQTJCLENBQTNCLEdBQ0RySCxFQUFFLENBQUNzSCxRQUFILENBQVlDLFNBQVosQ0FBc0IsT0FBdEIsQ0FEQyxFQUVEdkgsRUFBRSxDQUFDZ0MsR0FBSCxDQUFPaUIsT0FBUCxDQUFldUUsYUFBZixDQUE2QixDQUE3QixDQUhOLEtBSU94SCxFQUFFLENBQUNnQyxHQUFILENBQU9LLFdBQVAsQ0FBbUJvRixVQUFuQixJQUFpQ3pILEVBQUUsQ0FBQ3NILFFBQUgsQ0FBWUMsU0FBWixDQUFzQixRQUF0QixDQUp4QyxDQURKO01BTUgsQ0FQRCxNQU9PO1FBQ0h2SCxFQUFFLENBQUN5RyxZQUFILENBQWdCQyxXQUFoQixDQUE0QixJQUE1QixHQUFtQzFHLEVBQUUsQ0FBQzBILFdBQUgsQ0FBZUMsY0FBZixFQUFuQyxFQUFvRTNILEVBQUUsQ0FBQzRILFVBQUgsQ0FBY0MsZ0JBQWQsRUFBcEU7TUFDSDtJQUNKO0VBQ0o7QUE1T0ksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHdhdmVMYWJlbDogY2MuTGFiZWwsXG4gICAgICAgIGxldmVsTGFiZWw6IGNjLkxhYmVsLFxuICAgICAgICBiZ05vZGVzOiBbY2MuTm9kZV0sXG4gICAgICAgIGJhdHRlcldhdmVUaXA6IGNjLk5vZGUsXG4gICAgICAgIGJnU3BpbmU6IHNwLlNrZWxldG9uLFxuICAgICAgICB0aVNwaW5lOiBzcC5Ta2VsZXRvbixcbiAgICAgICAgYmFzZUl0ZW1Ob2RlOiBjYy5Ob2RlLFxuICAgICAgICByZXdhcmRQYXJlbnQ6IGNjLk5vZGUsXG4gICAgICAgIGluZm9QYW5lbDogY2MuTm9kZSxcbiAgICAgICAgc3dlZXBUaXA6IGNjLk5vZGUsXG4gICAgICAgIGFjdEdhbWVUaXA6IGNjLk5vZGUsXG4gICAgICAgIGJ0blBhbmVsOiBjYy5Ob2RlLFxuICAgICAgICBhZEJ0bjogY2MuTm9kZVxuICAgIH0sXG4gICAgaW5pdEJ5OiBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICB2YXIgaSA9IHRoaXM7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIGUgPSAhMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjZW5lID0gdDtcbiAgICAgICAgdGhpcy5pc0luR2FtZSA9IGU7XG4gICAgICAgIHRoaXMuaXNMb29rQWQgPSAhMTtcbiAgICAgICAgdGhpcy5yZXdhcmRQYXJlbnQuYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMuYnRuUGFuZWwuYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMuaW5mb1BhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmFjdEdhbWVUaXAuYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMubGV2ZWxMYWJlbC5ub2RlLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLnN3ZWVwVGlwLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmJnTm9kZXNbMF0uYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMuYmdOb2Rlc1sxXS5hY3RpdmUgPSAhMTtcbiAgICAgICAgaWYgKHRoaXMuaXNJbkdhbWUpIHtcbiAgICAgICAgICAgIHRoaXMuYmdTcGluZS5zZXRBbmltYXRpb24oMCwgXCJcIiwgITEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2NlbmUuaXNTdWNjKSB7XG4gICAgICAgICAgICAgICAgY2MucHZ6LnV0aWxzLnNwaW5lRnJvbVRvKHRoaXMuYmdTcGluZSwgXCJzaGVuZ2xpMV8yXCIsIFwic2hlbmdsaTJfMlwiKSxcbiAgICAgICAgICAgICAgICAgICAgY2MucHZ6LnV0aWxzLnNwaW5lRnJvbVRvKHRoaXMudGlTcGluZSwgXCJzaGVuZ2xpMV8xXCIsIFwic2hlbmdsaTJfMVwiLCAhMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaS5vbkdhbWVTcGluZUVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2MucHZ6LnV0aWxzLnNwaW5lRnJvbVRvKHRoaXMuYmdTcGluZSwgXCJzaGliYWkxXzJcIiwgXCJzaGliYWkyXzJcIiksXG4gICAgICAgICAgICAgICAgICAgIGNjLnB2ei51dGlscy5zcGluZUZyb21Ubyh0aGlzLnRpU3BpbmUsIFwic2hpYmFpMV8xXCIsIFwic2hpYmFpMl8xXCIsICEwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLm9uR2FtZVNwaW5lRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sZXZlbExhYmVsLnN0cmluZyA9IFwiXCIgKyBjYy5wdnoucnVudGltZURhdGEubGV2ZWw7XG4gICAgICAgICAgICB0aGlzLndhdmVMYWJlbC5zdHJpbmcgPSBjYy5wdnoucnVudGltZURhdGEud2F2ZTtcbiAgICAgICAgICAgIGNjLnB2ei5ydW50aW1lRGF0YS5sZXZlbCA9PSBjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmlzU3VjYyAmJlxuICAgICAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLnVwZGF0ZVN0YWdlTGV2ZWwoMSk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2MucHZ6LnJ1bnRpbWVEYXRhLmxldmVsID09IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFN0YWdlTGV2ZWwoKSAmJlxuICAgICAgICAgICAgICAgIGNjLnB2ei5ydW50aW1lRGF0YS53YXZlID4gY2MucHZ6LlBsYXllckRhdGEuZ2V0TWF4TGV2ZWxXYXZlKClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICh0aGlzLmJhdHRlcldhdmVUaXAuYWN0aXZlID0gITApLCBjYy5wdnouUGxheWVyRGF0YS51cGRhdGVNYXhMZXZlbFdhdmUoY2MucHZ6LnJ1bnRpbWVEYXRhLndhdmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhdHRlcldhdmVUaXAuYWN0aXZlID0gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjZW5lLmlzU3VjYyAmJlxuICAgICAgICAgICAgICAgICgwID09IGNjLnB2ei5ydW50aW1lRGF0YS5tb2RlXG4gICAgICAgICAgICAgICAgICAgID8gY2MucHZ6LlBsYXllckRhdGEuYWRkTWlzc2lvblByb2dyZXNzKGNjLnB2ei5HYW1lQ29uZmlnLk1pc3Npb25UeXBlW1wi6YCa5YWz5Li757q/5Ymv5pysbuasoVwiXSwgMSlcbiAgICAgICAgICAgICAgICAgICAgOiBjYy5wdnouUGxheWVyRGF0YS5hZGRNaXNzaW9uUHJvZ3Jlc3MoY2MucHZ6LkdhbWVDb25maWcuTWlzc2lvblR5cGVbXCLpgJrlhbPmjJHmiJjlhbPljaFu5qyhXCJdLCAxKSk7XG4gICAgICAgICAgICBjYy5wdnouVEFVdGlscy50cmFja0FkVUlTaG93KGNjLnB2ei5HYW1lQ29uZmlnLkFkVHlwZVtcIuWFs+WNoee7k+eul1wiXSk7XG4gICAgICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCkgPiAxICYmIGNjLnB2ei5QbGF5ZXJEYXRhLnNhdmVEYXRhVG9Mb2NhbE9ubGluZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sZXZlbExhYmVsLnN0cmluZyA9IFwiXCIgKyB0aGlzLnNjZW5lLnN0YWdlTGV2ZWw7XG4gICAgICAgICAgICBjYy5wdnoudXRpbHMuc3BpbmVGcm9tVG8odGhpcy5iZ1NwaW5lLCBcInNoZW5nbGkxXzJcIiwgXCJzaGVuZ2xpMl8yXCIpO1xuICAgICAgICAgICAgY2MucHZ6LnV0aWxzLnNwaW5lRnJvbVRvKHRoaXMudGlTcGluZSwgXCJzaGVuZ2xpMV8xXCIsIFwic2hlbmdsaTJfMVwiLCAhMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGkubGV2ZWxMYWJlbC5ub2RlLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIGkuc3dlZXBUaXAuYWN0aXZlID0gITA7XG4gICAgICAgICAgICAgICAgaS5iZ05vZGVzWzBdLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIHZhciB0ID0gY2MuSnNvbkNvbnRyb2wuZ2V0TGV2ZWxEYXRhKGkuc2NlbmUuc3RhZ2VMZXZlbCk7XG4gICAgICAgICAgICAgICAgaS5pbml0UmV3YXJkRGF0YSh0LnJld2FyZCwgMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0luR2FtZSkge1xuICAgICAgICAgICAgY2MuYnV0bGVyLnJlc3VtZURpcmVjdG9yKDEpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkdhbWVTcGluZUVuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmluZm9QYW5lbC5hY3RpdmUgPSAhMDtcbiAgICAgICAgdGhpcy5sZXZlbExhYmVsLm5vZGUuYWN0aXZlID0gMCA9PSBjYy5wdnoucnVudGltZURhdGEubW9kZTtcbiAgICAgICAgdGhpcy5hY3RHYW1lVGlwLmFjdGl2ZSA9IDAgIT0gY2MucHZ6LnJ1bnRpbWVEYXRhLm1vZGU7XG4gICAgICAgIHRoaXMuYmdOb2Rlc1t0aGlzLnNjZW5lLmlzU3VjYyA/IDAgOiAxXS5hY3RpdmUgPSAhMDtcbiAgICAgICAgdGhpcy5pbml0SW5HYW1lUmV3YXJkKCk7XG4gICAgfSxcbiAgICBpbml0SW5HYW1lUmV3YXJkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBpZiAodGhpcy5zY2VuZS5pc1N1Y2MpIHtcbiAgICAgICAgICAgIHQgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdCA9IE1hdGgubWF4KDEsIGNjLnB2ei5ydW50aW1lRGF0YS53YXZlKSAvIHRoaXMuc2NlbmUubWF4V2F2ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZSA9IHRoaXMuc2NlbmUuaHViLmxldmVsRGF0YTtcbiAgICAgICAgc3dpdGNoIChjYy5wdnoucnVudGltZURhdGEubW9kZSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHRoaXMuYWRCdG4uYWN0aXZlID0gITA7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0UmV3YXJkRGF0YShlLnJld2FyZCwgdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgdGhpcy5hZEJ0bi5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRSZXdhcmREYXRhKGUucmV3YXJkLCB0KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaW5pdFJld2FyZERhdGE6IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZhciBpID0gdGhpcztcbiAgICAgICAgdmFyIG4gPSBlO1xuICAgICAgICBpZiAodGhpcy5pc0luR2FtZSAmJiAwID09IGNjLnB2ei5ydW50aW1lRGF0YS5tb2RlKSB7XG4gICAgICAgICAgICBuICo9IDEgKyAwLjAxICogY2MucHZ6LnJ1bnRpbWVEYXRhLmdldEJ1ZmZWYWx1ZSg3KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbyA9IE1hdGguZmxvb3IodC5sZW5ndGggLyAyKTtcbiAgICAgICAgdmFyIHMgPSAwO1xuICAgICAgICB2YXIgYyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IG87IGErKykge1xuICAgICAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKG4gKiB0W3MgKyAxXSk7XG4gICAgICAgICAgICB2YXIgaCA9IGNjLnB2ei51dGlscy5nZXRSZXdhcmRJdGVtKHRbc10sIHIpO1xuICAgICAgICAgICAgYy5wdXNoKGgpO1xuICAgICAgICAgICAgcyArPSAyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmV3YXJkRGF0YSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IGMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgIHZhciB1ID0gY1tkXTtcbiAgICAgICAgICAgIGlmICh1Lml0ZW1JZCA+PSA1ICYmIHUuaXRlbUlkIDw9IDcpIHtcbiAgICAgICAgICAgICAgICBjYy5wdnoudXRpbHMub25DaGVja1JhbmRvbVRvb2wodSwgdGhpcy5yZXdhcmREYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXdhcmREYXRhLnB1c2godSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXdhcmRQYXJlbnQuYWN0aXZlID0gITA7XG4gICAgICAgIHZhciBwID0gdGhpcy5yZXdhcmREYXRhLmxlbmd0aDtcbiAgICAgICAgdGhpcy5iYXNlSXRlbU5vZGUuYWN0aXZlID0gITA7XG4gICAgICAgIGlmICh0aGlzLmlzSW5HYW1lKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2MucHZ6LnV0aWxzLmZhZGVJbkJ0bih0aGlzLmJhc2VJdGVtTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNlSXRlbU5vZGUuZ2V0Q29tcG9uZW50KFwiUmV3YXJkSXRlbVwiKS5pbml0UmV3YXJkSXRlbSh0aGlzLnJld2FyZERhdGFbMF0sICEwKTtcbiAgICAgICAgaWYgKHRoaXMuaXNJbkdhbWUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGwgPSAxOyBsIDwgcDsgbCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmJhc2VJdGVtTm9kZSk7XG4gICAgICAgICAgICAgICAgZi5wYXJlbnQgPSB0aGlzLnJld2FyZFBhcmVudDtcbiAgICAgICAgICAgICAgICBjYy5wdnoudXRpbHMuZmFkZUluQnRuKGYpO1xuICAgICAgICAgICAgICAgIGYuZ2V0Q29tcG9uZW50KFwiUmV3YXJkSXRlbVwiKS5pbml0UmV3YXJkSXRlbSh0aGlzLnJld2FyZERhdGFbbF0sICEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYnRuUGFuZWwuYWN0aXZlID0gITA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgbSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gY2MuaW5zdGFudGlhdGUoaS5iYXNlSXRlbU5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBlLnBhcmVudCA9IGkucmV3YXJkUGFyZW50O1xuICAgICAgICAgICAgICAgICAgICBjYy5wdnoudXRpbHMuZmFkZUluQnRuKGUpO1xuICAgICAgICAgICAgICAgICAgICBlLmdldENvbXBvbmVudChcIlJld2FyZEl0ZW1cIikuaW5pdFJld2FyZEl0ZW0oaS5yZXdhcmREYXRhW3RdLCAhMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ID09IHAgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLm9uU2F2ZUxvZ2ljKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5wdnoudXRpbHMuZmFkZUluQnRuKGkuYnRuUGFuZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgNDAgKiAodCAtIDEpICsgMTIwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciB2ID0gMTsgdiA8IHA7IHYrKykge1xuICAgICAgICAgICAgICAgIG0odik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uU2F2ZUxvZ2ljOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiIHNhdmUgXCIpO1xuICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IHRoaXMucmV3YXJkRGF0YS5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgdGhpcy5yZXdhcmRQYXJlbnQuY2hpbGRyZW5bdF0uZ2V0Q29tcG9uZW50KFwiUmV3YXJkSXRlbVwiKS5vblNhdmVSZXdhcmQoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja0FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuaXNMb29rQWQpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzTG9va0FkID0gITA7XG4gICAgICAgICAgICBjYy5wdnouQWRVdGlscy5zaG93QWRSZXdhcmRWaWRlbyhjYy5wdnouR2FtZUNvbmZpZy5BZFR5cGVbXCLlhbPljaHnu5PnrpdcIl0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdC5vbkFkQ2xvc2UoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25BZENsb3NlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICB0aGlzLmlzTG9va0FkID0gITE7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICB0aGlzLm9uU2hvd0RvdWJsZVJld2FyZCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvblNob3dEb3VibGVSZXdhcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICB0aGlzLm9uR2V0RG91YmxlUmV3YXJkKCk7XG4gICAgICAgIGNjLnBvcHVwTWFuYWdlci5yZW1vdmVQb3B1cCh0aGlzKTtcbiAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnBvcHVwKFxuICAgICAgICAgICAgXCJtYWluVUlcIixcbiAgICAgICAgICAgIFwiZ2V0cmV3YXJkVUlcIixcbiAgICAgICAgICAgIFwiVUlSZXdhcmRcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhZDogITEsXG4gICAgICAgICAgICAgICAgc2NhbGU6ICExXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5yZXdhcmREYXRhLFxuICAgICAgICAgICAgY2MucHZ6LkdhbWVDb25maWcuVUlGcm9tVHlwZVtcIuWPjOWAjee7k+eul1wiXSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0Lm9uQ2xpY2tDbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH0sXG4gICAgb25HZXREb3VibGVSZXdhcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLnJld2FyZERhdGEubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgIHRoaXMucmV3YXJkUGFyZW50LmNoaWxkcmVuW3RdLmdldENvbXBvbmVudChcIlJld2FyZEl0ZW1cIikub25TYXZlUmV3YXJkKCk7XG4gICAgICAgICAgICB0aGlzLnJld2FyZERhdGFbdF0uY291bnQgKj0gMjtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja1NoYXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTG9va0FkKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnNob3dUb2FzdChcIuWIhuS6q+aIkOWKn+S6huWTn++8gVwiKTtcbiAgICAgICAgICAgIHRoaXMub25TaG93RG91YmxlUmV3YXJkKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQ2xpY2tDbG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0xvb2tBZCkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNjLmJ1dGxlci5wbGF5RWZmZWN0QXN5bmMoXCJnYW1lXCIsIFwic291bmQvZ2V0Q29pblwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5HYW1lKSB7XG4gICAgICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnJlbW92ZUFsbFBvcHVwcygpLFxuICAgICAgICAgICAgICAgICAgICAxID09IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFN0YWdlTGV2ZWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoY2MucHZ6LnJ1bnRpbWVEYXRhLmluaXQoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcImdhbWUxXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5wdnouVEFVdGlscy50cmFja0JhY2twYWNrKDEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoY2MucHZ6LnJ1bnRpbWVEYXRhLnJlbW92ZURhdGEoKSwgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwibWFpblVJXCIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnJlbW92ZVBvcHVwKHRoaXMpLCBjYy5NYWluQ29udHJvbC51cGRhdGVJdGVtSW5mbygpLCBjYy5SZWRDb250cm9sLnJlZnJlc2hBbGxSZWRUaXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIl19