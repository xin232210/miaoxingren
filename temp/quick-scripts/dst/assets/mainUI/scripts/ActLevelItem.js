
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/ActLevelItem.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'cdb0cOcgO5BHa5TmKOEHZP9', 'ActLevelItem');
// mainUI/scripts/ActLevelItem.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    timeLabel: cc.Label,
    timePanel: cc.Node,
    battleTimesLabel: cc.Label,
    battleBtn: cc.Node,
    redTip: cc.Node
  },
  initActLevelItem: function initActLevelItem(e) {
    this.actType = e;
    this.stageLevel = cc.pvz.PlayerData.getStageLevel();
    this.lockLevel = cc.pvz.GameConfig.OpenSysLv[this.actType];
    this.timePanel.active = this.stageLevel > this.lockLevel;
    var t = this.battleBtn.children[0].getComponent(cc.Sprite);
    cc.JsonControl.setSpriteGray(t, this.stageLevel <= this.lockLevel);

    if (this.actType === cc.pvz.GameConfig.ActType["挑战副本"]) {
      this.initActLevelInfo();
    }

    this.onCheckActLevelRed();
  },
  initActLevelInfo: function initActLevelInfo() {
    cc.pvz.PlayerData.checkAndResetActLevel();
    this.ActLevelData = cc.pvz.PlayerData.getActLevelData();
    this.battleTimesLabel.string = this.ActLevelData.times;
    this.lastTime = cc.pvz.utils.getTodayLastTimes();
    this.timeLabel.string = "" + cc.pvz.utils.formatSeconds3(this.lastTime);
    this.schedule(this.refreshLoastTime, 1);
  },
  refreshLoastTime: function refreshLoastTime() {
    this.lastTime--;
    this.timeLabel.string = cc.pvz.utils.formatSeconds3(this.lastTime);

    if (this.lastTime <= 0) {
      this.lastTime = 86400;
      this.timeLabel.string = cc.pvz.utils.formatSeconds3(this.lastTime);

      if (this.actType == cc.pvz.GameConfig.ActType["挑战副本"]) {
        cc.pvz.PlayerData.checkAndResetActLevel();
        this.ActLevelData = cc.pvz.PlayerData.getActLevelData();
        this.battleTimesLabel.string = this.ActLevelData.times;
      }

      this.redTip.active = this.stageLevel > this.lockLevel;
    }
  },
  onCheckActLevelRed: function onCheckActLevelRed() {
    if (this.stageLevel <= this.lockLevel) {
      this.redTip.active = !1;
    } else {
      if (this.actType == cc.pvz.GameConfig.ActType["挑战副本"]) {
        if (this.ActLevelData.times > 0) {
          return void (this.redTip.active = !0);
        }

        var e = cc.JsonControl.ActLevelBoxJson;

        for (var t = 0; t < 4; t++) {
          if (e[t].score <= this.ActLevelData.score && 0 == this.ActLevelData.boxStatus[t]) {
            return void (this.redTip.active = !0);
          }
        }
      } else if (this.ActBallData.times > 0) {
        return void (this.redTip.active = !0);
      }

      this.redTip.active = !1;
    }
  },
  onClickActStart: function onClickActStart() {
    if (this.stageLevel <= this.lockLevel) {
      cc.popupManager.showToast("通过关卡第" + this.lockLevel + "关解锁！");
    } else if (this.actType === cc.pvz.GameConfig.ActType["挑战副本"]) {
      cc.popupManager.popup("mainUI", "TiaozhanInfoUI", "UIActLevelInfo", {
        ad: !1,
        scale: !1
      }, function () {
        cc.UIActLevel.initActItemList();
      });
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9BY3RMZXZlbEl0ZW0uanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJ0aW1lTGFiZWwiLCJMYWJlbCIsInRpbWVQYW5lbCIsIk5vZGUiLCJiYXR0bGVUaW1lc0xhYmVsIiwiYmF0dGxlQnRuIiwicmVkVGlwIiwiaW5pdEFjdExldmVsSXRlbSIsImUiLCJhY3RUeXBlIiwic3RhZ2VMZXZlbCIsInB2eiIsIlBsYXllckRhdGEiLCJnZXRTdGFnZUxldmVsIiwibG9ja0xldmVsIiwiR2FtZUNvbmZpZyIsIk9wZW5TeXNMdiIsImFjdGl2ZSIsInQiLCJjaGlsZHJlbiIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsIkpzb25Db250cm9sIiwic2V0U3ByaXRlR3JheSIsIkFjdFR5cGUiLCJpbml0QWN0TGV2ZWxJbmZvIiwib25DaGVja0FjdExldmVsUmVkIiwiY2hlY2tBbmRSZXNldEFjdExldmVsIiwiQWN0TGV2ZWxEYXRhIiwiZ2V0QWN0TGV2ZWxEYXRhIiwic3RyaW5nIiwidGltZXMiLCJsYXN0VGltZSIsInV0aWxzIiwiZ2V0VG9kYXlMYXN0VGltZXMiLCJmb3JtYXRTZWNvbmRzMyIsInNjaGVkdWxlIiwicmVmcmVzaExvYXN0VGltZSIsIkFjdExldmVsQm94SnNvbiIsInNjb3JlIiwiYm94U3RhdHVzIiwiQWN0QmFsbERhdGEiLCJvbkNsaWNrQWN0U3RhcnQiLCJwb3B1cE1hbmFnZXIiLCJzaG93VG9hc3QiLCJwb3B1cCIsImFkIiwic2NhbGUiLCJVSUFjdExldmVsIiwiaW5pdEFjdEl0ZW1MaXN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztFQUNMLFdBQVNELEVBQUUsQ0FBQ0UsU0FEUDtFQUVMQyxVQUFVLEVBQUU7SUFDUkMsU0FBUyxFQUFFSixFQUFFLENBQUNLLEtBRE47SUFFUkMsU0FBUyxFQUFFTixFQUFF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Q0osQ0E5REk7RUErREx5QixlQUFlLEVBQUUsMkJBQVk7SUFDekIsSUFBSSxLQUFLaEMsVUFBTCxJQUFtQixLQUFLSSxTQUE1QixFQUF1QztNQUNuQ2xCLEVBQUUsQ0FBQytDLFlBQUgsQ0FBZ0JDLFNBQWhCLENBQTBCLFVBQVUsS0FBSzlCLFNBQWYsR0FBMkIsTUFBckQ7SUFDSCxDQUZELE1BRU8sSUFBSSxLQUFLTCxPQUFMLEtBQWlCYixFQUFFLENBQUNlLEdBQUgsQ0FBT0ksVUFBUCxDQUFrQlMsT0FBbEIsQ0FBMEIsTUFBMUIsQ0FBckIsRUFBd0Q7TUFDM0Q1QixFQUFFLENBQUMrQyxZQUFILENBQWdCRSxLQUFoQixDQUNJLFFBREosRUFFSSxnQkFGSixFQUdJLGdCQUhKLEVBSUk7UUFDSUMsRUFBRSxFQUFFLENBQUMsQ0FEVDtRQUVJQyxLQUFLLEVBQUUsQ0FBQztNQUZaLENBSkosRUFRSSxZQUFZO1FBQ1JuRCxFQUFFLENBQUNvRCxVQUFILENBQWNDLGVBQWQ7TUFDSCxDQVZMO0lBWUg7RUFDSjtBQWhGSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJjYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdGltZUxhYmVsOiBjYy5MYWJlbCxcbiAgICAgICAgdGltZVBhbmVsOiBjYy5Ob2RlLFxuICAgICAgICBiYXR0bGVUaW1lc0xhYmVsOiBjYy5MYWJlbCxcbiAgICAgICAgYmF0dGxlQnRuOiBjYy5Ob2RlLFxuICAgICAgICByZWRUaXA6IGNjLk5vZGVcbiAgICB9LFxuICAgIGluaXRBY3RMZXZlbEl0ZW06IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRoaXMuYWN0VHlwZSA9IGU7XG4gICAgICAgIHRoaXMuc3RhZ2VMZXZlbCA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFN0YWdlTGV2ZWwoKTtcbiAgICAgICAgdGhpcy5sb2NrTGV2ZWwgPSBjYy5wdnouR2FtZUNvbmZpZy5PcGVuU3lzTHZbdGhpcy5hY3RUeXBlXTtcbiAgICAgICAgdGhpcy50aW1lUGFuZWwuYWN0aXZlID0gdGhpcy5zdGFnZUxldmVsID4gdGhpcy5sb2NrTGV2ZWw7XG4gICAgICAgIHZhciB0ID0gdGhpcy5iYXR0bGVCdG4uY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSk7XG4gICAgICAgIGNjLkpzb25Db250cm9sLnNldFNwcml0ZUdyYXkodCwgdGhpcy5zdGFnZUxldmVsIDw9IHRoaXMubG9ja0xldmVsKTtcbiAgICAgICAgaWYgKHRoaXMuYWN0VHlwZSA9PT0gY2MucHZ6LkdhbWVDb25maWcuQWN0VHlwZVtcIuaMkeaImOWJr+acrFwiXSkge1xuICAgICAgICAgICAgdGhpcy5pbml0QWN0TGV2ZWxJbmZvKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkNoZWNrQWN0TGV2ZWxSZWQoKTtcbiAgICB9LFxuICAgIGluaXRBY3RMZXZlbEluZm86IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2MucHZ6LlBsYXllckRhdGEuY2hlY2tBbmRSZXNldEFjdExldmVsKCk7XG4gICAgICAgIHRoaXMuQWN0TGV2ZWxEYXRhID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0QWN0TGV2ZWxEYXRhKCk7XG4gICAgICAgIHRoaXMuYmF0dGxlVGltZXNMYWJlbC5zdHJpbmcgPSB0aGlzLkFjdExldmVsRGF0YS50aW1lcztcbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IGNjLnB2ei51dGlscy5nZXRUb2RheUxhc3RUaW1lcygpO1xuICAgICAgICB0aGlzLnRpbWVMYWJlbC5zdHJpbmcgPSBcIlwiICsgY2MucHZ6LnV0aWxzLmZvcm1hdFNlY29uZHMzKHRoaXMubGFzdFRpbWUpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHRoaXMucmVmcmVzaExvYXN0VGltZSwgMSk7XG4gICAgfSxcbiAgICByZWZyZXNoTG9hc3RUaW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGFzdFRpbWUtLTtcbiAgICAgICAgdGhpcy50aW1lTGFiZWwuc3RyaW5nID0gY2MucHZ6LnV0aWxzLmZvcm1hdFNlY29uZHMzKHRoaXMubGFzdFRpbWUpO1xuICAgICAgICBpZiAodGhpcy5sYXN0VGltZSA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RUaW1lID0gODY0MDA7XG4gICAgICAgICAgICB0aGlzLnRpbWVMYWJlbC5zdHJpbmcgPSBjYy5wdnoudXRpbHMuZm9ybWF0U2Vjb25kczModGhpcy5sYXN0VGltZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RUeXBlID09IGNjLnB2ei5HYW1lQ29uZmlnLkFjdFR5cGVbXCLmjJHmiJjlia/mnKxcIl0pIHtcbiAgICAgICAgICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5jaGVja0FuZFJlc2V0QWN0TGV2ZWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLkFjdExldmVsRGF0YSA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEFjdExldmVsRGF0YSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmF0dGxlVGltZXNMYWJlbC5zdHJpbmcgPSB0aGlzLkFjdExldmVsRGF0YS50aW1lcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVkVGlwLmFjdGl2ZSA9IHRoaXMuc3RhZ2VMZXZlbCA+IHRoaXMubG9ja0xldmVsO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNoZWNrQWN0TGV2ZWxSZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhZ2VMZXZlbCA8PSB0aGlzLmxvY2tMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yZWRUaXAuYWN0aXZlID0gITE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RUeXBlID09IGNjLnB2ei5HYW1lQ29uZmlnLkFjdFR5cGVbXCLmjJHmiJjlia/mnKxcIl0pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5BY3RMZXZlbERhdGEudGltZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkICh0aGlzLnJlZFRpcC5hY3RpdmUgPSAhMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBlID0gY2MuSnNvbkNvbnRyb2wuQWN0TGV2ZWxCb3hKc29uO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgNDsgdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlW3RdLnNjb3JlIDw9IHRoaXMuQWN0TGV2ZWxEYXRhLnNjb3JlICYmIDAgPT0gdGhpcy5BY3RMZXZlbERhdGEuYm94U3RhdHVzW3RdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAodGhpcy5yZWRUaXAuYWN0aXZlID0gITApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLkFjdEJhbGxEYXRhLnRpbWVzID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2b2lkICh0aGlzLnJlZFRpcC5hY3RpdmUgPSAhMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZFRpcC5hY3RpdmUgPSAhMTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja0FjdFN0YXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YWdlTGV2ZWwgPD0gdGhpcy5sb2NrTGV2ZWwpIHtcbiAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5zaG93VG9hc3QoXCLpgJrov4flhbPljaHnrKxcIiArIHRoaXMubG9ja0xldmVsICsgXCLlhbPop6PplIHvvIFcIik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RUeXBlID09PSBjYy5wdnouR2FtZUNvbmZpZy5BY3RUeXBlW1wi5oyR5oiY5Ymv5pysXCJdKSB7XG4gICAgICAgICAgICBjYy5wb3B1cE1hbmFnZXIucG9wdXAoXG4gICAgICAgICAgICAgICAgXCJtYWluVUlcIixcbiAgICAgICAgICAgICAgICBcIlRpYW96aGFuSW5mb1VJXCIsXG4gICAgICAgICAgICAgICAgXCJVSUFjdExldmVsSW5mb1wiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWQ6ICExLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogITFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2MuVUlBY3RMZXZlbC5pbml0QWN0SXRlbUxpc3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXX0=