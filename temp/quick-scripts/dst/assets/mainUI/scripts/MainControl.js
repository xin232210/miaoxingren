
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/MainControl.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'bca317xWbNPxYrN9zBJhXaY', 'MainControl');
// mainUI/scripts/MainControl.js

"use strict";

cc.UIPage = cc.Enum({
  Shop: 1,
  Rank: 2,
  Battle: 3,
  Tool: 4,
  Fuben: 5
});
cc.Class({
  "extends": cc.Component,
  properties: {
    bgMusic: cc.AudioClip,
    lvUpSound: cc.AudioClip,
    rewardSound: cc.AudioClip,
    coinLabel: cc.Label,
    diamondLabel: cc.Label,
    powerPanel: cc.Node,
    btnNodeList: [cc.Node],
    mainPagePanel: cc.Node,
    spineList: [sp.Skeleton]
  },
  getItemEffectPos: function getItemEffectPos(e) {
    switch (e) {
      case cc.pvz.GameConfig.ItemType["钻石"]:
        return this.diamondLabel.node.convertToWorldSpaceAR(cc.v2());

      case cc.pvz.GameConfig.ItemType["体力"]:
        return this.powerInfo.powerLabel.node.convertToWorldSpaceAR(cc.v2());

      default:
        return this.coinLabel.node.convertToWorldSpaceAR(cc.v2());
    }
  },
  onLoad: function onLoad() {
    cc.MainControl = this;
  },
  clearUICatch: function clearUICatch() {
    cc.UIShop = null;
    cc.UITool = null;
    cc.UIActLevel = null;
    cc.UIRankMode = null;
  },
  start: function start() {
    var e = this;
    console.log("  Start MainControl ");
    cc.RedControl.refreshAllRedTip();
    this.powerInfo = this.powerPanel.getComponent("PowerInfo");
    this.updatePowerInfo();
    this.updateItemInfo();
    this.clearUICatch();
    this.initMainControl();
    cc.butler.playMusic(this.bgMusic);

    if (1 != cc.player.guide1) {
      cc.tempGuideIndex = 0;
      var t = this.btnNodeList[3];
      cc.guideManager.showGuide(0, [{
        tip: "进入角色升级拥有的卡皮巴拉",
        focus: t,
        btn: t.name
      }], function (e) {
        if (e) {
          cc.tempGuideIndex = 1;
        }
      });
    } else {
      if (cc.pvz.PlayerData.getStageLevel() > cc.pvz.GameConfig.OpenSysLv[1]) {
        cc.pvz.cloud.myRank(function (t, i) {
          if (t) {
            cc.tmpScore = i.info.score;

            if (-1 != i.info.rankLastWeek && (!cc.player.rankWeek || cc.pvz.utils.getStartOfWeek() > cc.player.rankWeek)) {
              cc.popupManager.popup("rank", "RankReward", "UIRankReward", {
                ad: !1,
                scale: !0
              }, i.info.rankLastWeek, function () {
                e.updateItemInfo();
                e.onRankRewardShown();
              });
            } else {
              e.onRankRewardShown();
            }
          } else {
            e.onRankRewardShown();
          }
        });
      } else {
        this.onRankRewardShown();
      }
    }
  },
  onRankRewardShown: function onRankRewardShown() {
    var e = this;

    if (cc.hasPopupType) {//
    } else {
      if (cc.pvz.runtimeData.hasPreGame()) {
        cc.popupManager.popup("mainUI", "leveltipUI", "UIPreGame", {
          ad: !1,
          scale: !0
        }, function () {
          e.onRankRewardShown();
        });
      } else {
        cc.pvz.PlayerData.checkAndResetSign(), cc.pvz.PlayerData.getSignData().isReward ? cc.pvz.PlayerData.hasPastOneDay() && !cc.player.isShare && cc.player.adTimes >= 5 && cc.MainUI.onClickShareUI() : cc.popupManager.popup("mainUI", "signUI", "UISign", {
          ad: !1,
          scale: !0
        });
      }
    }
  },
  initMainControl: function initMainControl() {
    this.isChangeCard = !1;
    this.curStatus = cc.UIPage.Battle;
    this.lastStatus = this.curStatus;
    this.onShopOpenStatus = 0;
    this.isLockRank = cc.pvz.PlayerData.getStageLevel() <= cc.pvz.GameConfig.OpenSysLv[1];
    this.initBtnStatus();

    if (cc.hasPopupType == cc.UIPage.Rank) {
      this.isChangeCard = !0;
      this.curStatus = cc.UIPage.Rank;
      this.onChangePage();
    } else {
      if (cc.hasPopupType == cc.UIPage.Fuben) {
        this.isChangeCard = !0;
        this.curStatus = cc.UIPage.Fuben;
        this.onChangePage();
      }
    }
  },
  onClickPageBtn: function onClickPageBtn(e, t) {
    if (!this.isChangeCard) {
      var i = parseInt(t);

      if (i == cc.UIPage.Rank && cc.pvz.PlayerData.getStageLevel() <= cc.pvz.GameConfig.OpenSysLv[1]) {
        cc.popupManager.showToast("通过关卡第" + cc.pvz.GameConfig.OpenSysLv[1] + "关解锁");
      } else {
        if (i != this.curStatus) {
          this.onShopOpenStatus = 0;
          this.isChangeCard = !0;
          this.curStatus = i;
          this.onChangePage();
        }
      }
    }
  },
  onChangePage: function onChangePage() {
    this.onHidePageUI();
    this.onShowPageUI();
    this.onChangeBtnAni();
  },
  onShowPageUI: function onShowPageUI() {
    switch (this.curStatus) {
      case cc.UIPage.Shop:
        if (cc.UIShop) {
          cc.UIShop.initBy();

          if (1 == this.onShopOpenStatus) {
            cc.UIShop.onShopToCoin();
          } else {
            2 == this.onShopOpenStatus && cc.UIShop.onShopToDiamond();
          }
        } else {
          this.onLoadMainPageUI("shop", "UIShop");
        }

        cc.pvz.TAUtils.trackSystemUI(1);
        break;

      case cc.UIPage.Rank:
        if (cc.UIRankMode) {
          cc.UIRankMode.initBy();
        } else {
          this.onLoadMainPageUI("Rank", "UIRankMode");
        }

        break;

      case cc.UIPage.Battle:
        cc.MainUI.showMainUI();
        break;

      case cc.UIPage.Tool:
        if (cc.UITool) {
          cc.UITool.initBy();
        } else {
          this.onLoadMainPageUI("plant", "UITool");
        }

        cc.pvz.TAUtils.trackSystemUI(2);
        break;

      case cc.UIPage.Fuben:
        if (cc.UIActLevel) {
          cc.UIActLevel.initBy();
        } else {
          this.onLoadMainPageUI("TiaozhanUI", "UIActLevel");
        }

        cc.pvz.TAUtils.trackSystemUI(3);
    }
  },
  onLoadMainPageUI: function onLoadMainPageUI(e, t) {
    var i = this;
    cc.assetManager.getBundle("mainUI").load(e, cc.Prefab, function (o, a) {
      if (o) {
        console.log("prefabName load error: ", e, o);
      } else {
        var c = cc.instantiate(a);
        var s = c.getComponent(t);
        c.parent = i.mainPagePanel;
        c.position = cc.v2(0, 0);
        s.initBy();

        if ("UIShop" == t && cc.UIShop) {
          if (1 == i.onShopOpenStatus) {
            cc.UIShop.onShopToCoin();
          } else {
            2 == i.onShopOpenStatus && cc.UIShop.onShopToDiamond();
          }
        }
      }
    });
  },
  onHidePageUI: function onHidePageUI() {
    switch (this.lastStatus) {
      case cc.UIPage.Shop:
        cc.UIShop.onCloseUI();
        break;

      case cc.UIPage.Rank:
        cc.UIRankMode.onClickClose();
        break;

      case cc.UIPage.Battle:
        cc.MainUI.hideMainUI();
        break;

      case cc.UIPage.Tool:
        cc.UITool.onCloseUI();
        break;

      case cc.UIPage.Fuben:
        cc.UIActLevel.onCloseUI();
    }
  },
  initBtnStatus: function initBtnStatus() {
    for (var e = 0; e < 5; e++) {
      var t = "";
      var i = e + 1;

      if (i < this.curStatus) {
        t = "_4_R";
        i == cc.UIPage.Rank && this.isLockRank && (t = "_5_R");
        this.spineList[e].setAnimation(0, "anniu" + i + t, !1);
      } else {
        if (i > this.curStatus) {
          t = "_4_L", i == cc.UIPage.Rank && this.isLockRank && (t = "_5_L"), this.spineList[e].setAnimation(0, "anniu" + i + t, !1);
        } else {
          this.spineList[e].setAnimation(0, "anniu" + i + "_3", !0), this.spineList[e].node.setSiblingIndex(6);
        }
      }
    }
  },
  onChangeBtnAni: function onChangeBtnAni() {
    var e = this;

    var t = function t(_t) {
      if (_t < Math.min(e.lastStatus, e.curStatus) || _t > Math.max(e.lastStatus, e.curStatus)) {
        return "continue";
      }

      if (_t === e.curStatus) {
        var i = e.spineList[_t - 1];
        var o;

        if (e.curStatus < e.lastStatus) {
          o = "R";
        } else {
          o = "L";
        }

        i.setAnimation(0, "anniu" + _t + "_1_" + o, !1);
        i.setCompleteListener(function () {
          i.setAnimation(0, "anniu" + _t + "_3", !0);
          e.isChangeCard = !1;
          i.setCompleteListener(null);
        });
        i.node.setSiblingIndex(6);
      } else if (_t === e.lastStatus) {
        var a;

        if (e.curStatus > e.lastStatus) {
          a = "R";
        } else {
          a = "L";
        }

        e.spineList[_t - 1].setAnimation(0, "anniu" + _t + "_2_" + a, !1);

        e.spineList[_t - 1].addAnimation(0, "anniu" + _t + "_4_" + a, !1);
      } else {
        var c;

        if (e.curStatus > e.lastStatus) {
          c = "R";
        } else {
          c = "L";
        }

        if (e.isLockRank && _t == cc.UIPage.Rank) {
          e.spineList[_t - 1].setAnimation(0, "anniu" + _t + "_5_" + c, !1);
        } else {
          e.spineList[_t - 1].setAnimation(0, "anniu" + _t + "_4_" + c, !1);
        }
      }
    };

    for (var i = 1; i <= 5; i++) {
      t(i);
    }

    this.lastStatus = this.curStatus;

    for (var o = 0; o < 5; o++) {
      this.btnNodeList[o].active = o !== this.curStatus - 1;
      this.btnNodeList[o + 5].active = o === this.curStatus - 1;
    }
  },
  updateItemInfo: function updateItemInfo() {
    var e = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType["金币"]);
    this.coinLabel.string = cc.pvz.utils.formatItemNum(e);
    var t = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType["钻石"]);
    this.diamondLabel.string = cc.pvz.utils.formatItemNum(t);
  },
  updatePowerInfo: function updatePowerInfo() {
    this.powerInfo.updatePowerInfo();
  },
  checkPowerInfo: function checkPowerInfo() {
    this.powerInfo.checkPowerShow();
  },
  onClickBuyPower: function onClickBuyPower() {
    cc.popupManager.popup("mainUI", "powerbuy", "UIPowerBuy", {
      ad: !1,
      scale: !0
    }, cc.pvz.GameConfig.UIFromType["主界面"]);
  },
  onClickBuyCoin: function onClickBuyCoin() {
    if (this.curStatus != cc.UIPage.Shop) {
      this.onShopOpenStatus = 1;
      this.isChangeCard = !0;
      this.curStatus = cc.UIPage.Shop;
      this.onChangePage();
    } else {
      if (cc.UIShop) {
        cc.UIShop.onShopToCoin();
      }
    }
  },
  onClickBuyDiamond: function onClickBuyDiamond() {
    if (this.curStatus != cc.UIPage.Shop) {
      this.onShopOpenStatus = 2;
      this.isChangeCard = !0;
      this.curStatus = cc.UIPage.Shop;
      this.onChangePage();
    } else {
      if (cc.UIShop) {
        cc.UIShop.onShopToDiamond();
      }
    }
  },
  onAutoChangePage: function onAutoChangePage(e) {
    this.onShopOpenStatus = 0;
    this.isChangeCard = !0;
    this.curStatus = e;
    this.onChangePage();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9NYWluQ29udHJvbC5qcyJdLCJuYW1lcyI6WyJjYyIsIlVJUGFnZSIsIkVudW0iLCJTaG9wIiwiUmFuayIsIkJhdHRsZSIsIlRvb2wiLCJGdWJlbiIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImJnTXVzaWMiLCJBdWRpb0NsaXAiLCJsdlVwU291bmQiLCJyZXdhcmRTb3VuZCIsImNvaW5MYWJlbCIsIkxhYmVsIiwiZGlhbW9uZExhYmVsIiwicG93ZXJQYW5lbCIsIk5vZGUiLCJidG5Ob2RlTGlzdCIsIm1haW5QYWdlUGFuZWwiLCJzcGluZUxpc3QiLCJzcCIsIlNrZWxldG9uIiwiZ2V0SXRlbUVmZmVjdFBvcyIsImUiLCJwdnoiLCJHYW1lQ29uZmlnIiwiSXRlbVR5cGUiLCJub2RlIiwiY29udmVydFRvV29ybGRTcGFjZUFSIiwidjIiLCJwb3dlckluZm8iLCJwb3dlckxhYmVsIiwib25Mb2FkIiwiTWFpbkNvbnRyb2wiLCJjbGVhclVJQ2F0Y2giLCJVSVNob3AiLCJVSVRvb2wiLCJVSUFjdExldmVsIiwiVUlSYW5rTW9kZSIsInN0YXJ0IiwiY29uc29sZSIsImxvZyIsIlJlZENvbnRyb2wiLCJyZWZyZXNoQWxsUmVkVGlwIiwiZ2V0Q29tcG9uZW50IiwidXBkYXRlUG93ZXJJbmZvIiwidXBkYXRlSXRlbUluZm8iLCJpbml0TWFpbkNvbnRyb2wiLCJidXRsZXIiLCJwbGF5TXVzaWMiLCJwbGF5ZXIiLCJndWlkZTEiLCJ0ZW1wR3VpZGVJbmRleCIsInQiLCJndWlkZU1hbmFnZXIiLCJzaG93R3VpZGUiLCJ0aXAiLCJmb2N1cyIsImJ0biIsIm5hbWUiLCJQbGF5ZXJEYXRhIiwiZ2V0U3RhZ2VMZXZlbCIsIk9wZW5TeXNMdiIsImNsb3VkIiwibXlSYW5rIiwiaSIsInRtcFNjb3JlIiwiaW5mbyIsInNjb3JlIiwicmFua0xhc3RXZWVrIiwicmFua1dlZWsiLCJ1dGlscyIsImdldFN0YXJ0T2ZXZWVrIiwicG9wdXBNYW5hZ2VyIiwicG9wdXAiLCJhZCIsInNjYWxlIiwib25SYW5rUmV3YXJkU2hvd24iLCJoYXNQb3B1cFR5cGUiLCJydW50aW1lRGF0YSIsImhhc1ByZUdhbWUiLCJjaGVja0FuZFJlc2V0U2lnbiIsImdldFNpZ25EYXRhIiwiaXNSZXdhcmQiLCJoYXNQYXN0T25lRGF5IiwiaXNTaGFyZSIsImFkVGltZXMiLCJNYWluVUkiLCJvbkNsaWNrU2hhcmVVSSIsImlzQ2hhbmdlQ2FyZCIsImN1clN0YXR1cyIsImxhc3RTdGF0dXMiLCJvblNob3BPcGVuU3RhdHVzIiwiaXNMb2NrUmFuayIsImluaXRCdG5TdGF0dXMiLCJvbkNoYW5nZVBhZ2UiLCJvbkNsaWNrUGFnZUJ0biIsInBhcnNlSW50Iiwic2hvd1RvYXN0Iiwib25IaWRlUGFnZVVJIiwib25TaG93UGFnZVVJIiwib25DaGFuZ2VCdG5BbmkiLCJpbml0QnkiLCJvblNob3BUb0NvaW4iLCJvblNob3BUb0RpYW1vbmQiLCJvbkxvYWRNYWluUGFnZVVJIiwiVEFVdGlscyIsInRyYWNrU3lzdGVtVUkiLCJzaG93TWFpblVJIiwiYXNzZXRNYW5hZ2VyIiwiZ2V0QnVuZGxlIiwibG9hZCIsIlByZWZhYiIsIm8iLCJhIiwiYyIsImluc3RhbnRpYXRlIiwicyIsInBhcmVudCIsInBvc2l0aW9uIiwib25DbG9zZVVJIiwib25DbGlja0Nsb3NlIiwiaGlkZU1haW5VSSIsInNldEFuaW1hdGlvbiIsInNldFNpYmxpbmdJbmRleCIsIk1hdGgiLCJtaW4iLCJtYXgiLCJzZXRDb21wbGV0ZUxpc3RlbmVyIiwiYWRkQW5pbWF0aW9uIiwiYWN0aXZlIiwiZ2V0SXRlbU51bSIsInN0cmluZyIsImZvcm1hdEl0ZW1OdW0iLCJjaGVja1Bvd2VySW5mbyIsImNoZWNrUG93ZXJTaG93Iiwib25DbGlja0J1eVBvd2VyIiwiVUlGcm9tVHlwZSIsIm9uQ2xpY2tCdXlDb2luIiwib25DbGlja0J1eURpYW1vbmQiLCJvbkF1dG9DaGFuZ2VQYWdlIl0sIm1hcHBpbmdzIjoiOzs7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QXdWTEMsY0FBYyxFQUFFLDBCQUFZO0lBQ3hCLElBQUksS0FBS2hELFNBQUwsSUFBa0I3RixFQUFFLENBQUNDLE1BQUgsQ0FBVUUsSUFBaEMsRUFBc0M7TUFDbEMsS0FBSzRGLGdCQUFMLEdBQXdCLENBQXhCO01BQ0EsS0FBS0gsWUFBTCxHQUFvQixDQUFDLENBQXJCO01BQ0EsS0FBS0MsU0FBTCxHQUFpQjdGLEVBQUUsQ0FBQ0MsTUFBSCxDQUFVRSxJQUEzQjtNQUNBLEtBQUsrRixZQUFMO0lBQ0gsQ0FMRCxNQUtPO01BQ0gsSUFBSWxHLEVBQUUsQ0FBQ3NDLE1BQVAsRUFBZTtRQUNYdEMsRUFBRSxDQUFDc0MsTUFBSCxDQUFVb0UsWUFBVjtNQUNIO0lBQ0o7RUFDSixDQW5XSTtFQW9XTG9DLGlCQUFpQixFQUFFLDZCQUFZO0lBQzNCLElBQUksS0FBS2pELFNBQUwsSUFBa0I3RixFQUFFLENBQUNDLE1BQUgsQ0FBVUUsSUFBaEMsRUFBc0M7TUFDbEMsS0FBSzRGLGdCQUFMLEdBQXdCLENBQXhCO01BQ0EsS0FBS0gsWUFBTCxHQUFvQixDQUFDLENBQXJCO01BQ0EsS0FBS0MsU0FBTCxHQUFpQjdGLEVBQUUsQ0FBQ0MsTUFBSCxDQUFVRSxJQUEzQjtNQUNBLEtBQUsrRixZQUFMO0lBQ0gsQ0FMRCxNQUtPO01BQ0gsSUFBSWxHLEVBQUUsQ0FBQ3NDLE1BQVAsRUFBZTtRQUNYdEMsRUFBRSxDQUFDc0MsTUFBSCxDQUFVcUUsZUFBVjtNQUNIO0lBQ0o7RUFDSixDQS9XSTtFQWdYTG9DLGdCQUFnQixFQUFFLDBCQUFVckgsQ0FBVixFQUFhO0lBQzNCLEtBQUtxRSxnQkFBTCxHQUF3QixDQUF4QjtJQUNBLEtBQUtILFlBQUwsR0FBb0IsQ0FBQyxDQUFyQjtJQUNBLEtBQUtDLFNBQUwsR0FBaUJuRSxDQUFqQjtJQUNBLEtBQUt3RSxZQUFMO0VBQ0g7QUFyWEksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuVUlQYWdlID0gY2MuRW51bSh7XG4gICAgU2hvcDogMSxcbiAgICBSYW5rOiAyLFxuICAgIEJhdHRsZTogMyxcbiAgICBUb29sOiA0LFxuICAgIEZ1YmVuOiA1XG59KTtcbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBiZ011c2ljOiBjYy5BdWRpb0NsaXAsXG4gICAgICAgIGx2VXBTb3VuZDogY2MuQXVkaW9DbGlwLFxuICAgICAgICByZXdhcmRTb3VuZDogY2MuQXVkaW9DbGlwLFxuICAgICAgICBjb2luTGFiZWw6IGNjLkxhYmVsLFxuICAgICAgICBkaWFtb25kTGFiZWw6IGNjLkxhYmVsLFxuICAgICAgICBwb3dlclBhbmVsOiBjYy5Ob2RlLFxuICAgICAgICBidG5Ob2RlTGlzdDogW2NjLk5vZGVdLFxuICAgICAgICBtYWluUGFnZVBhbmVsOiBjYy5Ob2RlLFxuICAgICAgICBzcGluZUxpc3Q6IFtzcC5Ta2VsZXRvbl1cbiAgICB9LFxuICAgIGdldEl0ZW1FZmZlY3RQb3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5JdGVtVHlwZVtcIumSu+efs1wiXTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaWFtb25kTGFiZWwubm9kZS5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MudjIoKSk7XG4gICAgICAgICAgICBjYXNlIGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi5L2T5YqbXCJdOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBvd2VySW5mby5wb3dlckxhYmVsLm5vZGUuY29udmVydFRvV29ybGRTcGFjZUFSKGNjLnYyKCkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb2luTGFiZWwubm9kZS5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MudjIoKSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjYy5NYWluQ29udHJvbCA9IHRoaXM7XG4gICAgfSxcbiAgICBjbGVhclVJQ2F0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2MuVUlTaG9wID0gbnVsbDtcbiAgICAgICAgY2MuVUlUb29sID0gbnVsbDtcbiAgICAgICAgY2MuVUlBY3RMZXZlbCA9IG51bGw7XG4gICAgICAgIGNjLlVJUmFua01vZGUgPSBudWxsO1xuICAgIH0sXG4gICAgc3RhcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBjb25zb2xlLmxvZyhcIiAgU3RhcnQgTWFpbkNvbnRyb2wgXCIpO1xuICAgICAgICBjYy5SZWRDb250cm9sLnJlZnJlc2hBbGxSZWRUaXAoKTtcbiAgICAgICAgdGhpcy5wb3dlckluZm8gPSB0aGlzLnBvd2VyUGFuZWwuZ2V0Q29tcG9uZW50KFwiUG93ZXJJbmZvXCIpO1xuICAgICAgICB0aGlzLnVwZGF0ZVBvd2VySW5mbygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUl0ZW1JbmZvKCk7XG4gICAgICAgIHRoaXMuY2xlYXJVSUNhdGNoKCk7XG4gICAgICAgIHRoaXMuaW5pdE1haW5Db250cm9sKCk7XG4gICAgICAgIGNjLmJ1dGxlci5wbGF5TXVzaWModGhpcy5iZ011c2ljKTtcbiAgICAgICAgaWYgKDEgIT0gY2MucGxheWVyLmd1aWRlMSkge1xuICAgICAgICAgICAgY2MudGVtcEd1aWRlSW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmJ0bk5vZGVMaXN0WzNdO1xuICAgICAgICAgICAgY2MuZ3VpZGVNYW5hZ2VyLnNob3dHdWlkZShcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlwOiBcIui/m+WFpeinkuiJsuWNh+e6p+aLpeacieeahOWNoeearuW3tOaLiVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6IHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBidG46IHQubmFtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2MudGVtcEd1aWRlSW5kZXggPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCkgPiBjYy5wdnouR2FtZUNvbmZpZy5PcGVuU3lzTHZbMV0pIHtcbiAgICAgICAgICAgICAgICBjYy5wdnouY2xvdWQubXlSYW5rKGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy50bXBTY29yZSA9IGkuaW5mby5zY29yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSAhPSBpLmluZm8ucmFua0xhc3RXZWVrICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFjYy5wbGF5ZXIucmFua1dlZWsgfHwgY2MucHZ6LnV0aWxzLmdldFN0YXJ0T2ZXZWVrKCkgPiBjYy5wbGF5ZXIucmFua1dlZWspXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5wb3B1cE1hbmFnZXIucG9wdXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmFua1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlJhbmtSZXdhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJVSVJhbmtSZXdhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWQ6ICExLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6ICEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuaW5mby5yYW5rTGFzdFdlZWssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudXBkYXRlSXRlbUluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUub25SYW5rUmV3YXJkU2hvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUub25SYW5rUmV3YXJkU2hvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUub25SYW5rUmV3YXJkU2hvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmFua1Jld2FyZFNob3duKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uUmFua1Jld2FyZFNob3duOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgaWYgKGNjLmhhc1BvcHVwVHlwZSkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjYy5wdnoucnVudGltZURhdGEuaGFzUHJlR2FtZSgpKSB7XG4gICAgICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnBvcHVwKFxuICAgICAgICAgICAgICAgICAgICBcIm1haW5VSVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxldmVsdGlwVUlcIixcbiAgICAgICAgICAgICAgICAgICAgXCJVSVByZUdhbWVcIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWQ6ICExLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6ICEwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUub25SYW5rUmV3YXJkU2hvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmNoZWNrQW5kUmVzZXRTaWduKCksXG4gICAgICAgICAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmdldFNpZ25EYXRhKCkuaXNSZXdhcmRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2MucHZ6LlBsYXllckRhdGEuaGFzUGFzdE9uZURheSgpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICFjYy5wbGF5ZXIuaXNTaGFyZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5wbGF5ZXIuYWRUaW1lcyA+PSA1ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNjLk1haW5VSS5vbkNsaWNrU2hhcmVVSSgpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNjLnBvcHVwTWFuYWdlci5wb3B1cChcIm1haW5VSVwiLCBcInNpZ25VSVwiLCBcIlVJU2lnblwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZDogITEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogITBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGluaXRNYWluQ29udHJvbDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzQ2hhbmdlQ2FyZCA9ICExO1xuICAgICAgICB0aGlzLmN1clN0YXR1cyA9IGNjLlVJUGFnZS5CYXR0bGU7XG4gICAgICAgIHRoaXMubGFzdFN0YXR1cyA9IHRoaXMuY3VyU3RhdHVzO1xuICAgICAgICB0aGlzLm9uU2hvcE9wZW5TdGF0dXMgPSAwO1xuICAgICAgICB0aGlzLmlzTG9ja1JhbmsgPSBjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCkgPD0gY2MucHZ6LkdhbWVDb25maWcuT3BlblN5c0x2WzFdO1xuICAgICAgICB0aGlzLmluaXRCdG5TdGF0dXMoKTtcbiAgICAgICAgaWYgKGNjLmhhc1BvcHVwVHlwZSA9PSBjYy5VSVBhZ2UuUmFuaykge1xuICAgICAgICAgICAgdGhpcy5pc0NoYW5nZUNhcmQgPSAhMDtcbiAgICAgICAgICAgIHRoaXMuY3VyU3RhdHVzID0gY2MuVUlQYWdlLlJhbms7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlUGFnZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNjLmhhc1BvcHVwVHlwZSA9PSBjYy5VSVBhZ2UuRnViZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hhbmdlQ2FyZCA9ICEwO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VyU3RhdHVzID0gY2MuVUlQYWdlLkZ1YmVuO1xuICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2VQYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQ2xpY2tQYWdlQnRuOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNDaGFuZ2VDYXJkKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHBhcnNlSW50KHQpO1xuICAgICAgICAgICAgaWYgKGkgPT0gY2MuVUlQYWdlLlJhbmsgJiYgY2MucHZ6LlBsYXllckRhdGEuZ2V0U3RhZ2VMZXZlbCgpIDw9IGNjLnB2ei5HYW1lQ29uZmlnLk9wZW5TeXNMdlsxXSkge1xuICAgICAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5zaG93VG9hc3QoXCLpgJrov4flhbPljaHnrKxcIiArIGNjLnB2ei5HYW1lQ29uZmlnLk9wZW5TeXNMdlsxXSArIFwi5YWz6Kej6ZSBXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPSB0aGlzLmN1clN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hvcE9wZW5TdGF0dXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2hhbmdlQ2FyZCA9ICEwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clN0YXR1cyA9IGk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2VQYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNoYW5nZVBhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vbkhpZGVQYWdlVUkoKTtcbiAgICAgICAgdGhpcy5vblNob3dQYWdlVUkoKTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUJ0bkFuaSgpO1xuICAgIH0sXG4gICAgb25TaG93UGFnZVVJOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5jdXJTdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgY2MuVUlQYWdlLlNob3A6XG4gICAgICAgICAgICAgICAgaWYgKGNjLlVJU2hvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYy5VSVNob3AuaW5pdEJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgxID09IHRoaXMub25TaG9wT3BlblN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2MuVUlTaG9wLm9uU2hvcFRvQ29pbigpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgMiA9PSB0aGlzLm9uU2hvcE9wZW5TdGF0dXMgJiYgY2MuVUlTaG9wLm9uU2hvcFRvRGlhbW9uZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkxvYWRNYWluUGFnZVVJKFwic2hvcFwiLCBcIlVJU2hvcFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2MucHZ6LlRBVXRpbHMudHJhY2tTeXN0ZW1VSSgxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY2MuVUlQYWdlLlJhbms6XG4gICAgICAgICAgICAgICAgaWYgKGNjLlVJUmFua01vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2MuVUlSYW5rTW9kZS5pbml0QnkoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTG9hZE1haW5QYWdlVUkoXCJSYW5rXCIsIFwiVUlSYW5rTW9kZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNjLlVJUGFnZS5CYXR0bGU6XG4gICAgICAgICAgICAgICAgY2MuTWFpblVJLnNob3dNYWluVUkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY2MuVUlQYWdlLlRvb2w6XG4gICAgICAgICAgICAgICAgaWYgKGNjLlVJVG9vbCkge1xuICAgICAgICAgICAgICAgICAgICBjYy5VSVRvb2wuaW5pdEJ5KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkxvYWRNYWluUGFnZVVJKFwicGxhbnRcIiwgXCJVSVRvb2xcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNjLnB2ei5UQVV0aWxzLnRyYWNrU3lzdGVtVUkoMik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNjLlVJUGFnZS5GdWJlbjpcbiAgICAgICAgICAgICAgICBpZiAoY2MuVUlBY3RMZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYy5VSUFjdExldmVsLmluaXRCeSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Mb2FkTWFpblBhZ2VVSShcIlRpYW96aGFuVUlcIiwgXCJVSUFjdExldmVsXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYy5wdnouVEFVdGlscy50cmFja1N5c3RlbVVJKDMpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkxvYWRNYWluUGFnZVVJOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICB2YXIgaSA9IHRoaXM7XG4gICAgICAgIGNjLmFzc2V0TWFuYWdlci5nZXRCdW5kbGUoXCJtYWluVUlcIikubG9hZChlLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChvLCBhKSB7XG4gICAgICAgICAgICBpZiAobykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicHJlZmFiTmFtZSBsb2FkIGVycm9yOiBcIiwgZSwgbyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjID0gY2MuaW5zdGFudGlhdGUoYSk7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBjLmdldENvbXBvbmVudCh0KTtcbiAgICAgICAgICAgICAgICBjLnBhcmVudCA9IGkubWFpblBhZ2VQYW5lbDtcbiAgICAgICAgICAgICAgICBjLnBvc2l0aW9uID0gY2MudjIoMCwgMCk7XG4gICAgICAgICAgICAgICAgcy5pbml0QnkoKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJVSVNob3BcIiA9PSB0ICYmIGNjLlVJU2hvcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PSBpLm9uU2hvcE9wZW5TdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLlVJU2hvcC5vblNob3BUb0NvaW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIDIgPT0gaS5vblNob3BPcGVuU3RhdHVzICYmIGNjLlVJU2hvcC5vblNob3BUb0RpYW1vbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBvbkhpZGVQYWdlVUk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmxhc3RTdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgY2MuVUlQYWdlLlNob3A6XG4gICAgICAgICAgICAgICAgY2MuVUlTaG9wLm9uQ2xvc2VVSSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjYy5VSVBhZ2UuUmFuazpcbiAgICAgICAgICAgICAgICBjYy5VSVJhbmtNb2RlLm9uQ2xpY2tDbG9zZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjYy5VSVBhZ2UuQmF0dGxlOlxuICAgICAgICAgICAgICAgIGNjLk1haW5VSS5oaWRlTWFpblVJKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNjLlVJUGFnZS5Ub29sOlxuICAgICAgICAgICAgICAgIGNjLlVJVG9vbC5vbkNsb3NlVUkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY2MuVUlQYWdlLkZ1YmVuOlxuICAgICAgICAgICAgICAgIGNjLlVJQWN0TGV2ZWwub25DbG9zZVVJKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGluaXRCdG5TdGF0dXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCA1OyBlKyspIHtcbiAgICAgICAgICAgIHZhciB0ID0gXCJcIjtcbiAgICAgICAgICAgIHZhciBpID0gZSArIDE7XG4gICAgICAgICAgICBpZiAoaSA8IHRoaXMuY3VyU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdCA9IFwiXzRfUlwiO1xuICAgICAgICAgICAgICAgIGkgPT0gY2MuVUlQYWdlLlJhbmsgJiYgdGhpcy5pc0xvY2tSYW5rICYmICh0ID0gXCJfNV9SXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3BpbmVMaXN0W2VdLnNldEFuaW1hdGlvbigwLCBcImFubml1XCIgKyBpICsgdCwgITEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA+IHRoaXMuY3VyU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgICh0ID0gXCJfNF9MXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9PSBjYy5VSVBhZ2UuUmFuayAmJiB0aGlzLmlzTG9ja1JhbmsgJiYgKHQgPSBcIl81X0xcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwaW5lTGlzdFtlXS5zZXRBbmltYXRpb24oMCwgXCJhbm5pdVwiICsgaSArIHQsICExKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwaW5lTGlzdFtlXS5zZXRBbmltYXRpb24oMCwgXCJhbm5pdVwiICsgaSArIFwiXzNcIiwgITApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGluZUxpc3RbZV0ubm9kZS5zZXRTaWJsaW5nSW5kZXgoNik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNoYW5nZUJ0bkFuaTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIHZhciB0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmICh0IDwgTWF0aC5taW4oZS5sYXN0U3RhdHVzLCBlLmN1clN0YXR1cykgfHwgdCA+IE1hdGgubWF4KGUubGFzdFN0YXR1cywgZS5jdXJTdGF0dXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ID09PSBlLmN1clN0YXR1cykge1xuICAgICAgICAgICAgICAgIHZhciBpID0gZS5zcGluZUxpc3RbdCAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgICAgIGlmIChlLmN1clN0YXR1cyA8IGUubGFzdFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBvID0gXCJSXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbyA9IFwiTFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpLnNldEFuaW1hdGlvbigwLCBcImFubml1XCIgKyB0ICsgXCJfMV9cIiArIG8sICExKTtcbiAgICAgICAgICAgICAgICBpLnNldENvbXBsZXRlTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpLnNldEFuaW1hdGlvbigwLCBcImFubml1XCIgKyB0ICsgXCJfM1wiLCAhMCk7XG4gICAgICAgICAgICAgICAgICAgIGUuaXNDaGFuZ2VDYXJkID0gITE7XG4gICAgICAgICAgICAgICAgICAgIGkuc2V0Q29tcGxldGVMaXN0ZW5lcihudWxsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpLm5vZGUuc2V0U2libGluZ0luZGV4KDYpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0ID09PSBlLmxhc3RTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYTtcbiAgICAgICAgICAgICAgICBpZiAoZS5jdXJTdGF0dXMgPiBlLmxhc3RTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IFwiUlwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGEgPSBcIkxcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5zcGluZUxpc3RbdCAtIDFdLnNldEFuaW1hdGlvbigwLCBcImFubml1XCIgKyB0ICsgXCJfMl9cIiArIGEsICExKTtcbiAgICAgICAgICAgICAgICBlLnNwaW5lTGlzdFt0IC0gMV0uYWRkQW5pbWF0aW9uKDAsIFwiYW5uaXVcIiArIHQgKyBcIl80X1wiICsgYSwgITEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgYztcbiAgICAgICAgICAgICAgICBpZiAoZS5jdXJTdGF0dXMgPiBlLmxhc3RTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IFwiUlwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBcIkxcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUuaXNMb2NrUmFuayAmJiB0ID09IGNjLlVJUGFnZS5SYW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuc3BpbmVMaXN0W3QgLSAxXS5zZXRBbmltYXRpb24oMCwgXCJhbm5pdVwiICsgdCArIFwiXzVfXCIgKyBjLCAhMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZS5zcGluZUxpc3RbdCAtIDFdLnNldEFuaW1hdGlvbigwLCBcImFubml1XCIgKyB0ICsgXCJfNF9cIiArIGMsICExKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDU7IGkrKykge1xuICAgICAgICAgICAgdChpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RTdGF0dXMgPSB0aGlzLmN1clN0YXR1cztcbiAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCA1OyBvKyspIHtcbiAgICAgICAgICAgIHRoaXMuYnRuTm9kZUxpc3Rbb10uYWN0aXZlID0gbyAhPT0gdGhpcy5jdXJTdGF0dXMgLSAxO1xuICAgICAgICAgICAgdGhpcy5idG5Ob2RlTGlzdFtvICsgNV0uYWN0aXZlID0gbyA9PT0gdGhpcy5jdXJTdGF0dXMgLSAxO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB1cGRhdGVJdGVtSW5mbzogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEl0ZW1OdW0oY2MucHZ6LkdhbWVDb25maWcuSXRlbVR5cGVbXCLph5HluIFcIl0pO1xuICAgICAgICB0aGlzLmNvaW5MYWJlbC5zdHJpbmcgPSBjYy5wdnoudXRpbHMuZm9ybWF0SXRlbU51bShlKTtcbiAgICAgICAgdmFyIHQgPSBjYy5wdnouUGxheWVyRGF0YS5nZXRJdGVtTnVtKGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi6ZK755+zXCJdKTtcbiAgICAgICAgdGhpcy5kaWFtb25kTGFiZWwuc3RyaW5nID0gY2MucHZ6LnV0aWxzLmZvcm1hdEl0ZW1OdW0odCk7XG4gICAgfSxcbiAgICB1cGRhdGVQb3dlckluZm86IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb3dlckluZm8udXBkYXRlUG93ZXJJbmZvKCk7XG4gICAgfSxcbiAgICBjaGVja1Bvd2VySW5mbzogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBvd2VySW5mby5jaGVja1Bvd2VyU2hvdygpO1xuICAgIH0sXG4gICAgb25DbGlja0J1eVBvd2VyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNjLnBvcHVwTWFuYWdlci5wb3B1cChcbiAgICAgICAgICAgIFwibWFpblVJXCIsXG4gICAgICAgICAgICBcInBvd2VyYnV5XCIsXG4gICAgICAgICAgICBcIlVJUG93ZXJCdXlcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhZDogITEsXG4gICAgICAgICAgICAgICAgc2NhbGU6ICEwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2MucHZ6LkdhbWVDb25maWcuVUlGcm9tVHlwZVtcIuS4u+eVjOmdolwiXVxuICAgICAgICApO1xuICAgIH0sXG4gICAgb25DbGlja0J1eUNvaW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VyU3RhdHVzICE9IGNjLlVJUGFnZS5TaG9wKSB7XG4gICAgICAgICAgICB0aGlzLm9uU2hvcE9wZW5TdGF0dXMgPSAxO1xuICAgICAgICAgICAgdGhpcy5pc0NoYW5nZUNhcmQgPSAhMDtcbiAgICAgICAgICAgIHRoaXMuY3VyU3RhdHVzID0gY2MuVUlQYWdlLlNob3A7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlUGFnZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNjLlVJU2hvcCkge1xuICAgICAgICAgICAgICAgIGNjLlVJU2hvcC5vblNob3BUb0NvaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja0J1eURpYW1vbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VyU3RhdHVzICE9IGNjLlVJUGFnZS5TaG9wKSB7XG4gICAgICAgICAgICB0aGlzLm9uU2hvcE9wZW5TdGF0dXMgPSAyO1xuICAgICAgICAgICAgdGhpcy5pc0NoYW5nZUNhcmQgPSAhMDtcbiAgICAgICAgICAgIHRoaXMuY3VyU3RhdHVzID0gY2MuVUlQYWdlLlNob3A7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlUGFnZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNjLlVJU2hvcCkge1xuICAgICAgICAgICAgICAgIGNjLlVJU2hvcC5vblNob3BUb0RpYW1vbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25BdXRvQ2hhbmdlUGFnZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5vblNob3BPcGVuU3RhdHVzID0gMDtcbiAgICAgICAgdGhpcy5pc0NoYW5nZUNhcmQgPSAhMDtcbiAgICAgICAgdGhpcy5jdXJTdGF0dXMgPSBlO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlUGFnZSgpO1xuICAgIH1cbn0pO1xuIl19