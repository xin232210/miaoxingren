
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/TaskItem.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '376ffOv2iZHC543+FSaS+sr', 'TaskItem');
// mainUI/scripts/TaskItem.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    rewardItem: cc.Node,
    finishNode: cc.Node,
    getNode: cc.Node,
    getPanel: cc.Node,
    goToNode: cc.Node,
    proBar: cc.ProgressBar,
    proLabel: cc.Label,
    descLabel: cc.Label
  },
  initMissionItem: function initMissionItem(e, t, i) {
    this.isDayMission = e;
    this.MissionJson = t;
    this.rewardBack = i;

    if (this.isDayMission) {
      this.MissionData = cc.pvz.PlayerData.getDayMissionData(this.MissionJson.func);
    } else {
      this.MissionData = cc.pvz.PlayerData.getWeekMissionData(this.MissionJson.func);
    }

    this.descLabel.string = this.MissionJson.desc;
    this.Func = this.MissionJson.func;
    this.rewardData = cc.pvz.utils.getRewardItem(this.MissionJson.reward[0], this.MissionJson.reward[1]);
    this.rewardItem.getComponent("RewardItem").initRewardItem(this.rewardData, !1);
    this.proBar.progress = this.MissionData.pro / this.MissionJson.need;
    var o = cc.pvz.utils.formatItemNum(this.MissionData.pro);
    var a = cc.pvz.utils.formatItemNum(this.MissionJson.need);
    this.proLabel.string = o + "/" + a;
    this.isFinish = this.MissionData.isReward;
    this.isCanReward = this.MissionJson.need <= this.MissionData.pro;
    this.finishNode.active = this.isFinish;
    this.goToNode.active = !this.isCanReward;
    this.getNode.active = this.isCanReward && !this.isFinish;
    this.getPanel.active = this.isCanReward && !this.isFinish;
  },
  initAchieveMissionItem: function initAchieveMissionItem(e, t) {
    this.rewardBack = t;
    this.Id = e;
    this.AchieveData = cc.pvz.PlayerData.getAchieveData(this.Id);
    this.achieveIndex = 100 * this.Id + this.AchieveData.lv;
    this.AchieveJson = cc.JsonControl.getAchieveJson(this.achieveIndex);
    this.AchieveProgress = cc.pvz.PlayerData.getAchieveProgress(this.AchieveJson.func);
    this.Func = this.AchieveJson.func;
    this.descLabel.string = this.AchieveJson.desc;
    this.rewardData = cc.pvz.utils.getRewardItem(this.AchieveJson.reward[0], this.AchieveJson.reward[1]);
    this.rewardItem.getComponent("RewardItem").initRewardItem(this.rewardData, !1);
    this.isFinish = this.AchieveData.end;
    this.isCanReward = this.AchieveJson.need[0] <= this.AchieveProgress;
    this.proBar.progress = this.AchieveProgress / this.AchieveJson.need[0];
    var i = cc.pvz.utils.formatItemNum(this.AchieveProgress);
    var o = cc.pvz.utils.formatItemNum(this.AchieveJson.need[0]);
    this.proLabel.string = i + "/" + o;
    this.finishNode.active = this.isFinish;
    this.goToNode.active = !this.isCanReward && !this.isFinish;
    this.getNode.active = this.isCanReward && !this.isFinish;
    this.getPanel.active = this.isCanReward && !this.isFinish;
  },
  finishRefresh: function finishRefresh() {
    this.isFinish = !0;
    this.finishNode.active = this.isFinish;
    this.goToNode.active = !1;
    this.getNode.active = !1;
    this.getPanel.active = !1;
    this.node.setSiblingIndex(this.node.parent.childrenCount - 1);
  },
  onClickGoto: function onClickGoto() {
    switch (this.Func) {
      case cc.pvz.GameConfig.MissionType["累计获得金币"]:
      case cc.pvz.GameConfig.MissionType["累计消耗钻石"]:
      case cc.pvz.GameConfig.MissionType["每日商店购买n次物品"]:
      case cc.pvz.GameConfig.MissionType["高级宝箱抽取装备n次"]:
      case cc.pvz.GameConfig.MissionType["观看广告n次"]:
        cc.UITask.onCloseUI();
        cc.MainControl.onAutoChangePage(cc.UIPage.Shop);
        break;

      case cc.pvz.GameConfig.MissionType["参与挑战关卡n次"]:
      case cc.pvz.GameConfig.MissionType["通关挑战关卡n次"]:
        cc.UITask.onCloseUI();
        cc.MainControl.onAutoChangePage(cc.UIPage.Fuben);
        break;

      case cc.pvz.GameConfig.MissionType["参与无尽挑战赛N次"]:
        cc.UITask.onCloseUI();
        cc.MainControl.onAutoChangePage(cc.UIPage.Rank);
        break;

      case cc.pvz.GameConfig.MissionType["挑战主线章节1次"]:
      case cc.pvz.GameConfig.MissionType["扫荡关卡n次"]:
      case cc.pvz.GameConfig.MissionType["购买体力n次"]:
      case cc.pvz.GameConfig.MissionType["通关主线副本n次"]:
      case cc.pvz.GameConfig.MissionType["通过主线章节n"]:
      case cc.pvz.GameConfig.MissionType["击败僵尸n个"]:
      case cc.pvz.GameConfig.MissionType["击败首领n个"]:
        cc.UITask.onCloseUI();
        cc.MainControl.onAutoChangePage(cc.UIPage.Battle);
        break;

      case cc.pvz.GameConfig.MissionType["装备最高等级达到n"]:
      case cc.pvz.GameConfig.MissionType["装备总等级n"]:
      case cc.pvz.GameConfig.MissionType["升级任意装备1次"]:
        cc.UITask.onCloseUI();
        cc.MainControl.onAutoChangePage(cc.UIPage.Tool);
        break;

      default:
        cc.UITask.onCloseUI();
    }
  },
  onClickAchieveReward: function onClickAchieveReward() {
    if (!this.isFinish && this.isCanReward) {
      cc.pvz.PlayerData.updateAchieveData(this.Id, 1);
      cc.popupManager.popup("mainUI", "getrewardUI", "UIReward", {
        ad: !1,
        scale: !1
      }, [this.rewardData], cc.pvz.GameConfig.UIFromType["成就"], this.rewardBack);
      this.initAchieveMissionItem(this.Id, this.rewardBack);

      if (!this.isFinish && this.isCanReward) {//
      } else {
        this.node.setSiblingIndex(this.node.parent.childrenCount - 1);
      }
    }
  },
  onClickReward: function onClickReward() {
    if (!this.isFinish && this.isCanReward) {
      cc.pvz.PlayerData.changeItemNum(this.MissionJson.reward[0], this.MissionJson.reward[1]);
      this.finishRefresh();

      if (this.isDayMission) {
        cc.pvz.PlayerData.finishDayMission(this.MissionJson.func);
      } else {
        cc.pvz.PlayerData.finishWeekMission(this.MissionJson.func);
      }

      if (this.rewardBack) {
        this.rewardBack();
      }

      var e;

      if (this.isDayMission) {
        e = cc.pvz.GameConfig.ItemType["日常任务积分"];
      } else {
        e = cc.pvz.GameConfig.ItemType["周常任务积分"];
      }

      var t = cc.math.randomRangeInt(1, 4);
      cc.popupManager.showEffectFly(e, cc.UITask.scoreLabel.node.convertToWorldSpaceAR(cc.v2()), t);
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9UYXNrSXRlbS5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInJld2FyZEl0ZW0iLCJOb2RlIiwiZmluaXNoTm9kZSIsImdldE5vZGUiLCJnZXRQYW5lbCIsImdvVG9Ob2RlIiwicHJvQmFyIiwiUHJvZ3Jlc3NCYXIiLCJwcm9MYWJlbCIsIkxhYmVsIiwiZGVzY0xhYmVsIiwiaW5pdE1pc3Npb25JdGVtIiwiZSIsInQiLCJpIiwiaXNEYXlNaXNzaW9uIiwiTWlzc2lvbkpzb24iLCJyZXdhcmRCYWNrIiwiTWlzc2lvbkRhdGEiLCJwdnoiLCJQbGF5ZXJEYXRhIiwiZ2V0RGF5TWlzc2lvbkRhdGEiLCJmdW5jIiwiZ2V0V2Vla01pc3Npb25EYXRhIiwic3RyaW5nIiwiZGVzYyIsIkZ1bmMiLCJyZXdhcmREYXRhIiwidXRpbHMiLCJnZXRSZXdhcmRJdGVtIiwicmV3YXJkIiwiZ2V0Q29tcG9uZW50IiwiaW5pdFJld2FyZEl0ZW0iLCJwcm9ncmVzcyIsInBybyIsIm5lZWQiLCJvIiwiZm9ybWF0SXRlbU51bSIsImEiLCJpc0ZpbmlzaCIsImlzUmV3YXJkIiwiaXNDYW5SZXdhcmQiLCJhY3RpdmUiLCJpbml0QWNoaWV2ZU1pc3Npb25JdGVtIiwiSWQiLCJBY2hpZXZlRGF0YSIsImdldEFjaGlldmVEYXRhIiwiYWNoaWV2ZUluZGV4IiwibHYiLCJBY2hpZXZlSnNvbiIsIkpzb25Db250cm9sIiwiZ2V0QWNoaWV2ZUpzb24iLCJBY2hpZXZlUHJvZ3Jlc3MiLCJnZXRBY2hpZXZlUHJvZ3Jlc3MiLCJlbmQiLCJmaW5pc2hSZWZyZXNoIiwibm9kZSIsInNldFNpYmxpbmdJbmRleCIsInBhcmVudCIsImNoaWxkcmVuQ291bnQiLCJvbkNsaWNrR290byIsIkdhbWVDb25maWciLCJNaXNzaW9uVHlwZSIsIlVJVGFzayIsIm9uQ2xvc2VVSSIsIk1haW5Db250cm9sIiwib25BdXRvQ2hhbmdlUGFnZSIsIlVJUGFnZSIsIlNob3AiLCJGdWJlbiIsIlJhbmsiLCJCYXR0bGUiLCJUb29sIiwib25DbGlja0FjaGlldmVSZXdhcmQiLCJ1cGRhdGVBY2hpZXZlRGF0YSIsInBvcHVwTWFuYWdlciIsInBvcHVwIiwiYWQiLCJzY2FsZSIsIlVJRnJvbVR5cGUiLCJvbkNsaWNrUmV3YXJkIiwiY2hhbmdlSXRlbU51bSIsImZpbmlzaERheU1pc3Npb24iLCJmaW5pc2hXZWVrTWlzc2lvbiIsIkl0ZW1UeXBlIiwibWF0aCIsInJhbmRvbVJhbmdlSW50Iiwic2hvd0VmZmVjdEZseSIsInNjb3JlTGFiZWwiLCJjb252ZXJ0VG9Xb3JsZFNwYWNlQVIiLCJ2MiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7RUFDTCxXQUFTRCxFQUFFLENBQUNFLFNBRFA7RUFFTEMsVUFBVSxFQUFFO0lBQ1JDLFVBQVUsRUFBRUosRUFBRSxDQUFDSyxJQURQO0lBRVJDLFVBQVUsRUFBRU4sRUFBRSxDQUFDSyxJQUZQO0lBR1JFLE9BQU8sRUFBRVAsRUFBRSxDQUFDSyxJQUhKO0lBSVJHLFFBQVEsRUFBRVIsRUFBRSxDQUFDSyxJQUpMO0lBS1JJLFFBQVEsRUFBRVQsRUFBRSxDQUFDSyxJQUxMO0lBTVJLLE1BQU0sRUFBRVYsRUFBRSxDQUFDVyxXQU5IO0lBT1JDLFFBQVEsRUFBRVosRUFBRSxDQUFDYSxLQVBMO0lBUVJDLFNBQVMsRUFBRWQsRUFBRSxDQUFDYTtFQVJOLENBRlA7RUFZTEUsZUFBZSxFQUFFLHlCQUFVQyxDQUFWLEVBQWFDLENBQWIsRUFBZ0JDLENBQWhCLEVBQW1CO0lBQ2hDLEtBQUtDLFlBQUwsR0FBb0JILENBQXBCO0lBQ0EsS0FBS0ksV0FBTCxHQUFtQkgsQ0FBbkI7SUFDQSxLQUFLSSxVQUFMLEdBQWtCSCxDQUFsQjs7SUFDQSxJQUFJLEtBQUtDLFlBQVQsRUFBdUI7TUFDbkIsS0FBS0csV0FBTCxHQUFtQnRCLEVBQUUsQ0FBQ3VCLEdBQUgsQ0FBT0Ms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UUFDbkJILENBQUMsR0FBR2hCLEVBQUUsQ0FBQ3VCLEdBQUgsQ0FBTzBDLFVBQVAsQ0FBa0J1QixRQUFsQixDQUEyQixRQUEzQixDQUFKO01BQ0gsQ0FGRCxNQUVPO1FBQ0h4RSxDQUFDLEdBQUdoQixFQUFFLENBQUN1QixHQUFILENBQU8wQyxVQUFQLENBQWtCdUIsUUFBbEIsQ0FBMkIsUUFBM0IsQ0FBSjtNQUNIOztNQUNELElBQUl2RSxDQUFDLEdBQUdqQixFQUFFLENBQUN5RixJQUFILENBQVFDLGNBQVIsQ0FBdUIsQ0FBdkIsRUFBMEIsQ0FBMUIsQ0FBUjtNQUNBMUYsRUFBRSxDQUFDK0UsWUFBSCxDQUFnQlksYUFBaEIsQ0FBOEIzRSxDQUE5QixFQUFpQ2hCLEVBQUUsQ0FBQ21FLE1BQUgsQ0FBVXlCLFVBQVYsQ0FBcUJoQyxJQUFyQixDQUEwQmlDLHFCQUExQixDQUFnRDdGLEVBQUUsQ0FBQzhGLEVBQUgsRUFBaEQsQ0FBakMsRUFBMkY3RSxDQUEzRjtJQUNIO0VBQ0o7QUFySkksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHJld2FyZEl0ZW06IGNjLk5vZGUsXG4gICAgICAgIGZpbmlzaE5vZGU6IGNjLk5vZGUsXG4gICAgICAgIGdldE5vZGU6IGNjLk5vZGUsXG4gICAgICAgIGdldFBhbmVsOiBjYy5Ob2RlLFxuICAgICAgICBnb1RvTm9kZTogY2MuTm9kZSxcbiAgICAgICAgcHJvQmFyOiBjYy5Qcm9ncmVzc0JhcixcbiAgICAgICAgcHJvTGFiZWw6IGNjLkxhYmVsLFxuICAgICAgICBkZXNjTGFiZWw6IGNjLkxhYmVsXG4gICAgfSxcbiAgICBpbml0TWlzc2lvbkl0ZW06IGZ1bmN0aW9uIChlLCB0LCBpKSB7XG4gICAgICAgIHRoaXMuaXNEYXlNaXNzaW9uID0gZTtcbiAgICAgICAgdGhpcy5NaXNzaW9uSnNvbiA9IHQ7XG4gICAgICAgIHRoaXMucmV3YXJkQmFjayA9IGk7XG4gICAgICAgIGlmICh0aGlzLmlzRGF5TWlzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5NaXNzaW9uRGF0YSA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldERheU1pc3Npb25EYXRhKHRoaXMuTWlzc2lvbkpzb24uZnVuYyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLk1pc3Npb25EYXRhID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0V2Vla01pc3Npb25EYXRhKHRoaXMuTWlzc2lvbkpzb24uZnVuYyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXNjTGFiZWwuc3RyaW5nID0gdGhpcy5NaXNzaW9uSnNvbi5kZXNjO1xuICAgICAgICB0aGlzLkZ1bmMgPSB0aGlzLk1pc3Npb25Kc29uLmZ1bmM7XG4gICAgICAgIHRoaXMucmV3YXJkRGF0YSA9IGNjLnB2ei51dGlscy5nZXRSZXdhcmRJdGVtKHRoaXMuTWlzc2lvbkpzb24ucmV3YXJkWzBdLCB0aGlzLk1pc3Npb25Kc29uLnJld2FyZFsxXSk7XG4gICAgICAgIHRoaXMucmV3YXJkSXRlbS5nZXRDb21wb25lbnQoXCJSZXdhcmRJdGVtXCIpLmluaXRSZXdhcmRJdGVtKHRoaXMucmV3YXJkRGF0YSwgITEpO1xuICAgICAgICB0aGlzLnByb0Jhci5wcm9ncmVzcyA9IHRoaXMuTWlzc2lvbkRhdGEucHJvIC8gdGhpcy5NaXNzaW9uSnNvbi5uZWVkO1xuICAgICAgICB2YXIgbyA9IGNjLnB2ei51dGlscy5mb3JtYXRJdGVtTnVtKHRoaXMuTWlzc2lvbkRhdGEucHJvKTtcbiAgICAgICAgdmFyIGEgPSBjYy5wdnoudXRpbHMuZm9ybWF0SXRlbU51bSh0aGlzLk1pc3Npb25Kc29uLm5lZWQpO1xuICAgICAgICB0aGlzLnByb0xhYmVsLnN0cmluZyA9IG8gKyBcIi9cIiArIGE7XG4gICAgICAgIHRoaXMuaXNGaW5pc2ggPSB0aGlzLk1pc3Npb25EYXRhLmlzUmV3YXJkO1xuICAgICAgICB0aGlzLmlzQ2FuUmV3YXJkID0gdGhpcy5NaXNzaW9uSnNvbi5uZWVkIDw9IHRoaXMuTWlzc2lvbkRhdGEucHJvO1xuICAgICAgICB0aGlzLmZpbmlzaE5vZGUuYWN0aXZlID0gdGhpcy5pc0ZpbmlzaDtcbiAgICAgICAgdGhpcy5nb1RvTm9kZS5hY3RpdmUgPSAhdGhpcy5pc0NhblJld2FyZDtcbiAgICAgICAgdGhpcy5nZXROb2RlLmFjdGl2ZSA9IHRoaXMuaXNDYW5SZXdhcmQgJiYgIXRoaXMuaXNGaW5pc2g7XG4gICAgICAgIHRoaXMuZ2V0UGFuZWwuYWN0aXZlID0gdGhpcy5pc0NhblJld2FyZCAmJiAhdGhpcy5pc0ZpbmlzaDtcbiAgICB9LFxuICAgIGluaXRBY2hpZXZlTWlzc2lvbkl0ZW06IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHRoaXMucmV3YXJkQmFjayA9IHQ7XG4gICAgICAgIHRoaXMuSWQgPSBlO1xuICAgICAgICB0aGlzLkFjaGlldmVEYXRhID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0QWNoaWV2ZURhdGEodGhpcy5JZCk7XG4gICAgICAgIHRoaXMuYWNoaWV2ZUluZGV4ID0gMTAwICogdGhpcy5JZCArIHRoaXMuQWNoaWV2ZURhdGEubHY7XG4gICAgICAgIHRoaXMuQWNoaWV2ZUpzb24gPSBjYy5Kc29uQ29udHJvbC5nZXRBY2hpZXZlSnNvbih0aGlzLmFjaGlldmVJbmRleCk7XG4gICAgICAgIHRoaXMuQWNoaWV2ZVByb2dyZXNzID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0QWNoaWV2ZVByb2dyZXNzKHRoaXMuQWNoaWV2ZUpzb24uZnVuYyk7XG4gICAgICAgIHRoaXMuRnVuYyA9IHRoaXMuQWNoaWV2ZUpzb24uZnVuYztcbiAgICAgICAgdGhpcy5kZXNjTGFiZWwuc3RyaW5nID0gdGhpcy5BY2hpZXZlSnNvbi5kZXNjO1xuICAgICAgICB0aGlzLnJld2FyZERhdGEgPSBjYy5wdnoudXRpbHMuZ2V0UmV3YXJkSXRlbSh0aGlzLkFjaGlldmVKc29uLnJld2FyZFswXSwgdGhpcy5BY2hpZXZlSnNvbi5yZXdhcmRbMV0pO1xuICAgICAgICB0aGlzLnJld2FyZEl0ZW0uZ2V0Q29tcG9uZW50KFwiUmV3YXJkSXRlbVwiKS5pbml0UmV3YXJkSXRlbSh0aGlzLnJld2FyZERhdGEsICExKTtcbiAgICAgICAgdGhpcy5pc0ZpbmlzaCA9IHRoaXMuQWNoaWV2ZURhdGEuZW5kO1xuICAgICAgICB0aGlzLmlzQ2FuUmV3YXJkID0gdGhpcy5BY2hpZXZlSnNvbi5uZWVkWzBdIDw9IHRoaXMuQWNoaWV2ZVByb2dyZXNzO1xuICAgICAgICB0aGlzLnByb0Jhci5wcm9ncmVzcyA9IHRoaXMuQWNoaWV2ZVByb2dyZXNzIC8gdGhpcy5BY2hpZXZlSnNvbi5uZWVkWzBdO1xuICAgICAgICB2YXIgaSA9IGNjLnB2ei51dGlscy5mb3JtYXRJdGVtTnVtKHRoaXMuQWNoaWV2ZVByb2dyZXNzKTtcbiAgICAgICAgdmFyIG8gPSBjYy5wdnoudXRpbHMuZm9ybWF0SXRlbU51bSh0aGlzLkFjaGlldmVKc29uLm5lZWRbMF0pO1xuICAgICAgICB0aGlzLnByb0xhYmVsLnN0cmluZyA9IGkgKyBcIi9cIiArIG87XG4gICAgICAgIHRoaXMuZmluaXNoTm9kZS5hY3RpdmUgPSB0aGlzLmlzRmluaXNoO1xuICAgICAgICB0aGlzLmdvVG9Ob2RlLmFjdGl2ZSA9ICF0aGlzLmlzQ2FuUmV3YXJkICYmICF0aGlzLmlzRmluaXNoO1xuICAgICAgICB0aGlzLmdldE5vZGUuYWN0aXZlID0gdGhpcy5pc0NhblJld2FyZCAmJiAhdGhpcy5pc0ZpbmlzaDtcbiAgICAgICAgdGhpcy5nZXRQYW5lbC5hY3RpdmUgPSB0aGlzLmlzQ2FuUmV3YXJkICYmICF0aGlzLmlzRmluaXNoO1xuICAgIH0sXG4gICAgZmluaXNoUmVmcmVzaDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzRmluaXNoID0gITA7XG4gICAgICAgIHRoaXMuZmluaXNoTm9kZS5hY3RpdmUgPSB0aGlzLmlzRmluaXNoO1xuICAgICAgICB0aGlzLmdvVG9Ob2RlLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmdldE5vZGUuYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMuZ2V0UGFuZWwuYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMubm9kZS5zZXRTaWJsaW5nSW5kZXgodGhpcy5ub2RlLnBhcmVudC5jaGlsZHJlbkNvdW50IC0gMSk7XG4gICAgfSxcbiAgICBvbkNsaWNrR290bzogZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuRnVuYykge1xuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIue0r+iuoeiOt+W+l+mHkeW4gVwiXTpcbiAgICAgICAgICAgIGNhc2UgY2MucHZ6LkdhbWVDb25maWcuTWlzc2lvblR5cGVbXCLntK/orqHmtojogJfpkrvnn7NcIl06XG4gICAgICAgICAgICBjYXNlIGNjLnB2ei5HYW1lQ29uZmlnLk1pc3Npb25UeXBlW1wi5q+P5pel5ZWG5bqX6LSt5LmwbuasoeeJqeWTgVwiXTpcbiAgICAgICAgICAgIGNhc2UgY2MucHZ6LkdhbWVDb25maWcuTWlzc2lvblR5cGVbXCLpq5jnuqflrp3nrrHmir3lj5boo4XlpIdu5qyhXCJdOlxuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIuingueci+W5v+WRim7mrKFcIl06XG4gICAgICAgICAgICAgICAgY2MuVUlUYXNrLm9uQ2xvc2VVSSgpO1xuICAgICAgICAgICAgICAgIGNjLk1haW5Db250cm9sLm9uQXV0b0NoYW5nZVBhZ2UoY2MuVUlQYWdlLlNob3ApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIuWPguS4juaMkeaImOWFs+WNoW7mrKFcIl06XG4gICAgICAgICAgICBjYXNlIGNjLnB2ei5HYW1lQ29uZmlnLk1pc3Npb25UeXBlW1wi6YCa5YWz5oyR5oiY5YWz5Y2hbuasoVwiXTpcbiAgICAgICAgICAgICAgICBjYy5VSVRhc2sub25DbG9zZVVJKCk7XG4gICAgICAgICAgICAgICAgY2MuTWFpbkNvbnRyb2wub25BdXRvQ2hhbmdlUGFnZShjYy5VSVBhZ2UuRnViZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIuWPguS4juaXoOWwveaMkeaImOi1m07mrKFcIl06XG4gICAgICAgICAgICAgICAgY2MuVUlUYXNrLm9uQ2xvc2VVSSgpO1xuICAgICAgICAgICAgICAgIGNjLk1haW5Db250cm9sLm9uQXV0b0NoYW5nZVBhZ2UoY2MuVUlQYWdlLlJhbmspO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIuaMkeaImOS4u+e6v+eroOiKgjHmrKFcIl06XG4gICAgICAgICAgICBjYXNlIGNjLnB2ei5HYW1lQ29uZmlnLk1pc3Npb25UeXBlW1wi5omr6I2h5YWz5Y2hbuasoVwiXTpcbiAgICAgICAgICAgIGNhc2UgY2MucHZ6LkdhbWVDb25maWcuTWlzc2lvblR5cGVbXCLotK3kubDkvZPliptu5qyhXCJdOlxuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIumAmuWFs+S4u+e6v+WJr+acrG7mrKFcIl06XG4gICAgICAgICAgICBjYXNlIGNjLnB2ei5HYW1lQ29uZmlnLk1pc3Npb25UeXBlW1wi6YCa6L+H5Li757q/56ug6IqCblwiXTpcbiAgICAgICAgICAgIGNhc2UgY2MucHZ6LkdhbWVDb25maWcuTWlzc2lvblR5cGVbXCLlh7votKXlg7XlsLhu5LiqXCJdOlxuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIuWHu+i0pemmlumihm7kuKpcIl06XG4gICAgICAgICAgICAgICAgY2MuVUlUYXNrLm9uQ2xvc2VVSSgpO1xuICAgICAgICAgICAgICAgIGNjLk1haW5Db250cm9sLm9uQXV0b0NoYW5nZVBhZ2UoY2MuVUlQYWdlLkJhdHRsZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNjLnB2ei5HYW1lQ29uZmlnLk1pc3Npb25UeXBlW1wi6KOF5aSH5pyA6auY562J57qn6L6+5YiwblwiXTpcbiAgICAgICAgICAgIGNhc2UgY2MucHZ6LkdhbWVDb25maWcuTWlzc2lvblR5cGVbXCLoo4XlpIfmgLvnrYnnuqduXCJdOlxuICAgICAgICAgICAgY2FzZSBjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIuWNh+e6p+S7u+aEj+ijheWkhzHmrKFcIl06XG4gICAgICAgICAgICAgICAgY2MuVUlUYXNrLm9uQ2xvc2VVSSgpO1xuICAgICAgICAgICAgICAgIGNjLk1haW5Db250cm9sLm9uQXV0b0NoYW5nZVBhZ2UoY2MuVUlQYWdlLlRvb2wpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjYy5VSVRhc2sub25DbG9zZVVJKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQ2xpY2tBY2hpZXZlUmV3YXJkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0ZpbmlzaCAmJiB0aGlzLmlzQ2FuUmV3YXJkKSB7XG4gICAgICAgICAgICBjYy5wdnouUGxheWVyRGF0YS51cGRhdGVBY2hpZXZlRGF0YSh0aGlzLklkLCAxKTtcbiAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5wb3B1cChcbiAgICAgICAgICAgICAgICBcIm1haW5VSVwiLFxuICAgICAgICAgICAgICAgIFwiZ2V0cmV3YXJkVUlcIixcbiAgICAgICAgICAgICAgICBcIlVJUmV3YXJkXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhZDogITEsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiAhMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW3RoaXMucmV3YXJkRGF0YV0sXG4gICAgICAgICAgICAgICAgY2MucHZ6LkdhbWVDb25maWcuVUlGcm9tVHlwZVtcIuaIkOWwsVwiXSxcbiAgICAgICAgICAgICAgICB0aGlzLnJld2FyZEJhY2tcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmluaXRBY2hpZXZlTWlzc2lvbkl0ZW0odGhpcy5JZCwgdGhpcy5yZXdhcmRCYWNrKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ZpbmlzaCAmJiB0aGlzLmlzQ2FuUmV3YXJkKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLnNldFNpYmxpbmdJbmRleCh0aGlzLm5vZGUucGFyZW50LmNoaWxkcmVuQ291bnQgLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja1Jld2FyZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNGaW5pc2ggJiYgdGhpcy5pc0NhblJld2FyZCkge1xuICAgICAgICAgICAgY2MucHZ6LlBsYXllckRhdGEuY2hhbmdlSXRlbU51bSh0aGlzLk1pc3Npb25Kc29uLnJld2FyZFswXSwgdGhpcy5NaXNzaW9uSnNvbi5yZXdhcmRbMV0pO1xuICAgICAgICAgICAgdGhpcy5maW5pc2hSZWZyZXNoKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RheU1pc3Npb24pIHtcbiAgICAgICAgICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5maW5pc2hEYXlNaXNzaW9uKHRoaXMuTWlzc2lvbkpzb24uZnVuYyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmZpbmlzaFdlZWtNaXNzaW9uKHRoaXMuTWlzc2lvbkpzb24uZnVuYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5yZXdhcmRCYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXdhcmRCYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGF5TWlzc2lvbikge1xuICAgICAgICAgICAgICAgIGUgPSBjYy5wdnouR2FtZUNvbmZpZy5JdGVtVHlwZVtcIuaXpeW4uOS7u+WKoeenr+WIhlwiXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZSA9IGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi5ZGo5bi45Lu75Yqh56ev5YiGXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHQgPSBjYy5tYXRoLnJhbmRvbVJhbmdlSW50KDEsIDQpO1xuICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnNob3dFZmZlY3RGbHkoZSwgY2MuVUlUYXNrLnNjb3JlTGFiZWwubm9kZS5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MudjIoKSksIHQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXX0=