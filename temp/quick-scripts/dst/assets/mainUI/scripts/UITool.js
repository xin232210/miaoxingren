
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/UITool.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '608d17HJiJFJa+OLsyNRs1l', 'UITool');
// mainUI/scripts/UITool.js

"use strict";

var $toolCard = require("./ToolCard");

cc.Class({
  "extends": cc.Component,
  properties: {
    topTools: cc.Node,
    scrollPanel: cc.ScrollView,
    replaceRoot: cc.Node,
    baseToolCard: cc.Node,
    openPanel: cc.Node,
    openTip: cc.Node,
    line: cc.Node,
    baseLockCard: cc.Node,
    lockPanel: cc.Node,
    replaceItem: $toolCard,
    lockList: [cc.Node],
    lockTops: [cc.Sprite]
  },
  onLoad: function onLoad() {
    cc.UITool = this;
    this.scrollPanel.node.active = !0;
    this.replaceRoot.active = !1;
  },
  initBy: function initBy() {
    var e = this;
    cc.pvz.utils.fadeInBtn(this.node);
    this.node.active = !0;
    this.isChangeArray = !1;
    this.refreshLockArrayShow();
    this.initToolItemData();

    if (1 == cc.tempGuideIndex) {
      setTimeout(function () {
        var t = e.topTools.children[0];
        cc.guideManager.showGuide(0, [{
          tip: "选择练习生",
          focus: t,
          btn: "item",
          y: -200
        }], function (e) {
          if (e) {
            cc.tempGuideIndex = 2;
          }
        });
      });
    }
  },
  refreshLockArrayShow: function refreshLockArrayShow() {
    this.stageLevel = cc.pvz.PlayerData.getStageLevel();
    this.lockList[0].active = this.stageLevel <= cc.pvz.GameConfig.ArrayPlaceOpLv[0];
    this.lockList[1].active = this.stageLevel <= cc.pvz.GameConfig.ArrayPlaceOpLv[1];
    this.usePosCount = 6;

    if (this.stageLevel > cc.pvz.GameConfig.ArrayPlaceOpLv[1]) {
      this.usePosCount = 8;
      cc.pvz.utils.setSpriteFrame(this.lockTops[1], "uiImage", "plant/zwdi");
      cc.pvz.utils.setSpriteFrame(this.lockTops[0], "uiImage", "plant/zwdi");
    } else {
      if (this.stageLevel > cc.pvz.GameConfig.ArrayPlaceOpLv[0]) {
        this.usePosCount = 7;
        cc.pvz.utils.setSpriteFrame(this.lockTops[0], "uiImage", "plant/zwdi");
      }
    }
  },
  initToolItemData: function initToolItemData() {
    var e = this;
    this.toPlaceId = -1;
    this.OpenToolList = [];
    this.LockToolList = [];
    this.baseToolCard.active = !1;
    this.baseLockCard.active = !1;
    var t = new Array(8).fill(-1);

    for (var i = 0; i < cc.pvz.GameConfig.MaxToolCount; i++) {
      var o = i + 1;

      if (cc.pvz.GameConfig.ToolLockLevel[i] < this.stageLevel) {
        var a = cc.player.toolData[o].pos;

        if (-1 != a) {
          t[a] = o;
        } else {
          this.OpenToolList.push(o);
        }
      } else {
        this.LockToolList.push(o);
      }
    }

    this.baseToolCard.position = cc.Vec2.ZERO;
    this.topTools.children.forEach(function (i, o) {
      var a = cc.find("item", i);

      if (-1 == t[o]) {
        if (a) {
          a.destroy();
        }
      } else {
        if (!a) {
          a = cc.instantiate(e.baseToolCard);
          var c = e.topTools.children[o];
          cc.find("black", c).active = !1;
          a.parent = c;
          a.active = !0;
        }

        a.getComponent("ToolCard").initToolCardItem(e, t[o]);
      }
    });
    this.initOpenToolItem();
    this.initLockToolItem();
  },
  initOpenToolItem: function initOpenToolItem() {
    var e = this.OpenToolList.length;
    var t = this.openPanel.childrenCount;
    var i = e - t;
    this.openTip.active = e > 0;
    this.openPanel.active = e > 0;

    if (!(e <= 0)) {
      if (i > 0) {
        for (var o = 0; o < t; o++) {
          var a = this.openPanel.children[o];
          a.active = !0;
          a.getComponent("ToolCard").initToolCardItem(this, this.OpenToolList[o]);
        }

        for (var c = t; c < e; c++) {
          var s = cc.instantiate(this.baseToolCard);
          s.parent = this.openPanel;
          s.active = !0;
          s.getComponent("ToolCard").initToolCardItem(this, this.OpenToolList[c]);
        }
      } else {
        for (var n = 0; n < e; n++) {
          var r = this.openPanel.children[n];
          r.active = !0;
          r.getComponent("ToolCard").initToolCardItem(this, this.OpenToolList[n]);
        }

        for (var h = e; h < t; h++) {
          this.openPanel.children[h].active = !1;
        }
      }
    }
  },
  initLockToolItem: function initLockToolItem() {
    this.line.active = this.LockToolList.length > 0;
    var e = this.LockToolList.length;
    var t = this.lockPanel.childrenCount;

    if (e - t > 0) {
      for (var i = 0; i < t; i++) {
        var o = this.lockPanel.children[i];
        o.active = !0;
        o.getComponent("ToolLockCard").initToolLockCard(this, this.LockToolList[i]);
      }

      for (var a = t; a < e; a++) {
        var c = cc.instantiate(this.baseLockCard);
        c.parent = this.lockPanel;
        c.active = !0;
        c.getComponent("ToolLockCard").initToolLockCard(this, this.LockToolList[a]);
      }
    } else {
      for (var s = 0; s < e; s++) {
        var n = this.lockPanel.children[s];
        n.active = !0;
        n.getComponent("ToolLockCard").initToolLockCard(this, this.LockToolList[s]);
      }

      for (var r = e; r < t; r++) {
        this.lockPanel.children[r].active = !1;
      }
    }
  },
  onCloseUI: function onCloseUI() {
    if (-1 != this.toPlaceId) {
      this.onClickCancelUp();
    }

    this.node.active = !1;
  },
  onClickCard: function onClickCard(e) {
    var t = this;

    if (-1 == this.toPlaceId) {
      cc.popupManager.popup("mainUI", "plantInfo", "UIToolInfo", {
        ad: !1,
        scale: !0
      }, this, e.toolId, !1, function () {
        e.onLvUpRefreshCard();
      });
    } else {
      var i = cc.player.toolData[e.toolId].pos;

      if (-1 != i) {
        var o = this.replaceItem.node;
        var a = e.node;
        var c = o.convertToWorldSpaceAR(cc.Vec2.ZERO);
        var s = this.node.convertToNodeSpaceAR(c);
        var n = a.convertToWorldSpaceAR(cc.Vec2.ZERO);
        var r = this.node.convertToNodeSpaceAR(n);
        var h = cc.instantiate(o);
        h.position = s;
        h.parent = this.node;
        h.runAction(cc.sequence(cc.moveTo(0.24, r), cc.destroySelf(), cc.callFunc(function () {
          t.putOnByPos(i);
        })));
        this.replaceRoot.active = !1;
      }
    }
  },
  onClickUp: function onClickUp(e) {
    this.toPlaceId = e.toolId;
    var t = new Set(new Array(this.usePosCount).fill(0).map(function (e, t) {
      return t;
    }));

    for (var i = 0; i < cc.pvz.GameConfig.MaxToolCount; i++) {
      var o = cc.player.toolData[i + 1].pos;

      if (-1 != o) {
        t["delete"](o);
      }
    }

    if (t.size > 0) {
      var a = t.values().next().value;
      this.putOnByPos(a);
      this.openTip.active = this.openPanel.childrenCount > 0;
      this.openPanel.active = this.openPanel.childrenCount > 0;
    } else {
      this.scrollPanel.node.active = !1;
      this.replaceRoot.active = !0;
      this.replaceItem.initToolCardItem(this, e.toolId);

      for (var c = 0; c < this.topTools.childrenCount; c++) {
        var s = this.topTools.children[c];

        if (6 == c && this.stageLevel <= cc.pvz.GameConfig.ArrayPlaceOpLv[0]) {
          break;
        }

        if (7 == c && this.stageLevel <= cc.pvz.GameConfig.ArrayPlaceOpLv[1]) {
          break;
        }

        s.getComponent(cc.Animation).play("plantputon");
      }
    }
  },
  onClickCancelUp: function onClickCancelUp() {
    this.toPlaceId = -1;
    this.scrollPanel.node.active = !0;
    this.replaceRoot.active = !1;
    this.topTools.children.forEach(function (e) {
      return e.getComponent(cc.Animation).stop();
    });
  },
  putDownToolById: function putDownToolById(e) {
    var t = this.topTools.children.find(function (t) {
      var i = cc.find("item", t);
      return i && i.getComponent("ToolCard").toolId == e;
    });
    cc.find("item", t).parent = this.openPanel;
    cc.find("black", t).active = !0;
  },
  putOnByPos: function putOnByPos(e, t) {
    var i = this;

    if (void 0 === t) {
      t = !1;
    }

    if (-1 != this.toPlaceId && (console.log(" change array " + e), !(e >= this.usePosCount))) {
      for (var o = 0; o < cc.pvz.GameConfig.MaxToolCount; o++) {
        if (cc.player.toolData[o + 1].pos == e) {
          cc.player.toolData[o + 1].pos = -1;
          this.putDownToolById(o + 1);
        }
      }

      cc.player.toolData[this.toPlaceId].pos = e;
      cc.pvz.PlayerData.onDataChanged();
      var a = this.topTools.children[e];

      if (!t) {
        var c = this.openPanel.children.find(function (e) {
          return e.getComponent("ToolCard").toolId == i.toPlaceId;
        });
        c.position = cc.Vec2.ZERO;
        c.parent = a;
      }

      cc.find("black", a).active = !1;
      this.onClickCancelUp();
    }
  },
  onClickDown: function onClickDown(e) {
    cc.player.toolData[e].pos = -1;
    cc.pvz.PlayerData.onDataChanged();
    this.putDownToolById(e);
    this.openTip.active = this.openPanel.childrenCount > 0;
    this.openPanel.active = this.openPanel.childrenCount > 0;
  },
  onClickPlace: function onClickPlace(e, t) {
    var i = parseInt(t);
    this.putOnByPos(i);
  },
  onCardDragEnded: function onCardDragEnded(e, t) {
    var i = this;
    var o = e.node.getBoundingBoxToWorld();
    var a = this.topTools.getBoundingBoxToWorld();

    if (cc.Intersection.rectRect(o, a)) {
      this.topTools.children.forEach(function (e) {
        if (e.getBoundingBoxToWorld().contains(t)) {
          var o = cc.find("item", e);

          if (o) {
            var a = o.getComponent("ToolCard");
            var c = cc.player.toolData[a.toolId].pos;
            return void i.putOnByPos(c);
          }
        }
      });
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9VSVRvb2wuanMiXSwibmFtZXMiOlsiJHRvb2xDYXJkIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidG9wVG9vbHMiLCJOb2RlIiwic2Nyb2xsUGFuZWwiLCJTY3JvbGxWaWV3IiwicmVwbGFjZVJvb3QiLCJiYXNlVG9vbENhcmQiLCJvcGVuUGFuZWwiLCJvcGVuVGlwIiwibGluZSIsImJhc2VMb2NrQ2FyZCIsImxvY2tQYW5lbCIsInJlcGxhY2VJdGVtIiwibG9ja0xpc3QiLCJsb2NrVG9wcyIsIlNwcml0ZSIsIm9uTG9hZCIsIlVJVG9vbCIsIm5vZGUiLCJhY3RpdmUiLCJpbml0QnkiLCJlIiwicHZ6IiwidXRpbHMiLCJmYWRlSW5CdG4iLCJpc0NoYW5nZUFycmF5IiwicmVmcmVzaExvY2tBcnJheVNob3ciLCJpbml0VG9vbEl0ZW1EYXRhIiwidGVtcEd1aWRlSW5kZXgiLCJzZXRUaW1lb3V0IiwidCIsImNoaWxkcmVuIiwiZ3VpZGVNYW5hZ2VyIiwic2hvd0d1aWRlIiwidGlwIiwiZm9jdXMiLCJidG4iLCJ5Iiwic3RhZ2VMZXZlbCIsIlBsYXllckRhdGEiLCJnZXRTdGFnZUxldmVsIiwiR2FtZUNvbmZpZyIsIkFycmF5UGxhY2VPcEx2IiwidXNlUG9zQ291bnQiLCJzZXRTcHJpdGVGcmFtZSIsInRvUGxhY2VJZCIsIk9wZW5Ub29sTGlzdCIsIkxvY2tUb29sTGlzdCIsIkFycmF5IiwiZmlsbCIsImkiLCJNYXhUb29sQ291bnQiLCJvIiwiVG9vbExvY2tMZXZlbCIsImEiLCJwbGF5ZXIiLCJ0b29sRGF0YSIsInBvcyIsInB1c2giLCJwb3NpdGlvbiIsIlZlYzIiLCJaRVJPIiwiZm9yRWFjaCIsImZpbmQiLCJkZXN0cm95IiwiaW5zdGFudGlhdGUiLCJjIiwicGFyZW50IiwiZ2V0Q29tcG9uZW50IiwiaW5pdFRvb2xDYXJkSXRlbSIsImluaXRPcGVuVG9vbEl0ZW0iLCJpbml0TG9ja1Rvb2xJdGVtIiwibGVuZ3RoIiwiY2hpbGRyZW5Db3VudCIsInMiLCJuIiwiciIsImgiLCJpbml0VG9vbExvY2tDYXJkIiwib25DbG9zZVVJIiwib25DbGlja0NhbmNlbFVwIiwib25DbGlja0NhcmQiLCJwb3B1cE1hbmFnZXIiLCJwb3B1cCIsImFkIiwic2NhbGUiLCJ0b29sSWQiLCJvbkx2VXBSZWZyZXNoQ2FyZCIsImNvbnZlcnRUb1dvcmxkU3BhY2VBUiIsImNvbnZlcnRUb05vZGVTcGFjZUFSIiwicnVuQWN0aW9uIiwic2VxdWVuY2UiLCJtb3ZlVG8iLCJkZXN0cm95U2VsZiIsImNhbGxGdW5jIiwicHV0T25CeVBvcyIsIm9uQ2xpY2tVcCIsIlNldCIsIm1hcCIsInNpemUiLCJ2YWx1ZXMiLCJuZXh0IiwidmFsdWUiLCJBbmltYXRpb24iLCJwbGF5Iiwic3RvcCIsInB1dERvd25Ub29sQnlJZCIsImNvbnNvbGUiLCJsb2ciLCJvbkRhdGFDaGFuZ2VkIiwib25DbGlja0Rvd24iLCJvbkNsaWNrUGxhY2UiLCJwYXJzZUludCIsIm9uQ2FyZERyYWdFbmRlZCIsImdldEJvdW5kaW5nQm94VG9Xb3JsZCIsIkludGVyc2VjdGlvbiIsInJlY3RSZWN0IiwiY29udGFpbnMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsWUFBRCxDQUF2Qjs7QUFDQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7RUFDTCxXQUFTRCxFQUFFLENBQUNFLFNBRFA7RUFFTEMsVUFBVSxFQUFFO0lBQ1JDLFFBQVEsRUFBRUosRUFBRSxDQUFDSyxJQURMO0lBRVJDLFdBQVcsRUFBRU4sRUFBRSxDQUFDTyxVQUZSO0lBR1JDLFdBQVcsRUFBRVIsRUFBRSxDQUFDSyxJQUhSO0lBSVJJLFlBQVksRUFBRVQsRUFBRSxDQUFDSyxJQUpUO0lBS1JLLFNBQVMsRUFBRVYsRUFBRSxDQUFDSyxJQUxOO0lBTVJNLE9BQU8sRUFBRVgsRUFBRSxDQUFDSyxJQU5KO0lBT1JP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Iiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgJHRvb2xDYXJkID0gcmVxdWlyZShcIi4vVG9vbENhcmRcIik7XG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdG9wVG9vbHM6IGNjLk5vZGUsXG4gICAgICAgIHNjcm9sbFBhbmVsOiBjYy5TY3JvbGxWaWV3LFxuICAgICAgICByZXBsYWNlUm9vdDogY2MuTm9kZSxcbiAgICAgICAgYmFzZVRvb2xDYXJkOiBjYy5Ob2RlLFxuICAgICAgICBvcGVuUGFuZWw6IGNjLk5vZGUsXG4gICAgICAgIG9wZW5UaXA6IGNjLk5vZGUsXG4gICAgICAgIGxpbmU6IGNjLk5vZGUsXG4gICAgICAgIGJhc2VMb2NrQ2FyZDogY2MuTm9kZSxcbiAgICAgICAgbG9ja1BhbmVsOiBjYy5Ob2RlLFxuICAgICAgICByZXBsYWNlSXRlbTogJHRvb2xDYXJkLFxuICAgICAgICBsb2NrTGlzdDogW2NjLk5vZGVdLFxuICAgICAgICBsb2NrVG9wczogW2NjLlNwcml0ZV1cbiAgICB9LFxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjYy5VSVRvb2wgPSB0aGlzO1xuICAgICAgICB0aGlzLnNjcm9sbFBhbmVsLm5vZGUuYWN0aXZlID0gITA7XG4gICAgICAgIHRoaXMucmVwbGFjZVJvb3QuYWN0aXZlID0gITE7XG4gICAgfSxcbiAgICBpbml0Qnk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBjYy5wdnoudXRpbHMuZmFkZUluQnRuKHRoaXMubm9kZSk7XG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSAhMDtcbiAgICAgICAgdGhpcy5pc0NoYW5nZUFycmF5ID0gITE7XG4gICAgICAgIHRoaXMucmVmcmVzaExvY2tBcnJheVNob3coKTtcbiAgICAgICAgdGhpcy5pbml0VG9vbEl0ZW1EYXRhKCk7XG4gICAgICAgIGlmICgxID09IGNjLnRlbXBHdWlkZUluZGV4KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGUudG9wVG9vbHMuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgY2MuZ3VpZGVNYW5hZ2VyLnNob3dHdWlkZShcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpcDogXCLpgInmi6nnu4PkuaDnlJ9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1czogdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IFwiaXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IC0yMDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MudGVtcEd1aWRlSW5kZXggPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZWZyZXNoTG9ja0FycmF5U2hvdzogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YWdlTGV2ZWwgPSBjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCk7XG4gICAgICAgIHRoaXMubG9ja0xpc3RbMF0uYWN0aXZlID0gdGhpcy5zdGFnZUxldmVsIDw9IGNjLnB2ei5HYW1lQ29uZmlnLkFycmF5UGxhY2VPcEx2WzBdO1xuICAgICAgICB0aGlzLmxvY2tMaXN0WzFdLmFjdGl2ZSA9IHRoaXMuc3RhZ2VMZXZlbCA8PSBjYy5wdnouR2FtZUNvbmZpZy5BcnJheVBsYWNlT3BMdlsxXTtcbiAgICAgICAgdGhpcy51c2VQb3NDb3VudCA9IDY7XG4gICAgICAgIGlmICh0aGlzLnN0YWdlTGV2ZWwgPiBjYy5wdnouR2FtZUNvbmZpZy5BcnJheVBsYWNlT3BMdlsxXSkge1xuICAgICAgICAgICAgdGhpcy51c2VQb3NDb3VudCA9IDg7XG4gICAgICAgICAgICBjYy5wdnoudXRpbHMuc2V0U3ByaXRlRnJhbWUodGhpcy5sb2NrVG9wc1sxXSwgXCJ1aUltYWdlXCIsIFwicGxhbnQvendkaVwiKTtcbiAgICAgICAgICAgIGNjLnB2ei51dGlscy5zZXRTcHJpdGVGcmFtZSh0aGlzLmxvY2tUb3BzWzBdLCBcInVpSW1hZ2VcIiwgXCJwbGFudC96d2RpXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhZ2VMZXZlbCA+IGNjLnB2ei5HYW1lQ29uZmlnLkFycmF5UGxhY2VPcEx2WzBdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VQb3NDb3VudCA9IDc7XG4gICAgICAgICAgICAgICAgY2MucHZ6LnV0aWxzLnNldFNwcml0ZUZyYW1lKHRoaXMubG9ja1RvcHNbMF0sIFwidWlJbWFnZVwiLCBcInBsYW50L3p3ZGlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGluaXRUb29sSXRlbURhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICB0aGlzLnRvUGxhY2VJZCA9IC0xO1xuICAgICAgICB0aGlzLk9wZW5Ub29sTGlzdCA9IFtdO1xuICAgICAgICB0aGlzLkxvY2tUb29sTGlzdCA9IFtdO1xuICAgICAgICB0aGlzLmJhc2VUb29sQ2FyZC5hY3RpdmUgPSAhMTtcbiAgICAgICAgdGhpcy5iYXNlTG9ja0NhcmQuYWN0aXZlID0gITE7XG4gICAgICAgIHZhciB0ID0gbmV3IEFycmF5KDgpLmZpbGwoLTEpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNjLnB2ei5HYW1lQ29uZmlnLk1heFRvb2xDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbyA9IGkgKyAxO1xuICAgICAgICAgICAgaWYgKGNjLnB2ei5HYW1lQ29uZmlnLlRvb2xMb2NrTGV2ZWxbaV0gPCB0aGlzLnN0YWdlTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGNjLnBsYXllci50b29sRGF0YVtvXS5wb3M7XG4gICAgICAgICAgICAgICAgaWYgKC0xICE9IGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdFthXSA9IG87XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5PcGVuVG9vbExpc3QucHVzaChvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuTG9ja1Rvb2xMaXN0LnB1c2gobyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNlVG9vbENhcmQucG9zaXRpb24gPSBjYy5WZWMyLlpFUk87XG4gICAgICAgIHRoaXMudG9wVG9vbHMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoaSwgbykge1xuICAgICAgICAgICAgdmFyIGEgPSBjYy5maW5kKFwiaXRlbVwiLCBpKTtcbiAgICAgICAgICAgIGlmICgtMSA9PSB0W29dKSB7XG4gICAgICAgICAgICAgICAgaWYgKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWEpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGNjLmluc3RhbnRpYXRlKGUuYmFzZVRvb2xDYXJkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBlLnRvcFRvb2xzLmNoaWxkcmVuW29dO1xuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiYmxhY2tcIiwgYykuYWN0aXZlID0gITE7XG4gICAgICAgICAgICAgICAgICAgIGEucGFyZW50ID0gYztcbiAgICAgICAgICAgICAgICAgICAgYS5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYS5nZXRDb21wb25lbnQoXCJUb29sQ2FyZFwiKS5pbml0VG9vbENhcmRJdGVtKGUsIHRbb10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0T3BlblRvb2xJdGVtKCk7XG4gICAgICAgIHRoaXMuaW5pdExvY2tUb29sSXRlbSgpO1xuICAgIH0sXG4gICAgaW5pdE9wZW5Ub29sSXRlbTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuT3BlblRvb2xMaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIHQgPSB0aGlzLm9wZW5QYW5lbC5jaGlsZHJlbkNvdW50O1xuICAgICAgICB2YXIgaSA9IGUgLSB0O1xuICAgICAgICB0aGlzLm9wZW5UaXAuYWN0aXZlID0gZSA+IDA7XG4gICAgICAgIHRoaXMub3BlblBhbmVsLmFjdGl2ZSA9IGUgPiAwO1xuICAgICAgICBpZiAoIShlIDw9IDApKSB7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IHQ7IG8rKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMub3BlblBhbmVsLmNoaWxkcmVuW29dO1xuICAgICAgICAgICAgICAgICAgICBhLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgICAgICBhLmdldENvbXBvbmVudChcIlRvb2xDYXJkXCIpLmluaXRUb29sQ2FyZEl0ZW0odGhpcywgdGhpcy5PcGVuVG9vbExpc3Rbb10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gdDsgYyA8IGU7IGMrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYmFzZVRvb2xDYXJkKTtcbiAgICAgICAgICAgICAgICAgICAgcy5wYXJlbnQgPSB0aGlzLm9wZW5QYW5lbDtcbiAgICAgICAgICAgICAgICAgICAgcy5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgcy5nZXRDb21wb25lbnQoXCJUb29sQ2FyZFwiKS5pbml0VG9vbENhcmRJdGVtKHRoaXMsIHRoaXMuT3BlblRvb2xMaXN0W2NdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgZTsgbisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy5vcGVuUGFuZWwuY2hpbGRyZW5bbl07XG4gICAgICAgICAgICAgICAgICAgIHIuYWN0aXZlID0gITA7XG4gICAgICAgICAgICAgICAgICAgIHIuZ2V0Q29tcG9uZW50KFwiVG9vbENhcmRcIikuaW5pdFRvb2xDYXJkSXRlbSh0aGlzLCB0aGlzLk9wZW5Ub29sTGlzdFtuXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGggPSBlOyBoIDwgdDsgaCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblBhbmVsLmNoaWxkcmVuW2hdLmFjdGl2ZSA9ICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgaW5pdExvY2tUb29sSXRlbTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxpbmUuYWN0aXZlID0gdGhpcy5Mb2NrVG9vbExpc3QubGVuZ3RoID4gMDtcbiAgICAgICAgdmFyIGUgPSB0aGlzLkxvY2tUb29sTGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciB0ID0gdGhpcy5sb2NrUGFuZWwuY2hpbGRyZW5Db3VudDtcbiAgICAgICAgaWYgKGUgLSB0ID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0OyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMubG9ja1BhbmVsLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIG8uYWN0aXZlID0gITA7XG4gICAgICAgICAgICAgICAgby5nZXRDb21wb25lbnQoXCJUb29sTG9ja0NhcmRcIikuaW5pdFRvb2xMb2NrQ2FyZCh0aGlzLCB0aGlzLkxvY2tUb29sTGlzdFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gdDsgYSA8IGU7IGErKykge1xuICAgICAgICAgICAgICAgIHZhciBjID0gY2MuaW5zdGFudGlhdGUodGhpcy5iYXNlTG9ja0NhcmQpO1xuICAgICAgICAgICAgICAgIGMucGFyZW50ID0gdGhpcy5sb2NrUGFuZWw7XG4gICAgICAgICAgICAgICAgYy5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICBjLmdldENvbXBvbmVudChcIlRvb2xMb2NrQ2FyZFwiKS5pbml0VG9vbExvY2tDYXJkKHRoaXMsIHRoaXMuTG9ja1Rvb2xMaXN0W2FdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgZTsgcysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmxvY2tQYW5lbC5jaGlsZHJlbltzXTtcbiAgICAgICAgICAgICAgICBuLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIG4uZ2V0Q29tcG9uZW50KFwiVG9vbExvY2tDYXJkXCIpLmluaXRUb29sTG9ja0NhcmQodGhpcywgdGhpcy5Mb2NrVG9vbExpc3Rbc10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgciA9IGU7IHIgPCB0OyByKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2tQYW5lbC5jaGlsZHJlbltyXS5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbG9zZVVJOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgtMSAhPSB0aGlzLnRvUGxhY2VJZCkge1xuICAgICAgICAgICAgdGhpcy5vbkNsaWNrQ2FuY2VsVXAoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gITE7XG4gICAgfSxcbiAgICBvbkNsaWNrQ2FyZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAoLTEgPT0gdGhpcy50b1BsYWNlSWQpIHtcbiAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5wb3B1cChcbiAgICAgICAgICAgICAgICBcIm1haW5VSVwiLFxuICAgICAgICAgICAgICAgIFwicGxhbnRJbmZvXCIsXG4gICAgICAgICAgICAgICAgXCJVSVRvb2xJbmZvXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhZDogITEsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiAhMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBlLnRvb2xJZCxcbiAgICAgICAgICAgICAgICAhMSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGUub25MdlVwUmVmcmVzaENhcmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGkgPSBjYy5wbGF5ZXIudG9vbERhdGFbZS50b29sSWRdLnBvcztcbiAgICAgICAgICAgIGlmICgtMSAhPSBpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSB0aGlzLnJlcGxhY2VJdGVtLm5vZGU7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBlLm5vZGU7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBvLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy5WZWMyLlpFUk8pO1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5ub2RlLmNvbnZlcnRUb05vZGVTcGFjZUFSKGMpO1xuICAgICAgICAgICAgICAgIHZhciBuID0gYS5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MuVmVjMi5aRVJPKTtcbiAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMubm9kZS5jb252ZXJ0VG9Ob2RlU3BhY2VBUihuKTtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IGNjLmluc3RhbnRpYXRlKG8pO1xuICAgICAgICAgICAgICAgIGgucG9zaXRpb24gPSBzO1xuICAgICAgICAgICAgICAgIGgucGFyZW50ID0gdGhpcy5ub2RlO1xuICAgICAgICAgICAgICAgIGgucnVuQWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICBjYy5zZXF1ZW5jZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjI0LCByKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRlc3Ryb3lTZWxmKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXRPbkJ5UG9zKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlUm9vdC5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja1VwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLnRvUGxhY2VJZCA9IGUudG9vbElkO1xuICAgICAgICB2YXIgdCA9IG5ldyBTZXQoXG4gICAgICAgICAgICBuZXcgQXJyYXkodGhpcy51c2VQb3NDb3VudCkuZmlsbCgwKS5tYXAoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2MucHZ6LkdhbWVDb25maWcuTWF4VG9vbENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvID0gY2MucGxheWVyLnRvb2xEYXRhW2kgKyAxXS5wb3M7XG4gICAgICAgICAgICBpZiAoLTEgIT0gbykge1xuICAgICAgICAgICAgICAgIHQuZGVsZXRlKG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0LnNpemUgPiAwKSB7XG4gICAgICAgICAgICB2YXIgYSA9IHQudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5wdXRPbkJ5UG9zKGEpO1xuICAgICAgICAgICAgdGhpcy5vcGVuVGlwLmFjdGl2ZSA9IHRoaXMub3BlblBhbmVsLmNoaWxkcmVuQ291bnQgPiAwO1xuICAgICAgICAgICAgdGhpcy5vcGVuUGFuZWwuYWN0aXZlID0gdGhpcy5vcGVuUGFuZWwuY2hpbGRyZW5Db3VudCA+IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFBhbmVsLm5vZGUuYWN0aXZlID0gITE7XG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VSb290LmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgdGhpcy5yZXBsYWNlSXRlbS5pbml0VG9vbENhcmRJdGVtKHRoaXMsIGUudG9vbElkKTtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgdGhpcy50b3BUb29scy5jaGlsZHJlbkNvdW50OyBjKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMudG9wVG9vbHMuY2hpbGRyZW5bY107XG4gICAgICAgICAgICAgICAgaWYgKDYgPT0gYyAmJiB0aGlzLnN0YWdlTGV2ZWwgPD0gY2MucHZ6LkdhbWVDb25maWcuQXJyYXlQbGFjZU9wTHZbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICg3ID09IGMgJiYgdGhpcy5zdGFnZUxldmVsIDw9IGNjLnB2ei5HYW1lQ29uZmlnLkFycmF5UGxhY2VPcEx2WzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pLnBsYXkoXCJwbGFudHB1dG9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNsaWNrQ2FuY2VsVXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50b1BsYWNlSWQgPSAtMTtcbiAgICAgICAgdGhpcy5zY3JvbGxQYW5lbC5ub2RlLmFjdGl2ZSA9ICEwO1xuICAgICAgICB0aGlzLnJlcGxhY2VSb290LmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLnRvcFRvb2xzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pLnN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBwdXREb3duVG9vbEJ5SWQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy50b3BUb29scy5jaGlsZHJlbi5maW5kKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IGNjLmZpbmQoXCJpdGVtXCIsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIGkgJiYgaS5nZXRDb21wb25lbnQoXCJUb29sQ2FyZFwiKS50b29sSWQgPT0gZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNjLmZpbmQoXCJpdGVtXCIsIHQpLnBhcmVudCA9IHRoaXMub3BlblBhbmVsO1xuICAgICAgICBjYy5maW5kKFwiYmxhY2tcIiwgdCkuYWN0aXZlID0gITA7XG4gICAgfSxcbiAgICBwdXRPbkJ5UG9zOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICB2YXIgaSA9IHRoaXM7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHtcbiAgICAgICAgICAgIHQgPSAhMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoLTEgIT0gdGhpcy50b1BsYWNlSWQgJiYgKGNvbnNvbGUubG9nKFwiIGNoYW5nZSBhcnJheSBcIiArIGUpLCAhKGUgPj0gdGhpcy51c2VQb3NDb3VudCkpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IGNjLnB2ei5HYW1lQ29uZmlnLk1heFRvb2xDb3VudDsgbysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNjLnBsYXllci50b29sRGF0YVtvICsgMV0ucG9zID09IGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2MucGxheWVyLnRvb2xEYXRhW28gKyAxXS5wb3MgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXREb3duVG9vbEJ5SWQobyArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNjLnBsYXllci50b29sRGF0YVt0aGlzLnRvUGxhY2VJZF0ucG9zID0gZTtcbiAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLm9uRGF0YUNoYW5nZWQoKTtcbiAgICAgICAgICAgIHZhciBhID0gdGhpcy50b3BUb29scy5jaGlsZHJlbltlXTtcbiAgICAgICAgICAgIGlmICghdCkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5vcGVuUGFuZWwuY2hpbGRyZW4uZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5nZXRDb21wb25lbnQoXCJUb29sQ2FyZFwiKS50b29sSWQgPT0gaS50b1BsYWNlSWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYy5wb3NpdGlvbiA9IGNjLlZlYzIuWkVSTztcbiAgICAgICAgICAgICAgICBjLnBhcmVudCA9IGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYy5maW5kKFwiYmxhY2tcIiwgYSkuYWN0aXZlID0gITE7XG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2tDYW5jZWxVcCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNsaWNrRG93bjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgY2MucGxheWVyLnRvb2xEYXRhW2VdLnBvcyA9IC0xO1xuICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5vbkRhdGFDaGFuZ2VkKCk7XG4gICAgICAgIHRoaXMucHV0RG93blRvb2xCeUlkKGUpO1xuICAgICAgICB0aGlzLm9wZW5UaXAuYWN0aXZlID0gdGhpcy5vcGVuUGFuZWwuY2hpbGRyZW5Db3VudCA+IDA7XG4gICAgICAgIHRoaXMub3BlblBhbmVsLmFjdGl2ZSA9IHRoaXMub3BlblBhbmVsLmNoaWxkcmVuQ291bnQgPiAwO1xuICAgIH0sXG4gICAgb25DbGlja1BsYWNlOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICB2YXIgaSA9IHBhcnNlSW50KHQpO1xuICAgICAgICB0aGlzLnB1dE9uQnlQb3MoaSk7XG4gICAgfSxcbiAgICBvbkNhcmREcmFnRW5kZWQ6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHZhciBpID0gdGhpcztcbiAgICAgICAgdmFyIG8gPSBlLm5vZGUuZ2V0Qm91bmRpbmdCb3hUb1dvcmxkKCk7XG4gICAgICAgIHZhciBhID0gdGhpcy50b3BUb29scy5nZXRCb3VuZGluZ0JveFRvV29ybGQoKTtcbiAgICAgICAgaWYgKGNjLkludGVyc2VjdGlvbi5yZWN0UmVjdChvLCBhKSkge1xuICAgICAgICAgICAgdGhpcy50b3BUb29scy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuZ2V0Qm91bmRpbmdCb3hUb1dvcmxkKCkuY29udGFpbnModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBjYy5maW5kKFwiaXRlbVwiLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gby5nZXRDb21wb25lbnQoXCJUb29sQ2FyZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gY2MucGxheWVyLnRvb2xEYXRhW2EudG9vbElkXS5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBpLnB1dE9uQnlQb3MoYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIl19