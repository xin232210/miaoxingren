
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/RedControl.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'f1243vbqOpNlrPR0OpC1Fnj', 'RedControl');
// mainUI/scripts/RedControl.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    shopRed: cc.Node,
    battleRed: cc.Node,
    toolLvRed: cc.Node,
    actLevelRed: cc.Node,
    rankRed: cc.Node,
    signRed: cc.Node,
    shareRed: cc.Node,
    missionRed: cc.Node,
    fundRed: cc.Node,
    game2Red: cc.Node
  },
  onLoad: function onLoad() {
    cc.RedControl = this;
  },
  refreshAllRedTip: function refreshAllRedTip() {
    this.onCheckShopRed();
    this.onCheckBattleRed();
    this.onCheckToolLvRed();
    this.onCheckActLevelRed();
    this.onChecRankRed();
    this.onCheckSignRed();
    this.onCheckShareRed();
    this.onCheckMissionRed();
    this.onCheckGame2Red();
  },
  onChecRankRed: function onChecRankRed() {
    if (cc.pvz.PlayerData.getStageLevel() <= cc.pvz.GameConfig.OpenSysLv[1]) {
      this.rankRed.active = !1;
    } else {
      if (new Date().getDate() == cc.player.gameDate) {
        this.rankRed.active = cc.player.rankCount > 0;
      } else {
        this.rankRed.active = !0;
      }
    }
  },
  onCheckMissionRed: function onCheckMissionRed() {
    cc.pvz.PlayerData.checkAndResetDayMission();
    cc.pvz.PlayerData.checkAndResetWeekMission();

    if (this.onCheckDayMissionRed() || this.onCheckWeekMissionRed() || this.onCheckAchieveMissionRed()) {
      this.missionRed.active = !0;
    } else {
      this.missionRed.active = !1;
    }
  },
  onCheckDayMissionRed: function onCheckDayMissionRed() {
    var e = cc.JsonControl.getAllDayMissionJson();

    for (var t = 0; t < e.length; t++) {
      var i = e[t];
      var o = cc.pvz.PlayerData.getDayMissionData(i.func);

      if (!o.isReward && o.pro >= i.need) {
        return !0;
      }
    }

    var a = cc.JsonControl.getDayMissionBoxJson();
    var c = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType["日常任务积分"]);

    for (var s = 0; s < a.length; s++) {
      var n = a[s];

      if (!cc.pvz.PlayerData.getDayBoxData(n.ID).isReward && c >= n.score) {
        return !0;
      }
    }

    return !1;
  },
  onCheckWeekMissionRed: function onCheckWeekMissionRed() {
    var e = cc.JsonControl.getAllWeekMissionJson();

    for (var t = 0; t < e.length; t++) {
      var i = e[t];
      var o = cc.pvz.PlayerData.getWeekMissionData(i.func);

      if (!o.isReward && o.pro >= i.need) {
        return !0;
      }
    }

    var a = cc.JsonControl.getWeekMissionBoxJson();
    var c = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType["周常任务积分"]);

    for (var s = 0; s < a.length; s++) {
      var n = a[s];

      if (!cc.pvz.PlayerData.getWeekBoxData(n.ID).isReward && c >= n.score) {
        return !0;
      }
    }

    return !1;
  },
  onCheckAchieveMissionRed: function onCheckAchieveMissionRed() {
    var e = cc.JsonControl.getAllAchieveJson();
    var t = Math.floor(e[e.length - 1].ID / 100);

    for (var i = 0; i < t; i++) {
      var o = i + 1;
      var a = cc.pvz.PlayerData.getAchieveData(o);

      if (!a.end) {
        var c = 100 * o + a.lv;
        var s = cc.JsonControl.getAchieveJson(c);
        var n = cc.pvz.PlayerData.getAchieveProgress(s.func);

        if (s.need[0] <= n) {
          return !0;
        }
      }
    }

    return !1;
  },
  onCheckSignRed: function onCheckSignRed() {
    cc.pvz.PlayerData.checkAndResetSign();
    var e = cc.pvz.PlayerData.getSignData();
    this.signRed.active = !e.isReward;
  },
  onCheckShopRed: function onCheckShopRed() {
    if (new Date().getDate() == cc.player.shopDate) {
      if (1 != cc.pvz.PlayerData.getShopTimes(cc.pvz.GameConfig.ShopTimesType["钻石免费"])) {
        if (7 != cc.pvz.PlayerData.getShopTimes(cc.pvz.GameConfig.ShopTimesType["金币免费"])) {
          var e = cc.player.shopBoxData.date[0];

          if (-1 != e) {
            if (Math.floor((Date.now() - e) / 1e3) >= cc.pvz.GameConfig.ShopBoxCD[0]) {
              this.shopRed.active = !0;
            } else {
              this.shopRed.active = !1;
            }
          } else {
            this.shopRed.active = !0;
          }
        } else {
          this.shopRed.active = !0;
        }
      } else {
        this.shopRed.active = !0;
      }
    } else {
      this.shopRed.active = !0;
    }
  },
  onCheckBattleRed: function onCheckBattleRed() {
    cc.pvz.PlayerData.checkAndResetGameDate();
    cc.pvz.PlayerData.checkAndResetSign();

    if (cc.pvz.PlayerData.getSignData().isReward) {
      var e = cc.pvz.PlayerData.getStageLevel();
      var t = cc.pvz.PlayerData.getMaxLevelWave();

      for (var i = e; i > 0; i--) {
        var o = e > i;
        var a = cc.pvz.PlayerData.getLevelBoxData(i);
        var c = cc.JsonControl.getLevelJson(i);

        for (var s = 0; s < a.length; s++) {
          var n = c["wave" + (s + 1)];

          if (0 == a[s]) {
            if (o) {
              return void (this.battleRed.active = !0);
            }

            if (t >= n && e == s) {
              return void (this.battleRed.active = !0);
            }
          }
        }
      }

      cc.pvz.PlayerData.checkAndResetDayMission();
      cc.pvz.PlayerData.checkAndResetWeekMission();

      if (this.onCheckDayMissionRed() || this.onCheckWeekMissionRed() || this.onCheckAchieveMissionRed()) {
        this.battleRed.active = !0;
      } else {
        this.battleRed.active = !1;
      }
    } else {
      this.battleRed.active = !0;
    }
  },
  onCheckToolLvRed: function onCheckToolLvRed() {
    var e = [];
    var t = cc.pvz.PlayerData.getStageLevel();

    for (var i = 0; i < cc.pvz.GameConfig.MaxToolCount; i++) {
      var o = i + 1;

      if (cc.pvz.GameConfig.ToolLockLevel[i] < t) {
        e.push(o);
      }
    }

    for (var a = 0; a < e.length; a++) {
      var c = e[a];
      var s = cc.pvz.PlayerData.getToolData(c);

      if (s.lv < cc.pvz.GameConfig.MaxToolLv) {
        var n = cc.JsonControl.getToolJson(c);
        var r = cc.JsonControl.getToolLvUpJson(s.lv);
        var h = r["sp" + n.quality];

        if (s.c >= h) {
          var p = r["coins" + n.quality];

          if (cc.pvz.PlayerData.isItemEnough(cc.pvz.GameConfig.ItemType["金币"], p)) {
            return void (this.toolLvRed.active = !0);
          }
        }
      }
    }

    if (cc.pvz.PlayerData.isEnoughArrayTool()) {
      this.toolLvRed.active = !1;
    } else {
      this.toolLvRed.active = !0;
    }
  },
  onCheckActLevelRed: function onCheckActLevelRed() {
    if (cc.pvz.PlayerData.getStageLevel() <= cc.pvz.GameConfig.OpenSysLv[0]) {
      this.actLevelRed.active = !1;
    } else if (new Date().getDate() == cc.player.actLevelDate) {
      var e = cc.pvz.PlayerData.getActLevelData();

      if (e.times > 0) {
        this.actLevelRed.active = !0;
      } else {
        var t = cc.JsonControl.ActLevelBoxJson;

        for (var i = 0; i < 4; i++) {
          if (t[i].score <= e.score && 0 == e.boxStatus[i]) {
            return void (this.actLevelRed.active = !0);
          }
        }

        this.actLevelRed.active = !1;
      }
    } else {
      this.actLevelRed.active = !0;
    }
  },
  onCheckShareRed: function onCheckShareRed() {
    var e = !cc.player.isShare;
    this.shareRed.active = e;
  },
  isFundRed: function isFundRed() {
    for (var e = 2; e < cc.player.level; e++) {
      if (!cc.pvz.PlayerData.hasFundGet(99 + e, 0)) {
        return !0;
      }
    }

    return !1;
  },
  onCheckFundRed: function onCheckFundRed() {
    this.fundRed.active = this.isFundRed();
  },
  onCheckGame2Red: function onCheckGame2Red() {
    this.game2Red.active = !cc.player.game2t;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9SZWRDb250cm9sLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwic2hvcFJlZCIsIk5vZGUiLCJiYXR0bGVSZWQiLCJ0b29sTHZSZWQiLCJhY3RMZXZlbFJlZCIsInJhbmtSZWQiLCJzaWduUmVkIiwic2hhcmVSZWQiLCJtaXNzaW9uUmVkIiwiZnVuZFJlZCIsImdhbWUyUmVkIiwib25Mb2FkIiwiUmVkQ29udHJvbCIsInJlZnJlc2hBbGxSZWRUaXAiLCJvbkNoZWNrU2hvcFJlZCIsIm9uQ2hlY2tCYXR0bGVSZWQiLCJvbkNoZWNrVG9vbEx2UmVkIiwib25DaGVja0FjdExldmVsUmVkIiwib25DaGVjUmFua1JlZCIsIm9uQ2hlY2tTaWduUmVkIiwib25DaGVja1NoYXJlUmVkIiwib25DaGVja01pc3Npb25SZWQiLCJvbkNoZWNrR2FtZTJSZWQiLCJwdnoiLCJQbGF5ZXJEYXRhIiwiZ2V0U3RhZ2VMZXZlbCIsIkdhbWVDb25maWciLCJPcGVuU3lzTHYiLCJhY3RpdmUiLCJEYXRlIiwiZ2V0RGF0ZSIsInBsYXllciIsImdhbWVEYXRlIiwicmFua0NvdW50IiwiY2hlY2tBbmRSZXNldERheU1pc3Npb24iLCJjaGVja0FuZFJlc2V0V2Vla01pc3Npb24iLCJvbkNoZWNrRGF5TWlzc2lvblJlZCIsIm9uQ2hlY2tXZWVrTWlzc2lvblJlZCIsIm9uQ2hlY2tBY2hpZXZlTWlzc2lvblJlZCIsImUiLCJKc29uQ29udHJvbCIsImdldEFsbERheU1pc3Npb25Kc29uIiwidCIsImxlbmd0aCIsImkiLCJvIiwiZ2V0RGF5TWlzc2lvbkRhdGEiLCJmdW5jIiwiaXNSZXdhcmQiLCJwcm8iLCJuZWVkIiwiYSIsImdldERheU1pc3Npb25Cb3hKc29uIiwiYyIsImdldEl0ZW1OdW0iLCJJdGVtVHlwZSIsInMiLCJuIiwiZ2V0RGF5Qm94RGF0YSIsIklEIiwic2NvcmUiLCJnZXRBbGxXZWVrTWlzc2lvbkpzb24iLCJnZXRXZWVrTWlzc2lvbkRhdGEiLCJnZXRXZWVrTWlzc2lvbkJveEpzb24iLCJnZXRXZWVrQm94RGF0YSIsImdldEFsbEFjaGlldmVKc29uIiwiTWF0aCIsImZsb29yIiwiZ2V0QWNoaWV2ZURhdGEiLCJlbmQiLCJsdiIsImdldEFjaGlldmVKc29uIiwiZ2V0QWNoaWV2ZVByb2dyZXNzIiwiY2hlY2tBbmRSZXNldFNpZ24iLCJnZXRTaWduRGF0YSIsInNob3BEYXRlIiwiZ2V0U2hvcFRpbWVzIiwiU2hvcFRpbWVzVHlwZSIsInNob3BCb3hEYXRhIiwiZGF0ZSIsIm5vdyIsIlNob3BCb3hDRCIsImNoZWNrQW5kUmVzZXRHYW1lRGF0ZSIsImdldE1heExldmVsV2F2ZSIsImdldExldmVsQm94RGF0YSIsImdldExldmVsSnNvbiIsIk1heFRvb2xDb3VudCIsIlRvb2xMb2NrTGV2ZWwiLCJwdXNoIiwiZ2V0VG9vbERhdGEiLCJNYXhUb29sTHYiLCJnZXRUb29sSnNvbiIsInIiLCJnZXRUb29sTHZVcEpzb24iLCJoIiwicXVhbGl0eSIsInAiLCJpc0l0ZW1Fbm91Z2giLCJpc0Vub3VnaEFycmF5VG9vbCIsImFjdExldmVsRGF0ZSIsImdldEFjdExldmVsRGF0YSIsInRpbWVzIiwiQWN0TGV2ZWxCb3hKc29uIiwiYm94U3RhdHVzIiwiaXNTaGFyZSIsImlzRnVuZFJlZCIsImxldmVsIiwiaGFzRnVuZEdldCIsIm9uQ2hlY2tGdW5kUmVkIiwiZ2FtZTJ0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztFQUNMLFdBQVNELEVBQUUsQ0FBQ0UsU0FEUDtFQUVMQyxVQUFVLEVBQUU7SUFDUkMsT0FBTyxFQUFFSixFQUFFLENBQUNLLElBREo7SUFFUkMsU0FBUyxFQUFFTixFQUFFLENBQUNLLElBRk47SUFHUkUsU0FBUyxFQUFFUCxFQUFFLENBQUNLLElBSE47SUFJUkcsV0FBVyxFQUFFUixFQUFFLENBQUNLLElBSlI7SUFLUkksT0FBTyxF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QXROSTtFQXVOTFIsZUFBZSxFQUFFLDJCQUFZO0lBQ3pCLElBQUltQixDQUFDLEdBQUcsQ0FBQzNDLEVBQUUsQ0FBQ21DLE1BQUgsQ0FBVXlFLE9BQW5CO0lBQ0EsS0FBS2pHLFFBQUwsQ0FBY3FCLE1BQWQsR0FBdUJXLENBQXZCO0VBQ0gsQ0ExTkk7RUEyTkxrRSxTQUFTLEVBQUUscUJBQVk7SUFDbkIsS0FBSyxJQUFJbEUsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRzNDLEVBQUUsQ0FBQ21DLE1BQUgsQ0FBVTJFLEtBQTlCLEVBQXFDbkUsQ0FBQyxFQUF0QyxFQUEwQztNQUN0QyxJQUFJLENBQUMzQyxFQUFFLENBQUMyQixHQUFILENBQU9DLFVBQVAsQ0FBa0JtRixVQUFsQixDQUE2QixLQUFLcEUsQ0FBbEMsRUFBcUMsQ0FBckMsQ0FBTCxFQUE4QztRQUMxQyxPQUFPLENBQUMsQ0FBUjtNQUNIO0lBQ0o7O0lBQ0QsT0FBTyxDQUFDLENBQVI7RUFDSCxDQWxPSTtFQW1PTHFFLGNBQWMsRUFBRSwwQkFBWTtJQUN4QixLQUFLbkcsT0FBTCxDQUFhbUIsTUFBYixHQUFzQixLQUFLNkUsU0FBTCxFQUF0QjtFQUNILENBck9JO0VBc09MbkYsZUFBZSxFQUFFLDJCQUFZO0lBQ3pCLEtBQUtaLFFBQUwsQ0FBY2tCLE1BQWQsR0FBdUIsQ0FBQ2hDLEVBQUUsQ0FBQ21DLE1BQUgsQ0FBVThFLE1BQWxDO0VBQ0g7QUF4T0ksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHNob3BSZWQ6IGNjLk5vZGUsXG4gICAgICAgIGJhdHRsZVJlZDogY2MuTm9kZSxcbiAgICAgICAgdG9vbEx2UmVkOiBjYy5Ob2RlLFxuICAgICAgICBhY3RMZXZlbFJlZDogY2MuTm9kZSxcbiAgICAgICAgcmFua1JlZDogY2MuTm9kZSxcbiAgICAgICAgc2lnblJlZDogY2MuTm9kZSxcbiAgICAgICAgc2hhcmVSZWQ6IGNjLk5vZGUsXG4gICAgICAgIG1pc3Npb25SZWQ6IGNjLk5vZGUsXG4gICAgICAgIGZ1bmRSZWQ6IGNjLk5vZGUsXG4gICAgICAgIGdhbWUyUmVkOiBjYy5Ob2RlXG4gICAgfSxcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2MuUmVkQ29udHJvbCA9IHRoaXM7XG4gICAgfSxcbiAgICByZWZyZXNoQWxsUmVkVGlwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub25DaGVja1Nob3BSZWQoKTtcbiAgICAgICAgdGhpcy5vbkNoZWNrQmF0dGxlUmVkKCk7XG4gICAgICAgIHRoaXMub25DaGVja1Rvb2xMdlJlZCgpO1xuICAgICAgICB0aGlzLm9uQ2hlY2tBY3RMZXZlbFJlZCgpO1xuICAgICAgICB0aGlzLm9uQ2hlY1JhbmtSZWQoKTtcbiAgICAgICAgdGhpcy5vbkNoZWNrU2lnblJlZCgpO1xuICAgICAgICB0aGlzLm9uQ2hlY2tTaGFyZVJlZCgpO1xuICAgICAgICB0aGlzLm9uQ2hlY2tNaXNzaW9uUmVkKCk7XG4gICAgICAgIHRoaXMub25DaGVja0dhbWUyUmVkKCk7XG4gICAgfSxcbiAgICBvbkNoZWNSYW5rUmVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCkgPD0gY2MucHZ6LkdhbWVDb25maWcuT3BlblN5c0x2WzFdKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmtSZWQuYWN0aXZlID0gITE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobmV3IERhdGUoKS5nZXREYXRlKCkgPT0gY2MucGxheWVyLmdhbWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yYW5rUmVkLmFjdGl2ZSA9IGNjLnBsYXllci5yYW5rQ291bnQgPiAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmtSZWQuYWN0aXZlID0gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQ2hlY2tNaXNzaW9uUmVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmNoZWNrQW5kUmVzZXREYXlNaXNzaW9uKCk7XG4gICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmNoZWNrQW5kUmVzZXRXZWVrTWlzc2lvbigpO1xuICAgICAgICBpZiAodGhpcy5vbkNoZWNrRGF5TWlzc2lvblJlZCgpIHx8IHRoaXMub25DaGVja1dlZWtNaXNzaW9uUmVkKCkgfHwgdGhpcy5vbkNoZWNrQWNoaWV2ZU1pc3Npb25SZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5taXNzaW9uUmVkLmFjdGl2ZSA9ICEwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5taXNzaW9uUmVkLmFjdGl2ZSA9ICExO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNoZWNrRGF5TWlzc2lvblJlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IGNjLkpzb25Db250cm9sLmdldEFsbERheU1pc3Npb25Kc29uKCk7XG4gICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgdmFyIGkgPSBlW3RdO1xuICAgICAgICAgICAgdmFyIG8gPSBjYy5wdnouUGxheWVyRGF0YS5nZXREYXlNaXNzaW9uRGF0YShpLmZ1bmMpO1xuICAgICAgICAgICAgaWYgKCFvLmlzUmV3YXJkICYmIG8ucHJvID49IGkubmVlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYSA9IGNjLkpzb25Db250cm9sLmdldERheU1pc3Npb25Cb3hKc29uKCk7XG4gICAgICAgIHZhciBjID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0SXRlbU51bShjYy5wdnouR2FtZUNvbmZpZy5JdGVtVHlwZVtcIuaXpeW4uOS7u+WKoeenr+WIhlwiXSk7XG4gICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgYS5sZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgdmFyIG4gPSBhW3NdO1xuICAgICAgICAgICAgaWYgKCFjYy5wdnouUGxheWVyRGF0YS5nZXREYXlCb3hEYXRhKG4uSUQpLmlzUmV3YXJkICYmIGMgPj0gbi5zY29yZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfSxcbiAgICBvbkNoZWNrV2Vla01pc3Npb25SZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSBjYy5Kc29uQ29udHJvbC5nZXRBbGxXZWVrTWlzc2lvbkpzb24oKTtcbiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICB2YXIgaSA9IGVbdF07XG4gICAgICAgICAgICB2YXIgbyA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFdlZWtNaXNzaW9uRGF0YShpLmZ1bmMpO1xuICAgICAgICAgICAgaWYgKCFvLmlzUmV3YXJkICYmIG8ucHJvID49IGkubmVlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYSA9IGNjLkpzb25Db250cm9sLmdldFdlZWtNaXNzaW9uQm94SnNvbigpO1xuICAgICAgICB2YXIgYyA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEl0ZW1OdW0oY2MucHZ6LkdhbWVDb25maWcuSXRlbVR5cGVbXCLlkajluLjku7vliqHnp6/liIZcIl0pO1xuICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IGEubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgICAgIHZhciBuID0gYVtzXTtcbiAgICAgICAgICAgIGlmICghY2MucHZ6LlBsYXllckRhdGEuZ2V0V2Vla0JveERhdGEobi5JRCkuaXNSZXdhcmQgJiYgYyA+PSBuLnNjb3JlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9LFxuICAgIG9uQ2hlY2tBY2hpZXZlTWlzc2lvblJlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IGNjLkpzb25Db250cm9sLmdldEFsbEFjaGlldmVKc29uKCk7XG4gICAgICAgIHZhciB0ID0gTWF0aC5mbG9vcihlW2UubGVuZ3RoIC0gMV0uSUQgLyAxMDApO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIG8gPSBpICsgMTtcbiAgICAgICAgICAgIHZhciBhID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0QWNoaWV2ZURhdGEobyk7XG4gICAgICAgICAgICBpZiAoIWEuZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSAxMDAgKiBvICsgYS5sdjtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IGNjLkpzb25Db250cm9sLmdldEFjaGlldmVKc29uKGMpO1xuICAgICAgICAgICAgICAgIHZhciBuID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0QWNoaWV2ZVByb2dyZXNzKHMuZnVuYyk7XG4gICAgICAgICAgICAgICAgaWYgKHMubmVlZFswXSA8PSBuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH0sXG4gICAgb25DaGVja1NpZ25SZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2MucHZ6LlBsYXllckRhdGEuY2hlY2tBbmRSZXNldFNpZ24oKTtcbiAgICAgICAgdmFyIGUgPSBjYy5wdnouUGxheWVyRGF0YS5nZXRTaWduRGF0YSgpO1xuICAgICAgICB0aGlzLnNpZ25SZWQuYWN0aXZlID0gIWUuaXNSZXdhcmQ7XG4gICAgfSxcbiAgICBvbkNoZWNrU2hvcFJlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAobmV3IERhdGUoKS5nZXREYXRlKCkgPT0gY2MucGxheWVyLnNob3BEYXRlKSB7XG4gICAgICAgICAgICBpZiAoMSAhPSBjYy5wdnouUGxheWVyRGF0YS5nZXRTaG9wVGltZXMoY2MucHZ6LkdhbWVDb25maWcuU2hvcFRpbWVzVHlwZVtcIumSu+efs+WFjei0uVwiXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoNyAhPSBjYy5wdnouUGxheWVyRGF0YS5nZXRTaG9wVGltZXMoY2MucHZ6LkdhbWVDb25maWcuU2hvcFRpbWVzVHlwZVtcIumHkeW4geWFjei0uVwiXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBjYy5wbGF5ZXIuc2hvcEJveERhdGEuZGF0ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC0xICE9IGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gZSkgLyAxZTMpID49IGNjLnB2ei5HYW1lQ29uZmlnLlNob3BCb3hDRFswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvcFJlZC5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG9wUmVkLmFjdGl2ZSA9ICExO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG9wUmVkLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG9wUmVkLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG9wUmVkLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG9wUmVkLmFjdGl2ZSA9ICEwO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNoZWNrQmF0dGxlUmVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmNoZWNrQW5kUmVzZXRHYW1lRGF0ZSgpO1xuICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5jaGVja0FuZFJlc2V0U2lnbigpO1xuICAgICAgICBpZiAoY2MucHZ6LlBsYXllckRhdGEuZ2V0U2lnbkRhdGEoKS5pc1Jld2FyZCkge1xuICAgICAgICAgICAgdmFyIGUgPSBjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCk7XG4gICAgICAgICAgICB2YXIgdCA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldE1heExldmVsV2F2ZSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGU7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IGUgPiBpO1xuICAgICAgICAgICAgICAgIHZhciBhID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0TGV2ZWxCb3hEYXRhKGkpO1xuICAgICAgICAgICAgICAgIHZhciBjID0gY2MuSnNvbkNvbnRyb2wuZ2V0TGV2ZWxKc29uKGkpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgYS5sZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGNbXCJ3YXZlXCIgKyAocyArIDEpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gYVtzXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAodGhpcy5iYXR0bGVSZWQuYWN0aXZlID0gITApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPj0gbiAmJiBlID09IHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAodGhpcy5iYXR0bGVSZWQuYWN0aXZlID0gITApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2MucHZ6LlBsYXllckRhdGEuY2hlY2tBbmRSZXNldERheU1pc3Npb24oKTtcbiAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmNoZWNrQW5kUmVzZXRXZWVrTWlzc2lvbigpO1xuICAgICAgICAgICAgaWYgKHRoaXMub25DaGVja0RheU1pc3Npb25SZWQoKSB8fCB0aGlzLm9uQ2hlY2tXZWVrTWlzc2lvblJlZCgpIHx8IHRoaXMub25DaGVja0FjaGlldmVNaXNzaW9uUmVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhdHRsZVJlZC5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYXR0bGVSZWQuYWN0aXZlID0gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJhdHRsZVJlZC5hY3RpdmUgPSAhMDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DaGVja1Rvb2xMdlJlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IFtdO1xuICAgICAgICB2YXIgdCA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFN0YWdlTGV2ZWwoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYy5wdnouR2FtZUNvbmZpZy5NYXhUb29sQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIG8gPSBpICsgMTtcbiAgICAgICAgICAgIGlmIChjYy5wdnouR2FtZUNvbmZpZy5Ub29sTG9ja0xldmVsW2ldIDwgdCkge1xuICAgICAgICAgICAgICAgIGUucHVzaChvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGUubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgIHZhciBjID0gZVthXTtcbiAgICAgICAgICAgIHZhciBzID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0VG9vbERhdGEoYyk7XG4gICAgICAgICAgICBpZiAocy5sdiA8IGNjLnB2ei5HYW1lQ29uZmlnLk1heFRvb2xMdikge1xuICAgICAgICAgICAgICAgIHZhciBuID0gY2MuSnNvbkNvbnRyb2wuZ2V0VG9vbEpzb24oYyk7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSBjYy5Kc29uQ29udHJvbC5nZXRUb29sTHZVcEpzb24ocy5sdik7XG4gICAgICAgICAgICAgICAgdmFyIGggPSByW1wic3BcIiArIG4ucXVhbGl0eV07XG4gICAgICAgICAgICAgICAgaWYgKHMuYyA+PSBoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gcltcImNvaW5zXCIgKyBuLnF1YWxpdHldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2MucHZ6LlBsYXllckRhdGEuaXNJdGVtRW5vdWdoKGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi6YeR5biBXCJdLCBwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgKHRoaXMudG9vbEx2UmVkLmFjdGl2ZSA9ICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2MucHZ6LlBsYXllckRhdGEuaXNFbm91Z2hBcnJheVRvb2woKSkge1xuICAgICAgICAgICAgdGhpcy50b29sTHZSZWQuYWN0aXZlID0gITE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xMdlJlZC5hY3RpdmUgPSAhMDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DaGVja0FjdExldmVsUmVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYy5wdnouUGxheWVyRGF0YS5nZXRTdGFnZUxldmVsKCkgPD0gY2MucHZ6LkdhbWVDb25maWcuT3BlblN5c0x2WzBdKSB7XG4gICAgICAgICAgICB0aGlzLmFjdExldmVsUmVkLmFjdGl2ZSA9ICExO1xuICAgICAgICB9IGVsc2UgaWYgKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpID09IGNjLnBsYXllci5hY3RMZXZlbERhdGUpIHtcbiAgICAgICAgICAgIHZhciBlID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0QWN0TGV2ZWxEYXRhKCk7XG4gICAgICAgICAgICBpZiAoZS50aW1lcyA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdExldmVsUmVkLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGNjLkpzb25Db250cm9sLkFjdExldmVsQm94SnNvbjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodFtpXS5zY29yZSA8PSBlLnNjb3JlICYmIDAgPT0gZS5ib3hTdGF0dXNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkICh0aGlzLmFjdExldmVsUmVkLmFjdGl2ZSA9ICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFjdExldmVsUmVkLmFjdGl2ZSA9ICExO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY3RMZXZlbFJlZC5hY3RpdmUgPSAhMDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DaGVja1NoYXJlUmVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gIWNjLnBsYXllci5pc1NoYXJlO1xuICAgICAgICB0aGlzLnNoYXJlUmVkLmFjdGl2ZSA9IGU7XG4gICAgfSxcbiAgICBpc0Z1bmRSZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgZSA9IDI7IGUgPCBjYy5wbGF5ZXIubGV2ZWw7IGUrKykge1xuICAgICAgICAgICAgaWYgKCFjYy5wdnouUGxheWVyRGF0YS5oYXNGdW5kR2V0KDk5ICsgZSwgMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH0sXG4gICAgb25DaGVja0Z1bmRSZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mdW5kUmVkLmFjdGl2ZSA9IHRoaXMuaXNGdW5kUmVkKCk7XG4gICAgfSxcbiAgICBvbkNoZWNrR2FtZTJSZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5nYW1lMlJlZC5hY3RpdmUgPSAhY2MucGxheWVyLmdhbWUydDtcbiAgICB9XG59KTtcbiJdfQ==