
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/UITask.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '64a83LjrxpA6o6L3w0S3Z8i', 'UITask');
// mainUI/scripts/UITask.js

"use strict";

cc.TaskPage = cc.Enum({
  taskPage: 1,
  achievePage: 2
});
cc.Class({
  "extends": cc.Component,
  properties: {
    coinLabel: cc.Label,
    diamondLabel: cc.Label,
    boxBgSprite: cc.Sprite,
    scoreSprite: cc.Sprite,
    scoreLabel: cc.Label,
    boxScorePanel: cc.Node,
    boxSpinePanel: cc.Node,
    missionProBar: cc.ProgressBar,
    missionWeekProBar: cc.ProgressBar,
    missionPanel: cc.Node,
    missionScroll: cc.ScrollView,
    missionParent: cc.Node,
    baseMissionItem: cc.Node,
    achievePanel: cc.Node,
    achieveScroll: cc.ScrollView,
    achieveParent: cc.Node,
    baseAchieveItem: cc.Node,
    timesLabel: cc.Label,
    redTips: [cc.Node],
    boxPanel: cc.Node,
    rewardParent: cc.Node
  },
  initTimeShow: function initTimeShow() {
    if (this.isDayMission) {
      this.lastTime = cc.pvz.utils.getTodayLastTimes();
    } else {
      var e = cc.pvz.utils.getTodayLastTimes();
      var t = cc.pvz.utils.getCurDayInWeek();

      if (7 == t) {
        this.lastTime = e;
      } else {
        this.lastTime = e + 86400 * (7 - t);
      }
    }

    this.timesLabel.string = cc.pvz.utils.formatCDTime(this.lastTime);
    this.schedule(this.refreshTimeShow, 1);
  },
  refreshTimeShow: function refreshTimeShow() {
    this.lastTime--;

    if (this.lastTime > 0) {
      this.timesLabel.string = cc.pvz.utils.formatCDTime(this.lastTime);
    } else {
      this.unschedule(this.refreshTimeShow, this);
    }
  },
  onCloseUI: function onCloseUI() {
    cc.MainControl.updateItemInfo();
    cc.RedControl.refreshAllRedTip();
    cc.popupManager.removePopup(this);
  },
  onToggleChange: function onToggleChange(e, t) {
    var i = parseInt(t);

    if (i != this.curPage) {
      this.curPage = i;
      this["refreshPage" + i]();
    }
  },
  initBy: function initBy(e) {
    if (void 0 === e) {
      e = 1;
    }

    cc.UITask = this;
    this.updateItemInfo();
    this.curPage = e;
    this["refreshPage" + e]();
    this.redTips[0].active = cc.RedControl.onCheckDayMissionRed();
    this.redTips[1].active = cc.RedControl.onCheckWeekMissionRed();
    this.redTips[2].active = cc.RedControl.onCheckAchieveMissionRed();
    this.stageLevel = cc.pvz.PlayerData.getStageLevel();
  },
  initBoxInfo: function initBoxInfo() {
    this.scoreNum = cc.pvz.PlayerData.getItemNum(this.isDayMission ? cc.pvz.GameConfig.ItemType["日常任务积分"] : cc.pvz.GameConfig.ItemType["周常任务积分"]);
    this.scoreLabel.string = this.scoreNum;
    this.missionProBar.node.active = this.isDayMission;
    this.missionWeekProBar.node.active = !this.isDayMission;

    if (this.isDayMission) {
      this.missionProBar.progress = this.scoreNum / this.BoxJson[this.BoxJson.length - 1].score;
    } else {
      this.missionWeekProBar.progress = this.scoreNum / this.BoxJson[this.BoxJson.length - 1].score;
    }

    cc.pvz.utils.setSpriteFrame(this.boxBgSprite, "uiImage", "mission/bg" + (this.isDayMission ? 1 : 2));
    cc.pvz.utils.setSpriteFrame(this.scoreSprite, "uiImage", "item/item" + (this.isDayMission ? 50 : 51));

    for (var e = 0; e < this.BoxJson.length; e++) {
      this.boxScorePanel.children[e].getComponent(cc.Label).string = this.BoxJson[e].score;
      var t;

      if (this.isDayMission ? cc.pvz.PlayerData.getDayBoxData(this.BoxJson[e].ID).isReward : cc.pvz.PlayerData.getWeekBoxData(this.BoxJson[e].ID).isReward) {
        t = 3;
      } else {
        if (this.scoreNum >= this.BoxJson[e].score) {
          t = 2;
        } else {
          t = 1;
        }
      }

      this.boxSpinePanel.children[e].getComponent(sp.Skeleton).setAnimation(0, "libao" + t, !0);
    }
  },
  onClickBox: function onClickBox(e, t) {
    var i = this;
    var o = parseInt(t);
    var a = this.BoxJson[o - 1];

    if ((this.isDayMission ? cc.pvz.PlayerData.getDayBoxData(a.ID) : cc.pvz.PlayerData.getWeekBoxData(a.ID)).isReward) {
      cc.popupManager.showToast("奖励已领取");
    } else {
      var c = this.scoreNum >= a.score;
      var s = a.reward;
      var n = Math.floor(s.length / 2);
      var r = 0;
      this.rewardData = [];

      for (var h = 0; h < n; h++) {
        var p = s[r];
        var l = s[r + 1];

        if (p == cc.pvz.GameConfig.ItemType["金币"]) {
          if (this.isDayMission) {
            l += 50 * (this.stageLevel - 1);
          } else {
            l += 100 * (this.stageLevel - 1);
          }
        }

        var d = cc.pvz.utils.getRewardItem(p, l);
        this.rewardData.push(d);
        r += 2;
      }

      if (c) {
        this.boxPanel.active = !1;

        if (this.isDayMission) {
          cc.pvz.PlayerData.finishDayBoxReward(o);
          this.redTips[0].active = cc.RedControl.onCheckDayMissionRed();
        } else {
          cc.pvz.PlayerData.finishWeekBoxReward(o);
          this.redTips[1].active = cc.RedControl.onCheckWeekMissionRed();
        }

        this.boxSpinePanel.children[o - 1].getComponent(sp.Skeleton).setAnimation(0, "libao3", !0);
        var v;

        if (this.isDayMission) {
          v = cc.pvz.GameConfig.UIFromType["日常任务"];
        } else {
          v = cc.pvz.GameConfig.UIFromType["周常任务"];
        }

        cc.popupManager.popup("mainUI", "getrewardUI", "UIReward", {
          ad: !1,
          scale: !1
        }, this.rewardData, v, function () {
          i.updateItemInfo();
        });
      } else {
        if (o != this.curBoxId) {
          this.curBoxId = o;
          this.boxPanel.active = !0;
          this.refreshBoxPanelInfo(o);
        } else {
          if (this.boxPanel.active) {
            this.boxPanel.active = !1;
          } else {
            this.boxPanel.active = !0;
          }
        }
      }
    }
  },
  refreshBoxPanelInfo: function refreshBoxPanelInfo(e) {
    var t = this.boxSpinePanel.children[e - 1].position;
    this.boxPanel.position = cc.v2(t.x, this.boxPanel.position.y);

    for (var i = 0; i < this.rewardParent.childrenCount; i++) {
      var o = this.rewardParent.children[i];

      if (i < this.rewardData.length) {
        o.active = !0;
        o.getComponent("RewardItem").initBoxRewardItem(this.rewardData[i]);
      } else {
        o.active = !1;
      }
    }
  },
  updateItemInfo: function updateItemInfo() {
    var e = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType["金币"]);
    this.coinLabel.string = cc.pvz.utils.formatItemNum(e);
    var t = cc.pvz.PlayerData.getItemNum(cc.pvz.GameConfig.ItemType["钻石"]);
    this.diamondLabel.string = cc.pvz.utils.formatItemNum(t);
  },
  getItemEffectPos: function getItemEffectPos(e) {
    if (e === cc.pvz.GameConfig.ItemType["钻石"]) {
      return this.diamondLabel.node.convertToWorldSpaceAR(cc.v2());
    } else {
      return this.coinLabel.node.convertToWorldSpaceAR(cc.v2());
    }
  },
  refreshPage1: function refreshPage1() {
    var e = this;
    this.missionPanel.active = !0;
    this.achievePanel.active = !1;
    this.boxPanel.active = !1;
    this.curBoxId = -1;
    cc.pvz.PlayerData.checkAndResetDayMission();
    this.isDayMission = !0;
    this.BoxJson = cc.JsonControl.getDayMissionBoxJson();
    this.initBoxInfo();
    var t = cc.JsonControl.getAllDayMissionJson().map(function (e) {
      return e;
    }).sort(function (e, t) {
      var i = cc.pvz.PlayerData.getDayMissionData(e.func);
      var o = e.need;
      var a;

      if (i.isReward) {
        a = 2;
      } else {
        if (i.pro >= o) {
          a = 0;
        } else {
          a = 1;
        }
      }

      var c = cc.pvz.PlayerData.getDayMissionData(t.func);
      var s = t.need;
      return a - (c.isReward ? 2 : c.pro >= s ? 0 : 1);
    });
    var i = t.length;
    var o = i - this.missionParent.childrenCount;

    if (o > 0) {
      for (var a = 0; a < o; a++) {
        (n = cc.instantiate(this.baseMissionItem)).parent = this.missionParent;
      }
    } else {
      for (var c = i; c < this.missionParent.childrenCount; c++) {
        this.missionParent.children[c].active = !1;
      }
    }

    for (var s = 0; s < i; s++) {
      var n;
      (n = this.missionParent.children[s]).active = !0;
      n.getComponent("TaskItem").initMissionItem(!0, t[s], function () {
        e.initBoxInfo();
        e.redTips[0].active = cc.RedControl.onCheckDayMissionRed();
      });
    }

    this.initTimeShow();
    this.missionScroll.scrollToTop(0.1);
  },
  refreshPage2: function refreshPage2() {
    var e = this;
    this.missionPanel.active = !0;
    this.achievePanel.active = !1;
    this.boxPanel.active = !1;
    this.curBoxId = -1;
    cc.pvz.PlayerData.checkAndResetWeekMission();
    this.isDayMission = !1;
    this.BoxJson = cc.JsonControl.getWeekMissionBoxJson();
    this.initBoxInfo();
    var t = cc.JsonControl.getAllWeekMissionJson().map(function (e) {
      return e;
    }).sort(function (e, t) {
      var i = cc.pvz.PlayerData.getWeekMissionData(e.func);
      var o = e.need;
      var a;

      if (i.isReward) {
        a = 2;
      } else {
        if (i.pro >= o) {
          a = 0;
        } else {
          a = 1;
        }
      }

      var c = cc.pvz.PlayerData.getWeekMissionData(t.func);
      var s = t.need;
      return a - (c.isReward ? 2 : c.pro >= s ? 0 : 1);
    });
    var i = t.length;
    var o = i - this.missionParent.childrenCount;

    if (o > 0) {
      for (var a = 0; a < o; a++) {
        (n = cc.instantiate(this.baseMissionItem)).parent = this.missionParent;
      }
    } else {
      for (var c = i; c < this.missionParent.childrenCount; c++) {
        this.missionParent.children[c].active = !1;
      }
    }

    for (var s = 0; s < i; s++) {
      var n;
      (n = this.missionParent.children[s]).active = !0;
      n.getComponent("TaskItem").initMissionItem(!1, t[s], function () {
        e.initBoxInfo();
        e.redTips[1].active = cc.RedControl.onCheckWeekMissionRed();
      });
    }

    this.initTimeShow();
    this.missionScroll.scrollToTop(0.1);
  },
  refreshPage3: function refreshPage3() {
    var e = this;
    this.missionPanel.active = !1;
    this.achievePanel.active = !0;
    this.boxPanel.active = !1;
    this.achieveList = [];
    this.AchieveJson = cc.JsonControl.getAllAchieveJson();
    var t = Math.floor(this.AchieveJson[this.AchieveJson.length - 1].ID / 100);
    var i = [];

    for (var o = 0; o < t; o++) {
      i.push(o + 1);
    }

    i.sort(function (e, t) {
      var i = cc.pvz.PlayerData.getAchieveData(e);
      var o = 0;

      if (i.end) {
        o = 2;
      } else {
        var a = 100 * e + i.lv;
        var c = cc.JsonControl.getAchieveJson(a);
        var s = cc.pvz.PlayerData.getAchieveProgress(c.func);

        if (c.need[0] <= s) {
          o = 0;
        } else {
          o = 1;
        }
      }

      var n = cc.pvz.PlayerData.getAchieveData(t);
      var r = 0;

      if (n.end) {
        r = 2;
      } else {
        var h = 100 * t + n.lv;
        var p = cc.JsonControl.getAchieveJson(h);
        var l = cc.pvz.PlayerData.getAchieveProgress(p.func);

        if (p.need[0] <= l) {
          r = 0;
        } else {
          r = 1;
        }
      }

      return o - r;
    });
    var a = t - this.achieveParent.childrenCount;

    if (a > 0) {
      for (var c = 0; c < a; c++) {
        cc.instantiate(this.baseAchieveItem).parent = this.achieveParent;
      }
    } else {
      for (var s = t; s < this.achieveParent.childrenCount; s++) {
        this.achieveParent.children[s].active = !1;
      }
    }

    for (var n = 0; n < t; n++) {
      this.achieveParent.children[n].getComponent("TaskItem").initAchieveMissionItem(i[n], function () {
        e.updateItemInfo();
        e.redTips[2].active = cc.RedControl.onCheckAchieveMissionRed();
      });
    }

    this.achieveScroll.scrollToTop(0.1);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9VSVRhc2suanMiXSwibmFtZXMiOlsiY2MiLCJUYXNrUGFnZSIsIkVudW0iLCJ0YXNrUGFnZSIsImFjaGlldmVQYWdlIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiY29pbkxhYmVsIiwiTGFiZWwiLCJkaWFtb25kTGFiZWwiLCJib3hCZ1Nwcml0ZSIsIlNwcml0ZSIsInNjb3JlU3ByaXRlIiwic2NvcmVMYWJlbCIsImJveFNjb3JlUGFuZWwiLCJOb2RlIiwiYm94U3BpbmVQYW5lbCIsIm1pc3Npb25Qcm9CYXIiLCJQcm9ncmVzc0JhciIsIm1pc3Npb25XZWVrUHJvQmFyIiwibWlzc2lvblBhbmVsIiwibWlzc2lvblNjcm9sbCIsIlNjcm9sbFZpZXciLCJtaXNzaW9uUGFyZW50IiwiYmFzZU1pc3Npb25JdGVtIiwiYWNoaWV2ZVBhbmVsIiwiYWNoaWV2ZVNjcm9sbCIsImFjaGlldmVQYXJlbnQiLCJiYXNlQWNoaWV2ZUl0ZW0iLCJ0aW1lc0xhYmVsIiwicmVkVGlwcyIsImJveFBhbmVsIiwicmV3YXJkUGFyZW50IiwiaW5pdFRpbWVTaG93IiwiaXNEYXlNaXNzaW9uIiwibGFzdFRpbWUiLCJwdnoiLCJ1dGlscyIsImdldFRvZGF5TGFzdFRpbWVzIiwiZSIsInQiLCJnZXRDdXJEYXlJbldlZWsiLCJzdHJpbmciLCJmb3JtYXRDRFRpbWUiLCJzY2hlZHVsZSIsInJlZnJlc2hUaW1lU2hvdyIsInVuc2NoZWR1bGUiLCJvbkNsb3NlVUkiLCJNYWluQ29udHJvbCIsInVwZGF0ZUl0ZW1JbmZvIiwiUmVkQ29udHJvbCIsInJlZnJlc2hBbGxSZWRUaXAiLCJwb3B1cE1hbmFnZXIiLCJyZW1vdmVQb3B1cCIsIm9uVG9nZ2xlQ2hhbmdlIiwiaSIsInBhcnNlSW50IiwiY3VyUGFnZSIsImluaXRCeSIsIlVJVGFzayIsImFjdGl2ZSIsIm9uQ2hlY2tEYXlNaXNzaW9uUmVkIiwib25DaGVja1dlZWtNaXNzaW9uUmVkIiwib25DaGVja0FjaGlldmVNaXNzaW9uUmVkIiwic3RhZ2VMZXZlbCIsIlBsYXllckRhdGEiLCJnZXRTdGFnZUxldmVsIiwiaW5pdEJveEluZm8iLCJzY29yZU51bSIsImdldEl0ZW1OdW0iLCJHYW1lQ29uZmlnIiwiSXRlbVR5cGUiLCJub2RlIiwicHJvZ3Jlc3MiLCJCb3hKc29uIiwibGVuZ3RoIiwic2NvcmUiLCJzZXRTcHJpdGVGcmFtZSIsImNoaWxkcmVuIiwiZ2V0Q29tcG9uZW50IiwiZ2V0RGF5Qm94RGF0YSIsIklEIiwiaXNSZXdhcmQiLCJnZXRXZWVrQm94RGF0YSIsInNwIiwiU2tlbGV0b24iLCJzZXRBbmltYXRpb24iLCJvbkNsaWNrQm94IiwibyIsImEiLCJzaG93VG9hc3QiLCJjIiwicyIsInJld2FyZCIsIm4iLCJNYXRoIiwiZmxvb3IiLCJyIiwicmV3YXJkRGF0YSIsImgiLCJwIiwibCIsImQiLCJnZXRSZXdhcmRJdGVtIiwicHVzaCIsImZpbmlzaERheUJveFJld2FyZCIsImZpbmlzaFdlZWtCb3hSZXdhcmQiLCJ2IiwiVUlGcm9tVHlwZSIsInBvcHVwIiwiYWQiLCJzY2FsZSIsImN1ckJveElkIiwicmVmcmVzaEJveFBhbmVsSW5mbyIsInBvc2l0aW9uIiwidjIiLCJ4IiwieSIsImNoaWxkcmVuQ291bnQiLCJpbml0Qm94UmV3YXJkSXRlbSIsImZvcm1hdEl0ZW1OdW0iLCJnZXRJdGVtRWZmZWN0UG9zIiwiY29udmVydFRvV29ybGRTcGFjZUFSIiwicmVmcmVzaFBhZ2UxIiwiY2hlY2tBbmRSZXNldERheU1pc3Npb24iLCJKc29uQ29udHJvbCIsImdldERheU1pc3Npb25Cb3hKc29uIiwiZ2V0QWxsRGF5TWlzc2lvbkpzb24iLCJtYXAiLCJzb3J0IiwiZ2V0RGF5TWlzc2lvbkRhdGEiLCJmdW5jIiwibmVlZCIsInBybyIsImluc3RhbnRpYXRlIiwicGFyZW50IiwiaW5pdE1pc3Npb25JdGVtIiwic2Nyb2xsVG9Ub3AiLCJyZWZyZXNoUGFnZTIiLCJjaGVja0FuZFJlc2V0V2Vla01pc3Npb24iLCJnZXRXZWVrTWlzc2lvbkJveEpzb24iLCJnZXRBbGxXZWVrTWlzc2lvbkpzb24iLCJnZXRXZWVrTWlzc2lvbkRhdGEiLCJyZWZyZXNoUGFnZTMiLCJhY2hpZXZlTGlzdCIsIkFjaGlldmVKc29uIiwiZ2V0QWxsQWNoaWV2ZUpzb24iLCJnZXRBY2hpZXZlRGF0YSIsImVuZCIsImx2IiwiZ2V0QWNoaWV2ZUpzb24iLCJnZXRBY2hpZXZlUHJvZ3Jlc3MiLCJpbml0QWNoaWV2ZU1pc3Npb25JdGVtIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxFQUFFLENBQUNDLFFBQUgsR0FBY0QsRUFBRSxDQUFDRSxJQUFILENBQVE7RUFDbEJDLFFBQVEsRUFBRSxDQURRO0VBRWxCQyxXQUFXLEVBQUU7QUFGSyxDQUFSLENBQWQ7QUFJQUosRUFBRSxDQUFDSyxLQUFILENBQVM7RUFDTCxXQUFTTCxFQUFFLENBQUNNLFNBRFA7RUFFTEMsVUFBVSxFQUFFO0lBQ1JDLFNBQVMsRUFBRVIsRUFBRSxDQUFDUyxLQUROO0lBRVJDLFlBQVksRUFBRVYsRUFBRSxDQUFDUyxLQUZUO0lBR1JFLFdBQVcsRUFBRVgsRUFBRSxDQUFDWSxNQUhSO0lBSVJDLFdBQVcsRUFBRWIsRUFBRSxDQUFDWSxNQUpSO0lBS1JFLFVBQVUsRUFBRWQsRUFBRSxDQUFDUyxLQUxQO0lBTVJNLGFBQWEsRUFBRWYsRUFBRSxDQUFDZ0IsSUFOVjtJQU9SQyxhQUFhLEVBQUVqQixFQUFFLENBQUNnQixJQVBWO0lBUVJFLGFBQWEsRUFBRWxCLEVBQUUsQ0FBQ21CLFdBUlY7SUFTUkMsaUJBQWlCLEVBQUVwQixFQUFFLENBQUNtQixXQVRkO0lBVVJFLFlBQVksRUFBRXJCLEVBQUUsQ0FBQ2dCLElBVlQ7SUFXUk0sYUFBYSxFQUFFdEIsRUFBRSxDQUFDdUIsVUFYVjtJQVlSQyxhQUFhLEVBQUV4QixFQUFFLENBQUNnQixJQVpWO0lBYVJTLGVBQWUsRUFBRXpCLEVBQUUsQ0FBQ2dCLElBYlo7SUFjUlUsWUFBWSxFQUFFMUIs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Q0FBQyxFQUF2RCxFQUEyRDtRQUN2RCxLQUFLakUsYUFBTCxDQUFtQm1ELFFBQW5CLENBQTRCYyxDQUE1QixFQUErQmhDLE1BQS9CLEdBQXdDLENBQUMsQ0FBekM7TUFDSDtJQUNKOztJQUNELEtBQUssSUFBSWtDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUd0RCxDQUFwQixFQUF1QnNELENBQUMsRUFBeEIsRUFBNEI7TUFDeEIsS0FBS25FLGFBQUwsQ0FBbUJtRCxRQUFuQixDQUE0QmdCLENBQTVCLEVBQStCZixZQUEvQixDQUE0QyxVQUE1QyxFQUF3RHlFLHNCQUF4RCxDQUErRWpHLENBQUMsQ0FBQ3VDLENBQUQsQ0FBaEYsRUFBcUYsWUFBWTtRQUM3RnZELENBQUMsQ0FBQ1UsY0FBRjtRQUNBVixDQUFDLENBQUNULE9BQUYsQ0FBVSxDQUFWLEVBQWE4QixNQUFiLEdBQXNCN0QsRUFBRSxDQUFDbUQsVUFBSCxDQUFjYSx3QkFBZCxFQUF0QjtNQUNILENBSEQ7SUFJSDs7SUFDRCxLQUFLckMsYUFBTCxDQUFtQitHLFdBQW5CLENBQStCLEdBQS9CO0VBQ0g7QUFwWEksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuVGFza1BhZ2UgPSBjYy5FbnVtKHtcbiAgICB0YXNrUGFnZTogMSxcbiAgICBhY2hpZXZlUGFnZTogMlxufSk7XG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgY29pbkxhYmVsOiBjYy5MYWJlbCxcbiAgICAgICAgZGlhbW9uZExhYmVsOiBjYy5MYWJlbCxcbiAgICAgICAgYm94QmdTcHJpdGU6IGNjLlNwcml0ZSxcbiAgICAgICAgc2NvcmVTcHJpdGU6IGNjLlNwcml0ZSxcbiAgICAgICAgc2NvcmVMYWJlbDogY2MuTGFiZWwsXG4gICAgICAgIGJveFNjb3JlUGFuZWw6IGNjLk5vZGUsXG4gICAgICAgIGJveFNwaW5lUGFuZWw6IGNjLk5vZGUsXG4gICAgICAgIG1pc3Npb25Qcm9CYXI6IGNjLlByb2dyZXNzQmFyLFxuICAgICAgICBtaXNzaW9uV2Vla1Byb0JhcjogY2MuUHJvZ3Jlc3NCYXIsXG4gICAgICAgIG1pc3Npb25QYW5lbDogY2MuTm9kZSxcbiAgICAgICAgbWlzc2lvblNjcm9sbDogY2MuU2Nyb2xsVmlldyxcbiAgICAgICAgbWlzc2lvblBhcmVudDogY2MuTm9kZSxcbiAgICAgICAgYmFzZU1pc3Npb25JdGVtOiBjYy5Ob2RlLFxuICAgICAgICBhY2hpZXZlUGFuZWw6IGNjLk5vZGUsXG4gICAgICAgIGFjaGlldmVTY3JvbGw6IGNjLlNjcm9sbFZpZXcsXG4gICAgICAgIGFjaGlldmVQYXJlbnQ6IGNjLk5vZGUsXG4gICAgICAgIGJhc2VBY2hpZXZlSXRlbTogY2MuTm9kZSxcbiAgICAgICAgdGltZXNMYWJlbDogY2MuTGFiZWwsXG4gICAgICAgIHJlZFRpcHM6IFtjYy5Ob2RlXSxcbiAgICAgICAgYm94UGFuZWw6IGNjLk5vZGUsXG4gICAgICAgIHJld2FyZFBhcmVudDogY2MuTm9kZVxuICAgIH0sXG4gICAgaW5pdFRpbWVTaG93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGF5TWlzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5sYXN0VGltZSA9IGNjLnB2ei51dGlscy5nZXRUb2RheUxhc3RUaW1lcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGUgPSBjYy5wdnoudXRpbHMuZ2V0VG9kYXlMYXN0VGltZXMoKTtcbiAgICAgICAgICAgIHZhciB0ID0gY2MucHZ6LnV0aWxzLmdldEN1ckRheUluV2VlaygpO1xuICAgICAgICAgICAgaWYgKDcgPT0gdCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFRpbWUgPSBlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RUaW1lID0gZSArIDg2NDAwICogKDcgLSB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRpbWVzTGFiZWwuc3RyaW5nID0gY2MucHZ6LnV0aWxzLmZvcm1hdENEVGltZSh0aGlzLmxhc3RUaW1lKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZSh0aGlzLnJlZnJlc2hUaW1lU2hvdywgMSk7XG4gICAgfSxcbiAgICByZWZyZXNoVGltZVNob3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sYXN0VGltZS0tO1xuICAgICAgICBpZiAodGhpcy5sYXN0VGltZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMudGltZXNMYWJlbC5zdHJpbmcgPSBjYy5wdnoudXRpbHMuZm9ybWF0Q0RUaW1lKHRoaXMubGFzdFRpbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMucmVmcmVzaFRpbWVTaG93LCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbG9zZVVJOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNjLk1haW5Db250cm9sLnVwZGF0ZUl0ZW1JbmZvKCk7XG4gICAgICAgIGNjLlJlZENvbnRyb2wucmVmcmVzaEFsbFJlZFRpcCgpO1xuICAgICAgICBjYy5wb3B1cE1hbmFnZXIucmVtb3ZlUG9wdXAodGhpcyk7XG4gICAgfSxcbiAgICBvblRvZ2dsZUNoYW5nZTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgdmFyIGkgPSBwYXJzZUludCh0KTtcbiAgICAgICAgaWYgKGkgIT0gdGhpcy5jdXJQYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmN1clBhZ2UgPSBpO1xuICAgICAgICAgICAgdGhpc1tcInJlZnJlc2hQYWdlXCIgKyBpXSgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBpbml0Qnk6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIGUgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGNjLlVJVGFzayA9IHRoaXM7XG4gICAgICAgIHRoaXMudXBkYXRlSXRlbUluZm8oKTtcbiAgICAgICAgdGhpcy5jdXJQYWdlID0gZTtcbiAgICAgICAgdGhpc1tcInJlZnJlc2hQYWdlXCIgKyBlXSgpO1xuICAgICAgICB0aGlzLnJlZFRpcHNbMF0uYWN0aXZlID0gY2MuUmVkQ29udHJvbC5vbkNoZWNrRGF5TWlzc2lvblJlZCgpO1xuICAgICAgICB0aGlzLnJlZFRpcHNbMV0uYWN0aXZlID0gY2MuUmVkQ29udHJvbC5vbkNoZWNrV2Vla01pc3Npb25SZWQoKTtcbiAgICAgICAgdGhpcy5yZWRUaXBzWzJdLmFjdGl2ZSA9IGNjLlJlZENvbnRyb2wub25DaGVja0FjaGlldmVNaXNzaW9uUmVkKCk7XG4gICAgICAgIHRoaXMuc3RhZ2VMZXZlbCA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFN0YWdlTGV2ZWwoKTtcbiAgICB9LFxuICAgIGluaXRCb3hJbmZvOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2NvcmVOdW0gPSBjYy5wdnouUGxheWVyRGF0YS5nZXRJdGVtTnVtKFxuICAgICAgICAgICAgdGhpcy5pc0RheU1pc3Npb24gPyBjYy5wdnouR2FtZUNvbmZpZy5JdGVtVHlwZVtcIuaXpeW4uOS7u+WKoeenr+WIhlwiXSA6IGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi5ZGo5bi45Lu75Yqh56ev5YiGXCJdXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc2NvcmVMYWJlbC5zdHJpbmcgPSB0aGlzLnNjb3JlTnVtO1xuICAgICAgICB0aGlzLm1pc3Npb25Qcm9CYXIubm9kZS5hY3RpdmUgPSB0aGlzLmlzRGF5TWlzc2lvbjtcbiAgICAgICAgdGhpcy5taXNzaW9uV2Vla1Byb0Jhci5ub2RlLmFjdGl2ZSA9ICF0aGlzLmlzRGF5TWlzc2lvbjtcbiAgICAgICAgaWYgKHRoaXMuaXNEYXlNaXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLm1pc3Npb25Qcm9CYXIucHJvZ3Jlc3MgPSB0aGlzLnNjb3JlTnVtIC8gdGhpcy5Cb3hKc29uW3RoaXMuQm94SnNvbi5sZW5ndGggLSAxXS5zY29yZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWlzc2lvbldlZWtQcm9CYXIucHJvZ3Jlc3MgPSB0aGlzLnNjb3JlTnVtIC8gdGhpcy5Cb3hKc29uW3RoaXMuQm94SnNvbi5sZW5ndGggLSAxXS5zY29yZTtcbiAgICAgICAgfVxuICAgICAgICBjYy5wdnoudXRpbHMuc2V0U3ByaXRlRnJhbWUodGhpcy5ib3hCZ1Nwcml0ZSwgXCJ1aUltYWdlXCIsIFwibWlzc2lvbi9iZ1wiICsgKHRoaXMuaXNEYXlNaXNzaW9uID8gMSA6IDIpKTtcbiAgICAgICAgY2MucHZ6LnV0aWxzLnNldFNwcml0ZUZyYW1lKHRoaXMuc2NvcmVTcHJpdGUsIFwidWlJbWFnZVwiLCBcIml0ZW0vaXRlbVwiICsgKHRoaXMuaXNEYXlNaXNzaW9uID8gNTAgOiA1MSkpO1xuICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHRoaXMuQm94SnNvbi5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgdGhpcy5ib3hTY29yZVBhbmVsLmNoaWxkcmVuW2VdLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdGhpcy5Cb3hKc29uW2VdLnNjb3JlO1xuICAgICAgICAgICAgdmFyIHQ7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5pc0RheU1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgPyBjYy5wdnouUGxheWVyRGF0YS5nZXREYXlCb3hEYXRhKHRoaXMuQm94SnNvbltlXS5JRCkuaXNSZXdhcmRcbiAgICAgICAgICAgICAgICAgICAgOiBjYy5wdnouUGxheWVyRGF0YS5nZXRXZWVrQm94RGF0YSh0aGlzLkJveEpzb25bZV0uSUQpLmlzUmV3YXJkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0ID0gMztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2NvcmVOdW0gPj0gdGhpcy5Cb3hKc29uW2VdLnNjb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHQgPSAyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHQgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYm94U3BpbmVQYW5lbC5jaGlsZHJlbltlXS5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLCBcImxpYmFvXCIgKyB0LCAhMCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQ2xpY2tCb3g6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHZhciBpID0gdGhpcztcbiAgICAgICAgdmFyIG8gPSBwYXJzZUludCh0KTtcbiAgICAgICAgdmFyIGEgPSB0aGlzLkJveEpzb25bbyAtIDFdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAodGhpcy5pc0RheU1pc3Npb24gPyBjYy5wdnouUGxheWVyRGF0YS5nZXREYXlCb3hEYXRhKGEuSUQpIDogY2MucHZ6LlBsYXllckRhdGEuZ2V0V2Vla0JveERhdGEoYS5JRCkpXG4gICAgICAgICAgICAgICAgLmlzUmV3YXJkXG4gICAgICAgICkge1xuICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnNob3dUb2FzdChcIuWlluWKseW3sumihuWPllwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5zY29yZU51bSA+PSBhLnNjb3JlO1xuICAgICAgICAgICAgdmFyIHMgPSBhLnJld2FyZDtcbiAgICAgICAgICAgIHZhciBuID0gTWF0aC5mbG9vcihzLmxlbmd0aCAvIDIpO1xuICAgICAgICAgICAgdmFyIHIgPSAwO1xuICAgICAgICAgICAgdGhpcy5yZXdhcmREYXRhID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBoID0gMDsgaCA8IG47IGgrKykge1xuICAgICAgICAgICAgICAgIHZhciBwID0gc1tyXTtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IHNbciArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChwID09IGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi6YeR5biBXCJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGF5TWlzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbCArPSA1MCAqICh0aGlzLnN0YWdlTGV2ZWwgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGwgKz0gMTAwICogKHRoaXMuc3RhZ2VMZXZlbCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkID0gY2MucHZ6LnV0aWxzLmdldFJld2FyZEl0ZW0ocCwgbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXdhcmREYXRhLnB1c2goZCk7XG4gICAgICAgICAgICAgICAgciArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJveFBhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGF5TWlzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5maW5pc2hEYXlCb3hSZXdhcmQobyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVkVGlwc1swXS5hY3RpdmUgPSBjYy5SZWRDb250cm9sLm9uQ2hlY2tEYXlNaXNzaW9uUmVkKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2MucHZ6LlBsYXllckRhdGEuZmluaXNoV2Vla0JveFJld2FyZChvKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRUaXBzWzFdLmFjdGl2ZSA9IGNjLlJlZENvbnRyb2wub25DaGVja1dlZWtNaXNzaW9uUmVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYm94U3BpbmVQYW5lbC5jaGlsZHJlbltvIC0gMV0uZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS5zZXRBbmltYXRpb24oMCwgXCJsaWJhbzNcIiwgITApO1xuICAgICAgICAgICAgICAgIHZhciB2O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGF5TWlzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICB2ID0gY2MucHZ6LkdhbWVDb25maWcuVUlGcm9tVHlwZVtcIuaXpeW4uOS7u+WKoVwiXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2ID0gY2MucHZ6LkdhbWVDb25maWcuVUlGcm9tVHlwZVtcIuWRqOW4uOS7u+WKoVwiXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnBvcHVwKFxuICAgICAgICAgICAgICAgICAgICBcIm1haW5VSVwiLFxuICAgICAgICAgICAgICAgICAgICBcImdldHJld2FyZFVJXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiVUlSZXdhcmRcIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWQ6ICExLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6ICExXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmV3YXJkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaS51cGRhdGVJdGVtSW5mbygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG8gIT0gdGhpcy5jdXJCb3hJZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1ckJveElkID0gbztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3hQYW5lbC5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQm94UGFuZWxJbmZvKG8pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJveFBhbmVsLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3hQYW5lbC5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm94UGFuZWwuYWN0aXZlID0gITA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlZnJlc2hCb3hQYW5lbEluZm86IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5ib3hTcGluZVBhbmVsLmNoaWxkcmVuW2UgLSAxXS5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5ib3hQYW5lbC5wb3NpdGlvbiA9IGNjLnYyKHQueCwgdGhpcy5ib3hQYW5lbC5wb3NpdGlvbi55KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJld2FyZFBhcmVudC5jaGlsZHJlbkNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5yZXdhcmRQYXJlbnQuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAoaSA8IHRoaXMucmV3YXJkRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIG8uZ2V0Q29tcG9uZW50KFwiUmV3YXJkSXRlbVwiKS5pbml0Qm94UmV3YXJkSXRlbSh0aGlzLnJld2FyZERhdGFbaV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvLmFjdGl2ZSA9ICExO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICB1cGRhdGVJdGVtSW5mbzogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEl0ZW1OdW0oY2MucHZ6LkdhbWVDb25maWcuSXRlbVR5cGVbXCLph5HluIFcIl0pO1xuICAgICAgICB0aGlzLmNvaW5MYWJlbC5zdHJpbmcgPSBjYy5wdnoudXRpbHMuZm9ybWF0SXRlbU51bShlKTtcbiAgICAgICAgdmFyIHQgPSBjYy5wdnouUGxheWVyRGF0YS5nZXRJdGVtTnVtKGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi6ZK755+zXCJdKTtcbiAgICAgICAgdGhpcy5kaWFtb25kTGFiZWwuc3RyaW5nID0gY2MucHZ6LnV0aWxzLmZvcm1hdEl0ZW1OdW0odCk7XG4gICAgfSxcbiAgICBnZXRJdGVtRWZmZWN0UG9zOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZSA9PT0gY2MucHZ6LkdhbWVDb25maWcuSXRlbVR5cGVbXCLpkrvnn7NcIl0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpYW1vbmRMYWJlbC5ub2RlLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy52MigpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvaW5MYWJlbC5ub2RlLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy52MigpKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVmcmVzaFBhZ2UxOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgdGhpcy5taXNzaW9uUGFuZWwuYWN0aXZlID0gITA7XG4gICAgICAgIHRoaXMuYWNoaWV2ZVBhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmJveFBhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmN1ckJveElkID0gLTE7XG4gICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmNoZWNrQW5kUmVzZXREYXlNaXNzaW9uKCk7XG4gICAgICAgIHRoaXMuaXNEYXlNaXNzaW9uID0gITA7XG4gICAgICAgIHRoaXMuQm94SnNvbiA9IGNjLkpzb25Db250cm9sLmdldERheU1pc3Npb25Cb3hKc29uKCk7XG4gICAgICAgIHRoaXMuaW5pdEJveEluZm8oKTtcbiAgICAgICAgdmFyIHQgPSBjYy5Kc29uQ29udHJvbC5nZXRBbGxEYXlNaXNzaW9uSnNvbigpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNvcnQoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldERheU1pc3Npb25EYXRhKGUuZnVuYyk7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSBlLm5lZWQ7XG4gICAgICAgICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgICAgICAgaWYgKGkuaXNSZXdhcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkucHJvID49IG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBjYy5wdnouUGxheWVyRGF0YS5nZXREYXlNaXNzaW9uRGF0YSh0LmZ1bmMpO1xuICAgICAgICAgICAgICAgIHZhciBzID0gdC5uZWVkO1xuICAgICAgICAgICAgICAgIHJldHVybiBhIC0gKGMuaXNSZXdhcmQgPyAyIDogYy5wcm8gPj0gcyA/IDAgOiAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB2YXIgaSA9IHQubGVuZ3RoO1xuICAgICAgICB2YXIgbyA9IGkgLSB0aGlzLm1pc3Npb25QYXJlbnQuY2hpbGRyZW5Db3VudDtcbiAgICAgICAgaWYgKG8gPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IG87IGErKykge1xuICAgICAgICAgICAgICAgIChuID0gY2MuaW5zdGFudGlhdGUodGhpcy5iYXNlTWlzc2lvbkl0ZW0pKS5wYXJlbnQgPSB0aGlzLm1pc3Npb25QYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gaTsgYyA8IHRoaXMubWlzc2lvblBhcmVudC5jaGlsZHJlbkNvdW50OyBjKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1pc3Npb25QYXJlbnQuY2hpbGRyZW5bY10uYWN0aXZlID0gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBpOyBzKyspIHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgKG4gPSB0aGlzLm1pc3Npb25QYXJlbnQuY2hpbGRyZW5bc10pLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgbi5nZXRDb21wb25lbnQoXCJUYXNrSXRlbVwiKS5pbml0TWlzc2lvbkl0ZW0oITAsIHRbc10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlLmluaXRCb3hJbmZvKCk7XG4gICAgICAgICAgICAgICAgZS5yZWRUaXBzWzBdLmFjdGl2ZSA9IGNjLlJlZENvbnRyb2wub25DaGVja0RheU1pc3Npb25SZWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdFRpbWVTaG93KCk7XG4gICAgICAgIHRoaXMubWlzc2lvblNjcm9sbC5zY3JvbGxUb1RvcCgwLjEpO1xuICAgIH0sXG4gICAgcmVmcmVzaFBhZ2UyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgdGhpcy5taXNzaW9uUGFuZWwuYWN0aXZlID0gITA7XG4gICAgICAgIHRoaXMuYWNoaWV2ZVBhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmJveFBhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmN1ckJveElkID0gLTE7XG4gICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmNoZWNrQW5kUmVzZXRXZWVrTWlzc2lvbigpO1xuICAgICAgICB0aGlzLmlzRGF5TWlzc2lvbiA9ICExO1xuICAgICAgICB0aGlzLkJveEpzb24gPSBjYy5Kc29uQ29udHJvbC5nZXRXZWVrTWlzc2lvbkJveEpzb24oKTtcbiAgICAgICAgdGhpcy5pbml0Qm94SW5mbygpO1xuICAgICAgICB2YXIgdCA9IGNjLkpzb25Db250cm9sLmdldEFsbFdlZWtNaXNzaW9uSnNvbigpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNvcnQoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFdlZWtNaXNzaW9uRGF0YShlLmZ1bmMpO1xuICAgICAgICAgICAgICAgIHZhciBvID0gZS5uZWVkO1xuICAgICAgICAgICAgICAgIHZhciBhO1xuICAgICAgICAgICAgICAgIGlmIChpLmlzUmV3YXJkKSB7XG4gICAgICAgICAgICAgICAgICAgIGEgPSAyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpLnBybyA+PSBvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0V2Vla01pc3Npb25EYXRhKHQuZnVuYyk7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSB0Lm5lZWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgLSAoYy5pc1Jld2FyZCA/IDIgOiBjLnBybyA+PSBzID8gMCA6IDEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHZhciBpID0gdC5sZW5ndGg7XG4gICAgICAgIHZhciBvID0gaSAtIHRoaXMubWlzc2lvblBhcmVudC5jaGlsZHJlbkNvdW50O1xuICAgICAgICBpZiAobyA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgbzsgYSsrKSB7XG4gICAgICAgICAgICAgICAgKG4gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmJhc2VNaXNzaW9uSXRlbSkpLnBhcmVudCA9IHRoaXMubWlzc2lvblBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSBpOyBjIDwgdGhpcy5taXNzaW9uUGFyZW50LmNoaWxkcmVuQ291bnQ7IGMrKykge1xuICAgICAgICAgICAgICAgIHRoaXMubWlzc2lvblBhcmVudC5jaGlsZHJlbltjXS5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IGk7IHMrKykge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICAobiA9IHRoaXMubWlzc2lvblBhcmVudC5jaGlsZHJlbltzXSkuYWN0aXZlID0gITA7XG4gICAgICAgICAgICBuLmdldENvbXBvbmVudChcIlRhc2tJdGVtXCIpLmluaXRNaXNzaW9uSXRlbSghMSwgdFtzXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGUuaW5pdEJveEluZm8oKTtcbiAgICAgICAgICAgICAgICBlLnJlZFRpcHNbMV0uYWN0aXZlID0gY2MuUmVkQ29udHJvbC5vbkNoZWNrV2Vla01pc3Npb25SZWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdFRpbWVTaG93KCk7XG4gICAgICAgIHRoaXMubWlzc2lvblNjcm9sbC5zY3JvbGxUb1RvcCgwLjEpO1xuICAgIH0sXG4gICAgcmVmcmVzaFBhZ2UzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgdGhpcy5taXNzaW9uUGFuZWwuYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMuYWNoaWV2ZVBhbmVsLmFjdGl2ZSA9ICEwO1xuICAgICAgICB0aGlzLmJveFBhbmVsLmFjdGl2ZSA9ICExO1xuICAgICAgICB0aGlzLmFjaGlldmVMaXN0ID0gW107XG4gICAgICAgIHRoaXMuQWNoaWV2ZUpzb24gPSBjYy5Kc29uQ29udHJvbC5nZXRBbGxBY2hpZXZlSnNvbigpO1xuICAgICAgICB2YXIgdCA9IE1hdGguZmxvb3IodGhpcy5BY2hpZXZlSnNvblt0aGlzLkFjaGlldmVKc29uLmxlbmd0aCAtIDFdLklEIC8gMTAwKTtcbiAgICAgICAgdmFyIGkgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCB0OyBvKyspIHtcbiAgICAgICAgICAgIGkucHVzaChvICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaS5zb3J0KGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEFjaGlldmVEYXRhKGUpO1xuICAgICAgICAgICAgdmFyIG8gPSAwO1xuICAgICAgICAgICAgaWYgKGkuZW5kKSB7XG4gICAgICAgICAgICAgICAgbyA9IDI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhID0gMTAwICogZSArIGkubHY7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBjYy5Kc29uQ29udHJvbC5nZXRBY2hpZXZlSnNvbihhKTtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEFjaGlldmVQcm9ncmVzcyhjLmZ1bmMpO1xuICAgICAgICAgICAgICAgIGlmIChjLm5lZWRbMF0gPD0gcykge1xuICAgICAgICAgICAgICAgICAgICBvID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbiA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEFjaGlldmVEYXRhKHQpO1xuICAgICAgICAgICAgdmFyIHIgPSAwO1xuICAgICAgICAgICAgaWYgKG4uZW5kKSB7XG4gICAgICAgICAgICAgICAgciA9IDI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBoID0gMTAwICogdCArIG4ubHY7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSBjYy5Kc29uQ29udHJvbC5nZXRBY2hpZXZlSnNvbihoKTtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEFjaGlldmVQcm9ncmVzcyhwLmZ1bmMpO1xuICAgICAgICAgICAgICAgIGlmIChwLm5lZWRbMF0gPD0gbCkge1xuICAgICAgICAgICAgICAgICAgICByID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbyAtIHI7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYSA9IHQgLSB0aGlzLmFjaGlldmVQYXJlbnQuY2hpbGRyZW5Db3VudDtcbiAgICAgICAgaWYgKGEgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGE7IGMrKykge1xuICAgICAgICAgICAgICAgIGNjLmluc3RhbnRpYXRlKHRoaXMuYmFzZUFjaGlldmVJdGVtKS5wYXJlbnQgPSB0aGlzLmFjaGlldmVQYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBzID0gdDsgcyA8IHRoaXMuYWNoaWV2ZVBhcmVudC5jaGlsZHJlbkNvdW50OyBzKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjaGlldmVQYXJlbnQuY2hpbGRyZW5bc10uYWN0aXZlID0gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0OyBuKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWNoaWV2ZVBhcmVudC5jaGlsZHJlbltuXS5nZXRDb21wb25lbnQoXCJUYXNrSXRlbVwiKS5pbml0QWNoaWV2ZU1pc3Npb25JdGVtKGlbbl0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlLnVwZGF0ZUl0ZW1JbmZvKCk7XG4gICAgICAgICAgICAgICAgZS5yZWRUaXBzWzJdLmFjdGl2ZSA9IGNjLlJlZENvbnRyb2wub25DaGVja0FjaGlldmVNaXNzaW9uUmVkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjaGlldmVTY3JvbGwuc2Nyb2xsVG9Ub3AoMC4xKTtcbiAgICB9XG59KTtcbiJdfQ==