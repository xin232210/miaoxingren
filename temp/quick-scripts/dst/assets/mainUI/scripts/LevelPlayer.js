
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/LevelPlayer.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c4bd9oIzAdEaJtMfm2nZyRi', 'LevelPlayer');
// mainUI/scripts/LevelPlayer.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    heroSpines: [sp.Skeleton],
    enemySpines: [sp.Skeleton]
  },
  initHeroShow: function initHeroShow() {
    var e = this;
    var t = cc.pvz.PlayerData.getStageLevel();
    var i = new Array(8).fill(-1);

    for (var o = 0; o < cc.pvz.GameConfig.MaxToolCount; o++) {
      var a = o + 1;

      if (cc.pvz.GameConfig.ToolLockLevel[o] < t) {
        var c = cc.player.toolData[a].pos;

        if (-1 != c) {
          i[c] = a;
        }
      }
    }

    var s = function s(t) {
      if (-1 != i[t]) {
        var o = i[t];
        e.heroSpines[t].node.active = !0;
        cc.pvz.utils.useBundleAsset("actors", "character/Characters", sp.SkeletonData, function (o) {
          e.heroSpines[t].skeletonData = o;
          var a = cc.pvz.PlayerData.getToolData(i[t]).lv;
          var c = cc.pvz.utils.getLevelInterval(a);
          e.heroSpines[t].setAnimation(0, "Idle", !0);
        });
      } else {
        e.heroSpines[t].node.active = !1;
      }
    };

    for (var n = 0; n < this.heroSpines.length; n++) {
      s(n);
    }
  },
  initEnemyShow: function initEnemyShow(e) {
    var t = this;
    var i = cc.JsonControl.getLevelJson(e).enemy;

    var o = function o(e) {
      var o = i[e];
      t.enemySpines[e].node.active = !0;
      cc.pvz.utils.useBundleAsset("actors", "Zombie/e" + o, sp.SkeletonData, function (i) {
        t.enemySpines[e].skeletonData = i;
        t.enemySpines[e].setAnimation(0, "Idle", !0);
      });
    };

    for (var a = 0; a < i.length; a++) {
      o(a);
    }
  },
  onTouchEnemy: function onTouchEnemy(e, t) {
    var i = parseInt(t);
    var o = this.enemySpines[i];

    if (o && "Idle" == o.animation) {
      o.setAnimation(0, "Hit", !1);
      o.setCompleteListener(function () {
        o.setAnimation(0, "Idle", !0);
        o.setCompleteListener(null);
      });
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9MZXZlbFBsYXllci5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImhlcm9TcGluZXMiLCJzcCIsIlNrZWxldG9uIiwiZW5lbXlTcGluZXMiLCJpbml0SGVyb1Nob3ciLCJlIiwidCIsInB2eiIsIlBsYXllckRhdGEiLCJnZXRTdGFnZUxldmVsIiwiaSIsIkFycmF5IiwiZmlsbCIsIm8iLCJHYW1lQ29uZmlnIiwiTWF4VG9vbENvdW50IiwiYSIsIlRvb2xMb2NrTGV2ZWwiLCJjIiwicGxheWVyIiwidG9vbERhdGEiLCJwb3MiLCJzIiwibm9kZSIsImFjdGl2ZSIsInV0aWxzIiwidXNlQnVuZGxlQXNzZXQiLCJTa2VsZXRvbkRhdGEiLCJza2VsZXRvbkRhdGEiLCJnZXRUb29sRGF0YSIsImx2IiwiZ2V0TGV2ZWxJbnRlcnZhbCIsInNldEFuaW1hdGlvbiIsIm4iLCJsZW5ndGgiLCJpbml0RW5lbXlTaG93IiwiSnNvbkNvbnRyb2wiLCJnZXRMZXZlbEpzb24iLCJlbmVteSIsIm9uVG91Y2hFbmVteSIsInBhcnNlSW50IiwiYW5pbWF0aW9uIiwic2V0Q29tcGxldGVMaXN0ZW5lciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7RUFDTCxXQUFTRCxFQUFFLENBQUNFLFNBRFA7RUFFTEMsVUFBVSxFQUFFO0lBQ1JDLFVBQVUsRUFBRSxDQUFDQyxFQUFFLENBQUNDLFFBQUosQ0FESjtJQUVSQyxXQUFXLEVBQUUsQ0FBQ0YsRUFBRSxDQUFDQyxRQUFKO0VBRkwsQ0FGUDtFQU1MRSxZQUFZLEVBQUUsd0JBQVk7SUFDdEIsSUFBSUMsQ0FBQyxHQUFHLElBQVI7SUFDQSxJQUFJQyxDQUFDLEdBQUdWLEVBQUUsQ0FBQ1csR0FBSCxDQUFPQyxVQUFQLENBQWtCQyxhQUFsQixFQUFSO0lBQ0EsSUFBSUMsQ0FBQyxHQUFHLElBQUlD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QXVFLFVBQVVqQixDQUFWLEVBQWE7UUFDaEZKLENBQUMsQ0FBQ0gsV0FBRixDQUFjRSxDQUFkLEVBQWlCdUIsWUFBakIsR0FBZ0NsQixDQUFoQztRQUNBSixDQUFDLENBQUNILFdBQUYsQ0FBY0UsQ0FBZCxFQUFpQjJCLFlBQWpCLENBQThCLENBQTlCLEVBQWlDLE1BQWpDLEVBQXlDLENBQUMsQ0FBMUM7TUFDSCxDQUhEO0lBSUgsQ0FQRDs7SUFRQSxLQUFLLElBQUloQixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHTixDQUFDLENBQUN3QixNQUF0QixFQUE4QmxCLENBQUMsRUFBL0IsRUFBbUM7TUFDL0JILENBQUMsQ0FBQ0csQ0FBRCxDQUFEO0lBQ0g7RUFDSixDQW5ESTtFQW9ETHVCLFlBQVksRUFBRSxzQkFBVWxDLENBQVYsRUFBYUMsQ0FBYixFQUFnQjtJQUMxQixJQUFJSSxDQUFDLEdBQUc4QixRQUFRLENBQUNsQyxDQUFELENBQWhCO0lBQ0EsSUFBSU8sQ0FBQyxHQUFHLEtBQUtWLFdBQUwsQ0FBaUJPLENBQWpCLENBQVI7O0lBQ0EsSUFBSUcsQ0FBQyxJQUFJLFVBQVVBLENBQUMsQ0FBQzRCLFNBQXJCLEVBQWdDO01BQzVCNUIsQ0FBQyxDQUFDbUIsWUFBRixDQUFlLENBQWYsRUFBa0IsS0FBbEIsRUFBeUIsQ0FBQyxDQUExQjtNQUNBbkIsQ0FBQyxDQUFDNkIsbUJBQUYsQ0FBc0IsWUFBWTtRQUM5QjdCLENBQUMsQ0FBQ21CLFlBQUYsQ0FBZSxDQUFmLEVBQWtCLE1BQWxCLEVBQTBCLENBQUMsQ0FBM0I7UUFDQW5CLENBQUMsQ0FBQzZCLG1CQUFGLENBQXNCLElBQXRCO01BQ0gsQ0FIRDtJQUlIO0VBQ0o7QUE5REksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGhlcm9TcGluZXM6IFtzcC5Ta2VsZXRvbl0sXG4gICAgICAgIGVuZW15U3BpbmVzOiBbc3AuU2tlbGV0b25dXG4gICAgfSxcbiAgICBpbml0SGVyb1Nob3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICB2YXIgdCA9IGNjLnB2ei5QbGF5ZXJEYXRhLmdldFN0YWdlTGV2ZWwoKTtcbiAgICAgICAgdmFyIGkgPSBuZXcgQXJyYXkoOCkuZmlsbCgtMSk7XG4gICAgICAgIGZvciAodmFyIG8gPSAwOyBvIDwgY2MucHZ6LkdhbWVDb25maWcuTWF4VG9vbENvdW50OyBvKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gbyArIDE7XG4gICAgICAgICAgICBpZiAoY2MucHZ6LkdhbWVDb25maWcuVG9vbExvY2tMZXZlbFtvXSA8IHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGNjLnBsYXllci50b29sRGF0YVthXS5wb3M7XG4gICAgICAgICAgICAgICAgaWYgKC0xICE9IGMpIHtcbiAgICAgICAgICAgICAgICAgICAgaVtjXSA9IGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmICgtMSAhPSBpW3RdKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSBpW3RdO1xuICAgICAgICAgICAgICAgIGUuaGVyb1NwaW5lc1t0XS5ub2RlLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIGNjLnB2ei51dGlscy51c2VCdW5kbGVBc3NldChcImFjdG9yc1wiLCBcImNoYXJhY3Rlci9DaGFyYWN0ZXJzXCIsIHNwLlNrZWxldG9uRGF0YSwgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgZS5oZXJvU3BpbmVzW3RdLnNrZWxldG9uRGF0YSA9IG87XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0VG9vbERhdGEoaVt0XSkubHY7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gY2MucHZ6LnV0aWxzLmdldExldmVsSW50ZXJ2YWwoYSk7XG4gICAgICAgICAgICAgICAgICAgIGUuaGVyb1NwaW5lc1t0XS5zZXRBbmltYXRpb24oMCwgXCJJZGxlXCIsICEwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5oZXJvU3BpbmVzW3RdLm5vZGUuYWN0aXZlID0gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgdGhpcy5oZXJvU3BpbmVzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBzKG4pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBpbml0RW5lbXlTaG93OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHZhciBpID0gY2MuSnNvbkNvbnRyb2wuZ2V0TGV2ZWxKc29uKGUpLmVuZW15O1xuICAgICAgICB2YXIgbyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbyA9IGlbZV07XG4gICAgICAgICAgICB0LmVuZW15U3BpbmVzW2VdLm5vZGUuYWN0aXZlID0gITA7XG4gICAgICAgICAgICBjYy5wdnoudXRpbHMudXNlQnVuZGxlQXNzZXQoXCJhY3RvcnNcIiwgXCJab21iaWUvZVwiICsgbywgc3AuU2tlbGV0b25EYXRhLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHQuZW5lbXlTcGluZXNbZV0uc2tlbGV0b25EYXRhID0gaTtcbiAgICAgICAgICAgICAgICB0LmVuZW15U3BpbmVzW2VdLnNldEFuaW1hdGlvbigwLCBcIklkbGVcIiwgITApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgaS5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgbyhhKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25Ub3VjaEVuZW15OiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICB2YXIgaSA9IHBhcnNlSW50KHQpO1xuICAgICAgICB2YXIgbyA9IHRoaXMuZW5lbXlTcGluZXNbaV07XG4gICAgICAgIGlmIChvICYmIFwiSWRsZVwiID09IG8uYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBvLnNldEFuaW1hdGlvbigwLCBcIkhpdFwiLCAhMSk7XG4gICAgICAgICAgICBvLnNldENvbXBsZXRlTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG8uc2V0QW5pbWF0aW9uKDAsIFwiSWRsZVwiLCAhMCk7XG4gICAgICAgICAgICAgICAgby5zZXRDb21wbGV0ZUxpc3RlbmVyKG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KTsiXX0=