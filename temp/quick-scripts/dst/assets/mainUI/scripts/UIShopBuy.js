
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/UIShopBuy.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5cff3D7PN5BNoNr09dEW+3e', 'UIShopBuy');
// mainUI/scripts/UIShopBuy.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    rewardItem: cc.Node,
    nameLabel: cc.Label,
    priceType: cc.Sprite,
    priceLabel: cc.Label,
    descLabel: cc.Label
  },
  initBy: function initBy(e, t, i, o) {
    if (void 0 === o) {
      o = !0;
    }

    this.rewardData = e;
    this.priceData = t;
    this.callBack = i;
    this.isDailyShop = o;
    this.priceLabel.string = this.priceData[1];
    var a = cc.JsonControl.getItemJson(this.priceData[0]);
    cc.JsonControl.getItemIcon(this.priceType, a.Icon);
    this.rewardItem.getComponent("RewardItem").initRewardItem(this.rewardData, !1);
    this.itemId = this.rewardData.itemId;
    this.toolId = this.rewardData.toolId;

    if (this.itemId === cc.pvz.GameConfig.ItemType["固定碎片"]) {
      var c = cc.JsonControl.getToolJson(this.toolId);
      this.nameLabel.string = c.name;
      this.descLabel.string = c.desc;
    } else {
      var s = cc.JsonControl.getItemJson(this.itemId);
      this.nameLabel.string = s.Name;
      this.descLabel.string = s.Info;
    }
  },
  onClickBuy: function onClickBuy() {
    if (cc.pvz.PlayerData.isItemEnough(this.priceData[0], this.priceData[1])) {
      cc.pvz.PlayerData.changeItemNum(this.priceData[0], -this.priceData[1]);
      this.isDailyShop && (cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType["每日商店购买n次物品"], 1), cc.RedControl.onCheckBattleRed());
      cc.popupManager.popup("mainUI", "getrewardUI", "UIReward", {
        ad: !1,
        scale: !1
      }, [this.rewardData], cc.pvz.GameConfig.UIFromType["每日商店"], this.callBack);
      cc.popupManager.removePopup(this);
    } else {
      var e = 2 == this.priceData[0];

      if (cc.pvz.PlayerData.isHaveAdBuyBankTimes(e ? 0 : 1)) {
        var t = cc.pvz.utils.getRewardItem(this.priceData[0], e ? 2500 : 100);
        cc.popupManager.popup("mainUI", "adbuyUI", "UIAdBuy", {
          ad: !1,
          scale: !0
        }, t);
        cc.popupManager.removePopup(this);
      } else {
        var i;

        if (2 == this.priceData[0]) {
          i = "金币";
        } else {
          i = "钻石";
        }

        cc.popupManager.showToast(i + "不足！");
      }
    }
  },
  onCloseUI: function onCloseUI() {
    cc.popupManager.removePopup(this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9VSVNob3BCdXkuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJyZXdhcmRJdGVtIiwiTm9kZSIsIm5hbWVMYWJlbCIsIkxhYmVsIiwicHJpY2VUeXBlIiwiU3ByaXRlIiwicHJpY2VMYWJlbCIsImRlc2NMYWJlbCIsImluaXRCeSIsImUiLCJ0IiwiaSIsIm8iLCJyZXdhcmREYXRhIiwicHJpY2VEYXRhIiwiY2FsbEJhY2siLCJpc0RhaWx5U2hvcCIsInN0cmluZyIsImEiLCJKc29uQ29udHJvbCIsImdldEl0ZW1Kc29uIiwiZ2V0SXRlbUljb24iLCJJY29uIiwiZ2V0Q29tcG9uZW50IiwiaW5pdFJld2FyZEl0ZW0iLCJpdGVtSWQiLCJ0b29sSWQiLCJwdnoiLCJHYW1lQ29uZmlnIiwiSXRlbVR5cGUiLCJjIiwiZ2V0VG9vbEpzb24iLCJuYW1lIiwiZGVzYyIsInMiLCJOYW1lIiwiSW5mbyIsIm9uQ2xpY2tCdXkiLCJQbGF5ZXJEYXRhIiwiaXNJdGVtRW5vdWdoIiwiY2hhbmdlSXRlbU51bSIsImFkZE1pc3Npb25Qcm9ncmVzcyIsIk1pc3Npb25UeXBlIiwiUmVkQ29udHJvbCIsIm9uQ2hlY2tCYXR0bGVSZWQiLCJwb3B1cE1hbmFnZXIiLCJwb3B1cCIsImFkIiwic2NhbGUiLCJVSUZyb21UeXBlIiwicmVtb3ZlUG9wdXAiLCJpc0hhdmVBZEJ1eUJhbmtUaW1lcyIsInV0aWxzIiwiZ2V0UmV3YXJkSXRlbSIsInNob3dUb2FzdCIsIm9uQ2xvc2VVSSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7RUFDTCxXQUFTRCxFQUFFLENBQUNFLFNBRFA7RUFFTEMsVUFBVSxFQUFFO0lBQ1JDLFVBQVUsRUFBRUosRUFBRSxDQUFDSyxJQURQO0lBRVJDLFNBQVMsRUFBRU4sRUFBRSxDQUFDTyxLQUZOO0lBR1JDLFNBQVMsRUFB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Q0osQ0E3RUk7RUE4RUw0QyxTQUFTLEVBQUUscUJBQVk7SUFDbkIzRCxFQUFFLENBQUNpRCxZQUFILENBQWdCSyxXQUFoQixDQUE0QixJQUE1QjtFQUNIO0FBaEZJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICByZXdhcmRJdGVtOiBjYy5Ob2RlLFxuICAgICAgICBuYW1lTGFiZWw6IGNjLkxhYmVsLFxuICAgICAgICBwcmljZVR5cGU6IGNjLlNwcml0ZSxcbiAgICAgICAgcHJpY2VMYWJlbDogY2MuTGFiZWwsXG4gICAgICAgIGRlc2NMYWJlbDogY2MuTGFiZWxcbiAgICB9LFxuICAgIGluaXRCeTogZnVuY3Rpb24gKGUsIHQsIGksIG8pIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbykge1xuICAgICAgICAgICAgbyA9ICEwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmV3YXJkRGF0YSA9IGU7XG4gICAgICAgIHRoaXMucHJpY2VEYXRhID0gdDtcbiAgICAgICAgdGhpcy5jYWxsQmFjayA9IGk7XG4gICAgICAgIHRoaXMuaXNEYWlseVNob3AgPSBvO1xuICAgICAgICB0aGlzLnByaWNlTGFiZWwuc3RyaW5nID0gdGhpcy5wcmljZURhdGFbMV07XG4gICAgICAgIHZhciBhID0gY2MuSnNvbkNvbnRyb2wuZ2V0SXRlbUpzb24odGhpcy5wcmljZURhdGFbMF0pO1xuICAgICAgICBjYy5Kc29uQ29udHJvbC5nZXRJdGVtSWNvbih0aGlzLnByaWNlVHlwZSwgYS5JY29uKTtcbiAgICAgICAgdGhpcy5yZXdhcmRJdGVtLmdldENvbXBvbmVudChcIlJld2FyZEl0ZW1cIikuaW5pdFJld2FyZEl0ZW0odGhpcy5yZXdhcmREYXRhLCAhMSk7XG4gICAgICAgIHRoaXMuaXRlbUlkID0gdGhpcy5yZXdhcmREYXRhLml0ZW1JZDtcbiAgICAgICAgdGhpcy50b29sSWQgPSB0aGlzLnJld2FyZERhdGEudG9vbElkO1xuICAgICAgICBpZiAodGhpcy5pdGVtSWQgPT09IGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi5Zu65a6a56KO54mHXCJdKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNjLkpzb25Db250cm9sLmdldFRvb2xKc29uKHRoaXMudG9vbElkKTtcbiAgICAgICAgICAgIHRoaXMubmFtZUxhYmVsLnN0cmluZyA9IGMubmFtZTtcbiAgICAgICAgICAgIHRoaXMuZGVzY0xhYmVsLnN0cmluZyA9IGMuZGVzYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzID0gY2MuSnNvbkNvbnRyb2wuZ2V0SXRlbUpzb24odGhpcy5pdGVtSWQpO1xuICAgICAgICAgICAgdGhpcy5uYW1lTGFiZWwuc3RyaW5nID0gcy5OYW1lO1xuICAgICAgICAgICAgdGhpcy5kZXNjTGFiZWwuc3RyaW5nID0gcy5JbmZvO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNsaWNrQnV5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYy5wdnouUGxheWVyRGF0YS5pc0l0ZW1Fbm91Z2godGhpcy5wcmljZURhdGFbMF0sIHRoaXMucHJpY2VEYXRhWzFdKSkge1xuICAgICAgICAgICAgY2MucHZ6LlBsYXllckRhdGEuY2hhbmdlSXRlbU51bSh0aGlzLnByaWNlRGF0YVswXSwgLXRoaXMucHJpY2VEYXRhWzFdKTtcbiAgICAgICAgICAgIHRoaXMuaXNEYWlseVNob3AgJiZcbiAgICAgICAgICAgICAgICAoY2MucHZ6LlBsYXllckRhdGEuYWRkTWlzc2lvblByb2dyZXNzKGNjLnB2ei5HYW1lQ29uZmlnLk1pc3Npb25UeXBlW1wi5q+P5pel5ZWG5bqX6LSt5LmwbuasoeeJqeWTgVwiXSwgMSksXG4gICAgICAgICAgICAgICAgY2MuUmVkQ29udHJvbC5vbkNoZWNrQmF0dGxlUmVkKCkpO1xuICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnBvcHVwKFxuICAgICAgICAgICAgICAgIFwibWFpblVJXCIsXG4gICAgICAgICAgICAgICAgXCJnZXRyZXdhcmRVSVwiLFxuICAgICAgICAgICAgICAgIFwiVUlSZXdhcmRcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFkOiAhMSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6ICExXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbdGhpcy5yZXdhcmREYXRhXSxcbiAgICAgICAgICAgICAgICBjYy5wdnouR2FtZUNvbmZpZy5VSUZyb21UeXBlW1wi5q+P5pel5ZWG5bqXXCJdLFxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbEJhY2tcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYy5wb3B1cE1hbmFnZXIucmVtb3ZlUG9wdXAodGhpcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZSA9IDIgPT0gdGhpcy5wcmljZURhdGFbMF07XG4gICAgICAgICAgICBpZiAoY2MucHZ6LlBsYXllckRhdGEuaXNIYXZlQWRCdXlCYW5rVGltZXMoZSA/IDAgOiAxKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gY2MucHZ6LnV0aWxzLmdldFJld2FyZEl0ZW0odGhpcy5wcmljZURhdGFbMF0sIGUgPyAyNTAwIDogMTAwKTtcbiAgICAgICAgICAgICAgICBjYy5wb3B1cE1hbmFnZXIucG9wdXAoXG4gICAgICAgICAgICAgICAgICAgIFwibWFpblVJXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYWRidXlVSVwiLFxuICAgICAgICAgICAgICAgICAgICBcIlVJQWRCdXlcIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWQ6ICExLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6ICEwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5yZW1vdmVQb3B1cCh0aGlzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgaWYgKDIgPT0gdGhpcy5wcmljZURhdGFbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IFwi6YeR5biBXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IFwi6ZK755+zXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5zaG93VG9hc3QoaSArIFwi5LiN6Laz77yBXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkNsb3NlVUk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnJlbW92ZVBvcHVwKHRoaXMpO1xuICAgIH1cbn0pO1xuIl19