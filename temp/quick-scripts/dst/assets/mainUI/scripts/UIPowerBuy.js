
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/UIPowerBuy.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e7fb2EcdSBMVoSZxVl/D2Bv', 'UIPowerBuy');
// mainUI/scripts/UIPowerBuy.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    buyTimesLabel: [cc.Label],
    priceLabel: cc.Label
  },
  initBy: function initBy(e) {
    this.fromType = e;
    this.isLookAd = !1;
    cc.pvz.PlayerData.checkAndResetPowetBuy();
    this.refreshUIInfo();
    cc.pvz.TAUtils.trackAdUIShow(cc.pvz.GameConfig.AdType["体力购买"]);
  },
  refreshUIInfo: function refreshUIInfo() {
    for (var e = 0; e < 2; e++) {
      this.buyTimesLabel[e].string = cc.pvz.GameConfig.PowerBuyTip.replace("$", cc.pvz.PlayerData.getPowerBuyTimes(0 == e));
    }

    var t = 3 - cc.pvz.PlayerData.getPowerBuyTimes(!1);

    if (t < 0) {
      t = 0;
    } else {
      if (t >= 3) {
        t = 2;
      } else {
        t = t;
      }
    }

    this.diamondPrice = cc.pvz.GameConfig.PowerBuyPrices[t];
    this.priceLabel.string = "x" + this.diamondPrice;
  },
  onClickAdBuy: function onClickAdBuy() {
    var e = this;

    if (cc.pvz.PlayerData.getPowerBuyTimes(!0) <= 0) {
      cc.popupManager.showToast("今日免费次数已用完");
    } else {
      if (this.isLookAd) {//
      } else {
        this.isLookAd = !0;
        cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType["体力购买"], function (t) {
          e.onAdClose(t);
        });
      }
    }
  },
  onAdClose: function onAdClose(e) {
    this.isLookAd = !1;

    if (e) {
      cc.pvz.PlayerData.updatePowerBuyTimes(!0, 1);
      this.refreshUIInfo();
      this.refreshAddPower(10);
    }
  },
  onClickDiamondBuy: function onClickDiamondBuy() {
    if (cc.pvz.PlayerData.getPowerBuyTimes(!1) <= 0) {
      cc.popupManager.showToast("今日购买次数已用完");
    } else {
      if (cc.pvz.PlayerData.isItemEnough(cc.pvz.GameConfig.ItemType["钻石"], this.diamondPrice)) {
        cc.pvz.PlayerData.changeItemNum(cc.pvz.GameConfig.ItemType["钻石"], -this.diamondPrice), cc.pvz.PlayerData.updatePowerBuyTimes(!1, 1), this.refreshUIInfo(), this.refreshAddPower(15);
      } else {
        cc.popupManager.showToast("钻石不足！");
      }
    }
  },
  refreshAddPower: function refreshAddPower(e) {
    cc.pvz.PlayerData.addMissionProgress(cc.pvz.GameConfig.MissionType["购买体力n次"], 1);
    cc.pvz.PlayerData.addPower(e, !0);

    if (this.fromType == cc.pvz.GameConfig.UIFromType["挑战副本"]) {
      cc.UIActLevelInfo.updateItemInfo();
      cc.UIActLevelInfo.checkPowerInfo();
    }

    cc.MainControl.updateItemInfo();
    cc.MainControl.checkPowerInfo();
    cc.popupManager.showEffectFly(cc.pvz.GameConfig.ItemType["体力"], cc.MainControl.getItemEffectPos(cc.pvz.GameConfig.ItemType["体力"]));
    cc.butler.playEffect(cc.MainControl.rewardSound);
    cc.RedControl.onCheckBattleRed();
    cc.RedControl.onCheckMissionRed();
  },
  onCloseUI: function onCloseUI() {
    cc.popupManager.removePopup(this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9VSVBvd2VyQnV5LmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiYnV5VGltZXNMYWJlbCIsIkxhYmVsIiwicHJpY2VMYWJlbCIsImluaXRCeSIsImUiLCJmcm9tVHlwZSIsImlzTG9va0FkIiwicHZ6IiwiUGxheWVyRGF0YSIsImNoZWNrQW5kUmVzZXRQb3dldEJ1eSIsInJlZnJlc2hVSUluZm8iLCJUQVV0aWxzIiwidHJhY2tBZFVJU2hvdyIsIkdhbWVDb25maWciLCJBZFR5cGUiLCJzdHJpbmciLCJQb3dlckJ1eVRpcCIsInJlcGxhY2UiLCJnZXRQb3dlckJ1eVRpbWVzIiwidCIsImRpYW1vbmRQcmljZSIsIlBvd2VyQnV5UHJpY2VzIiwib25DbGlja0FkQnV5IiwicG9wdXBNYW5hZ2VyIiwic2hvd1RvYXN0IiwiQWRVdGlscyIsInNob3dBZFJld2FyZFZpZGVvIiwib25BZENsb3NlIiwidXBkYXRlUG93ZXJCdXlUaW1lcyIsInJlZnJlc2hBZGRQb3dlciIsIm9uQ2xpY2tEaWFtb25kQnV5IiwiaXNJdGVtRW5vdWdoIiwiSXRlbVR5cGUiLCJjaGFuZ2VJdGVtTnVtIiwiYWRkTWlzc2lvblByb2dyZXNzIiwiTWlzc2lvblR5cGUiLCJhZGRQb3dlciIsIlVJRnJvbVR5cGUiLCJVSUFjdExldmVsSW5mbyIsInVwZGF0ZUl0ZW1JbmZvIiwiY2hlY2tQb3dlckluZm8iLCJNYWluQ29udHJvbCIsInNob3dFZmZlY3RGbHkiLCJnZXRJdGVtRWZmZWN0UG9zIiwiYnV0bGVyIiwicGxheUVmZmVjdCIsInJld2FyZFNvdW5kIiwiUmVkQ29udHJvbCIsIm9uQ2hlY2tCYXR0bGVSZWQiLCJvbkNoZWNrTWlzc2lvblJlZCIsIm9uQ2xvc2VVSSIsInJlbW92ZVBvcHVwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztFQUNMLFdB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QyxVQUFQLENBQWtCNEIsUUFBbEIsQ0FBMkJoQyxDQUEzQixFQUE4QixDQUFDLENBQS9COztJQUNBLElBQUksS0FBS0MsUUFBTCxJQUFpQlQsRUFBRSxDQUFDVyxHQUFILENBQU9NLFVBQVAsQ0FBa0J3QixVQUFsQixDQUE2QixNQUE3QixDQUFyQixFQUEyRDtNQUN2RHpDLEVBQUUsQ0FBQzBDLGNBQUgsQ0FBa0JDLGNBQWxCO01BQ0EzQyxFQUFFLENBQUMwQyxjQUFILENBQWtCRSxjQUFsQjtJQUNIOztJQUNENUMsRUFBRSxDQUFDNkMsV0FBSCxDQUFlRixjQUFmO0lBQ0EzQyxFQUFFLENBQUM2QyxXQUFILENBQWVELGNBQWY7SUFDQTVDLEVBQUUsQ0FBQzJCLFlBQUgsQ0FBZ0JtQixhQUFoQixDQUNJOUMsRUFBRSxDQUFDVyxHQUFILENBQU9NLFVBQVAsQ0FBa0JtQixRQUFsQixDQUEyQixJQUEzQixDQURKLEVBRUlwQyxFQUFFLENBQUM2QyxXQUFILENBQWVFLGdCQUFmLENBQWdDL0MsRUFBRSxDQUFDVyxHQUFILENBQU9NLFVBQVAsQ0FBa0JtQixRQUFsQixDQUEyQixJQUEzQixDQUFoQyxDQUZKO0lBSUFwQyxFQUFFLENBQUNnRCxNQUFILENBQVVDLFVBQVYsQ0FBcUJqRCxFQUFFLENBQUM2QyxXQUFILENBQWVLLFdBQXBDO0lBQ0FsRCxFQUFFLENBQUNtRCxVQUFILENBQWNDLGdCQUFkO0lBQ0FwRCxFQUFFLENBQUNtRCxVQUFILENBQWNFLGlCQUFkO0VBQ0gsQ0F0Rkk7RUF1RkxDLFNBQVMsRUFBRSxxQkFBWTtJQUNuQnRELEVBQUUsQ0FBQzJCLFlBQUgsQ0FBZ0I0QixXQUFoQixDQUE0QixJQUE1QjtFQUNIO0FBekZJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBidXlUaW1lc0xhYmVsOiBbY2MuTGFiZWxdLFxuICAgICAgICBwcmljZUxhYmVsOiBjYy5MYWJlbFxuICAgIH0sXG4gICAgaW5pdEJ5OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLmZyb21UeXBlID0gZTtcbiAgICAgICAgdGhpcy5pc0xvb2tBZCA9ICExO1xuICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5jaGVja0FuZFJlc2V0UG93ZXRCdXkoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoVUlJbmZvKCk7XG4gICAgICAgIGNjLnB2ei5UQVV0aWxzLnRyYWNrQWRVSVNob3coY2MucHZ6LkdhbWVDb25maWcuQWRUeXBlW1wi5L2T5Yqb6LSt5LmwXCJdKTtcbiAgICB9LFxuICAgIHJlZnJlc2hVSUluZm86IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCAyOyBlKyspIHtcbiAgICAgICAgICAgIHRoaXMuYnV5VGltZXNMYWJlbFtlXS5zdHJpbmcgPSBjYy5wdnouR2FtZUNvbmZpZy5Qb3dlckJ1eVRpcC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIFwiJFwiLFxuICAgICAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLmdldFBvd2VyQnV5VGltZXMoMCA9PSBlKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdCA9IDMgLSBjYy5wdnouUGxheWVyRGF0YS5nZXRQb3dlckJ1eVRpbWVzKCExKTtcbiAgICAgICAgaWYgKHQgPCAwKSB7XG4gICAgICAgICAgICB0ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0ID49IDMpIHtcbiAgICAgICAgICAgICAgICB0ID0gMjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdCA9IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaWFtb25kUHJpY2UgPSBjYy5wdnouR2FtZUNvbmZpZy5Qb3dlckJ1eVByaWNlc1t0XTtcbiAgICAgICAgdGhpcy5wcmljZUxhYmVsLnN0cmluZyA9IFwieFwiICsgdGhpcy5kaWFtb25kUHJpY2U7XG4gICAgfSxcbiAgICBvbkNsaWNrQWRCdXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBpZiAoY2MucHZ6LlBsYXllckRhdGEuZ2V0UG93ZXJCdXlUaW1lcyghMCkgPD0gMCkge1xuICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnNob3dUb2FzdChcIuS7iuaXpeWFjei0ueasoeaVsOW3sueUqOWujFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9va0FkKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0xvb2tBZCA9ICEwO1xuICAgICAgICAgICAgICAgIGNjLnB2ei5BZFV0aWxzLnNob3dBZFJld2FyZFZpZGVvKGNjLnB2ei5HYW1lQ29uZmlnLkFkVHlwZVtcIuS9k+WKm+i0reS5sFwiXSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5vbkFkQ2xvc2UodCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQWRDbG9zZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5pc0xvb2tBZCA9ICExO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY2MucHZ6LlBsYXllckRhdGEudXBkYXRlUG93ZXJCdXlUaW1lcyghMCwgMSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hVSUluZm8oKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEFkZFBvd2VyKDEwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja0RpYW1vbmRCdXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGNjLnB2ei5QbGF5ZXJEYXRhLmdldFBvd2VyQnV5VGltZXMoITEpIDw9IDApIHtcbiAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5zaG93VG9hc3QoXCLku4rml6XotK3kubDmrKHmlbDlt7LnlKjlroxcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2MucHZ6LlBsYXllckRhdGEuaXNJdGVtRW5vdWdoKGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi6ZK755+zXCJdLCB0aGlzLmRpYW1vbmRQcmljZSkpIHtcbiAgICAgICAgICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5jaGFuZ2VJdGVtTnVtKGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi6ZK755+zXCJdLCAtdGhpcy5kaWFtb25kUHJpY2UpLFxuICAgICAgICAgICAgICAgICAgICBjYy5wdnouUGxheWVyRGF0YS51cGRhdGVQb3dlckJ1eVRpbWVzKCExLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUlJbmZvKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEFkZFBvd2VyKDE1KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnNob3dUb2FzdChcIumSu+efs+S4jei2s++8gVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVmcmVzaEFkZFBvd2VyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjYy5wdnouUGxheWVyRGF0YS5hZGRNaXNzaW9uUHJvZ3Jlc3MoY2MucHZ6LkdhbWVDb25maWcuTWlzc2lvblR5cGVbXCLotK3kubDkvZPliptu5qyhXCJdLCAxKTtcbiAgICAgICAgY2MucHZ6LlBsYXllckRhdGEuYWRkUG93ZXIoZSwgITApO1xuICAgICAgICBpZiAodGhpcy5mcm9tVHlwZSA9PSBjYy5wdnouR2FtZUNvbmZpZy5VSUZyb21UeXBlW1wi5oyR5oiY5Ymv5pysXCJdKSB7XG4gICAgICAgICAgICBjYy5VSUFjdExldmVsSW5mby51cGRhdGVJdGVtSW5mbygpO1xuICAgICAgICAgICAgY2MuVUlBY3RMZXZlbEluZm8uY2hlY2tQb3dlckluZm8oKTtcbiAgICAgICAgfVxuICAgICAgICBjYy5NYWluQ29udHJvbC51cGRhdGVJdGVtSW5mbygpO1xuICAgICAgICBjYy5NYWluQ29udHJvbC5jaGVja1Bvd2VySW5mbygpO1xuICAgICAgICBjYy5wb3B1cE1hbmFnZXIuc2hvd0VmZmVjdEZseShcbiAgICAgICAgICAgIGNjLnB2ei5HYW1lQ29uZmlnLkl0ZW1UeXBlW1wi5L2T5YqbXCJdLFxuICAgICAgICAgICAgY2MuTWFpbkNvbnRyb2wuZ2V0SXRlbUVmZmVjdFBvcyhjYy5wdnouR2FtZUNvbmZpZy5JdGVtVHlwZVtcIuS9k+WKm1wiXSlcbiAgICAgICAgKTtcbiAgICAgICAgY2MuYnV0bGVyLnBsYXlFZmZlY3QoY2MuTWFpbkNvbnRyb2wucmV3YXJkU291bmQpO1xuICAgICAgICBjYy5SZWRDb250cm9sLm9uQ2hlY2tCYXR0bGVSZWQoKTtcbiAgICAgICAgY2MuUmVkQ29udHJvbC5vbkNoZWNrTWlzc2lvblJlZCgpO1xuICAgIH0sXG4gICAgb25DbG9zZVVJOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNjLnBvcHVwTWFuYWdlci5yZW1vdmVQb3B1cCh0aGlzKTtcbiAgICB9XG59KTtcbiJdfQ==