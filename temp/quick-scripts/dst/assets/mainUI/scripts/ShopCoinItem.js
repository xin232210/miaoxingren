
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/mainUI/scripts/ShopCoinItem.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c1e41fNdstF0Zn8cs6qpGTQ', 'ShopCoinItem');
// mainUI/scripts/ShopCoinItem.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    countLabel: cc.Label,
    priceLabel: cc.Label,
    finishNode: cc.Node,
    freeNode: cc.Node,
    adPanel: cc.Node,
    adTimesLabel: cc.Label,
    cdTimeLabel: cc.Label
  },
  initShopCoinItem: function initShopCoinItem(e, t) {
    this.shopId = e;
    this.shopJson = t;

    if (7 == this.shopId) {
      var i = cc.pvz.PlayerData.getShopTimes(cc.pvz.GameConfig.ShopTimesType["金币免费"]);
      this.isFree = 7 == i;
      this.isFinish = i <= 0;
      this.finishNode.active = this.isFinish;
      this.freeNode.active = this.isFree && !this.isFinish;
      this.adPanel.active = !this.isFree && !this.isFinish;
      this.adTimesLabel.string = "(" + i + ")";
      this.cdTimeLabel.node.active = !1;
    } else {
      this.priceLabel.string = this.shopJson.priceNum[0];
    }

    this.count = this.shopJson.num1[0];
    this.countLabel.string = "x" + this.count;
    this.rewardData = cc.pvz.utils.getRewardItem(cc.pvz.GameConfig.ItemType["金币"], this.count);
  },
  onClickBuy: function onClickBuy() {
    var e = this;

    if (!cc.UIShop.isLookAd) {
      cc.UIShop.onStopShopScroll();

      if (7 == this.shopId) {
        if (this.isFinish) {
          return void cc.popupManager.showToast("已售罄！");
        }

        if (this.isFree) {
          cc.pvz.PlayerData.updateShopTimes(cc.pvz.GameConfig.ShopTimesType["金币免费"]);
          cc.UIShop.updateRedTip();
          cc.popupManager.popup("mainUI", "getrewardUI", "UIReward", {
            ad: !1,
            scale: !1
          }, [this.rewardData], cc.pvz.GameConfig.UIFromType["金币商店"], function () {
            e.initShopCoinItem(e.shopId, e.shopJson);
          });
        } else {
          cc.UIShop.isLookAd = !0;
          cc.pvz.AdUtils.showAdRewardVideo(cc.pvz.GameConfig.AdType["商店金币"], function (t) {
            e.onAdClose(t);
          });
        }
      } else {
        cc.popupManager.popup("mainUI", "shopbuyUI", "UIShopBuy", {
          ad: !1,
          scale: !0
        }, this.rewardData, [this.shopJson.priceItem[0], this.shopJson.priceNum[0]], function () {
          cc.pvz.PlayerData.updateShopTimes(cc.pvz.GameConfig.ShopTimesType["金币免费"]);
          e.initShopCoinItem(e.shopId, e.shopJson);
        }, !1);
      }
    }
  },
  onAdClose: function onAdClose(e) {
    var t = this;
    cc.UIShop.isLookAd = !1;

    if (e) {
      cc.pvz.PlayerData.updateShopTimes(cc.pvz.GameConfig.ShopTimesType["金币免费"]);
      cc.popupManager.popup("mainUI", "getrewardUI", "UIReward", {
        ad: !1,
        scale: !1
      }, [this.rewardData], cc.pvz.GameConfig.UIFromType["金币商店"], function () {
        t.initShopCoinItem(t.shopId, t.shopJson);
      });
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9tYWluVUkvc2NyaXB0cy9TaG9wQ29pbkl0ZW0uanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJjb3VudExhYmVsIiwiTGFiZWwiLCJwcmljZUxhYmVsIiwiZmluaXNoTm9kZSIsIk5vZGUiLCJmcmVlTm9kZSIsImFkUGFuZWwiLCJhZFRpbWVzTGFiZWwiLCJjZFRpbWVMYWJlbCIsImluaXRTaG9wQ29pbkl0ZW0iLCJlIiwidCIsInNob3BJZCIsInNob3BKc29uIiwiaSIsInB2eiIsIlBsYXllckRhdGEiLCJnZXRTaG9wVGltZXMiLCJHYW1lQ29uZmlnIiwiU2hvcFRpbWVzVHlwZSIsImlzRnJlZSIsImlzRmluaXNoIiwiYWN0aXZlIiwic3RyaW5nIiwibm9kZSIsInByaWNlTnVtIiwiY291bnQiLCJudW0xIiwicmV3YXJkRGF0YSIsInV0aWxzIiwiZ2V0UmV3YXJkSXRlbSIsIkl0ZW1UeXBlIiwib25DbGlja0J1eSIsIlVJU2hvcCIsImlzTG9va0FkIiwib25TdG9wU2hvcFNjcm9sbCIsInBvcHVwTWFuYWdlciIsInNob3dUb2FzdCIsInVwZGF0ZVNob3BUaW1lcyIsInVwZGF0ZVJlZFRpcCIsInBvcHVwIiwiYWQiLCJzY2FsZSIsIlVJRnJvbVR5cGUiLCJBZFV0aWxzIiwic2hvd0FkUmV3YXJkVmlkZW8iLCJBZFR5cGUiLCJvbkFkQ2xvc2UiLCJwcmljZUl0ZW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0VBQ0wsV0FBU0QsRUFBRSxDQUFDRSxTQURQO0VBRUxDLFVBQVUsRUFBRTtJQUNSQyxVQUFVLEVBQUVKLEVBQUUsQ0FBQ0ssS0FEUDtJQUVSQyxVQUFVLEVBQUVOLEVBQUUsQ0FBQ0ssS0FGUDtJQUdSRSxVQUFVLEVBQUVQLEVBQUUsQ0FBQ1EsSUFIUDtJQUlSQyxRQUFRLEVBQUVULEVBQUUsQ0FBQ1EsSUFKTDtJQUtSRSxPQUFP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LENBQUMsR0FBRyxJQUFSO0lBQ0FmLEVBQUUsQ0FBQ3FDLE1BQUgsQ0FBVUMsUUFBVixHQUFxQixDQUFDLENBQXRCOztJQUNBLElBQUl4QixDQUFKLEVBQU87TUFDSGQsRUFBRSxDQUFDbUIsR0FBSCxDQUFPQyxVQUFQLENBQWtCc0IsZUFBbEIsQ0FBa0MxQyxFQUFFLENBQUNtQixHQUFILENBQU9HLFVBQVAsQ0FBa0JDLGFBQWxCLENBQWdDLE1BQWhDLENBQWxDO01BQ0F2QixFQUFFLENBQUN3QyxZQUFILENBQWdCSSxLQUFoQixDQUNJLFFBREosRUFFSSxhQUZKLEVBR0ksVUFISixFQUlJO1FBQ0lDLEVBQUUsRUFBRSxDQUFDLENBRFQ7UUFFSUMsS0FBSyxFQUFFLENBQUM7TUFGWixDQUpKLEVBUUksQ0FBQyxLQUFLZCxVQUFOLENBUkosRUFTSWhDLEVBQUUsQ0FBQ21CLEdBQUgsQ0FBT0csVUFBUCxDQUFrQnlCLFVBQWxCLENBQTZCLE1BQTdCLENBVEosRUFVSSxZQUFZO1FBQ1JoQyxDQUFDLENBQUNGLGdCQUFGLENBQW1CRSxDQUFDLENBQUNDLE1BQXJCLEVBQTZCRCxDQUFDLENBQUNFLFFBQS9CO01BQ0gsQ0FaTDtJQWNIO0VBQ0o7QUFyR0ksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGNvdW50TGFiZWw6IGNjLkxhYmVsLFxuICAgICAgICBwcmljZUxhYmVsOiBjYy5MYWJlbCxcbiAgICAgICAgZmluaXNoTm9kZTogY2MuTm9kZSxcbiAgICAgICAgZnJlZU5vZGU6IGNjLk5vZGUsXG4gICAgICAgIGFkUGFuZWw6IGNjLk5vZGUsXG4gICAgICAgIGFkVGltZXNMYWJlbDogY2MuTGFiZWwsXG4gICAgICAgIGNkVGltZUxhYmVsOiBjYy5MYWJlbFxuICAgIH0sXG4gICAgaW5pdFNob3BDb2luSXRlbTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgdGhpcy5zaG9wSWQgPSBlO1xuICAgICAgICB0aGlzLnNob3BKc29uID0gdDtcbiAgICAgICAgaWYgKDcgPT0gdGhpcy5zaG9wSWQpIHtcbiAgICAgICAgICAgIHZhciBpID0gY2MucHZ6LlBsYXllckRhdGEuZ2V0U2hvcFRpbWVzKGNjLnB2ei5HYW1lQ29uZmlnLlNob3BUaW1lc1R5cGVbXCLph5HluIHlhY3otLlcIl0pO1xuICAgICAgICAgICAgdGhpcy5pc0ZyZWUgPSA3ID09IGk7XG4gICAgICAgICAgICB0aGlzLmlzRmluaXNoID0gaSA8PSAwO1xuICAgICAgICAgICAgdGhpcy5maW5pc2hOb2RlLmFjdGl2ZSA9IHRoaXMuaXNGaW5pc2g7XG4gICAgICAgICAgICB0aGlzLmZyZWVOb2RlLmFjdGl2ZSA9IHRoaXMuaXNGcmVlICYmICF0aGlzLmlzRmluaXNoO1xuICAgICAgICAgICAgdGhpcy5hZFBhbmVsLmFjdGl2ZSA9ICF0aGlzLmlzRnJlZSAmJiAhdGhpcy5pc0ZpbmlzaDtcbiAgICAgICAgICAgIHRoaXMuYWRUaW1lc0xhYmVsLnN0cmluZyA9IFwiKFwiICsgaSArIFwiKVwiO1xuICAgICAgICAgICAgdGhpcy5jZFRpbWVMYWJlbC5ub2RlLmFjdGl2ZSA9ICExO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcmljZUxhYmVsLnN0cmluZyA9IHRoaXMuc2hvcEpzb24ucHJpY2VOdW1bMF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb3VudCA9IHRoaXMuc2hvcEpzb24ubnVtMVswXTtcbiAgICAgICAgdGhpcy5jb3VudExhYmVsLnN0cmluZyA9IFwieFwiICsgdGhpcy5jb3VudDtcbiAgICAgICAgdGhpcy5yZXdhcmREYXRhID0gY2MucHZ6LnV0aWxzLmdldFJld2FyZEl0ZW0oY2MucHZ6LkdhbWVDb25maWcuSXRlbVR5cGVbXCLph5HluIFcIl0sIHRoaXMuY291bnQpO1xuICAgIH0sXG4gICAgb25DbGlja0J1eTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIGlmICghY2MuVUlTaG9wLmlzTG9va0FkKSB7XG4gICAgICAgICAgICBjYy5VSVNob3Aub25TdG9wU2hvcFNjcm9sbCgpO1xuICAgICAgICAgICAgaWYgKDcgPT0gdGhpcy5zaG9wSWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ZpbmlzaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBjYy5wb3B1cE1hbmFnZXIuc2hvd1RvYXN0KFwi5bey5ZSu572E77yBXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ZyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2MucHZ6LlBsYXllckRhdGEudXBkYXRlU2hvcFRpbWVzKGNjLnB2ei5HYW1lQ29uZmlnLlNob3BUaW1lc1R5cGVbXCLph5HluIHlhY3otLlcIl0pO1xuICAgICAgICAgICAgICAgICAgICBjYy5VSVNob3AudXBkYXRlUmVkVGlwKCk7XG4gICAgICAgICAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5wb3B1cChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWFpblVJXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImdldHJld2FyZFVJXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlVJUmV3YXJkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWQ6ICExLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAhMVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLnJld2FyZERhdGFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2MucHZ6LkdhbWVDb25maWcuVUlGcm9tVHlwZVtcIumHkeW4geWVhuW6l1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluaXRTaG9wQ29pbkl0ZW0oZS5zaG9wSWQsIGUuc2hvcEpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNjLlVJU2hvcC5pc0xvb2tBZCA9ICEwO1xuICAgICAgICAgICAgICAgICAgICBjYy5wdnouQWRVdGlscy5zaG93QWRSZXdhcmRWaWRlbyhjYy5wdnouR2FtZUNvbmZpZy5BZFR5cGVbXCLllYblupfph5HluIFcIl0sIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLm9uQWRDbG9zZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYy5wb3B1cE1hbmFnZXIucG9wdXAoXG4gICAgICAgICAgICAgICAgICAgIFwibWFpblVJXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic2hvcGJ1eVVJXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiVUlTaG9wQnV5XCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkOiAhMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAhMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJld2FyZERhdGEsXG4gICAgICAgICAgICAgICAgICAgIFt0aGlzLnNob3BKc29uLnByaWNlSXRlbVswXSwgdGhpcy5zaG9wSnNvbi5wcmljZU51bVswXV0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLnB2ei5QbGF5ZXJEYXRhLnVwZGF0ZVNob3BUaW1lcyhjYy5wdnouR2FtZUNvbmZpZy5TaG9wVGltZXNUeXBlW1wi6YeR5biB5YWN6LS5XCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuaW5pdFNob3BDb2luSXRlbShlLnNob3BJZCwgZS5zaG9wSnNvbik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICExXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25BZENsb3NlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIGNjLlVJU2hvcC5pc0xvb2tBZCA9ICExO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY2MucHZ6LlBsYXllckRhdGEudXBkYXRlU2hvcFRpbWVzKGNjLnB2ei5HYW1lQ29uZmlnLlNob3BUaW1lc1R5cGVbXCLph5HluIHlhY3otLlcIl0pO1xuICAgICAgICAgICAgY2MucG9wdXBNYW5hZ2VyLnBvcHVwKFxuICAgICAgICAgICAgICAgIFwibWFpblVJXCIsXG4gICAgICAgICAgICAgICAgXCJnZXRyZXdhcmRVSVwiLFxuICAgICAgICAgICAgICAgIFwiVUlSZXdhcmRcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFkOiAhMSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6ICExXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbdGhpcy5yZXdhcmREYXRhXSxcbiAgICAgICAgICAgICAgICBjYy5wdnouR2FtZUNvbmZpZy5VSUZyb21UeXBlW1wi6YeR5biB5ZWG5bqXXCJdLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdC5pbml0U2hvcENvaW5JdGVtKHQuc2hvcElkLCB0LnNob3BKc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXX0=