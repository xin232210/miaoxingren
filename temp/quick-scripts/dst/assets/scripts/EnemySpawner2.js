
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/EnemySpawner2.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'b0a83OYe7VCLIJ5J+x88fA0', 'EnemySpawner2');
// scripts/EnemySpawner2.js

"use strict";

var $battleGround2Ctrl = require("./BattleGround2Ctrl");

var $role2 = require("./Role2");

var i = cc._decorator;
var c = i.ccclass;
var s = i.property;

var r = function (e) {
  function t() {
    var t = null !== e && e.apply(this, arguments) || this;
    t.jsonConfig = null;
    t.par = null;
    t.tCount = 0;
    t.enemyLivingCount = [0, 0];
    t.waveId = 0;
    t.ePoint = 0;
    t.waveEnemies = [[[1], [360, 360], [360, 360]], [[1], [360], [360, 360], [360, 360, 360], [360, 360], [360]], [[1], [360], [360, 360], [360, 360, 360], [360, 360, 360, 360]], [[10], [360, 360, 360, 360, 360, 360]]];
    t.waveEnemyRec = [];
    return t;
  }

  __extends(t, e);

  t.prototype.init = function () {
    cc.pvz.runtimeData.wave = 0;
    this.prepareNewWaveEnemy();
  };

  t.prototype.prepareNewWaveEnemy = function (e) {
    if (void 0 === e) {
      e = 1;
    }

    this.par.waveEnemyHandles = [[], [], [], [], [], []];
    var t = 0;

    for (var o = 0; o < this.jsonConfig.json.length; o++) {
      if (this.jsonConfig.json[o].level === this.waveId + 1) {
        t = o;
        break;
      }
    }

    for (; this.jsonConfig.json[t].level === this.waveId + 1;) {
      var a = this.jsonConfig.json[t].numb - 1;

      if (a > 2) {
        a = 3;
      }

      var n = this.waveEnemies[a][0][0];

      if (3 === a) {
        n = this.jsonConfig.json[t].numb;
      }

      this.waveEnemyRec = [];

      for (var i = 0; i < n; i++) {
        for (o = 1; o < this.waveEnemies[a].length; o++) {
          for (var c = 0; c < this.waveEnemies[a][o].length; c++) {
            this.waveEnemyRec.push([e, t, this.waveEnemies[a][o][c]]);
          }

          e += 1;
        }
      }

      t++;

      if (!this.jsonConfig.json[t]) {
        break;
      }
    }

    if (t >= this.jsonConfig.json.length) {//
    } else {
      this.waveEnemyRec.push([e + 3, t - 1, 99999]);
    }

    this.tCount = 0;
    this.ePoint = 0;
  };

  t.prototype.spawnNewEnemy = function (e) {
    if (10 === this.par.state) {
      this.tCount += e;

      for (var t = this.jsonConfig.json; this.ePoint < this.waveEnemyRec.length && this.tCount >= this.waveEnemyRec[this.ePoint][0];) {
        if (99999 === this.waveEnemyRec[this.ePoint][2]) {
          this.node.getComponent($battleGround2Ctrl["default"]).createNewGate(t[this.waveEnemyRec[this.ePoint][1]]);
        } else {
          var o = this.par.createNewEnemy(this.waveEnemyRec[this.ePoint][2], this.par.baseLineY, {
            rId: this.waveEnemyRec[this.ePoint][1],
            config: t[this.waveEnemyRec[this.ePoint][1]]
          });
          o.zIndex = -this.ePoint;

          if (t[this.waveEnemyRec[this.ePoint][1]].numb >= 10) {
            var i = (this.waveEnemyRec[this.ePoint][2] + 250) / 100;
            this.par.waveEnemyHandles[i].push(o);

            if (1 === this.par.waveEnemyHandles[i].length) {
              o.getComponent($role2["default"]).collBody.enabled = !0;
            } else {
              o.getComponent($role2["default"]).collBody.enabled = !1;
            }
          } else {
            o.getComponent($role2["default"]).collBody.enabled = !0;
          }
        }

        this.ePoint++;
      }

      if (this.ePoint === this.waveEnemyRec.length) {
        if (this.waveId + 1 === t[t.length - 1].level) {
          -99999999 === this.par.winTCount && (this.par.winTCount = 6);
        } else {
          this.waveId++, cc.pvz.runtimeData.wave++, this.prepareNewWaveEnemy(4);
        }
      }
    }
  };

  t.prototype.updateEnemyHandles = function (e) {
    var t = Math.floor((e + 250) / 100);

    if (this.par.waveEnemyHandles[t]) {
      this.par.waveEnemyHandles[t].shift();

      if (this.par.waveEnemyHandles[t].length >= 1) {
        this.par.waveEnemyHandles[t][0].getComponent($role2["default"]).collBody.enabled = !0;
      }
    }
  };

  t.prototype.start = function () {
    this.init();
  };

  t.prototype.update = function (e) {
    this.spawnNewEnemy(e);
  };

  __decorate([s(cc.JsonAsset)], t.prototype, "jsonConfig", void 0);

  __decorate([s($battleGround2Ctrl["default"])], t.prototype, "par", void 0);

  return __decorate([c], t);
}(cc.Component);

exports["default"] = r;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL0VuZW15U3Bhd25lcjIuanMiXSwibmFtZXMiOlsiJGJhdHRsZUdyb3VuZDJDdHJsIiwicmVxdWlyZSIsIiRyb2xlMiIsImkiLCJjYyIsIl9kZWNvcmF0b3IiLCJjIiwiY2NjbGFzcyIsInMiLCJwcm9wZXJ0eSIsInIiLCJlIiwidCIsImFwcGx5IiwiYXJndW1lbnRzIiwianNvbkNvbmZpZyIsInBhciIsInRDb3VudCIsImVuZW15TGl2aW5nQ291bnQiLCJ3YXZlSWQiLCJlUG9pbnQiLCJ3YXZlRW5lbWllcyIsIndhdmVFbmVteVJlYyIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsImluaXQiLCJwdnoiLCJydW50aW1lRGF0YSIsIndhdmUiLCJwcmVwYXJlTmV3V2F2ZUVuZW15Iiwid2F2ZUVuZW15SGFuZGxlcyIsIm8iLCJqc29uIiwibGVuZ3RoIiwibGV2ZWwiLCJhIiwibnVtYiIsIm4iLCJwdXNoIiwic3Bhd25OZXdFbmVteSIsInN0YXRlIiwibm9kZSIsImdldENvbXBvbmVudCIsImNyZWF0ZU5ld0dhdGUiLCJjcmVhdGVOZXdFbmVteSIsImJhc2VMaW5lWSIsInJJZCIsImNvbmZpZyIsInpJbmRleCIsImNvbGxCb2R5IiwiZW5hYmxlZCIsIndpblRDb3VudCIsInVwZGF0ZUVuZW15SGFuZGxlcyIsIk1hdGgiLCJmbG9vciIsInNoaWZ0Iiwic3RhcnQiLCJ1cGRhdGUiLCJfX2RlY29yYXRlIiwiSnNvbkFzc2V0IiwiQ29tcG9uZW50IiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxrQkFBa0IsR0FBR0MsT0FBTyxDQUFDLHFCQUFELENBQWhDOztBQUNBLElBQUlDLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBcEI7O0FBQ0EsSUFBSUUsQ0FBQyxHQUFHQyxFQUFFLENBQUNDLFVBQVg7QUFDQSxJQUFJQyxDQUFDLEdBQUdILENBQUMsQ0FBQ0ksT0FBVjtBQUNBLElBQUlDLENBQUMsR0FBR0wsQ0FBQyxDQUFDTSxRQUFWOztBQUNBLElBQUlDLENBQUMsR0FBSSxVQUFVQyxDQUFWLEVBQWE7RUFDbEIsU0FBU0MsQ0FBVCxHQUFhO0lBQ1QsSUFBSUEsQ0FBQyxHQUFJLFNBQVNELENBQVQsSUFBY0EsQ0FBQyxDQUFDRSxLQUFGLENBQVEsSUFBUixFQUFjQyxTQUFkLENBQWYsSUFBNEMsSUFBcEQ7SUFDQUYsQ0FBQyxDQUFDRyxVQUFGLEdBQWUsSUFBZjtJQUNBSCxDQUFDLENBQUNJLEdBQUYsR0FBUSxJQUFSO0lBQ0FKLENBQUMsQ0FBQ0ssTUFBRixHQUFXLENBQVg7SUFDQUwsQ0FBQyxDQUFDTSxnQkFBRixHQUFxQixDQUFDLENBQUQsRUFBSSxDQUFKLENBQXJCO0lBQ0FOLENBQUMsQ0FBQ08sTUFBRixHQUFXLENBQVg7SUFDQVAsQ0FBQyxDQUFDUSxNQUFGLEdBQVcsQ0FBWDtJQUNBUixDQUFDLENBQUNTLFdBQUYsR0FBZ0IsQ0FDWixDQUFDLENBQUMsQ0FBRCxDQUFELEVBQU0sQ0FBQyxHQUFELEVBQU0sR0FBTixDQUFOLEVBQWtCLENBQUMsR0FBRCxFQUFNLEdBQU4sQ0FBbEIsQ0FEWSxFQUVaLENBQUMsQ0FBQyxDQUFELENBQUQsRUFBTSxDQUFDLEdBQUQsQ0FBTixFQUFhLENBQUMsR0FBRCxFQUFNLEdBQU4sQ0FBYixFQUF5QixDQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxDQUF6QixFQUEwQyxDQUFDLEdBQUQsRUFBTSxHQUFOLENBQTFDLEVBQXNELENBQUMsR0FBRCxDQUF0RCxDQUZZLEVBR1osQ0FBQyxDQUFDLENBQUQsQ0FBRCxFQUFNLENBQUMsR0FBRCxDQUFOLEVBQWEsQ0FBQyxHQUFELEVBQU0sR0FBTixDQUFiLEVBQXlCLENBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYLENBQXpCLEVBQTBDLENBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYLEVBQWdCLEdBQWhCLENBQTFDLENBSFksRUFJWixDQUFDLENBQUMsRUFBRCxDQUFELEVBQU8sQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsRUFBZ0IsR0FBaEIsRUFBcUIsR0FBckIsRUFBMEIsR0FBMUIsQ0FBUCxDQUpZLENBQWhCO0lBTUFULENBQUMsQ0FBQ1UsWUFBRixHQUFpQixFQUFqQjtJQUNBLE9BQU9WLENBQVA7RUFDSDs7RUFDRFcsU0FBUyxDQUFDWCxDQUFELEVBQUlELENBQUosQ0FBVDs7RUFDQUMsQ0FBQyxDQUFDWSxTQUFGLENBQVlDLElBQVosR0FBbUIsWUFBWTtJQUMzQnJCLEVBQUUsQ0FBQ3NCLEdBQUgsQ0FBT0MsV0FBUCxDQUFtQkMsSUFBbkIsR0FBMEIsQ0FBMUI7SUFDQSxLQUFLQyxtQkFBTDtFQUNILENBSEQ7O0VBSUFqQixDQUFDLENBQUNZLFNBQUYsQ0FBWUssbUJBQVosR0FBa0MsVUFBVWxCLENBQVYsRUFBYTtJQUMzQyxJQUFJLEtBQUssQ0FBTCxLQUFXQSxDQUFmLEVBQWtCO01BQ2RBLENBQUMsR0FBRyxDQUFKO0lBQ0g7O0lBQ0QsS0FBS0ssR0FBTCxDQUFTYyxnQkFBVCxHQUE0QixDQUFDLEVBQUQsRUFBSyxFQUFMLEVBQVMsRUFBVCxFQUFhLEVBQWIsRUFBaUIsRUFBakIsRUFBcUIsRUFBckIsQ0FBNUI7SUFDQSxJQUFJbEIsQ0FBQyxHQUFHLENBQVI7O0lBQ0EsS0FBSyxJQUFJbUIsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLaEIsVUFBTCxDQUFnQmlCLElBQWhCLENBQXFCQyxNQUF6QyxFQUFpREYsQ0FBQyxFQUFsRCxFQUFzRDtNQUNsRCxJQUFJLEtBQUtoQixVQUFMLENBQWdCaUIsSUFBaEIsQ0FBcUJELENBQXJCLEVBQXdCRyxLQUF4QixLQUFrQyxLQUFLZixNQUFMLEdBQWMsQ0FBcEQsRUFBdUQ7UUFDbkRQLENBQUMsR0FBR21CLENBQUo7UUFDQTtNQUNIO0lBQ0o7O0lBQ0QsT0FBTyxLQUFLaEIsVUFBTCxDQUFnQmlCLElBQWhCLENBQXFCcEIsQ0FBckIsRUFBd0JzQixLQUF4QixLQUFrQyxLQUFLZixNQUFMLEdBQWMsQ0FBdkQsR0FBNEQ7TUFDeEQsSUFBSWdCLENBQUMsR0FBRyxLQUFLcEIsVUFBTCxDQUFnQmlCLElBQWhCLENBQXFCcEIsQ0FBckIsRUFBd0J3QixJQUF4QixHQUErQixDQUF2Qzs7TUFDQSxJQUFJRCxDQUFDLEdBQUcsQ0FBUixFQUFXO1FBQ1BBLENBQUMsR0FBRyxDQUFKO01BQ0g7O01BQ0QsSUFBSUUsQ0FBQyxHQUFHLEtBQUtoQixXQUFMLENBQWlCYyxDQUFqQixFQUFvQixDQUFwQixFQUF1QixDQUF2QixDQUFSOztNQUNBLElBQUksTUFBTUEsQ0FBVixFQUFhO1FBQ1RFLENBQUMsR0FBRyxLQUFLdEIsVUFBTCxDQUFnQmlCLElBQWhCLENBQXFCcEIsQ0FBckIsRUFBd0J3QixJQUE1QjtNQUNIOztNQUNELEtBQUtkLFlBQUwsR0FBb0IsRUFBcEI7O01BQ0EsS0FBSyxJQUFJbkIsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR2tDLENBQXBCLEVBQXVCbEMsQ0FBQyxFQUF4QixFQUE0QjtRQUN4QixLQUFLNEIsQ0FBQyxHQUFHLENBQVQsRUFBWUEsQ0FBQyxHQUFHLEtBQUtWLFdBQUwsQ0FBaUJjLENBQWpCLEVBQW9CRixNQUFwQyxFQUE0Q0YsQ0FBQyxFQUE3QyxFQUFpRDtVQUM3QyxLQUFLLElBQUl6QixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHLEtBQUtlLFdBQUwsQ0FBaUJjLENBQWpCLEVBQW9CSixDQUFwQixFQUF1QkUsTUFBM0MsRUFBbUQzQixDQUFDLEVBQXBELEVBQXdEO1lBQ3BELEtBQUtnQixZQUFMLENBQWtCZ0IsSUFBbEIsQ0FBdUIsQ0FBQzNCLENBQUQsRUFBSUMsQ0FBSixFQUFPLEtBQUtTLFdBQUwsQ0FBaUJjLENBQWpCLEVBQW9CSixDQUFwQixFQUF1QnpCLENBQXZCLENBQVAsQ0FBdkI7VUFDSDs7VUFDREssQ0FBQyxJQUFJLENBQUw7UUFDSDtNQUNKOztNQUNEQyxDQUFDOztNQUNELElBQUksQ0FBQyxLQUFLRyxVQUFMLENBQWdCaUIsSUFBaEIsQ0FBcUJwQixDQUFyQixDQUFMLEVBQThCO1FBQzFCO01BQ0g7SUFDSjs7SUFDRCxJQUFJQSxDQUFDLElBQUksS0FBS0csVUFBTCxDQUFnQmlCLElBQWhCLENBQXFCQyxNQUE5QixFQUFzQyxDQUNsQztJQUNILENBRkQsTUFFTztNQUNILEtBQUtYLFlBQUwsQ0FBa0JnQixJQUFsQixDQUF1QixDQUFDM0IsQ0FBQyxHQUFHLENBQUwsRUFBUUMsQ0FBQyxHQUFHLENBQVosRUFBZSxLQUFmLENBQXZCO0lBQ0g7O0lBQ0QsS0FBS0ssTUFBTCxHQUFjLENBQWQ7SUFDQSxLQUFLRyxNQUFMLEdBQWMsQ0FBZDtFQUNILENBMUNEOztFQTJDQVIsQ0FBQyxDQUFDWSxTQUFGLENBQVllLGFBQVosR0FBNEIsVUFBVTVCLENBQVYsRUFBYTtJQUNyQyxJQUFJLE9BQU8sS0FBS0ssR0FBTCxDQUFTd0IsS0FBcEIsRUFBMkI7TUFDdkIsS0FBS3ZCLE1BQUwsSUFBZU4sQ0FBZjs7TUFDQSxLQUNJLElBQUlDLENBQUMsR0FBRyxLQUFLRyxVQUFMLENBQWdCaUIsSUFENUIsRUFFSSxLQUFLWixNQUFMLEdBQWMsS0FBS0UsWUFBTCxDQUFrQlcsTUFBaEMsSUFBMEMsS0FBS2hCLE1BQUwsSUFBZSxLQUFLSyxZQUFMLENBQWtCLEtBQUtGLE1BQXZCLEVBQStCLENBQS9CLENBRjdELEdBSUU7UUFDRSxJQUFJLFVBQVUsS0FBS0UsWUFBTCxDQUFrQixLQUFLRixNQUF2QixFQUErQixDQUEvQixDQUFkLEVBQWlEO1VBQzdDLEtBQUtxQixJQUFMLENBQ0tDLFlBREwsQ0FDa0IxQyxrQkFBa0IsV0FEcEMsRUFFSzJDLGFBRkwsQ0FFbUIvQixDQUFDLENBQUMsS0FBS1UsWUFBTCxDQUFrQixLQUFLRixNQUF2QixFQUErQixDQUEvQixDQUFELENBRnBCO1FBR0gsQ0FKRCxNQUlPO1VBQ0gsSUFBSVcsQ0FBQyxHQUFHLEtBQUtmLEdBQUwsQ0FBUzRCLGNBQVQsQ0FBd0IsS0FBS3RCLFlBQUwsQ0FBa0IsS0FBS0YsTUFBdkIsRUFBK0IsQ0FBL0IsQ0FBeEIsRUFBMkQsS0FBS0osR0FBTCxDQUFTNkIsU0FBcEUsRUFBK0U7WUFDbkZDLEdBQUcsRUFBRSxLQUFLeEIsWUFBTCxDQUFrQixLQUFLRixNQUF2QixFQUErQixDQUEvQixDQUQ4RTtZQUVuRjJCLE1BQU0sRUFBRW5DLENBQUMsQ0FBQyxLQUFLVSxZQUFMLENBQWtCLEtBQUtGLE1BQXZCLEVBQStCLENBQS9CLENBQUQ7VUFGMEUsQ0FBL0UsQ0FBUjtVQUlBVyxDQUFDLENBQUNpQixNQUFGLEdBQVcsQ0FBQyxLQUFLNUIsTUFBakI7O1VBQ0EsSUFBSVIsQ0FBQyxDQUFDLEtBQUtVLFlBQUwsQ0FBa0IsS0FBS0YsTUFBdkIsRUFBK0IsQ0FBL0IsQ0FBRCxDQUFELENBQXFDZ0IsSUFBckMsSUFBNkMsRUFBakQsRUFBcUQ7WUFDakQsSUFBSWpDLENBQUMsR0FBRyxDQUFDLEtBQUttQixZQUFMLENBQWtCLEtBQUtGLE1BQXZCLEVBQStCLENBQS9CLElBQW9DLEdBQXJDLElBQTRDLEdBQXBEO1lBQ0EsS0FBS0osR0FBTCxDQUFTYyxnQkFBVCxDQUEwQjNCLENBQTFCLEVBQTZCbUMsSUFBN0IsQ0FBa0NQLENBQWxDOztZQUNBLElBQUksTUFBTSxLQUFLZixHQUFMLENBQVNjLGdCQUFULENBQTBCM0IsQ0FBMUIsRUFBNkI4QixNQUF2QyxFQUErQztjQUMzQ0YsQ0FBQyxDQUFDVyxZQUFGLENBQWV4QyxNQUFNLFdBQXJCLEVBQStCK0MsUUFBL0IsQ0FBd0NDLE9BQXhDLEdBQWtELENBQUMsQ0FBbkQ7WUFDSCxDQUZELE1BRU87Y0FDSG5CLENBQUMsQ0FBQ1csWUFBRixDQUFleEMsTUFBTSxXQUFyQixFQUErQitDLFFBQS9CLENBQXdDQyxPQUF4QyxHQUFrRCxDQUFDLENBQW5EO1lBQ0g7VUFDSixDQVJELE1BUU87WUFDSG5CLENBQUMsQ0FBQ1csWUFBRixDQUFleEMsTUFBTSxXQUFyQixFQUErQitDLFFBQS9CLENBQXdDQyxPQUF4QyxHQUFrRCxDQUFDLENBQW5EO1VBQ0g7UUFDSjs7UUFDRCxLQUFLOUIsTUFBTDtNQUNIOztNQUNELElBQUksS0FBS0EsTUFBTCxLQUFnQixLQUFLRSxZQUFMLENBQWtCVyxNQUF0QyxFQUE4QztRQUMxQyxJQUFJLEtBQUtkLE1BQUwsR0FBYyxDQUFkLEtBQW9CUCxDQUFDLENBQUNBLENBQUMsQ0FBQ3FCLE1BQUYsR0FBVyxDQUFaLENBQUQsQ0FBZ0JDLEtBQXhDLEVBQStDO1VBQzNDLENBQUMsUUFBRCxLQUFjLEtBQUtsQixHQUFMLENBQVNtQyxTQUF2QixLQUFxQyxLQUFLbkMsR0FBTCxDQUFTbUMsU0FBVCxHQUFxQixDQUExRDtRQUNILENBRkQsTUFFTztVQUNILEtBQUtoQyxNQUFMLElBQWVmLEVBQUUsQ0FBQ3NCLEdBQUgsQ0FBT0MsV0FBUCxDQUFtQkMsSUFBbkIsRUFBZixFQUEwQyxLQUFLQyxtQkFBTCxDQUF5QixDQUF6QixDQUExQztRQUNIO01BQ0o7SUFDSjtFQUNKLENBeENEOztFQXlDQWpCLENBQUMsQ0FBQ1ksU0FBRixDQUFZNEIsa0JBQVosR0FBaUMsVUFBVXpDLENBQVYsRUFBYTtJQUMxQyxJQUFJQyxDQUFDLEdBQUd5QyxJQUFJLENBQUNDLEtBQUwsQ0FBVyxDQUFDM0MsQ0FBQyxHQUFHLEdBQUwsSUFBWSxHQUF2QixDQUFSOztJQUNBLElBQUksS0FBS0ssR0FBTCxDQUFTYyxnQkFBVCxDQUEwQmxCLENBQTFCLENBQUosRUFBa0M7TUFDOUIsS0FBS0ksR0FBTCxDQUFTYyxnQkFBVCxDQUEwQmxCLENBQTFCLEVBQTZCMkMsS0FBN0I7O01BQ0EsSUFBSSxLQUFLdkMsR0FBTCxDQUFTYyxnQkFBVCxDQUEwQmxCLENBQTFCLEVBQTZCcUIsTUFBN0IsSUFBdUMsQ0FBM0MsRUFBOEM7UUFDMUMsS0FBS2pCLEdBQUwsQ0FBU2MsZ0JBQVQsQ0FBMEJsQixDQUExQixFQUE2QixDQUE3QixFQUFnQzhCLFlBQWhDLENBQTZDeEMsTUFBTSxXQUFuRCxFQUE2RCtDLFFBQTdELENBQXNFQyxPQUF0RSxHQUFnRixDQUFDLENBQWpGO01BQ0g7SUFDSjtFQUNKLENBUkQ7O0VBU0F0QyxDQUFDLENBQUNZLFNBQUYsQ0FBWWdDLEtBQVosR0FBb0IsWUFBWTtJQUM1QixLQUFLL0IsSUFBTDtFQUNILENBRkQ7O0VBR0FiLENBQUMsQ0FBQ1ksU0FBRixDQUFZaUMsTUFBWixHQUFxQixVQUFVOUMsQ0FBVixFQUFhO0lBQzlCLEtBQUs0QixhQUFMLENBQW1CNUIsQ0FBbkI7RUFDSCxDQUZEOztFQUdBK0MsVUFBVSxDQUFDLENBQUNsRCxDQUFDLENBQUNKLEVBQUUsQ0FBQ3VELFNBQUosQ0FBRixDQUFELEVBQW9CL0MsQ0FBQyxDQUFDWSxTQUF0QixFQUFpQyxZQUFqQyxFQUErQyxLQUFLLENBQXBELENBQVY7O0VBQ0FrQyxVQUFVLENBQUMsQ0FBQ2xELENBQUMsQ0FBQ1Isa0JBQWtCLFdBQW5CLENBQUYsQ0FBRCxFQUFrQ1ksQ0FBQyxDQUFDWSxTQUFwQyxFQUErQyxLQUEvQyxFQUFzRCxLQUFLLENBQTNELENBQVY7O0VBQ0EsT0FBT2tDLFVBQVUsQ0FBQyxDQUFDcEQsQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBakI7QUFDSCxDQTdITyxDQTZITFIsRUFBRSxDQUFDd0QsU0E3SEUsQ0FBUjs7QUE4SEFDLE9BQU8sV0FBUCxHQUFrQm5ELENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgJGJhdHRsZUdyb3VuZDJDdHJsID0gcmVxdWlyZShcIi4vQmF0dGxlR3JvdW5kMkN0cmxcIik7XG52YXIgJHJvbGUyID0gcmVxdWlyZShcIi4vUm9sZTJcIik7XG52YXIgaSA9IGNjLl9kZWNvcmF0b3I7XG52YXIgYyA9IGkuY2NjbGFzcztcbnZhciBzID0gaS5wcm9wZXJ0eTtcbnZhciByID0gKGZ1bmN0aW9uIChlKSB7XG4gICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgdmFyIHQgPSAobnVsbCAhPT0gZSAmJiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XG4gICAgICAgIHQuanNvbkNvbmZpZyA9IG51bGw7XG4gICAgICAgIHQucGFyID0gbnVsbDtcbiAgICAgICAgdC50Q291bnQgPSAwO1xuICAgICAgICB0LmVuZW15TGl2aW5nQ291bnQgPSBbMCwgMF07XG4gICAgICAgIHQud2F2ZUlkID0gMDtcbiAgICAgICAgdC5lUG9pbnQgPSAwO1xuICAgICAgICB0LndhdmVFbmVtaWVzID0gW1xuICAgICAgICAgICAgW1sxXSwgWzM2MCwgMzYwXSwgWzM2MCwgMzYwXV0sXG4gICAgICAgICAgICBbWzFdLCBbMzYwXSwgWzM2MCwgMzYwXSwgWzM2MCwgMzYwLCAzNjBdLCBbMzYwLCAzNjBdLCBbMzYwXV0sXG4gICAgICAgICAgICBbWzFdLCBbMzYwXSwgWzM2MCwgMzYwXSwgWzM2MCwgMzYwLCAzNjBdLCBbMzYwLCAzNjAsIDM2MCwgMzYwXV0sXG4gICAgICAgICAgICBbWzEwXSwgWzM2MCwgMzYwLCAzNjAsIDM2MCwgMzYwLCAzNjBdXVxuICAgICAgICBdO1xuICAgICAgICB0LndhdmVFbmVteVJlYyA9IFtdO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgX19leHRlbmRzKHQsIGUpO1xuICAgIHQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNjLnB2ei5ydW50aW1lRGF0YS53YXZlID0gMDtcbiAgICAgICAgdGhpcy5wcmVwYXJlTmV3V2F2ZUVuZW15KCk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5wcmVwYXJlTmV3V2F2ZUVuZW15ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkge1xuICAgICAgICAgICAgZSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXIud2F2ZUVuZW15SGFuZGxlcyA9IFtbXSwgW10sIFtdLCBbXSwgW10sIFtdXTtcbiAgICAgICAgdmFyIHQgPSAwO1xuICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IHRoaXMuanNvbkNvbmZpZy5qc29uLmxlbmd0aDsgbysrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5qc29uQ29uZmlnLmpzb25bb10ubGV2ZWwgPT09IHRoaXMud2F2ZUlkICsgMSkge1xuICAgICAgICAgICAgICAgIHQgPSBvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoOyB0aGlzLmpzb25Db25maWcuanNvblt0XS5sZXZlbCA9PT0gdGhpcy53YXZlSWQgKyAxOyApIHtcbiAgICAgICAgICAgIHZhciBhID0gdGhpcy5qc29uQ29uZmlnLmpzb25bdF0ubnVtYiAtIDE7XG4gICAgICAgICAgICBpZiAoYSA+IDIpIHtcbiAgICAgICAgICAgICAgICBhID0gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuID0gdGhpcy53YXZlRW5lbWllc1thXVswXVswXTtcbiAgICAgICAgICAgIGlmICgzID09PSBhKSB7XG4gICAgICAgICAgICAgICAgbiA9IHRoaXMuanNvbkNvbmZpZy5qc29uW3RdLm51bWI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndhdmVFbmVteVJlYyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKG8gPSAxOyBvIDwgdGhpcy53YXZlRW5lbWllc1thXS5sZW5ndGg7IG8rKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IHRoaXMud2F2ZUVuZW1pZXNbYV1bb10ubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2F2ZUVuZW15UmVjLnB1c2goW2UsIHQsIHRoaXMud2F2ZUVuZW1pZXNbYV1bb11bY11dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCsrO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmpzb25Db25maWcuanNvblt0XSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0ID49IHRoaXMuanNvbkNvbmZpZy5qc29uLmxlbmd0aCkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud2F2ZUVuZW15UmVjLnB1c2goW2UgKyAzLCB0IC0gMSwgOTk5OTldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZVBvaW50ID0gMDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnNwYXduTmV3RW5lbXkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoMTAgPT09IHRoaXMucGFyLnN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnRDb3VudCArPSBlO1xuICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuanNvbkNvbmZpZy5qc29uO1xuICAgICAgICAgICAgICAgIHRoaXMuZVBvaW50IDwgdGhpcy53YXZlRW5lbXlSZWMubGVuZ3RoICYmIHRoaXMudENvdW50ID49IHRoaXMud2F2ZUVuZW15UmVjW3RoaXMuZVBvaW50XVswXTtcblxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaWYgKDk5OTk5ID09PSB0aGlzLndhdmVFbmVteVJlY1t0aGlzLmVQb2ludF1bMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Q29tcG9uZW50KCRiYXR0bGVHcm91bmQyQ3RybC5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZU5ld0dhdGUodFt0aGlzLndhdmVFbmVteVJlY1t0aGlzLmVQb2ludF1bMV1dKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMucGFyLmNyZWF0ZU5ld0VuZW15KHRoaXMud2F2ZUVuZW15UmVjW3RoaXMuZVBvaW50XVsyXSwgdGhpcy5wYXIuYmFzZUxpbmVZLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBySWQ6IHRoaXMud2F2ZUVuZW15UmVjW3RoaXMuZVBvaW50XVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdFt0aGlzLndhdmVFbmVteVJlY1t0aGlzLmVQb2ludF1bMV1dXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBvLnpJbmRleCA9IC10aGlzLmVQb2ludDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbdGhpcy53YXZlRW5lbXlSZWNbdGhpcy5lUG9pbnRdWzFdXS5udW1iID49IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICh0aGlzLndhdmVFbmVteVJlY1t0aGlzLmVQb2ludF1bMl0gKyAyNTApIC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXIud2F2ZUVuZW15SGFuZGxlc1tpXS5wdXNoKG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHRoaXMucGFyLndhdmVFbmVteUhhbmRsZXNbaV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5nZXRDb21wb25lbnQoJHJvbGUyLmRlZmF1bHQpLmNvbGxCb2R5LmVuYWJsZWQgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5nZXRDb21wb25lbnQoJHJvbGUyLmRlZmF1bHQpLmNvbGxCb2R5LmVuYWJsZWQgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uZ2V0Q29tcG9uZW50KCRyb2xlMi5kZWZhdWx0KS5jb2xsQm9keS5lbmFibGVkID0gITA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lUG9pbnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVQb2ludCA9PT0gdGhpcy53YXZlRW5lbXlSZWMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMud2F2ZUlkICsgMSA9PT0gdFt0Lmxlbmd0aCAtIDFdLmxldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIC05OTk5OTk5OSA9PT0gdGhpcy5wYXIud2luVENvdW50ICYmICh0aGlzLnBhci53aW5UQ291bnQgPSA2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhdmVJZCsrLCBjYy5wdnoucnVudGltZURhdGEud2F2ZSsrLCB0aGlzLnByZXBhcmVOZXdXYXZlRW5lbXkoNCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS51cGRhdGVFbmVteUhhbmRsZXMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IE1hdGguZmxvb3IoKGUgKyAyNTApIC8gMTAwKTtcbiAgICAgICAgaWYgKHRoaXMucGFyLndhdmVFbmVteUhhbmRsZXNbdF0pIHtcbiAgICAgICAgICAgIHRoaXMucGFyLndhdmVFbmVteUhhbmRsZXNbdF0uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhci53YXZlRW5lbXlIYW5kbGVzW3RdLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXIud2F2ZUVuZW15SGFuZGxlc1t0XVswXS5nZXRDb21wb25lbnQoJHJvbGUyLmRlZmF1bHQpLmNvbGxCb2R5LmVuYWJsZWQgPSAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgdC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5zcGF3bk5ld0VuZW15KGUpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbcyhjYy5Kc29uQXNzZXQpXSwgdC5wcm90b3R5cGUsIFwianNvbkNvbmZpZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3MoJGJhdHRsZUdyb3VuZDJDdHJsLmRlZmF1bHQpXSwgdC5wcm90b3R5cGUsIFwicGFyXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIF9fZGVjb3JhdGUoW2NdLCB0KTtcbn0pKGNjLkNvbXBvbmVudCk7XG5leHBvcnRzLmRlZmF1bHQgPSByOyJdfQ==