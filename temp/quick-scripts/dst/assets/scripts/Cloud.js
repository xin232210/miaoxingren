
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Cloud.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5d7fa5ix3RGmr2YNPNDOpd8', 'Cloud');
// scripts/Cloud.js

"use strict";

var o = "https://yiyouzan.cn/xsapi/rabbit/";
var a = {
  uid: null,
  header: null,
  access: 0,
  isGM: !1,
  needSaveToCloud: 0,
  baseData: "{}",
  login: function login(e) {
    var t = this;

    if (cc.sys.platform == cc.sys.DESKTOP_BROWSER || cc.sys.platform == cc.sys.WIN32 || cc.sys.platform == cc.sys.MOBILE_BROWSER) {
      this.access = 100;
      return void e(!0);
    }

    var o = function o(t) {
      if (e) {
        e(t);
      }
    };

    console.log("perpare p8 login");
    P8SDK.login().then(function (e) {
      var a = e.data.openid;
      t.loginSelf(a, o);
    });
  },
  loginSelf: function loginSelf(e, t) {
    var a = this;
    var n = o + (cc.sys.platform == cc.sys.BYTEDANCE_GAME ? "user/bytelogin2" : "/user/p8loginkp");
    wx.request({
      url: n,
      method: "POST",
      data: {
        loginCode: e
      },
      success: function success(e) {
        console.log("login success:", e.data);

        if (e.data["new"]) {
          cc.pvz.TAUtils.uploadRegisterData({
            uid: e.data.uid
          });
        }

        a.uid = e.data.uid;

        if (e.data.name) {
          a.name = e.data.name;
        } else {
          a.name = "玩家" + a.uid;
        }

        a.access = e.data.access;
        a.header = {
          uid: e.data.uid,
          uToken: e.data.token
        };
        a.isGM = e.data.access;
        a.getOnlineData(t);
      },
      fail: function fail() {
        t(!1);
      }
    });
  },
  req: function req(e, t, a, n) {
    wx.request({
      url: o + e,
      method: t ? "POST" : "GET",
      header: this.header,
      data: a,
      success: function success(e) {
        console.log("req success, data:", e.data);
        n(!0, e.data);
      },
      fail: function fail(e) {
        console.log("req fail, errMsg:", e.errMsg);
        n(!1);
      }
    });
  },
  getOnlineData: function getOnlineData(e) {
    var t = this;
    wx.request({
      url: o + "game/infokp",
      method: "GET",
      header: t.header,
      success: function success(o) {
        if (1 == o.data.ok) {
          t.baseData = o.data.baseData;
          e(!0);
        } else {
          e(!1);
        }
      },
      fail: function fail(t) {
        console.log("info errMsg:", t.errMsg);
        e(!1);
      }
    });
  },
  checkUpdatePlayerInfo: function checkUpdatePlayerInfo(e, t) {
    var o = this;

    if (this.uid) {
      this.updatePlayerInfo(e, t);
    } else {
      this.login(function (a) {
        if (a) {
          o.updatePlayerInfo(e, t);
        } else {
          t(!1);
        }
      });
    }
  },
  updatePlayerInfo: function updatePlayerInfo(e, t) {
    console.log("updatePlayerInfo");

    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      var a = 0;
      var n = !0;

      var i = function i(e) {
        if (e) {//
        } else {
          n = !1;
        }

        if (++a >= 0) {
          t(n);
        }
      };

      var c = JSON.stringify(e);
      wx.request({
        url: o + "game/setbaseinfokp",
        method: "POST",
        header: this.header,
        data: {
          lv: cc.pvz.PlayerData.getAchieveProgress(cc.pvz.GameConfig.MissionType["装备总等级n"]),
          info: c
        },
        success: function success(e) {
          console.log("setbaseinfo success:", e.data);
          i(1 == e.data.ok);

          if (0 == e.data.ok && "not login" == e.data.rsn) {
            wx.showToast({
              title: "登录已失效",
              icon: "success",
              duration: 1500
            });
          }
        },
        fail: function fail(e) {
          console.log("setbaseinfo errMsg:", e.errMsg);
          i(!1);
        }
      });
      this.sendC++;
    } else {
      t(!0);
    }
  },
  setAvatar: function setAvatar(e, t, a) {
    wx.request({
      url: o + "game/authkp",
      method: "POST",
      header: this.header,
      data: {
        name: e,
        avatarUrl: t
      },
      success: function success(e) {
        console.log("authkp success:", e.data);
        a(1 == e.data.ok);
      },
      fail: function fail(e) {
        console.log("authkp fail:", e.errMsg);
        a(!1);
      }
    });
  },
  uploadScore: function uploadScore(e, t, a, n) {
    if (cc.sys.platform != cc.sys.WECHAT_GAME) {
      console.log("update score:", e, ",exInfo:", t, ",exInfo2:", a);
      return void setTimeout(function () {
        n(!0);
      });
    }

    wx.request({
      url: o + "game/updatescorekp",
      method: "POST",
      header: this.header,
      data: {
        score: e,
        exInfo: t,
        exInfo2: a
      },
      success: function success(e) {
        console.log("updatescorekp success:", e.data);
        n(1 == e.data.ok);
      },
      fail: function fail(e) {
        console.log("updatescorekp fail:", e.errMsg);
        n(!1);
      }
    });
  },
  myRank: function myRank(e) {
    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      wx.request({
        url: o + "game/myrankkp",
        method: "GET",
        header: this.header,
        success: function success(t) {
          console.log("myrankkp success:", t.data);
          e(1 == t.data.ok, t.data);
        },
        fail: function fail(t) {
          console.log("myrankkp fail:", t.errMsg);
          e(!1);
        }
      });
    } else {
      setTimeout(function () {
        e(!0, {
          ok: 1,
          rank: 0,
          info: {
            uid: 40303867,
            sector: 2,
            name: "momo",
            avatarUrl: "",
            score: 13,
            exInfo: "",
            isCheat: 0,
            rankLastWeek: 4
          }
        });
      });
    }
  },
  rankList: function rankList(e, t) {
    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      wx.request({
        url: o + "game/ranklistkp",
        method: "POST",
        header: this.header,
        data: {
          fromIdx: e
        },
        success: function success(e) {
          console.log("ranklistkp success:", e.data);
          t(1 == e.data.ok, e.data.ret);
        },
        fail: function fail(e) {
          console.log("ranklistkp fail:", e.errMsg);
          t(!1);
        }
      });
    } else {
      setTimeout(function () {
        t(!0, [{
          rank: 0,
          uInfo: {
            uid: 40000006,
            sector: 2,
            name: "NONAME",
            avatarUrl: "",
            score: 15,
            exInfo: "8",
            isCheat: 0
          }
        }]);
      });
    }
  },
  makeFriend: function makeFriend() {
    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      if (wx.getEnterOptionsSync) {
        var e = wx.getEnterOptionsSync();

        if (e.query && e.query.fromuid) {
          console.log("setrelationkp to", e.query.fromuid);
          this.req("game/setrelationkp", !0, {
            uid2: parseInt(e.query.fromuid)
          }, function (t, o) {
            console.log("setrelationkp to", e.query.fromuid, t, o);
          });
        } else {
          console.log("no query!", e);
        }
      } else {
        console.log("no option func");
      }
    } else {
      console.log("make friend relation.");
    }
  },
  updatePlayerSub: function updatePlayerSub(e) {
    var t = o + "game/subscribekp";

    if (cc.sys.platform == cc.sys.BYTEDANCE_GAME) {
      tt.request({
        url: t,
        method: "POST",
        header: this.header,
        data: {
          flag: e
        },
        success: function success(e) {
          console.log("subscribe success:", e.data);
        },
        fail: function fail(e) {
          console.log("subscribe fail:", e.errMsg);
        }
      });
    } else {
      if (cc.sys.platform == cc.sys.WECHAT_GAME) {
        wx.request({
          url: t,
          method: "POST",
          header: this.header,
          data: {
            flag: e
          },
          success: function success(e) {
            console.log("subscribe success:", e.data);
          },
          fail: function fail(e) {
            console.log("subscribe fail:", e.errMsg);
          }
        });
      }
    }
  }
};

if (cc.pvz) {//
} else {
  cc.pvz = {};
}

cc.pvz.cloud = a;
module.exports = a;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL0Nsb3VkLmpzIl0sIm5hbWVzIjpbIm8iLCJhIiwidWlkIiwiaGVhZGVyIiwiYWNjZXNzIiwiaXNHTSIsIm5lZWRTYXZlVG9DbG91ZCIsImJhc2VEYXRhIiwibG9naW4iLCJlIiwidCIsImNjIiwic3lzIiwicGxhdGZvcm0iLCJERVNLVE9QX0JST1dTRVIiLCJXSU4zMiIsIk1PQklMRV9CUk9XU0VSIiwiY29uc29sZSIsImxvZyIsIlA4U0RLIiwidGhlbiIsImRhdGEiLCJvcGVuaWQiLCJsb2dpblNlbGYiLCJuIiwiQllURURBTkNFX0dBTUUiLCJ3eCIsInJlcXVlc3QiLCJ1cmwiLCJtZXRob2QiLCJsb2dpbkNvZGUiLCJzdWNjZXNzIiwicHZ6IiwiVEFVdGlscyIsInVwbG9hZFJlZ2lzdGVyRGF0YSIsIm5hbWUiLCJ1VG9rZW4iLCJ0b2tlbiIsImdldE9ubGluZURhdGEiLCJmYWlsIiwicmVxIiwiZXJyTXNnIiwib2siLCJjaGVja1VwZGF0ZVBsYXllckluZm8iLCJ1cGRhdGVQbGF5ZXJJbmZvIiwiV0VDSEFUX0dBTUUiLCJpIiwiYyIsIkpTT04iLCJzdHJpbmdpZnkiLCJsdiIsIlBsYXllckRhdGEiLCJnZXRBY2hpZXZlUHJvZ3Jlc3MiLCJHYW1lQ29uZmlnIiwiTWlzc2lvblR5cGUiLCJpbmZvIiwicnNuIiwic2hvd1RvYXN0IiwidGl0bGUiLCJpY29uIiwiZHVyYXRpb24iLCJzZW5kQyIsInNldEF2YXRhciIsImF2YXRhclVybCIsInVwbG9hZFNjb3JlIiwic2V0VGltZW91dCIsInNjb3JlIiwiZXhJbmZvIiwiZXhJbmZvMiIsIm15UmFuayIsInJhbmsiLCJzZWN0b3IiLCJpc0NoZWF0IiwicmFua0xhc3RXZWVrIiwicmFua0xpc3QiLCJmcm9tSWR4IiwicmV0IiwidUluZm8iLCJtYWtlRnJpZW5kIiwiZ2V0RW50ZXJPcHRpb25zU3luYyIsInF1ZXJ5IiwiZnJvbXVpZCIsInVpZDIiLCJwYXJzZUludCIsInVwZGF0ZVBsYXll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SjtBQS9VRyxDQUFSOztBQWlWQSxJQUFJOUIsRUFBRSxDQUFDcUIsR0FBUCxFQUFZLENBQ1I7QUFDSCxDQUZELE1BRU87RUFDSHJCLEVBQUUsQ0FBQ3FCLEdBQUgsR0FBUyxFQUFUO0FBQ0g7O0FBQ0RyQixFQUFFLENBQUNxQixHQUFILENBQU91RCxLQUFQLEdBQWV0RixDQUFmO0FBQ0F1RixNQUFNLENBQUNDLE9BQVAsR0FBaUJ4RixDQUFqQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG8gPSBcImh0dHBzOi8veWl5b3V6YW4uY24veHNhcGkvcmFiYml0L1wiO1xudmFyIGEgPSB7XG4gICAgdWlkOiBudWxsLFxuICAgIGhlYWRlcjogbnVsbCxcbiAgICBhY2Nlc3M6IDAsXG4gICAgaXNHTTogITEsXG4gICAgbmVlZFNhdmVUb0Nsb3VkOiAwLFxuICAgIGJhc2VEYXRhOiBcInt9XCIsXG4gICAgbG9naW46IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5ERVNLVE9QX0JST1dTRVIgfHxcbiAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSA9PSBjYy5zeXMuV0lOMzIgfHxcbiAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSA9PSBjYy5zeXMuTU9CSUxFX0JST1dTRVJcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmFjY2VzcyA9IDEwMDtcbiAgICAgICAgICAgIHJldHVybiB2b2lkIGUoITApO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgZSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2coXCJwZXJwYXJlIHA4IGxvZ2luXCIpO1xuICAgICAgICBQOFNESy5sb2dpbigpLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhID0gZS5kYXRhLm9wZW5pZDtcbiAgICAgICAgICAgIHQubG9naW5TZWxmKGEsIG8pO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGxvZ2luU2VsZjogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgdmFyIGEgPSB0aGlzO1xuICAgICAgICB2YXIgbiA9IG8gKyAoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5CWVRFREFOQ0VfR0FNRSA/IFwidXNlci9ieXRlbG9naW4yXCIgOiBcIi91c2VyL3A4bG9naW5rcFwiKTtcbiAgICAgICAgd3gucmVxdWVzdCh7XG4gICAgICAgICAgICB1cmw6IG4sXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGxvZ2luQ29kZTogZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJsb2dpbiBzdWNjZXNzOlwiLCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEubmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNjLnB2ei5UQVV0aWxzLnVwbG9hZFJlZ2lzdGVyRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1aWQ6IGUuZGF0YS51aWRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGEudWlkID0gZS5kYXRhLnVpZDtcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5uYW1lID0gZS5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYS5uYW1lID0gXCLnjqnlrrZcIiArIGEudWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhLmFjY2VzcyA9IGUuZGF0YS5hY2Nlc3M7XG4gICAgICAgICAgICAgICAgYS5oZWFkZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHVpZDogZS5kYXRhLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgdVRva2VuOiBlLmRhdGEudG9rZW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGEuaXNHTSA9IGUuZGF0YS5hY2Nlc3M7XG4gICAgICAgICAgICAgICAgYS5nZXRPbmxpbmVEYXRhKHQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0KCExKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICByZXE6IGZ1bmN0aW9uIChlLCB0LCBhLCBuKSB7XG4gICAgICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICAgICAgdXJsOiBvICsgZSxcbiAgICAgICAgICAgIG1ldGhvZDogdCA/IFwiUE9TVFwiIDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcjogdGhpcy5oZWFkZXIsXG4gICAgICAgICAgICBkYXRhOiBhLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcSBzdWNjZXNzLCBkYXRhOlwiLCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgIG4oITAsIGUuZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcSBmYWlsLCBlcnJNc2c6XCIsIGUuZXJyTXNnKTtcbiAgICAgICAgICAgICAgICBuKCExKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRPbmxpbmVEYXRhOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICAgICAgdXJsOiBvICsgXCJnYW1lL2luZm9rcFwiLFxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgaGVhZGVyOiB0LmhlYWRlcixcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgaWYgKDEgPT0gby5kYXRhLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHQuYmFzZURhdGEgPSBvLmRhdGEuYmFzZURhdGE7XG4gICAgICAgICAgICAgICAgICAgIGUoITApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUoITEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW5mbyBlcnJNc2c6XCIsIHQuZXJyTXNnKTtcbiAgICAgICAgICAgICAgICBlKCExKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjaGVja1VwZGF0ZVBsYXllckluZm86IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHZhciBvID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMudWlkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBsYXllckluZm8oZSwgdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2luKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgby51cGRhdGVQbGF5ZXJJbmZvKGUsIHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHQoITEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB1cGRhdGVQbGF5ZXJJbmZvOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInVwZGF0ZVBsYXllckluZm9cIik7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICB2YXIgYSA9IDA7XG4gICAgICAgICAgICB2YXIgbiA9ICEwO1xuICAgICAgICAgICAgdmFyIGkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbiA9ICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKythID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdChuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGMgPSBKU09OLnN0cmluZ2lmeShlKTtcbiAgICAgICAgICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHVybDogbyArIFwiZ2FtZS9zZXRiYXNlaW5mb2twXCIsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHRoaXMuaGVhZGVyLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbHY6IGNjLnB2ei5QbGF5ZXJEYXRhLmdldEFjaGlldmVQcm9ncmVzcyhjYy5wdnouR2FtZUNvbmZpZy5NaXNzaW9uVHlwZVtcIuijheWkh+aAu+etiee6p25cIl0pLFxuICAgICAgICAgICAgICAgICAgICBpbmZvOiBjXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldGJhc2VpbmZvIHN1Y2Nlc3M6XCIsIGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGkoMSA9PSBlLmRhdGEub2spO1xuICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PSBlLmRhdGEub2sgJiYgXCJub3QgbG9naW5cIiA9PSBlLmRhdGEucnNuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIueZu+W9leW3suWkseaViFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZXRiYXNlaW5mbyBlcnJNc2c6XCIsIGUuZXJyTXNnKTtcbiAgICAgICAgICAgICAgICAgICAgaSghMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlbmRDKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0KCEwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0QXZhdGFyOiBmdW5jdGlvbiAoZSwgdCwgYSkge1xuICAgICAgICB3eC5yZXF1ZXN0KHtcbiAgICAgICAgICAgIHVybDogbyArIFwiZ2FtZS9hdXRoa3BcIixcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXI6IHRoaXMuaGVhZGVyLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG5hbWU6IGUsXG4gICAgICAgICAgICAgICAgYXZhdGFyVXJsOiB0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImF1dGhrcCBzdWNjZXNzOlwiLCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGEoMSA9PSBlLmRhdGEub2spO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhdXRoa3AgZmFpbDpcIiwgZS5lcnJNc2cpO1xuICAgICAgICAgICAgICAgIGEoITEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHVwbG9hZFNjb3JlOiBmdW5jdGlvbiAoZSwgdCwgYSwgbikge1xuICAgICAgICBpZiAoY2Muc3lzLnBsYXRmb3JtICE9IGNjLnN5cy5XRUNIQVRfR0FNRSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGUgc2NvcmU6XCIsIGUsIFwiLGV4SW5mbzpcIiwgdCwgXCIsZXhJbmZvMjpcIiwgYSk7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBuKCEwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICAgICAgdXJsOiBvICsgXCJnYW1lL3VwZGF0ZXNjb3Jla3BcIixcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXI6IHRoaXMuaGVhZGVyLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHNjb3JlOiBlLFxuICAgICAgICAgICAgICAgIGV4SW5mbzogdCxcbiAgICAgICAgICAgICAgICBleEluZm8yOiBhXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVwZGF0ZXNjb3Jla3Agc3VjY2VzczpcIiwgZS5kYXRhKTtcbiAgICAgICAgICAgICAgICBuKDEgPT0gZS5kYXRhLm9rKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXBkYXRlc2NvcmVrcCBmYWlsOlwiLCBlLmVyck1zZyk7XG4gICAgICAgICAgICAgICAgbighMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgbXlSYW5rOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5XRUNIQVRfR0FNRSkge1xuICAgICAgICAgICAgd3gucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdXJsOiBvICsgXCJnYW1lL215cmFua2twXCIsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcjogdGhpcy5oZWFkZXIsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJteXJhbmtrcCBzdWNjZXNzOlwiLCB0LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBlKDEgPT0gdC5kYXRhLm9rLCB0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJteXJhbmtrcCBmYWlsOlwiLCB0LmVyck1zZyk7XG4gICAgICAgICAgICAgICAgICAgIGUoITEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZSghMCwge1xuICAgICAgICAgICAgICAgICAgICBvazogMSxcbiAgICAgICAgICAgICAgICAgICAgcmFuazogMCxcbiAgICAgICAgICAgICAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdWlkOiA0MDMwMzg2NyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3RvcjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwibW9tb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyVXJsOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IDEzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhJbmZvOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDaGVhdDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmtMYXN0V2VlazogNFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmFua0xpc3Q6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICB3eC5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB1cmw6IG8gKyBcImdhbWUvcmFua2xpc3RrcFwiLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmhlYWRlcixcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGZyb21JZHg6IGVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmFua2xpc3RrcCBzdWNjZXNzOlwiLCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0KDEgPT0gZS5kYXRhLm9rLCBlLmRhdGEucmV0KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmFua2xpc3RrcCBmYWlsOlwiLCBlLmVyck1zZyk7XG4gICAgICAgICAgICAgICAgICAgIHQoITEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdCghMCwgW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5rOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdUluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aWQ6IDQwMDAwMDA2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3RvcjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIk5PTkFNRVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YXRhclVybDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZTogMTUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhJbmZvOiBcIjhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0NoZWF0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtYWtlRnJpZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICBpZiAod3guZ2V0RW50ZXJPcHRpb25zU3luYykge1xuICAgICAgICAgICAgICAgIHZhciBlID0gd3guZ2V0RW50ZXJPcHRpb25zU3luYygpO1xuICAgICAgICAgICAgICAgIGlmIChlLnF1ZXJ5ICYmIGUucXVlcnkuZnJvbXVpZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldHJlbGF0aW9ua3AgdG9cIiwgZS5xdWVyeS5mcm9tdWlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXEoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImdhbWUvc2V0cmVsYXRpb25rcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgITAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkMjogcGFyc2VJbnQoZS5xdWVyeS5mcm9tdWlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZXRyZWxhdGlvbmtwIHRvXCIsIGUucXVlcnkuZnJvbXVpZCwgdCwgbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJubyBxdWVyeSFcIiwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vIG9wdGlvbiBmdW5jXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJtYWtlIGZyaWVuZCByZWxhdGlvbi5cIik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZVBsYXllclN1YjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHQgPSBvICsgXCJnYW1lL3N1YnNjcmliZWtwXCI7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkJZVEVEQU5DRV9HQU1FKSB7XG4gICAgICAgICAgICB0dC5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB1cmw6IHQsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHRoaXMuaGVhZGVyLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZzogZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWJzY3JpYmUgc3VjY2VzczpcIiwgZS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3Vic2NyaWJlIGZhaWw6XCIsIGUuZXJyTXNnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICAgICAgd3gucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWJzY3JpYmUgc3VjY2VzczpcIiwgZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3Vic2NyaWJlIGZhaWw6XCIsIGUuZXJyTXNnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbmlmIChjYy5wdnopIHtcbiAgICAvL1xufSBlbHNlIHtcbiAgICBjYy5wdnogPSB7fTtcbn1cbmNjLnB2ei5jbG91ZCA9IGE7XG5tb2R1bGUuZXhwb3J0cyA9IGE7XG4iXX0=