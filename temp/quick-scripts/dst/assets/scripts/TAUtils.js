
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/TAUtils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '46e3buVsjdFBq0SaewWRolc', 'TAUtils');
// scripts/TAUtils.js

"use strict";

var o = 0;
var a = {
  init: function init() {},
  initShareConfig: function initShareConfig() {
    var e = this;

    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      wx.onShareAppMessage(function () {
        o = e.getShareIndex();
        return {
          title: cc.pvz.GameConfig.ShareTitileList[o],
          imageUrlId: cc.pvz.GameConfig.ShareIDList[o],
          imageUrl: cc.pvz.GameConfig.ShareUrlList[o],
          query: "fromuid=" + (cc.pvz.cloud.uid ? cc.pvz.cloud.uid : 0)
        };
      });
      wx.showShareMenu({
        withShareTicket: !0,
        menus: ["shareAppMessage", "shareTimeline"]
      });
    }
  },
  share: function share(e, t) {
    console.log("share", e);

    if (this.lastShareType != e) {
      this.shareIndex = 0;
      this.lastShareType = e;
    }

    o = this.getShareIndex();

    if (cc.sys.platform != cc.sys.WECHAT_GAME) {
      cc.popupManager.showToast("分享");
      return void t(!0);
    }

    var a = {
      title: cc.pvz.GameConfig.ShareTitileList[o],
      imageUrlId: cc.pvz.GameConfig.ShareIDList[o],
      imageUrl: cc.pvz.GameConfig.ShareUrlList[o],
      query: "fromuid=" + (cc.pvz.cloud.uid ? cc.pvz.cloud.uid : 0)
    };
    this.isFromShare = !0;
    this.shareCB = t;
    this.shareDate = Date.now();
    wx.shareAppMessage(a);
  },
  shareCurrent: function shareCurrent(e, t) {
    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      var o = {
        title: e,
        query: "fromuid=" + (cc.pvz.cloud.uid ? cc.pvz.cloud.uid : 0)
      };
      wx.shareAppMessage(o);
    } else {
      t(!0);
    }
  },
  getShareIndex: function getShareIndex() {
    return 0;
  },
  onWxShow: function onWxShow() {
    if (this.isFromShare && this.shareCB) {
      this.shareCB(!0);
      this.shareIndex++;
    }

    this.isFromShare = !1;
  },
  getGlobalConfig: function getGlobalConfig() {
    return cc.pvz.utils.sendMsg(cc.pvz.GameConst.SERVER_CONFIG_URL, null, "GET").then(function (e) {
      return Promise.resolve(e);
    })["catch"](function (e) {
      console.log("getGlobalConfig data error", e);
      return Promise.resolve({});
    });
  },
  getSwitch: function getSwitch(e) {
    if (!cc.gameGlobalConfig) {
      return !1;
    }

    var t;

    if (cc.gameGlobalConfig.buttonCfgList) {
      t = cc.gameGlobalConfig.buttonCfgList.find(function (t) {
        return t.button_name == e;
      });
    } else {
      t = null;
    }

    if (t) {
      return console.log("getSwitch", e, !!t.flag && 1 == t.flag), !!t.flag && 1 == t.flag;
    } else {
      return console.log("getSwitch using default", e, !1), !1;
    }
  },
  getSwitchAd: function getSwitchAd() {
    return !0;
  },
  initShareKey: function initShareKey() {},
  getTwtraceidSwitch: function getTwtraceidSwitch(e) {
    if (void 0 === e) {
      e = "yxbn";
    }

    return cc.sys.platform != cc.sys.WECHAT_GAME || (cc.Twtraceid = this.getTwtraceidFrom(wx.getLaunchOptionsSync()), cc.Twtraceid == e);
  },
  getThreshold: function getThreshold(e, t) {
    if (cc.gameGlobalConfig.valueCfgList) {
      var o = cc.gameGlobalConfig.valueCfgList.find(function (t) {
        return t.value_name == e;
      });

      if (o) {
        console.log("getThreshold", e, o.value_num);
        return o.value_num;
      }
    }

    console.log("getThreshold using default", e, t);
    return t;
  },
  getTwtraceidFrom: function getTwtraceidFrom(e) {
    if (Object.keys(e.query).length > 0) {
      for (var t in e.query) {
        if ("?twtraceid" == t) {
          return e.query[t];
        }

        if ("twtraceid" == t) {
          return e.query[t];
        }
      }
    }

    return "";
  },
  onCheckGameVersion: function onCheckGameVersion() {
    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      console.log("onCheckGameVersion");
      var e = wx.getUpdateManager();
      e.onCheckForUpdate(function (e) {
        console.log("请求完新版本信息的回调 : ", e.hasUpdate);
      });
      e.onUpdateReady(function () {
        wx.showModal({
          title: "更新提示",
          content: "新版本已准备就绪，请重启游戏！",
          confirmText: "重启游戏",
          showCancel: !1,
          success: function success(t) {
            if (t.confirm) {
              e.applyUpdate();
            }
          }
        });
      });
      e.onUpdateFailed(function () {});
    }
  },
  uploadRegisterData: function uploadRegisterData(e) {
    if (cc.sys.platform != cc.sys.DESKTOP_BROWSER && cc.sys.platform != cc.sys.WIN32 && cc.sys.platform != cc.sys.MOBILE_BROWSER) {
      console.log("准备上报注册信息");
      var t = {
        sid: "1",
        roleid: e.uid + "",
        rolename: "玩家" + e.uid,
        level: "1"
      };
      P8LogSDK.signLog(t).then(function (e) {
        console.log("已上报注册信息:", e);
      });
    }
  },
  uploadLoginData: function uploadLoginData(e) {
    if (cc.sys.platform != cc.sys.DESKTOP_BROWSER && cc.sys.platform != cc.sys.WIN32 && cc.sys.platform != cc.sys.MOBILE_BROWSER) {
      console.log("准备上报登录信息");
      var t = {
        sid: "1",
        roleid: e.uid + "",
        rolename: "NONAME" === e.name ? "玩家" + e.uid : e.name,
        level: e.level + "",
        vip: "1",
        oaid: ""
      };
      P8LogSDK.pushLoginData(t).then(function (e) {
        console.log("已上报登录信息:", e);
      });
    }
  },
  uploadLvUpData: function uploadLvUpData() {
    if (cc.sys.platform != cc.sys.DESKTOP_BROWSER && cc.sys.platform != cc.sys.WIN32 && cc.sys.platform != cc.sys.MOBILE_BROWSER) {
      console.log("准备上报升级信息");
      var e = {
        level: "" + cc.player.level,
        sid: "1",
        roleid: "" + cc.pvz.cloud.uid,
        rolename: "" + cc.pvz.cloud.name,
        vip: "1",
        oaid: ""
      };
      P8LogSDK.upGradeRecord(e).then(function (e) {
        console.log("已上报登录信息:", e);
      });
    }
  },
  trackP8AdClick: function trackP8AdClick(e) {
    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      var t = {
        sid: "1",
        uid: "" + cc.pvz.cloud.uid,
        roleid: "" + cc.pvz.cloud.uid,
        rolename: "玩家" + cc.pvz.cloud.uid,
        level: "" + cc.player.level,
        ad_slot: "" + cc.pvz.GameConfig.AdType[e],
        ad_unit_id: cc.pvz.GameConst.AD_UNITS_REWARD[0],
        type: "RewardedVideoAd",
        status: "0"
      };
      P8LogSDK.wxVideoLog(t).then(function (e) {
        console.log(e);
      });
    }
  },
  trackP8AdSucc: function trackP8AdSucc(e) {
    if (cc.sys.platform == cc.sys.WECHAT_GAME) {
      var t = {
        sid: "1",
        uid: "" + cc.pvz.cloud.uid,
        roleid: "" + cc.pvz.cloud.uid,
        rolename: "勇士" + cc.pvz.cloud.uid,
        level: "" + cc.player.level,
        ad_slot: "" + cc.pvz.GameConfig.AdType[e],
        ad_unit_id: cc.pvz.GameConst.AD_UNITS_REWARD[0],
        type: "RewardedVideoAd",
        status: "1"
      };
      P8LogSDK.wxVideoLog(t).then(function (e) {
        console.log(e);
      });
    }
  },
  track: function track() {},
  trackLogin: function trackLogin() {},
  trackLoading: function trackLoading(e, t) {
    if (void 0 === t) {
      t = 0;
    }
  },
  trackBackpack: function trackBackpack() {},
  trackLevel: function trackLevel() {},
  trackEndLevel: function trackEndLevel() {},
  trackAdUIShow: function trackAdUIShow() {},
  trackAdBtnClick: function trackAdBtnClick() {},
  trackAdClose: function trackAdClose() {},
  trackAdEnd: function trackAdEnd() {},
  trackSystemUI: function trackSystemUI() {}
};

if (cc.pvz) {//
} else {
  cc.pvz = {};
}

cc.pvz.TAUtils = a;
module.exports = a;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL1RBVXRpbHMuanMiXSwibmFtZXMiOlsibyIsImEiLCJpbml0IiwiaW5pdFNoYXJlQ29uZmlnIiwiZSIsImNjIiwic3lzIiwicGxhdGZvcm0iLCJXRUNIQVRfR0FNRSIsInd4Iiwib25TaGFyZUFwcE1lc3NhZ2UiLCJnZXRTaGFyZUluZGV4IiwidGl0bGUiLCJwdnoiLCJHYW1lQ29uZmlnIiwiU2hhcmVUaXRpbGVMaXN0IiwiaW1hZ2VVcmxJZCIsIlNoYXJlSURMaXN0IiwiaW1hZ2VVcmwiLCJTaGFyZVVybExpc3QiLCJxdWVyeSIsImNsb3VkIiwidWlkIiwic2hvd1NoYXJlTWVudSIsIndpdGhTaGFyZVRpY2tldCIsIm1lbnVzIiwic2hhcmUiLCJ0IiwiY29uc29sZSIsImxvZyIsImxhc3RTaGFyZVR5cGUiLCJzaGFyZUluZGV4IiwicG9wdXBNYW5hZ2VyIiwic2hvd1RvYXN0IiwiaXNGcm9tU2hhcmUiLCJzaGFyZUNCIiwic2hhcmVEYXRlIiwiRGF0ZSIsIm5vdyIsInNoYXJlQXBwTWVzc2FnZSIsInNoYXJlQ3VycmVudCIsIm9uV3hTaG93IiwiZ2V0R2xvYmFsQ29uZmlnIiwidXRpbHMiLCJzZW5kTXNnIiwiR2FtZUNvbnN0IiwiU0VSVkVSX0NPTkZJR19VUkwiLCJ0aGVuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRTd2l0Y2giLCJnYW1lR2xvYmFsQ29uZmlnIiwiYnV0dG9uQ2ZnTGlzdCIsImZpbmQiLCJidXR0b25fbmFtZSIsImZsYWciLCJnZXRTd2l0Y2hBZCIsImluaXRTaGFyZUtleSIsImdldFR3dHJhY2VpZFN3aXRjaCIsIlR3dHJhY2VpZCIsImdldFR3dHJhY2VpZEZyb20iLCJnZXRMYXVuY2hPcHRpb25zU3luYyIsImdldFRocmVzaG9sZCIsInZhbHVlQ2ZnTGlzdCIsInZhbHVlX25hbWUiLCJ2YWx1ZV9udW0iLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwib25DaGVja0dhbWVWZXJzaW9uIiwiZ2V0VXBkYXRlTWFuYWdlciIsIm9uQ2hlY2tGb3JVcGRhdGUiLCJoYXNVcGRhdGUiLCJvblVwZGF0ZVJlYWR5Iiwic2hvd01vZGFsIiwiY29udGVudCIsImNvbmZpcm1UZXh0Iiwic2hvd0NhbmNlbCIsInN1Y2Nlc3MiLCJjb25maXJtIiwiYXBwbHlVcGRhdGUiLCJvblVwZGF0ZUZhaWxlZCIsInVwbG9hZFJlZ2lzdGVyRGF0YSIsIkRFU0tUT1BfQlJPV1NFUiIsIldJTjMyIiwiTU9CSUxFX0JST1dTRVIiLCJzaWQiLCJyb2xlaWQiLCJyb2xlbmFtZSIsImxldmVsIiwiUDhMb2dTREsiLCJzaWduTG9nIiwidXBsb2FkTG9naW5EYXRhIiwibmFtZSIsInZpcCIsIm9haWQiLCJwdXNoTG9naW5EYXRhIiwidXBsb2FkTHZVcERhdGEiLCJwbGF5ZXIiLCJ1cEdyYWRlUmVjb3JkIiwidHJhY2tQOEFkQ2xpY2siLCJhZF9zbG90IiwiQWRUeXBlIiwiYWRfdW5pdF9pZCIsIkFEX1VOSVRTX1JFV0FSRCIsInR5cGUiLCJzdGF0dXMiLCJ3eFZpZGVvTG9nIiwidHJhY2tQOEFkU3VjYyIsInRyYWNrIiwidHJhY2tMb2dpbiIsInRyYWNrTG9hZGluZyIsInRyYWNrQmFja3BhY2siLCJ0cmFja0xldmVsIiwidHJhY2tFbmRMZXZlbCIsInRyYWNrQWRVSVNob3ciLCJ0cmFja0FkQnRuQ2xpY2siLCJ0cmFja0FkQ2xvc2UiLCJ0cmFja0FkRW5kIiwidHJhY2tTeXN0ZW1VSSIsIlRBVXRpbHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBRyxDQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHO0VBQ0pDLElBQUksRUFBRSxnQkFBWSxDQUFFLENBRGhCO0VBRUpDLGVBQWUsRUFBRSwyQkFBWTtJQUN6QixJQUFJQyxDQUFDLEdBQUcsSUFBUjs7SUFDQSxJQUFJQyxFQUFFLENBQUNDLEdBQUgsQ0FBT0MsUUFBUCxJQUFtQkYsRUFBRSxDQUFDQyxHQUFILENBQU9FLFdB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Q0FwUXhCO0VBcVFKQyxVQUFVLEVBQUUsc0JBQVksQ0FBRSxDQXJRdEI7RUFzUUpDLGFBQWEsRUFBRSx5QkFBWSxDQUFFO0FBdFF6QixDQUFSOztBQXdRQSxJQUFJbEgsRUFBRSxDQUFDUSxHQUFQLEVBQVksQ0FDUjtBQUNILENBRkQsTUFFTztFQUNIUixFQUFFLENBQUNRLEdBQUgsR0FBUyxFQUFUO0FBQ0g7O0FBQ0RSLEVBQUUsQ0FBQ1EsR0FBSCxDQUFPMkcsT0FBUCxHQUFpQnZILENBQWpCO0FBQ0F3SCxNQUFNLENBQUNDLE9BQVAsR0FBaUJ6SCxDQUFqQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG8gPSAwO1xudmFyIGEgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge30sXG4gICAgaW5pdFNoYXJlQ29uZmlnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgaWYgKGNjLnN5cy5wbGF0Zm9ybSA9PSBjYy5zeXMuV0VDSEFUX0dBTUUpIHtcbiAgICAgICAgICAgIHd4Lm9uU2hhcmVBcHBNZXNzYWdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvID0gZS5nZXRTaGFyZUluZGV4KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGNjLnB2ei5HYW1lQ29uZmlnLlNoYXJlVGl0aWxlTGlzdFtvXSxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmxJZDogY2MucHZ6LkdhbWVDb25maWcuU2hhcmVJRExpc3Rbb10sXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsOiBjYy5wdnouR2FtZUNvbmZpZy5TaGFyZVVybExpc3Rbb10sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBcImZyb211aWQ9XCIgKyAoY2MucHZ6LmNsb3VkLnVpZCA/IGNjLnB2ei5jbG91ZC51aWQgOiAwKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHd4LnNob3dTaGFyZU1lbnUoe1xuICAgICAgICAgICAgICAgIHdpdGhTaGFyZVRpY2tldDogITAsXG4gICAgICAgICAgICAgICAgbWVudXM6IFtcInNoYXJlQXBwTWVzc2FnZVwiLCBcInNoYXJlVGltZWxpbmVcIl1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzaGFyZTogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJzaGFyZVwiLCBlKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdFNoYXJlVHlwZSAhPSBlKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXJlSW5kZXggPSAwO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2hhcmVUeXBlID0gZTtcbiAgICAgICAgfVxuICAgICAgICBvID0gdGhpcy5nZXRTaGFyZUluZGV4KCk7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gIT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICBjYy5wb3B1cE1hbmFnZXIuc2hvd1RvYXN0KFwi5YiG5LqrXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgdCghMCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogY2MucHZ6LkdhbWVDb25maWcuU2hhcmVUaXRpbGVMaXN0W29dLFxuICAgICAgICAgICAgaW1hZ2VVcmxJZDogY2MucHZ6LkdhbWVDb25maWcuU2hhcmVJRExpc3Rbb10sXG4gICAgICAgICAgICBpbWFnZVVybDogY2MucHZ6LkdhbWVDb25maWcuU2hhcmVVcmxMaXN0W29dLFxuICAgICAgICAgICAgcXVlcnk6IFwiZnJvbXVpZD1cIiArIChjYy5wdnouY2xvdWQudWlkID8gY2MucHZ6LmNsb3VkLnVpZCA6IDApXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNGcm9tU2hhcmUgPSAhMDtcbiAgICAgICAgdGhpcy5zaGFyZUNCID0gdDtcbiAgICAgICAgdGhpcy5zaGFyZURhdGUgPSBEYXRlLm5vdygpO1xuICAgICAgICB3eC5zaGFyZUFwcE1lc3NhZ2UoYSk7XG4gICAgfSxcbiAgICBzaGFyZUN1cnJlbnQ6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZSxcbiAgICAgICAgICAgICAgICBxdWVyeTogXCJmcm9tdWlkPVwiICsgKGNjLnB2ei5jbG91ZC51aWQgPyBjYy5wdnouY2xvdWQudWlkIDogMClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3eC5zaGFyZUFwcE1lc3NhZ2Uobyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0KCEwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0U2hhcmVJbmRleDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9LFxuICAgIG9uV3hTaG93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRnJvbVNoYXJlICYmIHRoaXMuc2hhcmVDQikge1xuICAgICAgICAgICAgdGhpcy5zaGFyZUNCKCEwKTtcbiAgICAgICAgICAgIHRoaXMuc2hhcmVJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNGcm9tU2hhcmUgPSAhMTtcbiAgICB9LFxuICAgIGdldEdsb2JhbENvbmZpZzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2MucHZ6LnV0aWxzXG4gICAgICAgICAgICAuc2VuZE1zZyhjYy5wdnouR2FtZUNvbnN0LlNFUlZFUl9DT05GSUdfVVJMLCBudWxsLCBcIkdFVFwiKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0R2xvYmFsQ29uZmlnIGRhdGEgZXJyb3JcIiwgZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9LFxuICAgIGdldFN3aXRjaDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCFjYy5nYW1lR2xvYmFsQ29uZmlnKSB7XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGlmIChjYy5nYW1lR2xvYmFsQ29uZmlnLmJ1dHRvbkNmZ0xpc3QpIHtcbiAgICAgICAgICAgIHQgPSBjYy5nYW1lR2xvYmFsQ29uZmlnLmJ1dHRvbkNmZ0xpc3QuZmluZChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0LmJ1dHRvbl9uYW1lID09IGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coXCJnZXRTd2l0Y2hcIiwgZSwgISF0LmZsYWcgJiYgMSA9PSB0LmZsYWcpLCAhIXQuZmxhZyAmJiAxID09IHQuZmxhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhcImdldFN3aXRjaCB1c2luZyBkZWZhdWx0XCIsIGUsICExKSwgITE7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldFN3aXRjaEFkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9LFxuICAgIGluaXRTaGFyZUtleTogZnVuY3Rpb24gKCkge30sXG4gICAgZ2V0VHd0cmFjZWlkU3dpdGNoOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBlID0gXCJ5eGJuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSAhPSBjYy5zeXMuV0VDSEFUX0dBTUUgfHxcbiAgICAgICAgICAgICgoY2MuVHd0cmFjZWlkID0gdGhpcy5nZXRUd3RyYWNlaWRGcm9tKHd4LmdldExhdW5jaE9wdGlvbnNTeW5jKCkpKSwgY2MuVHd0cmFjZWlkID09IGUpXG4gICAgICAgICk7XG4gICAgfSxcbiAgICBnZXRUaHJlc2hvbGQ6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGlmIChjYy5nYW1lR2xvYmFsQ29uZmlnLnZhbHVlQ2ZnTGlzdCkge1xuICAgICAgICAgICAgdmFyIG8gPSBjYy5nYW1lR2xvYmFsQ29uZmlnLnZhbHVlQ2ZnTGlzdC5maW5kKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQudmFsdWVfbmFtZSA9PSBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0VGhyZXNob2xkXCIsIGUsIG8udmFsdWVfbnVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gby52YWx1ZV9udW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJnZXRUaHJlc2hvbGQgdXNpbmcgZGVmYXVsdFwiLCBlLCB0KTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSxcbiAgICBnZXRUd3RyYWNlaWRGcm9tOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZS5xdWVyeSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgdCBpbiBlLnF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiP3R3dHJhY2VpZFwiID09IHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucXVlcnlbdF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcInR3dHJhY2VpZFwiID09IHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucXVlcnlbdF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH0sXG4gICAgb25DaGVja0dhbWVWZXJzaW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9uQ2hlY2tHYW1lVmVyc2lvblwiKTtcbiAgICAgICAgICAgIHZhciBlID0gd3guZ2V0VXBkYXRlTWFuYWdlcigpO1xuICAgICAgICAgICAgZS5vbkNoZWNrRm9yVXBkYXRlKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLor7fmsYLlrozmlrDniYjmnKzkv6Hmga/nmoTlm57osIMgOiBcIiwgZS5oYXNVcGRhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLm9uVXBkYXRlUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuabtOaWsOaPkOekulwiLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBcIuaWsOeJiOacrOW3suWHhuWkh+Wwsee7qu+8jOivt+mHjeWQr+a4uOaIj++8gVwiLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtVGV4dDogXCLph43lkK/muLjmiI9cIixcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbDogITEsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5jb25maXJtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hcHBseVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUub25VcGRhdGVGYWlsZWQoZnVuY3Rpb24gKCkge30pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB1cGxvYWRSZWdpc3RlckRhdGE6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSAhPSBjYy5zeXMuREVTS1RPUF9CUk9XU0VSICYmXG4gICAgICAgICAgICBjYy5zeXMucGxhdGZvcm0gIT0gY2Muc3lzLldJTjMyICYmXG4gICAgICAgICAgICBjYy5zeXMucGxhdGZvcm0gIT0gY2Muc3lzLk1PQklMRV9CUk9XU0VSXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLlh4blpIfkuIrmiqXms6jlhozkv6Hmga9cIik7XG4gICAgICAgICAgICB2YXIgdCA9IHtcbiAgICAgICAgICAgICAgICBzaWQ6IFwiMVwiLFxuICAgICAgICAgICAgICAgIHJvbGVpZDogZS51aWQgKyBcIlwiLFxuICAgICAgICAgICAgICAgIHJvbGVuYW1lOiBcIueOqeWutlwiICsgZS51aWQsXG4gICAgICAgICAgICAgICAgbGV2ZWw6IFwiMVwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgUDhMb2dTREsuc2lnbkxvZyh0KS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlt7LkuIrmiqXms6jlhozkv6Hmga86XCIsIGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVwbG9hZExvZ2luRGF0YTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2Muc3lzLnBsYXRmb3JtICE9IGNjLnN5cy5ERVNLVE9QX0JST1dTRVIgJiZcbiAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSAhPSBjYy5zeXMuV0lOMzIgJiZcbiAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSAhPSBjYy5zeXMuTU9CSUxFX0JST1dTRVJcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWHhuWkh+S4iuaKpeeZu+W9leS/oeaBr1wiKTtcbiAgICAgICAgICAgIHZhciB0ID0ge1xuICAgICAgICAgICAgICAgIHNpZDogXCIxXCIsXG4gICAgICAgICAgICAgICAgcm9sZWlkOiBlLnVpZCArIFwiXCIsXG4gICAgICAgICAgICAgICAgcm9sZW5hbWU6IFwiTk9OQU1FXCIgPT09IGUubmFtZSA/IFwi546p5a62XCIgKyBlLnVpZCA6IGUubmFtZSxcbiAgICAgICAgICAgICAgICBsZXZlbDogZS5sZXZlbCArIFwiXCIsXG4gICAgICAgICAgICAgICAgdmlwOiBcIjFcIixcbiAgICAgICAgICAgICAgICBvYWlkOiBcIlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgUDhMb2dTREsucHVzaExvZ2luRGF0YSh0KS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlt7LkuIrmiqXnmbvlvZXkv6Hmga86XCIsIGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVwbG9hZEx2VXBEYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSAhPSBjYy5zeXMuREVTS1RPUF9CUk9XU0VSICYmXG4gICAgICAgICAgICBjYy5zeXMucGxhdGZvcm0gIT0gY2Muc3lzLldJTjMyICYmXG4gICAgICAgICAgICBjYy5zeXMucGxhdGZvcm0gIT0gY2Muc3lzLk1PQklMRV9CUk9XU0VSXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLlh4blpIfkuIrmiqXljYfnuqfkv6Hmga9cIik7XG4gICAgICAgICAgICB2YXIgZSA9IHtcbiAgICAgICAgICAgICAgICBsZXZlbDogXCJcIiArIGNjLnBsYXllci5sZXZlbCxcbiAgICAgICAgICAgICAgICBzaWQ6IFwiMVwiLFxuICAgICAgICAgICAgICAgIHJvbGVpZDogXCJcIiArIGNjLnB2ei5jbG91ZC51aWQsXG4gICAgICAgICAgICAgICAgcm9sZW5hbWU6IFwiXCIgKyBjYy5wdnouY2xvdWQubmFtZSxcbiAgICAgICAgICAgICAgICB2aXA6IFwiMVwiLFxuICAgICAgICAgICAgICAgIG9haWQ6IFwiXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBQOExvZ1NESy51cEdyYWRlUmVjb3JkKGUpLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuW3suS4iuaKpeeZu+W9leS/oeaBrzpcIiwgZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdHJhY2tQOEFkQ2xpY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLldFQ0hBVF9HQU1FKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHtcbiAgICAgICAgICAgICAgICBzaWQ6IFwiMVwiLFxuICAgICAgICAgICAgICAgIHVpZDogXCJcIiArIGNjLnB2ei5jbG91ZC51aWQsXG4gICAgICAgICAgICAgICAgcm9sZWlkOiBcIlwiICsgY2MucHZ6LmNsb3VkLnVpZCxcbiAgICAgICAgICAgICAgICByb2xlbmFtZTogXCLnjqnlrrZcIiArIGNjLnB2ei5jbG91ZC51aWQsXG4gICAgICAgICAgICAgICAgbGV2ZWw6IFwiXCIgKyBjYy5wbGF5ZXIubGV2ZWwsXG4gICAgICAgICAgICAgICAgYWRfc2xvdDogXCJcIiArIGNjLnB2ei5HYW1lQ29uZmlnLkFkVHlwZVtlXSxcbiAgICAgICAgICAgICAgICBhZF91bml0X2lkOiBjYy5wdnouR2FtZUNvbnN0LkFEX1VOSVRTX1JFV0FSRFswXSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlJld2FyZGVkVmlkZW9BZFwiLFxuICAgICAgICAgICAgICAgIHN0YXR1czogXCIwXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBQOExvZ1NESy53eFZpZGVvTG9nKHQpLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB0cmFja1A4QWRTdWNjOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5XRUNIQVRfR0FNRSkge1xuICAgICAgICAgICAgdmFyIHQgPSB7XG4gICAgICAgICAgICAgICAgc2lkOiBcIjFcIixcbiAgICAgICAgICAgICAgICB1aWQ6IFwiXCIgKyBjYy5wdnouY2xvdWQudWlkLFxuICAgICAgICAgICAgICAgIHJvbGVpZDogXCJcIiArIGNjLnB2ei5jbG91ZC51aWQsXG4gICAgICAgICAgICAgICAgcm9sZW5hbWU6IFwi5YuH5aOrXCIgKyBjYy5wdnouY2xvdWQudWlkLFxuICAgICAgICAgICAgICAgIGxldmVsOiBcIlwiICsgY2MucGxheWVyLmxldmVsLFxuICAgICAgICAgICAgICAgIGFkX3Nsb3Q6IFwiXCIgKyBjYy5wdnouR2FtZUNvbmZpZy5BZFR5cGVbZV0sXG4gICAgICAgICAgICAgICAgYWRfdW5pdF9pZDogY2MucHZ6LkdhbWVDb25zdC5BRF9VTklUU19SRVdBUkRbMF0sXG4gICAgICAgICAgICAgICAgdHlwZTogXCJSZXdhcmRlZFZpZGVvQWRcIixcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiMVwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgUDhMb2dTREsud3hWaWRlb0xvZyh0KS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdHJhY2s6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHRyYWNrTG9naW46IGZ1bmN0aW9uICgpIHt9LFxuICAgIHRyYWNrTG9hZGluZzogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkge1xuICAgICAgICAgICAgdCA9IDA7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHRyYWNrQmFja3BhY2s6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHRyYWNrTGV2ZWw6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHRyYWNrRW5kTGV2ZWw6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHRyYWNrQWRVSVNob3c6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHRyYWNrQWRCdG5DbGljazogZnVuY3Rpb24gKCkge30sXG4gICAgdHJhY2tBZENsb3NlOiBmdW5jdGlvbiAoKSB7fSxcbiAgICB0cmFja0FkRW5kOiBmdW5jdGlvbiAoKSB7fSxcbiAgICB0cmFja1N5c3RlbVVJOiBmdW5jdGlvbiAoKSB7fVxufTtcbmlmIChjYy5wdnopIHtcbiAgICAvL1xufSBlbHNlIHtcbiAgICBjYy5wdnogPSB7fTtcbn1cbmNjLnB2ei5UQVV0aWxzID0gYTtcbm1vZHVsZS5leHBvcnRzID0gYTtcbiJdfQ==