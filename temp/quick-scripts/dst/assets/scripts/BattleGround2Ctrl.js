
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/BattleGround2Ctrl.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '3bce079b2xL47cGTCCdMl1d', 'BattleGround2Ctrl');
// scripts/BattleGround2Ctrl.js

"use strict";

var $soundManager = require("./SoundManager");

var $tool = require("./Tool");

var $pool = require("./Pool");

var $bullet2 = require("./Bullet2");

var $dieEff2 = require("./DieEff2");

var $gate2 = require("./Gate2");

var $num2 = require("./Num2");

var $role2 = require("./Role2");

var p = cc._decorator;
var d = p.ccclass;
var h = p.property;

var f = function (e) {
  function t() {
    var t = null !== e && e.apply(this, arguments) || this;
    t.jsonAssets = [];
    t.pools = [];
    t.startNode = null;
    t.endNode = null;
    t.hpProgBar = null;
    t.hitAni = null;
    t.atkStr = null;
    t.WIDTH = 600;
    t.state = 10;
    t.baseLineY = -500;
    t.endLineY = -500;
    t.player = null;
    t.winTCount = -99999999;
    t.hp = [3, 3];
    t.waveEnemyHandles = [[], [], [], [], [], []];
    t.bulletHandles = [];
    return t;
  }

  var o;

  __extends(t, e);

  o = t;

  t.prototype.start = function () {
    var e = ["ConfigBattle"];

    var t = function t(_t) {
      o.JSONManager[e[_t]] = {};

      n.jsonAssets[_t].json.map(function (a) {
        o.JSONManager[e[_t]][a.id] = a;
      });
    };

    var n = this;

    for (var i = 0; i < this.jsonAssets.length; i++) {
      t(i);
    }

    this.baseLineY = this.startNode.y;
    this.endLineY = this.endNode.y;
    this.state = 10;
    this.createNewPlayer();
    setTimeout(function () {
      $soundManager["default"].playBgm(0);
    }, 1e3);
    cc.director.getCollisionManager().enabled = !0;
  };

  t.prototype.createNewPlayer = function () {
    var e = this.pools[4].getComponent($pool["default"]).getNewPoolItem();
    this.player = e;
    e.setPosition(new cc.Vec2(360, this.baseLineY));
    e.getComponent($role2["default"]).init({
      team: 0,
      rId: 1,
      par: this
    });
  };

  t.prototype.createNewEnemy = function (e, t, o) {
    if (void 0 === o) {
      o = {};
    }

    var a = this.pools[0].getComponent($pool["default"]).getNewPoolItem();
    a.setPosition(new cc.Vec2(e, t));
    a.getComponent($role2["default"]).init({
      team: 1,
      rId: o.rId,
      config: o.config,
      par: this
    });
    return a;
  };

  t.prototype.createNewBullet = function (e, t, o) {
    var a = this.pools[2].getComponent($pool["default"]).getNewPoolItem();
    o.par = this;
    a.getComponent($bullet2["default"]).init(e, t, o);
  };

  t.prototype.createNewHpNum = function (e) {
    var t = this.pools[1].getComponent($pool["default"]).getNewPoolItem();
    t.getComponent($num2["default"]).initAsHp(e);
    return t;
  };

  t.prototype.createNewHitNum = function () {};

  t.prototype.createNewDieEff = function (e) {
    var t = this.pools[5].getComponent($pool["default"]).getNewPoolItem();
    t.setPosition(e.position);
    t.getComponent($dieEff2["default"]).init();
  };

  t.prototype.createNewGate = function (e) {
    if (void 0 === e) {
      e = {};
    }

    var t = this.pools[3].getComponent($pool["default"]).getNewPoolItem();
    t.y = 800;
    var o = [];

    for (var a = 1; a <= 5; a++) {
      if (0 !== e["door" + a]) {
        o.push(a);
      }
    }

    var c = $tool["default"].randomFromArr2(o, 2);
    $tool["default"].shuffle(c);
    var s = [[c[0], e["door" + c[0]]], [c[1], e["door" + c[1]]]];
    t.getComponent($gate2["default"]).init({
      par: this,
      gateInfo: s
    });
  };

  t.prototype.beHit = function () {
    this.hitAni.play();
    this.hp[0]--;
    this.hpProgBar.progress = this.hp[0] / this.hp[1];

    if (this.hp[0] <= 0) {
      console.log("game over.");
      cc.popupManager.popup("game2", "win", "UIGame2End", {
        ad: !1,
        scale: !0
      }, !1);
      this.state = 0;
    }
  };

  t.prototype.refreshAtk = function () {
    this.atkStr.string = "" + this.player.getComponent($role2["default"]).bulletConfig.dmg;
  };

  t.prototype.showPauseMenu = function () {
    this.state = 0;
    cc.popupManager.popup("game2", "set", "UIGame2Set", {
      scale: !1
    }, this);
  };

  t.prototype.hidePauseMenu = function () {
    this.state = 10;
  };

  t.prototype.update = function (e) {
    if (10 === this.state && this.winTCount > 0) {
      this.winTCount -= e;

      if (this.winTCount <= 0) {
        cc.popupManager.popup("game2", "win", "UIGame2End", {
          ad: !1,
          scale: !0
        }, !0);
      }
    }
  };

  t.JSONManager = {
    ConfigBattle: {}
  };

  __decorate([h(cc.JsonAsset)], t.prototype, "jsonAssets", void 0);

  __decorate([h(cc.Node)], t.prototype, "pools", void 0);

  __decorate([h(cc.Node)], t.prototype, "startNode", void 0);

  __decorate([h(cc.Node)], t.prototype, "endNode", void 0);

  __decorate([h(cc.ProgressBar)], t.prototype, "hpProgBar", void 0);

  __decorate([h(cc.Animation)], t.prototype, "hitAni", void 0);

  __decorate([h(cc.Label)], t.prototype, "atkStr", void 0);

  return o = __decorate([d], t);
}(cc.Component);

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL0JhdHRsZUdyb3VuZDJDdHJsLmpzIl0sIm5hbWVzIjpbIiRzb3VuZE1hbmFnZXIiLCJyZXF1aXJlIiwiJHRvb2wiLCIkcG9vbCIsIiRidWxsZXQyIiwiJGRpZUVmZjIiLCIkZ2F0ZTIiLCIkbnVtMiIsIiRyb2xlMiIsInAiLCJjYyIsIl9kZWNvcmF0b3IiLCJkIiwiY2NjbGFzcyIsImgiLCJwcm9wZXJ0eSIsImYiLCJlIiwidCIsImFwcGx5IiwiYXJndW1lbnRzIiwianNvbkFzc2V0cyIsInBvb2xzIiwic3RhcnROb2RlIiwiZW5kTm9kZSIsImhwUHJvZ0JhciIsImhpdEFuaSIsImF0a1N0ciIsIldJRFRIIiwic3RhdGUiLCJiYXNlTGluZVkiLCJlbmRMaW5lWSIsInBsYXllciIsIndpblRDb3VudCIsImhwIiwid2F2ZUVuZW15SGFuZGxlcyIsImJ1bGxldEhhbmRsZXMiLCJvIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwic3RhcnQiLCJKU09OTWFuYWdlciIsIm4iLCJqc29uIiwibWFwIiwiYSIsImlkIiwiaSIsImxlbmd0aCIsInkiLCJjcmVhdGVOZXdQbGF5ZXIiLCJzZXRUaW1lb3V0IiwicGxheUJnbSIsImRpcmVjdG9yIiwiZ2V0Q29sbGlzaW9uTWFuYWdlciIsImVuYWJsZWQiLCJnZXRDb21wb25lbnQiLCJnZXROZXdQb29sSXRlbSIsInNldFBvc2l0aW9uIiwiVmVjMiIsImluaXQiLCJ0ZWFtIiwicklkIiwicGFyIiwiY3JlYXRlTmV3RW5lbXkiLCJjb25maWciLCJjcmVhdGVOZXdCdWxsZXQiLCJjcmVhdGVOZXdIcE51bSIsImluaXRBc0hwIiwiY3JlYXRlTmV3SGl0TnVtIiwiY3JlYXRlTmV3RGllRWZmIiwicG9zaXRpb24iLCJjcmVhdGVOZXdHYXRlIiwicHVzaCIsImMiLCJyYW5kb21Gcm9tQXJyMiIsInNodWZmbGUiLCJzIiwiZ2F0ZUluZm8iLCJiZUhpdCIsInBsYXkiLCJwcm9ncmVzcyIsImNvbnNvbGUiLCJsb2ciLCJwb3B1cE1hbmFnZXIiLCJwb3B1cCIsImFkIiwic2NhbGUiLCJyZWZyZXNoQXRrIiwic3RyaW5nIiwiYnVsbGV0Q29uZmlnIiwiZG1nIiwic2hvd1BhdXNlTWVudSIsImhpZGVQYXVzZU1lbnUiLCJ1cGRhdGUiLCJDb25maWdCYXR0bGUiLCJfX2RlY29yYXRlIiwiSnNvbkFzc2V0IiwiTm9kZSIsIlByb2dyZXNzQmFyIiwiQW5pbWF0aW9uIiwiTGFiZWwiLCJDb21wb25lbnQiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLGFBQWEsR0FBR0MsT0FBTyxDQUFDLGdCQUFELENBQTNCOztBQUNBLElBQUlDLEtBQUssR0FBR0QsT0FBTyxDQUFDLFFBQUQsQ0FBbkI7O0FBQ0EsSUFBSUUsS0FBSyxHQUFHRixPQUFPLENBQUMsUUFBRCxDQUFuQjs7QUFDQSxJQUFJRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyxXQUFELENBQXRCOztBQUNBLElBQUlJLFFBQVEsR0FBR0osT0FBTyxDQUFDLFdBQUQsQ0FBdEI7O0FBQ0EsSUFBSUssTUFBTSxHQUFHTCxPQUFPLENBQUMsU0FBRCxDQUFwQjs7QUFDQSxJQUFJTSxLQUFLLEdBQUdOLE9BQU8sQ0FBQyxRQUFELENBQW5COztBQUNBLElBQUlPLE1BQU0sR0FBR1AsT0FBTyxDQUFDLFNBQUQsQ0FBcEI7O0FBQ0EsSUFBSVEsQ0FBQyxHQUFHQyxFQUFFLENBQUNDLFVBQVg7QUFDQSxJQUFJQyxDQUFDLEdBQUdILENBQUMsQ0FBQ0ksT0FBVjtBQUNBLElBQUlDLENBQUMsR0FBR0wsQ0FBQyxDQUFDTSxRQUFWOztBQUNBLElBQUlDLENBQUMsR0FBSSxVQUFVQyxDQUFWLEVBQWE7RUFDbEIsU0FBU0MsQ0FBVCxHQUFhO0lBQ1QsSUFBSUEsQ0FBQyxHQUFJLFNBQVNELENBQVQsSUFBY0EsQ0FBQyxDQUFDRSxLQUFGLENBQVEsSUFBUixFQUFjQyxTQUFkLENBQWYsSUFBNEMsSUFBcEQ7SUFDQUYsQ0FBQyxDQUFDRyxVQUFGLEdB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QyxDQUFDcUIsU0FBdEIsRUFBaUMsUUFBakMsRUFBMkMsS0FBSyxDQUFoRCxDQUFWOztFQUNBeUQsVUFBVSxDQUFDLENBQUNsRixDQUFDLENBQUNKLEVBQUUsQ0FBQzJGLEtBQUosQ0FBRixDQUFELEVBQWdCbkYsQ0FBQyxDQUFDcUIsU0FBbEIsRUFBNkIsUUFBN0IsRUFBdUMsS0FBSyxDQUE1QyxDQUFWOztFQUNBLE9BQVFGLENBQUMsR0FBRzJELFVBQVUsQ0FBQyxDQUFDcEYsQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBdEI7QUFDSCxDQTdLTyxDQTZLTFIsRUFBRSxDQUFDNEYsU0E3S0UsQ0FBUjs7QUE4S0FDLE9BQU8sV0FBUCxHQUFrQnZGLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgJHNvdW5kTWFuYWdlciA9IHJlcXVpcmUoXCIuL1NvdW5kTWFuYWdlclwiKTtcbnZhciAkdG9vbCA9IHJlcXVpcmUoXCIuL1Rvb2xcIik7XG52YXIgJHBvb2wgPSByZXF1aXJlKFwiLi9Qb29sXCIpO1xudmFyICRidWxsZXQyID0gcmVxdWlyZShcIi4vQnVsbGV0MlwiKTtcbnZhciAkZGllRWZmMiA9IHJlcXVpcmUoXCIuL0RpZUVmZjJcIik7XG52YXIgJGdhdGUyID0gcmVxdWlyZShcIi4vR2F0ZTJcIik7XG52YXIgJG51bTIgPSByZXF1aXJlKFwiLi9OdW0yXCIpO1xudmFyICRyb2xlMiA9IHJlcXVpcmUoXCIuL1JvbGUyXCIpO1xudmFyIHAgPSBjYy5fZGVjb3JhdG9yO1xudmFyIGQgPSBwLmNjY2xhc3M7XG52YXIgaCA9IHAucHJvcGVydHk7XG52YXIgZiA9IChmdW5jdGlvbiAoZSkge1xuICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgIHZhciB0ID0gKG51bGwgIT09IGUgJiYgZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xuICAgICAgICB0Lmpzb25Bc3NldHMgPSBbXTtcbiAgICAgICAgdC5wb29scyA9IFtdO1xuICAgICAgICB0LnN0YXJ0Tm9kZSA9IG51bGw7XG4gICAgICAgIHQuZW5kTm9kZSA9IG51bGw7XG4gICAgICAgIHQuaHBQcm9nQmFyID0gbnVsbDtcbiAgICAgICAgdC5oaXRBbmkgPSBudWxsO1xuICAgICAgICB0LmF0a1N0ciA9IG51bGw7XG4gICAgICAgIHQuV0lEVEggPSA2MDA7XG4gICAgICAgIHQuc3RhdGUgPSAxMDtcbiAgICAgICAgdC5iYXNlTGluZVkgPSAtNTAwO1xuICAgICAgICB0LmVuZExpbmVZID0gLTUwMDtcbiAgICAgICAgdC5wbGF5ZXIgPSBudWxsO1xuICAgICAgICB0LndpblRDb3VudCA9IC05OTk5OTk5OTtcbiAgICAgICAgdC5ocCA9IFszLCAzXTtcbiAgICAgICAgdC53YXZlRW5lbXlIYW5kbGVzID0gW1tdLCBbXSwgW10sIFtdLCBbXSwgW11dO1xuICAgICAgICB0LmJ1bGxldEhhbmRsZXMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHZhciBvO1xuICAgIF9fZXh0ZW5kcyh0LCBlKTtcbiAgICBvID0gdDtcbiAgICB0LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSBbXCJDb25maWdCYXR0bGVcIl07XG4gICAgICAgIHZhciB0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIG8uSlNPTk1hbmFnZXJbZVt0XV0gPSB7fTtcbiAgICAgICAgICAgIG4uanNvbkFzc2V0c1t0XS5qc29uLm1hcChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIG8uSlNPTk1hbmFnZXJbZVt0XV1bYS5pZF0gPSBhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBuID0gdGhpcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmpzb25Bc3NldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNlTGluZVkgPSB0aGlzLnN0YXJ0Tm9kZS55O1xuICAgICAgICB0aGlzLmVuZExpbmVZID0gdGhpcy5lbmROb2RlLnk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxMDtcbiAgICAgICAgdGhpcy5jcmVhdGVOZXdQbGF5ZXIoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc291bmRNYW5hZ2VyLmRlZmF1bHQucGxheUJnbSgwKTtcbiAgICAgICAgfSwgMWUzKTtcbiAgICAgICAgY2MuZGlyZWN0b3IuZ2V0Q29sbGlzaW9uTWFuYWdlcigpLmVuYWJsZWQgPSAhMDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNyZWF0ZU5ld1BsYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzLnBvb2xzWzRdLmdldENvbXBvbmVudCgkcG9vbC5kZWZhdWx0KS5nZXROZXdQb29sSXRlbSgpO1xuICAgICAgICB0aGlzLnBsYXllciA9IGU7XG4gICAgICAgIGUuc2V0UG9zaXRpb24obmV3IGNjLlZlYzIoMzYwLCB0aGlzLmJhc2VMaW5lWSkpO1xuICAgICAgICBlLmdldENvbXBvbmVudCgkcm9sZTIuZGVmYXVsdCkuaW5pdCh7XG4gICAgICAgICAgICB0ZWFtOiAwLFxuICAgICAgICAgICAgcklkOiAxLFxuICAgICAgICAgICAgcGFyOiB0aGlzXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuY3JlYXRlTmV3RW5lbXkgPSBmdW5jdGlvbiAoZSwgdCwgbykge1xuICAgICAgICBpZiAodm9pZCAwID09PSBvKSB7XG4gICAgICAgICAgICBvID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSB0aGlzLnBvb2xzWzBdLmdldENvbXBvbmVudCgkcG9vbC5kZWZhdWx0KS5nZXROZXdQb29sSXRlbSgpO1xuICAgICAgICBhLnNldFBvc2l0aW9uKG5ldyBjYy5WZWMyKGUsIHQpKTtcbiAgICAgICAgYS5nZXRDb21wb25lbnQoJHJvbGUyLmRlZmF1bHQpLmluaXQoe1xuICAgICAgICAgICAgdGVhbTogMSxcbiAgICAgICAgICAgIHJJZDogby5ySWQsXG4gICAgICAgICAgICBjb25maWc6IG8uY29uZmlnLFxuICAgICAgICAgICAgcGFyOiB0aGlzXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNyZWF0ZU5ld0J1bGxldCA9IGZ1bmN0aW9uIChlLCB0LCBvKSB7XG4gICAgICAgIHZhciBhID0gdGhpcy5wb29sc1syXS5nZXRDb21wb25lbnQoJHBvb2wuZGVmYXVsdCkuZ2V0TmV3UG9vbEl0ZW0oKTtcbiAgICAgICAgby5wYXIgPSB0aGlzO1xuICAgICAgICBhLmdldENvbXBvbmVudCgkYnVsbGV0Mi5kZWZhdWx0KS5pbml0KGUsIHQsIG8pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuY3JlYXRlTmV3SHBOdW0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXMucG9vbHNbMV0uZ2V0Q29tcG9uZW50KCRwb29sLmRlZmF1bHQpLmdldE5ld1Bvb2xJdGVtKCk7XG4gICAgICAgIHQuZ2V0Q29tcG9uZW50KCRudW0yLmRlZmF1bHQpLmluaXRBc0hwKGUpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNyZWF0ZU5ld0hpdE51bSA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIHQucHJvdG90eXBlLmNyZWF0ZU5ld0RpZUVmZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5wb29sc1s1XS5nZXRDb21wb25lbnQoJHBvb2wuZGVmYXVsdCkuZ2V0TmV3UG9vbEl0ZW0oKTtcbiAgICAgICAgdC5zZXRQb3NpdGlvbihlLnBvc2l0aW9uKTtcbiAgICAgICAgdC5nZXRDb21wb25lbnQoJGRpZUVmZjIuZGVmYXVsdCkuaW5pdCgpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuY3JlYXRlTmV3R2F0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIGUgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdCA9IHRoaXMucG9vbHNbM10uZ2V0Q29tcG9uZW50KCRwb29sLmRlZmF1bHQpLmdldE5ld1Bvb2xJdGVtKCk7XG4gICAgICAgIHQueSA9IDgwMDtcbiAgICAgICAgdmFyIG8gPSBbXTtcbiAgICAgICAgZm9yICh2YXIgYSA9IDE7IGEgPD0gNTsgYSsrKSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gZVtcImRvb3JcIiArIGFdKSB7XG4gICAgICAgICAgICAgICAgby5wdXNoKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjID0gJHRvb2wuZGVmYXVsdC5yYW5kb21Gcm9tQXJyMihvLCAyKTtcbiAgICAgICAgJHRvb2wuZGVmYXVsdC5zaHVmZmxlKGMpO1xuICAgICAgICB2YXIgcyA9IFtcbiAgICAgICAgICAgIFtjWzBdLCBlW1wiZG9vclwiICsgY1swXV1dLFxuICAgICAgICAgICAgW2NbMV0sIGVbXCJkb29yXCIgKyBjWzFdXV1cbiAgICAgICAgXTtcbiAgICAgICAgdC5nZXRDb21wb25lbnQoJGdhdGUyLmRlZmF1bHQpLmluaXQoe1xuICAgICAgICAgICAgcGFyOiB0aGlzLFxuICAgICAgICAgICAgZ2F0ZUluZm86IHNcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5iZUhpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaXRBbmkucGxheSgpO1xuICAgICAgICB0aGlzLmhwWzBdLS07XG4gICAgICAgIHRoaXMuaHBQcm9nQmFyLnByb2dyZXNzID0gdGhpcy5ocFswXSAvIHRoaXMuaHBbMV07XG4gICAgICAgIGlmICh0aGlzLmhwWzBdIDw9IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2FtZSBvdmVyLlwiKTtcbiAgICAgICAgICAgIGNjLnBvcHVwTWFuYWdlci5wb3B1cChcbiAgICAgICAgICAgICAgICBcImdhbWUyXCIsXG4gICAgICAgICAgICAgICAgXCJ3aW5cIixcbiAgICAgICAgICAgICAgICBcIlVJR2FtZTJFbmRcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFkOiAhMSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6ICEwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAhMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAwO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5yZWZyZXNoQXRrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmF0a1N0ci5zdHJpbmcgPSBcIlwiICsgdGhpcy5wbGF5ZXIuZ2V0Q29tcG9uZW50KCRyb2xlMi5kZWZhdWx0KS5idWxsZXRDb25maWcuZG1nO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuc2hvd1BhdXNlTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDA7XG4gICAgICAgIGNjLnBvcHVwTWFuYWdlci5wb3B1cChcbiAgICAgICAgICAgIFwiZ2FtZTJcIixcbiAgICAgICAgICAgIFwic2V0XCIsXG4gICAgICAgICAgICBcIlVJR2FtZTJTZXRcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogITFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5oaWRlUGF1c2VNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMTA7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoMTAgPT09IHRoaXMuc3RhdGUgJiYgdGhpcy53aW5UQ291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLndpblRDb3VudCAtPSBlO1xuICAgICAgICAgICAgaWYgKHRoaXMud2luVENvdW50IDw9IDApIHtcbiAgICAgICAgICAgICAgICBjYy5wb3B1cE1hbmFnZXIucG9wdXAoXG4gICAgICAgICAgICAgICAgICAgIFwiZ2FtZTJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ3aW5cIixcbiAgICAgICAgICAgICAgICAgICAgXCJVSUdhbWUyRW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkOiAhMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAhMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAhMFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQuSlNPTk1hbmFnZXIgPSB7XG4gICAgICAgIENvbmZpZ0JhdHRsZToge31cbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW2goY2MuSnNvbkFzc2V0KV0sIHQucHJvdG90eXBlLCBcImpzb25Bc3NldHNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLk5vZGUpXSwgdC5wcm90b3R5cGUsIFwicG9vbHNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLk5vZGUpXSwgdC5wcm90b3R5cGUsIFwic3RhcnROb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbaChjYy5Ob2RlKV0sIHQucHJvdG90eXBlLCBcImVuZE5vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLlByb2dyZXNzQmFyKV0sIHQucHJvdG90eXBlLCBcImhwUHJvZ0JhclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2goY2MuQW5pbWF0aW9uKV0sIHQucHJvdG90eXBlLCBcImhpdEFuaVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2goY2MuTGFiZWwpXSwgdC5wcm90b3R5cGUsIFwiYXRrU3RyXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIChvID0gX19kZWNvcmF0ZShbZF0sIHQpKTtcbn0pKGNjLkNvbXBvbmVudCk7XG5leHBvcnRzLmRlZmF1bHQgPSBmOyJdfQ==